if (self.CavalryLogger) { CavalryLogger.start_js(["1\/00q"]); }

__d("FundsAvailability",[],(function(a,b,c,d,e,f){e.exports={NONE:0,FUNDS_AVAILABILITY_NA:65,FUNDS_AVAILABILITY_IMMEDIATE:73,FUNDS_AVAILABILITY_SAME_DAY:83,FUNDS_AVAILABILITY_NEXT_DAY:78,FUNDS_AVAILABILITY_FIVE_DAY:70,FUNDS_AVAILABILITY_UNKNOWN:85,FUNDS_AVAILABILITY_ONE_THREE_DAY:79,FUNDS_AVAILABILITY_CROSS_BORDER:66,FUNDS_AVAILABILITY_CROSS_BORDER_FAST_FUNDS:67,FUNDS_AVAILABILITY_DOMESTIC:68,FUNDS_AVAILABILITY_DOMESTIC_FAST_FUNDS:69}}),null);
__d("IrisProtocolMessageLifetime",[],(function(a,b,c,d,e,f){e.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:3e4,TTL_1MINUTE:6e4,TTL_3MINUTES:18e4,TTL_5MINUTES:3e5,TTL_10MINUTES:6e5,TTL_15MINUTES:9e5,TTL_30MINUTES:18e5,TTL_1HOUR:36e5,TTL_2HOURS:72e5,TTL_4HOURS:144e5,TTL_8HOURS:288e5,TTL_12HOURS:432e5,TTL_24HOURS:864e5}}),null);
__d("MercuryAPIArgsSource",[],(function(a,b,c,d,e,f){e.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"}}),null);
__d("MercuryAudioType",[],(function(a,b,c,d,e,f){e.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"}}),null);
__d("MessageLiveLocationClientSyncProtocolStopReason",[],(function(a,b,c,d,e,f){e.exports={EXPIRED:1,CANCELED:2,ARRIVED:3}}),null);
__d("PageCommItemStatus",[],(function(a,b,c,d,e,f){e.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM",DELETED:"DELETED"}}),null);
__d("HovercardLink",["URI"],(function(a,b,c,d,e,f){__p&&__p();var g={getBaseURI:function(){return new(b("URI"))("/ajax/hovercard/hovercard.php")},constructEndpoint:function(a,b){return g.constructEndpointWithGroupAndLocation(a,b,null)},constructEndpointWithLocation:function(a,b){return g.constructEndpointWithGroupAndLocation(a,null,b)},constructEndpointWithGroupAndLocation:function(a,b,c,d){return g.constructEndpointWithGroupLocationAndExtraParams(a,b,c,d)},constructEndpointWithGroupLocationAndExtraParams:function(a,c,d,e,f){__p&&__p();f===void 0&&(f=null);var h=new(b("URI"))(g.getBaseURI()).setQueryData({id:a.id}),i={};if(f!==null)for(var j in f)i[j]=f[j];(a.weakreference||e)&&c&&(i.group_id=c);d&&(i.hc_location=d);c&&(i.directed_target_id=c);h.addQueryData({extragetparams:JSON.stringify(i)});return h}};e.exports=g}),null);
__d("TooltipMixinClass.react",["DOM","React","ReactDOM","TooltipData"],(function(a,b,c,d,e,f){__p&&__p();function g(a){a=a.tooltip;return a!=null&&b("React").isValidElement(a)}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={tooltipContainer:g(d.props)?b("DOM").create("div"):null},c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,c){a=g(a);c=c.tooltipContainer;if(c&&!a)return{tooltipContainer:null};else if(!c&&a)return{tooltipContainer:b("DOM").create("div")};return null};var d=c.prototype;d.componentDidMount=function(){this.$1()};d.componentDidUpdate=function(a,b){b.tooltipContainer&&!this.state.tooltipContainer&&this.$2(b.tooltipContainer),this.$1()};d.$1=function(){var a=this.state.tooltipContainer,c=this.props.tooltip;if(c!=null&&b("React").isValidElement(c)&&a!=null){var d=function(){return c};b("ReactDOM").render(b("React").createElement(d,null),a)}else a=this.props.tooltip;a!=null?b("TooltipData").set(b("ReactDOM").findDOMNode(this),a,this.props.position,this.props.alignH):b("TooltipData").remove(b("ReactDOM").findDOMNode(this))};d.componentWillUnmount=function(){this.state.tooltipContainer&&this.$2(this.state.tooltipContainer),b("TooltipData").remove(b("ReactDOM").findDOMNode(this))};d.$2=function(a){b("ReactDOM").unmountComponentAtNode(a)};return c}(b("React").Component);e.exports=a}),null);
__d("TooltipLink.react",["React","TooltipMixinClass.react"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("a",this.props,this.props.children)};return c}(b("TooltipMixinClass.react"));e.exports=a}),null);
__d("FDSPrivateLayerFooter.react",["React","SUIHorizontalLayoutUniform.business","SUILayerFooter.react","SUILayerFooterUniform.fds","makeFDSStandardComponent","makeSUIFDSPrivateTheme"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PureComponent;var g=b("makeSUIFDSPrivateTheme")("FDSPrivateLayerFooter",{SUIHorizontalLayout:b("SUIHorizontalLayoutUniform.business"),SUILayerFooter:b("SUILayerFooterUniform.fds")});c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props;return b("React").createElement(b("SUILayerFooter.react"),{leftContent:a.leftContent,primaryButton:a.primaryButton,secondaryButton:a.secondaryButton,theme:g})};return c}(a);e.exports=b("makeFDSStandardComponent")("FDSPrivateLayerFooter",c)}),null);
__d("FDSModalFooter.react",["FDSPrivateLayerFooter.react"],(function(a,b,c,d,e,f){"use strict";e.exports=b("FDSPrivateLayerFooter.react")}),null);
__d("FDSPrivateLayerHeader.react",["FDSPrivateThemeContext.react","React","SUIErrorComponentUtil","SUILayerHeader.react","SUITextUniform.fds","getSUICloseButtonUniform.fds","getSUIErrorUniform.fds","getSUILayerHeaderUniform.fds","getSUILinkUniform.fds","makeSUIThemeGetter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("makeSUIThemeGetter")({SUICloseButton:b("getSUICloseButtonUniform.fds"),SUIError:b("getSUIErrorUniform.fds"),SUILayerHeader:b("getSUILayerHeaderUniform.fds"),SUILink:b("getSUILinkUniform.fds"),SUIText:function(){return b("SUITextUniform.fds")}});a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=g(this.context);c={errorMessage:a.errorMessage,errorTooltipPosition:a.errorTooltipPosition,hasCloseButton:a.hasCloseButton,subtitle:a.subtitle,theme:c,title:a.title,warningMessage:a.warningMessage};if(a["switch"])return b("React").createElement(b("SUILayerHeader.react"),babelHelpers["extends"]({},c,{"switch":a["switch"]}));if(a.button)return b("React").createElement(b("SUILayerHeader.react"),babelHelpers["extends"]({},c,{button:a.button}));return a.menu?b("React").createElement(b("SUILayerHeader.react"),babelHelpers["extends"]({},c,{menu:a.menu})):b("React").createElement(b("SUILayerHeader.react"),babelHelpers["extends"]({},c,{link:a.link?a.link:void 0}))};return c}(b("React").PureComponent);a.contextType=b("FDSPrivateThemeContext.react");a.defaultProps=b("SUIErrorComponentUtil").defaultProps;e.exports=a}),null);
__d("FDSModalHeader.react",["FDSPrivateLayerHeader.react","React","SUIErrorComponentUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("FDSPrivateLayerHeader.react"),babelHelpers["extends"]({},this.props,{hasCloseButton:!0}))};return c}(b("React").PureComponent);a.defaultProps=b("SUIErrorComponentUtil").defaultProps;e.exports=a}),null);
__d("DraftEffectsPerSite",["fbt","Bootloader"],(function(a,b,c,d,e,f,g){"use strict";a={handleExtensionCausedError:function(){b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){a.show(g._("An extension installed in your web browser is preventing text entry from working correctly. Please disable any extensions and reload the page."),g._("Text Editing Is Limited"),null,{width:600})},"DraftEffectsPerSite")}};e.exports=a}),null);
__d("MessengerObjectAssociationType",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({REGULAR_CHAT:null,GENERAL_CHAT:null})}),null);
__d("DraftJsEventsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:DraftJsEventsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAnonymizedDom=function(a){this.$1.anonymized_dom=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setExtraParams=function(a){this.$1.extra_params=a;return this};c.setScriptPath=function(a){this.$1.script_path=a;return this};c.setSelectionState=function(a){this.$1.selection_state=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={anonymized_dom:!0,event:!0,extra_params:!0,script_path:!0,selection_state:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MercurySyncHolesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setDifference=function(a){this.$1.difference=a;return this};c.setSeqID=function(a){this.$1.seq_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTopicType=function(a){this.$1.topic_type=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={difference:!0,seq_id:!0,time:!0,topic_type:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerWebDeltasTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebDeltasLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebDeltasLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebDeltasLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setDeltaEvent=function(a){this.$1.delta_event=a;return this};c.setDeltaType=function(a){this.$1.delta_type=a;return this};c.setIgnoreReason=function(a){this.$1.ignore_reason=a;return this};c.setSyncSeqID=function(a){this.$1.sync_seq_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={delta_event:!0,delta_type:!0,ignore_reason:!0,sync_seq_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerDesktopNotificationPermissions",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",DENIED:"denied",GRANTED:"granted"});e.exports=a}),null);
__d("MessengerDesktopNotifications",["MessengerDesktopNotificationPermissions","Run","UserAgent","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=5e3,h=new Map();function a(){h.forEach(function(a,b,c){a.close&&a.close()})}c={_closeTimer:null,isSupported:function(){return!!window.Notification},checkPermission:function(){if(window.Notification)return window.Notification.permission},hasDefaultSound:function(){return b("UserAgent").isBrowser("FireFox")&&b("UserAgent").isPlatform("Mac OS X")},isDenied:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED},isGranted:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").GRANTED},requestPermission:function(a){window.Notification&&window.Notification.requestPermission(a)},showNotification:function(a){__p&&__p();if(this.isGranted()){var c=window.Notification?new window.Notification(a.title,{body:a.body,icon:a.icon,tag:a.tag,silent:a.silent}):{};h.set(a.tag,c);a.onShow&&a.onShow();c.onclick=function(){b("WorkplaceChatHelper").isDesktopChatApp()&&b("WorkplaceChatHelper").showWindow(),a.onClick()};c.onclose=function(){h["delete"](a.tag)};this._closeTimer=setTimeout(function(){c.close()},a.closeTime||g);return c}else return null},removeNotification:function(a){a=h.get(a);a&&a.close()}};b("Run").onUnload(a);e.exports=c}),null);
__d("MessengerSharedMediaActionsLoader",["JSResource"],(function(a,b,c,d,e,f){"use strict";a={deletePhotos:function(a,c){b("JSResource").loadAll([b("JSResource")("MessengerSharedMediaActions").__setRef("MessengerSharedMediaActionsLoader")],function(b){b.deletePhotos(a,c)})}};e.exports=a}),null);
__d("bs_caml_builtin_exceptions",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=["Out_of_memory",0];b=["Sys_error",-1];c=["Failure",-2];d=["Invalid_argument",-3];e=["End_of_file",-4];var g=["Division_by_zero",-5],h=["Not_found",-6],i=["Match_failure",-7],j=["Stack_overflow",-8],k=["Sys_blocked_io",-9],l=["Assert_failure",-10],m=["Undefined_recursive_module",-11];a.tag=248;b.tag=248;c.tag=248;d.tag=248;e.tag=248;g.tag=248;h.tag=248;i.tag=248;j.tag=248;k.tag=248;l.tag=248;m.tag=248;f.out_of_memory=a;f.sys_error=b;f.failure=c;f.invalid_argument=d;f.end_of_file=e;f.division_by_zero=g;f.not_found=h;f.match_failure=i;f.stack_overflow=j;f.sys_blocked_io=k;f.assert_failure=l;f.undefined_recursive_module=m}),null);
__d("bs_caml_array",["bs_caml_builtin_exceptions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(b,c,a){var d=new Array(a),e=0;c=c;while(e<a)d[e]=b[c],e=e+1|0,c=c+1|0;return d}function g(a,b){while(!0){var c=b,d=a;if(c){b=c[1];a=c[0].length+d|0;continue}else return d}}function h(a,b,c){__p&&__p();while(!0){var d=c,e=b;if(d){var f=d[0],g=f.length;e=e;var h=0;while(h<g)a[e]=f[h],e=e+1|0,h=h+1|0;c=d[1];b=e;continue}else return 0}}function c(a){var b=g(0,a);b=new Array(b);h(b,0,a);return b}function d(a,c,d){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else{a[c]=d;return 0}}function e(a,c){if(c<0||c>=a.length)throw[b("bs_caml_builtin_exceptions").invalid_argument,"index out of bounds"];else return a[c]}function i(a,b){var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b;return c}function j(a){var b=new Array(a);for(var c=0,a=a-1|0;c<=a;++c)b[c]=0;return b}function k(b,c,d,e,a){if(e<=c){for(var f=0,h=a-1|0;f<=h;++f)d[f+e|0]=b[f+c|0];return 0}else{for(var f=a-1|0;f>=0;--f)d[f+e|0]=b[f+c|0];return 0}}function l(a){return a.slice(0)}f.caml_array_dup=l;f.caml_array_sub=a;f.caml_array_concat=c;f.caml_make_vect=i;f.caml_make_float_vect=j;f.caml_array_blit=k;f.caml_array_get=e;f.caml_array_set=d}),null);
__d("bs_curry",["bs_caml_array"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){__p&&__p();while(!0){var d=c,e=a,f=e.length;f=f===0?1:f;var h=d.length;h=f-h|0;if(h===0)return e.apply(null,d);else if(h<0){c=b("bs_caml_array").caml_array_sub(d,f,-h|0);a=e.apply(null,b("bs_caml_array").caml_array_sub(d,0,f));continue}else return function(b,a){return function(c){return g(b,a.concat([c]))}}(e,d)}}function h(a,b,c){__p&&__p();if(c>7||c<0)return g(a,[b]);else switch(c){case 0:case 1:return a(b);case 2:return function(c){return a(b,c)};case 3:return function(c,d){return a(b,c,d)};case 4:return function(c,d,e){return a(b,c,d,e)};case 5:return function(c,d,e,f){return a(b,c,d,e,f)};case 6:return function(c,d,e,f,g){return a(b,c,d,e,f,g)};case 7:return function(c,d,e,f,g,h){return a(b,c,d,e,f,g,h)}}}function i(a,b){var c=a.length;if(c===1)return a(b);else return h(a,b,c)}function a(a){var b=a.length;if(b===1)return a;else return function(b){return i(a,b)}}function j(a,b,c,d){__p&&__p();if(d>7||d<0)return g(a,[b,c]);else switch(d){case 0:case 1:return g(a(b),[c]);case 2:return a(b,c);case 3:return function(d){return a(b,c,d)};case 4:return function(d,e){return a(b,c,d,e)};case 5:return function(d,e,f){return a(b,c,d,e,f)};case 6:return function(d,e,f,g){return a(b,c,d,e,f,g)};case 7:return function(d,e,f,g,h){return a(b,c,d,e,f,g,h)}}}function k(a,b,c){var d=a.length;if(d===2)return a(b,c);else return j(a,b,c,d)}function c(a){var b=a.length;if(b===2)return a;else return function(b,c){return k(a,b,c)}}function l(a,b,c,d,e){__p&&__p();var f=0;if(e>7||e<0)return g(a,[b,c,d]);else switch(e){case 0:case 1:f=1;break;case 2:return g(a(b,c),[d]);case 3:return a(b,c,d);case 4:return function(e){return a(b,c,d,e)};case 5:return function(e,f){return a(b,c,d,e,f)};case 6:return function(e,f,g){return a(b,c,d,e,f,g)};case 7:return function(e,f,g,h){return a(b,c,d,e,f,g,h)}}if(f===1)return g(a(b),[c,d])}function m(a,b,c,d){var e=a.length;if(e===3)return a(b,c,d);else return l(a,b,c,d,e)}function d(a){var b=a.length;if(b===3)return a;else return function(b,c,d){return m(a,b,c,d)}}function n(a,b,c,d,e,f){__p&&__p();var h=0;if(f>7||f<0)return g(a,[b,c,d,e]);else switch(f){case 0:case 1:h=1;break;case 2:return g(a(b,c),[d,e]);case 3:return g(a(b,c,d),[e]);case 4:return a(b,c,d,e);case 5:return function(f){return a(b,c,d,e,f)};case 6:return function(f,g){return a(b,c,d,e,f,g)};case 7:return function(f,g,h){return a(b,c,d,e,f,g,h)}}if(h===1)return g(a(b),[c,d,e])}function o(a,b,c,d,e){var f=a.length;if(f===4)return a(b,c,d,e);else return n(a,b,c,d,e,f)}function e(a){var b=a.length;if(b===4)return a;else return function(b,c,d,e){return o(a,b,c,d,e)}}function p(a,b,c,d,e,f,h){__p&&__p();var i=0;if(h>7||h<0)return g(a,[b,c,d,e,f]);else switch(h){case 0:case 1:i=1;break;case 2:return g(a(b,c),[d,e,f]);case 3:return g(a(b,c,d),[e,f]);case 4:return g(a(b,c,d,e),[f]);case 5:return a(b,c,d,e,f);case 6:return function(g){return a(b,c,d,e,f,g)};case 7:return function(g,h){return a(b,c,d,e,f,g,h)}}if(i===1)return g(a(b),[c,d,e,f])}function q(a,b,c,d,e,f){var g=a.length;if(g===5)return a(b,c,d,e,f);else return p(a,b,c,d,e,f,g)}function r(a){var b=a.length;if(b===5)return a;else return function(b,c,d,e,f){return q(a,b,c,d,e,f)}}function s(a,b,c,d,e,f,h,i){__p&&__p();var j=0;if(i>7||i<0)return g(a,[b,c,d,e,f,h]);else switch(i){case 0:case 1:j=1;break;case 2:return g(a(b,c),[d,e,f,h]);case 3:return g(a(b,c,d),[e,f,h]);case 4:return g(a(b,c,d,e),[f,h]);case 5:return g(a(b,c,d,e,f),[h]);case 6:return a(b,c,d,e,f,h);case 7:return function(g){return a(b,c,d,e,f,h,g)}}if(j===1)return g(a(b),[c,d,e,f,h])}function t(a,b,c,d,e,f,g){var h=a.length;if(h===6)return a(b,c,d,e,f,g);else return s(a,b,c,d,e,f,g,h)}function u(a){var b=a.length;if(b===6)return a;else return function(b,c,d,e,f,g){return t(a,b,c,d,e,f,g)}}function v(a,b,c,d,e,f,h,i,j){__p&&__p();var k=0;if(j>7||j<0)return g(a,[b,c,d,e,f,h,i]);else switch(j){case 0:case 1:k=1;break;case 2:return g(a(b,c),[d,e,f,h,i]);case 3:return g(a(b,c,d),[e,f,h,i]);case 4:return g(a(b,c,d,e),[f,h,i]);case 5:return g(a(b,c,d,e,f),[h,i]);case 6:return g(a(b,c,d,e,f,h),[i]);case 7:return a(b,c,d,e,f,h,i)}if(k===1)return g(a(b),[c,d,e,f,h,i])}function w(a,b,c,d,e,f,g,h){var i=a.length;if(i===7)return a(b,c,d,e,f,g,h);else return v(a,b,c,d,e,f,g,h,i)}function x(a){var b=a.length;if(b===7)return a;else return function(b,c,d,e,f,g,h){return w(a,b,c,d,e,f,g,h)}}function y(a,b,c,d,e,f,h,i,j,k){__p&&__p();var l=0;if(k>7||k<0)return g(a,[b,c,d,e,f,h,i,j]);else switch(k){case 0:case 1:l=1;break;case 2:return g(a(b,c),[d,e,f,h,i,j]);case 3:return g(a(b,c,d),[e,f,h,i,j]);case 4:return g(a(b,c,d,e),[f,h,i,j]);case 5:return g(a(b,c,d,e,f),[h,i,j]);case 6:return g(a(b,c,d,e,f,h),[i,j]);case 7:return g(a(b,c,d,e,f,h,i),[j])}if(l===1)return g(a(b),[c,d,e,f,h,i,j])}function z(a,b,c,d,e,f,g,h,i){var j=a.length;if(j===8)return a(b,c,d,e,f,g,h,i);else return y(a,b,c,d,e,f,g,h,i,j)}function A(a){var b=a.length;if(b===8)return a;else return function(b,c,d,e,f,g,h,i){return z(a,b,c,d,e,f,g,h,i)}}f.app=g;f.curry_1=h;f._1=i;f.__1=a;f.curry_2=j;f._2=k;f.__2=c;f.curry_3=l;f._3=m;f.__3=d;f.curry_4=n;f._4=o;f.__4=e;f.curry_5=p;f._5=q;f.__5=r;f.curry_6=s;f._6=t;f.__6=u;f.curry_7=v;f._7=w;f.__7=x;f.curry_8=y;f._8=z;f.__8=A}),null);
__d("Bootload.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=function(c){return b("bs_curry")._1(a[0],function(a){return b("bs_curry")._1(c,a.bootloadable)})};return[c]}f.Create=a}),null);
__d("EmojiFormat.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.split("_").map(function(a){return parseInt(a,16)})}function a(a){return a.map(function(a){return a.toString(16)}).join("_")}function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function b(a){return h(g(a))}f.codeStringToCodeArray=g;f.codeArrayToCodeString=a;f.codeArrayToUnicode=h;f.codeStringToUnicode=b}),null);
__d("MercuryFilters.bs",["MessagingTag"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessagingTag").UNREAD;d=b("MessagingTag").GROUPS;function a(){return[g]}function c(a){return a===g}e="all";f.all=e;f.unread=g;f.groups=d;f.getSupportedFilters=a;f.isSupportedFilter=c}),null);
__d("MercuryMessageIDs.bs",["bs_curry","KeyedCallbackManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("KeyedCallbackManager"))();function a(a,c){var d=a.filter(function(a){return a.indexOf("id")===-1}),e=function(d){return b("bs_curry")._1(c,a.map(function(a){var b=d[a];if(b!==void 0)return b;else return a}))};return g.executeOrEnqueue(d,e)}function c(a,b){g.setResource(a,b);return 0}f.getServerIDs=a;f.addServerID=c}),null);
__d("MercuryAssert",["MercuryIDs"],(function(a,b,c,d,e,f){__p&&__p();e.exports={isParticipantID:function(a){if(a==null)throw new Error("participant_id null/undefined");if(!b("MercuryIDs").isValid(a))throw new Error("bad_participant_id "+a)},allParticipantIDs:function(a){a.forEach(this.isParticipantID)},isUserParticipantID:function(a){var c=b("MercuryIDs").tokenize(a);if(a==null)throw new Error("participant_id null/undefined");if(c.type!="fbid")throw new Error("bad_user_id "+a)},isEmailParticipantID:function(a){var c=b("MercuryIDs").tokenize(a);if(a==null)throw new Error("participant_id null/undefined");if(c.type!="email")throw new Error("bad_email_id "+a)},allThreadID:function(a){a.forEach(this.isThreadID)},isThreadID:function(a){if(a==null)throw new Error("participant_id null/undefined");if(!b("MercuryIDs").isValid(a))throw new Error("bad_thread_id "+a)}}}),null);
__d("bs_js_primitive",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[];function h(a){__p&&__p();if(a===void 0){var b=[g,0];b.tag=256;return b}else if(a!==null&&a[0]===g){b=a[1]+1|0;b=[g,b];b.tag=256;return b}else return a}function a(a){if(a===null||a===void 0)return void 0;else return h(a)}function b(a){if(a===void 0)return void 0;else return h(a)}function c(a){if(a===null)return void 0;else return h(a)}function i(a){if(a!==null&&a[0]===g){var b=a[1];if(b===0)return void 0;else return[g,b-1|0]}else return a}function d(a){if(a===void 0)return void 0;else return i(a)}function e(a){if(a===void 0)return void 0;else return i(a)[1]}f.nullable_to_opt=a;f.undefined_to_opt=b;f.null_to_opt=c;f.valFromOption=i;f.some=h;f.option_get=d;f.option_get_unwrap=e}),null);
__d("bs_js_null_undefined",["bs_js_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){if(a==null)return a;else return b(a)}function c(a,b){if(a==null)return 0;else return b(a)}function d(a){if(a!==void 0)return b("bs_js_primitive").valFromOption(a)}e=d;f.bind=a;f.iter=c;f.fromOption=d;f.from_opt=e}),null);
__d("MercuryVanityIDMap.bs",["bs_string","bs_js_primitive","MercuryAssert","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h={};function a(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(g[b("bs_string").lowercase(a)]))}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(h[a]))}function d(a){a=h[a];return a!==void 0}function e(a){a=g[b("bs_string").lowercase(a)];return a!==void 0}function i(a,c){b("MercuryAssert").isParticipantID(c);a=b("bs_string").lowercase(a);g[a]=c;h[c]=a;return 0}f.vanityToID=g;f.idToVanity=h;f.getID=a;f.getVanity=c;f.hasID=d;f.hasVanity=e;f.set=i}),null);
__d("MessageSharedMediaIDStore.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a,b){g[a]=b;return 0}function b(a){a=g[a];if(a!==void 0)return a;else return null}f._store=g;f.setMessageIDForAttachmentID=a;f.getMessageIDForAttachmentID=b}),null);
__d("MessageThreadUnsendabilityStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CAN_UNSEND:"can_unsend",DENY_FOR_SPECIFIC_IDS:"deny_for_specific_ids",DENY_IF_THREAD_CONTAINS_PAU:"deny_if_thread_contains_pau",DENY_IF_THREAD_CONTAINS_WORK_USER:"deny_if_thread_contains_work_user",DENY_IF_THREAD_CONTAINS_WORK_USER_FAILING_KILLSWITCH:"deny_if_thread_contains_work_user_failing_killswitch",DENY_IF_PAGE_THREAD:"deny_if_page_thread",DENY_IF_MARKETPLACE_THREAD:"deny_if_marketplace_thread",DENY_IF_CANNOT_LOAD_THREAD:"deny_if_cannot_load_thread",DENY_IF_CANONICAL_THREAD_CONTAINS_BLOCKED_USERS:"deny_if_canonical_thread_contains_blocked_users"})}),null);
__d("MessageThreadUnsendabilityStatus.bs",["MessageThreadUnsendabilityStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"can_unsend":return b("MessageThreadUnsendabilityStatus").CAN_UNSEND;case"deny_for_specific_ids":return b("MessageThreadUnsendabilityStatus").DENY_FOR_SPECIFIC_IDS;case"deny_if_cannot_load_thread":return b("MessageThreadUnsendabilityStatus").DENY_IF_CANNOT_LOAD_THREAD;case"deny_if_marketplace_thread":return b("MessageThreadUnsendabilityStatus").DENY_IF_MARKETPLACE_THREAD;case"deny_if_page_thread":return b("MessageThreadUnsendabilityStatus").DENY_IF_PAGE_THREAD;case"deny_if_thread_contains_pau":return b("MessageThreadUnsendabilityStatus").DENY_IF_THREAD_CONTAINS_PAU;default:return null}}f.fromNullableString=a}),null);
__d("MessageUnsendabilityStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CAN_UNSEND:"can_unsend",DENY_LOG_MESSAGE:"deny_log_message",DENY_TOMBSTONE_MESSAGE:"deny_tombstone_message",DENY_FOR_NON_SENDER:"deny_for_non_sender",DENY_P2P_PAYMENT:"deny_p2p_payment",DENY_STORY_REACTION:"deny_story_reaction",DENY_BLOB_ATTACHMENT:"deny_blob_attachment",DENY_MESSAGE_NOT_FOUND:"deny_message_not_found"})}),null);
__d("MessageUnsendabilityStatus.bs",["MessageUnsendabilityStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"can_unsend":return b("MessageUnsendabilityStatus").CAN_UNSEND;case"deny_blob_attachment":return b("MessageUnsendabilityStatus").DENY_BLOB_ATTACHMENT;case"deny_for_non_sender":return b("MessageUnsendabilityStatus").DENY_FOR_NON_SENDER;case"deny_log_message":return b("MessageUnsendabilityStatus").DENY_LOG_MESSAGE;case"deny_p2p_payment":return b("MessageUnsendabilityStatus").DENY_P2P_PAYMENT;case"deny_story_reaction":return b("MessageUnsendabilityStatus").DENY_STORY_REACTION;case"deny_tombstone_message":return b("MessageUnsendabilityStatus").DENY_TOMBSTONE_MESSAGE;default:return null}}f.fromNullableString=a}),null);
__d("MercuryAttachmentContentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO:"attach:image",VIDEO:"attach:video",MUSIC:"attach:music",VOICE:"attach:voice",TEXT:"attach:text",PDF:"attach:pdf",RICHTEXT:"attach:richtext",SPREADSHEET:"attach:spreadsheet",PRESENTATION:"attach:presentation",ARCHIVE:"attach:archive",MSWORD:"attach:ms:word",MSXLS:"attach:ms:xls",MSPPT:"attach:ms:ppt",ORION:"attach:orion",SHOERACK_INVITATION:"attach:shoerackinvite",UNKNOWN:"attach:unknown"})}),null);
__d("MercuryAttachmentType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUDIO:"audio",ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image",EMOJI_LIKE:"emoji_like",GIFT:"gift",THIRDPARTYSTICKER:"third_party_sticker"})}),null);
__d("LeadGenInfoFieldTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CUSTOM:"CUSTOM",CITY:"CITY",COMPANY_NAME:"COMPANY_NAME",COUNTRY:"COUNTRY",DOB:"DOB",EMAIL:"EMAIL",GENDER:"GENDER",FIRST_NAME:"FIRST_NAME",FULL_NAME:"FULL_NAME",JOB_TITLE:"JOB_TITLE",LAST_NAME:"LAST_NAME",MARITIAL_STATUS:"MARITIAL_STATUS",PHONE:"PHONE",POST_CODE:"POST_CODE",PROVINCE:"PROVINCE",RELATIONSHIP_STATUS:"RELATIONSHIP_STATUS",STATE:"STATE",STREET_ADDRESS:"STREET_ADDRESS",ZIP:"ZIP",WORK_EMAIL:"WORK_EMAIL",MILITARY_STATUS:"MILITARY_STATUS",WORK_PHONE_NUMBER:"WORK_PHONE_NUMBER",STORE_LOOKUP:"STORE_LOOKUP",STORE_LOOKUP_WITH_TYPEAHEAD:"STORE_LOOKUP_WITH_TYPEAHEAD",DATE_TIME:"DATE_TIME",ID_CPF:"ID_CPF",ID_AR_DNI:"ID_AR_DNI",ID_CL_RUT:"ID_CL_RUT",ID_CO_CC:"ID_CO_CC",ID_EC_CI:"ID_EC_CI",ID_PE_DNI:"ID_PE_DNI",ID_MX_RFC:"ID_MX_RFC"})}),null);
__d("MNCommerceBubbleType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FB_RETAIL_RECEIPT:1,FB_RETAIL_CANCELLATION:2,FB_RETAIL_SHIPMENT:3,FB_RETAIL_SHIPMENT_TRACKING_EVENT_ETA:4,FB_RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:5,FB_RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:6,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:7,FB_RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:8,FB_RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:9,FB_RETAIL_SHIPMENT_ETA:10,FB_RETAIL_NOW_IN_STOCK:11,FB_RETAIL_AGENT_ITEM_SUGGESTION:12,FB_RETAIL_AGENT_ITEM_RECEIPT:13,FB_RETAIL_PROMOTIONAL_MSG:14})}),null);
__d("MNCommerceCallToActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN_NATIVE:1,OPEN_URL:2,POSTBACK:4,ACCOUNT_LINK:5,SHARE:7,PAYMENT:8,FACEBOOK_REPORT_A_PROBLEM:9,NAVIGATION:11,EXTENSIBLE_SHARE:12,OPEN_PAGE_ABOUT:14,OPEN_BRANDED_CAMERA:15,OPEN_THREAD:16,OPEN_MARKETPLACE_PROFILE_REPORT:17,OPEN_DIRECT_SEND_VIEW:18,BOOKING:19,BOOKING_ADD_TO_CALENDAR:20,SUBSCRIPTION_PRESELECT:10,OPEN_REACT_NATIVE_MINI_APP:13,OPEN_CANCEL_RIDE_MUTATION:3,MANAGE_MESSAGES:6})}),null);
__d("P2PTransferStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18,CANCELED_SENDER_CANCEL:19,PENDING_SENDER_IDV_REVIEW:20,PENDING_RECEIVER_IDV_REVIEW:21})}),null);
__d("PaymentModulesClient",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DONATION_P4P:"donation_p4p",MOR_DONATIONS:"mor_donations",INSTANT_EXPERIENCES:"instant_experiences",BUSINESS_PLATFORM_COMMERCE:"business_platform_commerce",MESSENGER_OMNIM:"messenger_omnim",MESSENGER_PLATFORM:"messenger_platform",PAGES_COMMERCE:"pages_commerce",MESSAGING_COMMERCE:"messaging_commerce",SHIPPING_LABEL:"shipping_label",SYNCHRONOUS_COMPONENT_FLOW:"synchronous_component_flow",PAGES_SOLUTION:"pages_solution",CHECKOUT_EXPERIENCES:"checkout_experiences",C2C_CHECKOUT_EXPERIENCES:"c2c_checkout_experiences",MOBILE_TOP_UP:"mobile_top_up",MOCK:"mock",ADVERTISER_SUBSCRIPTION:"advertiser_subscription",NMOR_FB_BROWSER_PAY:"fb_browser_payment"})}),null);
__d("ServicesCalendarSyncType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLIENT_ONLY:"client_only",NO_CALENDAR_SYNC:"no_calendar_sync",SERVER_CONTINUOUS:"server_continuous",SERVER_SINGLE:"server_single"})}),null);
__d("MessengerStoryAttachmentTransformer.bs",["fbt","URI","bs_array","bs_string","bs_caml_array","bs_belt_Option","bs_caml_format","CurrentUser","bs_js_primitive","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){return b("bs_array").map(function(a){var c=a.user_confirmation;c=c==null?[null,null,null,null,!1]:[c.cancel_button_label,c.continue_button_label,c.confirmation_message,c.confirmation_title,!0];var d=a.payment_metadata;return{action_link:a.action_link,action_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceCallToActionType")[a.action_open_type])),action_objects:a.action_objects,title:a.title,confirmation_cancel_label:c[0],confirmation_continue_label:c[1],confirmation_message:c[2],confirmation_title:c[3],id:a.id,is_disabled:a.is_disabled,is_mutable_by_server:a.is_mutable_by_server,logging_token:a.logging_token,payment_metadata:d==null?{payment_module_config:null,total_price:null}:{payment_module_config:d.payment_module_config,total_price:d.total_price},render_style:a.render_style,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button},should_show_user_confirmation:c[4],page_id:a.page_id}},a)}function i(a){return b("bs_array").map(function(a){var c=a.url;c=c==null?null:new(b("URI"))(c).getUnqualifiedURI().toString();return{title:a.title,uri:c}},a)}function a(a){if(!(a==null)&&a!=="")return"#"+b("bs_string").sub(a,2,a.length-2|0);else return null}function c(a){if(a==null)return null;else return{url:a.uri,src:a.uri,width:a.width,height:a.height}}function j(a,b){__p&&__p();var c=b.cover_photo,d;if(c==null)d=[null,null,null];else{var e=c.photo.image;e=e==null?[null,null]:[e.uri,{height:e.height,width:e.width}];d=[c.photo.id,e[0],e[1]]}c=b.location;e=c==null?[null,null]:[c.latitude,c.longitude];c=b.overall_star_rating;return{address:b.address.single_line_full_address,category:b.top_category_name,coverPhotoID:d[0],coverPhotoURL:d[1],coverPhotoDimensions:d[2],latitude:e[0],longitude:e[1],name:b.name,rating:c==null?null:c.value,pageID:b.id,priceRange:b.price_range_description,viewerID:a}}function k(a){var b=a.group_commerce_item_seller,c=a.primary_photo,d;if(c==null)d=null;else{c=c.image;d=c==null?null:c.uri}return{caption:a.group_commerce_item_description.text,desc:a.group_commerce_item_description.text,owner_id:b==null?null:b.id,price:a.formatted_price.text,text:a.group_commerce_item_description.text,title:a.group_commerce_item_title,thumb_url:d,url:a.url}}function l(a){return{app_name:a.application_name,artists:a.artist_names,audio_url:a.audio_url,duration_ms:a.duration_ms,title:a.music_title}}function m(a){var c=a.payment;return{id:a.id,desc:a.desc,display_total_cost:a.total_cost,merchant_name:a.merchant_name,target_url:a.target_url,thumb_url:a.thumb_url,raw_amount:a.raw_amount,payment_id:c==null?null:c.id,total_cost:{amount:b("bs_caml_format").caml_float_of_string(a.price_amount),currency:a.price_currency},name:a.name}}function n(a){return{fundraiserID:a.fundraiserID,canDonate:a.canDonate,hasViewerDonated:a.hasViewerDonated,fundraiserDetailedProgressText:a.fundraiserDetailedProgressText,fundraiserSubtitleText:a.fundraiserSubtitleText,focusedCoverPhoto:a.focusedCoverPhoto}}function o(a){return{id:a.id,name:a.name,is_malicious:a.is_malicious,attach_type:b("MercuryAttachmentType").FILE,url:a.uri,extension:a.extension,filesize:a.filesize}}function p(a){return{id:a.id,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").VIDEO,url:a.playable_url,extension:a.extension,filesize:a.filesize,name:a.filename,height:a.height,width:a.width}}function q(a){return{id:a.id,name:a.name,desc:a.desc,thumb_url:a.thumb_url,item_url:a.item_url,title:a.name,text:a.desc,source:a.source,image_aspect_ratio:a.image_aspect_ratio,metalines:{metaline_1:a.first_metaline,metaline_2:a.second_metaline,metaline_3:a.third_metaline},default_action:a.default_action,call_to_actions:h(a.call_to_actions)}}function r(a){__p&&__p();var c=function(a){a=a.services_vertical_info;if(a==null)return void 0;else return{isEligibleForAppointmentCalendar:a.is_eligible_for_appointment_calendar,isEligibleForMultiServicesUI:a.is_eligible_for_multi_services_ui,timezoneName:a.time_zone_name}},d=a.page;c=d==null?[void 0,void 0,void 0]:[d.id,b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("ServicesCalendarSyncType")[d.calendar_sync_type])),c(d)];d=a.native_component_flow_request;var e;if(d==null)e=null;else{var f=d.page,h=d.page,i=d.page,j;if(i==null)j=void 0;else{i=i.profile_picture;j=i==null?void 0:i.uri}i=d.suggested_time_range;var k=d.user,l=d.user,m=d.job_application,n=d.user,o;if(n==null)o=void 0;else{n=n.profile_picture;o=n==null?void 0:n.uri}e={additionalInfo:d.additional_info,appointmentAddress:d.appointment_address,archivedStatus:d.archived_status,availability:d.availability,consumer_phone_number:d.consumer_phone_number,hasSavedToCalendar:d.has_saved_to_calendar,requestFlowType:d.request_flow_type,generalInfo:d.service_general_info,id:d.id,pageID:f==null?void 0:f.id,pageName:h==null?void 0:h.name,pageProfilePic:j,preferredTimeRange:i==null?null:{end:i.end,start:i.start},productItems:d.product_items,reminderBubbleText:d.reminder_bubble_text,requestAdminApprovalType:d.request_admin_approval_type,requestedTime:d.requested_time,specialRequest:d.special_request,status:d.booking_status_value,statusLabel:d.status,userID:k==null?void 0:k.id,username:l==null?void 0:l.short_name,jobApplicationID:m==null?void 0:m.id,userProfilePic:o}}n=a.message_bubble_type;var p;switch(n){case"CANCELLED":p=["Cancelled",g._("Cancelled")];break;case"DECLINED":p=["Declined",g._("Declined")];break;case"REQUESTED":p=["Requested",g._("Requested")];break;case"SCHEDULEED":p=["Scheduled",g._("Scheduled")];break;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"Erroneous target status"]}f=a.user;return{id:a.id,pageID:c[0],calendarSyncType:c[1],userID:f==null?"0":f.id,status:p[0],statusLabel:p[1],viewerID:b("CurrentUser").getAccountID(),requestMetadata:e,servicesVerticalInfo:c[2]}}function s(a){return{id:a.id,page_id:a.page.id,user_id:a.consumer.id,time_ranges:b("bs_array").map(function(a){return{start:a.start,end:a.end}},a.formatted_available_time_ranges),has_booking_request_created:a.has_booking_request_created}}function t(a){return{id:a.id}}function u(a){return{live_location_id:a.live_location_id,is_expired:a.is_expired,expiration_time:a.expiration_time,sender:a.sender,coordinate:a.coordinate,location_title:a.location_title,sender_destination:a.sender_destination,stop_reason:a.stop_reason}}function v(a){return{sender_wec_number:a.sender_wec_number,sender_wec_number_formated:a.sender_wec_number_formated,sender_wec_number_fbid:a.sender_wec_number_fbid,sender_wec_name:a.sender_wec_name}}function w(a){var b=a.preview;b=b==null?null:b.uri;var c=a.large_preview;c=c==null?null:c.uri;return{id:a.id,extension:a.extension,preview:a.preview,large_preview:a.large_preview,attach_type:"photo",large_preview_url:c,preview_url:b}}function x(a){return{id:a.id,name:a.filename,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").AUDIO,url:a.playable_url,extension:a.extension,filesize:a.filesize,duration:a.duration}}function y(a){var b=a.first_metaline;return{desc:a.description,id:a.id,image_aspect_ratio:a.image_aspect_ratio,item_url:a.target_url,metalines:b==null?{}:{metaline_1:b},name:a.name,source:a.source_name,text:a.description,thumb_url:a.image_url,title:a.name,default_action:a.default_action,call_to_actions:h(a.call_to_actions),media_blob_attachments:a.media_blob_attachments}}function z(a){var c=b("bs_array").map(y,a.business_items.nodes),d=h(a.call_to_actions);return{message:a.message,call_to_actions:d,items:c}}function A(a){return{message:a.message,call_to_actions:h(a.call_to_actions),items:b("bs_array").map(y,a.promotion_items.nodes)}}function B(a){var c=a.structured_address.streets,d=a.partner_logo;return{account_holder_name:a.account_holder_name,adjustments:b("bs_array").map(function(a){return{adjustment_type:a.adjustment_type,display_adjustment_amount:a.adjustment_amount}},a.adjustments),cancellation_url:a.cancellation_url,items:b("bs_array").map(y,a.items.nodes),merchant_name:a.merchant_name,messenger_commerce_bubble_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceBubbleType")[a.messenger_commerce_bubble_type])),order_id:a.order_id,order_time:a.order_time,order_url:a.order_url,payment_method:a.payment_method,receipt_id:a.receipt_id,recipient_name:a.recipient_name,shipping_cost:a.shipping_cost,shipping_method:a.shipping_method,status:a.status,structured_address:{city:a.structured_address.city,state:a.structured_address.state,country:a.structured_address.country,postal_code:a.structured_address.postal_code,street_1:b("bs_caml_array").caml_array_get(c,0),street_2:b("bs_caml_array").caml_array_get(c,1)},subtotal:a.subtotal,total_cost:a.total_cost,total_tax:a.total_tax,partner_logo:d==null?void 0:d.uri}}function C(a,c){return{payment_modules_client:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("PaymentModulesClient")[c.payment_modules_client])),is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:b("bs_array").map(function(a){return{item_id:a.item_id,name:a.name,subtitle:a.subtitle,description:a.description,unit_price:a.unit_price,image_urls:b("bs_array").map(function(a){return a.uri},a.images),quantity:a.quantity}},c.item_list),components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,actor_id:a,invoicer_id:c.invoicer_id}}var D=function(a){__p&&__p();var c=b("LeadGenInfoFieldTypes"),d={},e=[];for(var a=a.field_data_list,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;var i=h.field_type,j=h.label;h=h.values;i===c.CUSTOM||i===c.ZIP?e.push({label:j,values:h}):d[i]={label:j,values:h}}d.questions=e;return d};function E(a,b){var c=b.invite_recipient;c=c==null?null:c.id;var d=b.invite_sender;d=d==null?null:d.id;return{quick_invite_id:b.id,recipient_id:c,sender_id:d,is_viewer_recipient:a===c}}function F(a){var b=function(a){if(a==null)return null;else return a.uri},c=a.listing_category;c=c==null?[null,null]:[c.offer_image,c.request_image];return{listingType:a.listing_type,mapURI:b(a.map_image),offerURI:b(c[0]),requestURI:b(c[1])}}function G(a){return{sender:a.sender,receiver:a.receiver,transfer_id:a.transfer_id,bubbleView:a.bubble_view}}function H(a){__p&&__p();var c=a.receiver_profile,d;if(c==null)d=null;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.sender;if(e==null)c={};else{var f=e.profile_picture;c={id:e.id,name:e.name,full_name:e.full_name,picture:f==null?null:f.uri,profile_uri:e.url}}f=a.transfer_context;if(f==null)e=[null,null,null];else{var g=f.transfer_theme;e=[f.memoText,b("bs_array").map(function(a){a=a.image;if(a==null)return null;else return a.uri},f.memo_images),g==null?null:g.id]}f=a.platform_item;g=f==null?null:{name:f.name,description:f.description,image:b("bs_array").map(function(a){a=a.image;if(a==null)return null;else return a.uri},f.photos),refURL:f.url};f=a.amount_fb_discount;return{sender:c,amountWithSymbol:a.transaction_amount.formatted_amount,status:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PTransferStatus")[a.transfer_status])),receiver:d,transfer_id:a.transfer_id,completedTime:a.completedTime,updatedTime:a.updatedTime,creationTime:a.creationTime,amount:a.transaction_amount.amount,memoText:e[0],memoPhotoURLs:e[1],themeID:e[2],discountAmount:f==null?null:f.formatted,fundsAvailability:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("FundsAvailability")[a.funds_availability])),groupThreadFBID:a.group_thread_fbid,platform_item:g,statusDescription:{markup:a.status_description},bubbleView:a.bubble_view,currencyCode:a.currency_amount.currency}}function I(a){__p&&__p();var c=a.requester,d;if(c==null)d=void 0;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.requestee;if(e==null)c=void 0;else{var f=e.profile_picture;c={id:e.id,name:e.short_name,full_name:e.name,picture:f==null?null:f.uri,profile_url:e.url}}f=b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PPaymentRequestStatus")[a.request_status]));e=a.transfer;e=e==null?[null,""]:[H(e),e.id];var g=a.request_theme;return{amount:a.transaction_amount.amount,amountWithSymbol:a.amount.formatted,requestee:c,requester:d,currentStatus:f,currency:a.amount.currency,creationTime:a.creation_time,groupThreadFBID:a.group_thread_fbid,id:a.id,memoText:a.memo_text,themeID:g==null?null:g.id,transfer:e[0],transferID:e[1],updatedTime:a.updated_time,bubbleView:a.bubble_view,statusDescription:{markup:a.status_description}}}function J(a){var c=I({amount:a.amount,transaction_amount:a.transaction_amount,requester:a.requester,requestee:a.requestee,request_status:a.request_status,request_theme:a.request_theme,id:a.id,memo_text:a.memo_text,transfer:a.transfer,creation_time:a.creation_time,group_thread_fbid:a.group_thread_fbid,updated_time:a.updated_time,bubble_view:a.bubble_view,status_description:a.status_description});a={individualRequests:b("bs_array").map(I,a.individual_requests)};return Object.assign(c,a)}function K(a,c,d){__p&&__p();var e=c.media,f=e==null?null:e.animated_image,g=e==null?null:e.image,h={};b("bs_array").iter(function(b){var a=b.value;h[b.key]=a==null?null:a.text;return 0},c.properties);var y=c.target,I;if(y==null)I=null;else switch(y.tag|0){case 0:I=F(y[0]);break;case 1:I=G(y[0]);break;case 2:I=H(y[0]);break;case 3:I=J(y[0]);break;case 4:I=C(a,y[0]);break;case 7:I=A(y[0]);break;case 8:I=z(y[0]);break;case 10:I=D(y[0]);break;case 11:I=u(y[0]);break;case 12:I=E(a,y[0]);break;case 13:I=r(y[0]);break;case 14:I=s(y[0]);break;case 15:I=t(y[0]);break;case 16:var K=y[0],M=K.genie_sender;M=M==null?[null,null]:[M.messaging_actor.id,M.messaging_actor.name];var N=M[0],O={action_links:[],messaging_attribution:null,messenger_call_to_actions:[],xma_layout_info:null,deduplication_key:null,description:null,media:null,properties:[],source:null,style_list:[],title_with_entities:null,url:null,subattachments:[],target:null},P=c.media,Q;if(P==null)Q=null;else{P=P.pack;if(P==null){P=K.story_attachment;Q=!(P==null)&&!(d==null)?L(a,{legacy_attachment_id:N,story_attachment:{action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,deduplication_key:d.deduplication_key,description:d.description,media:d.media,properties:d.properties,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,url:d.url,subattachments:d.subattachments,target:d.target},genie_attachment:{genie_message:{story_attachment:O}}}):null}else Q=d==null?null:L(a,{legacy_attachment_id:N,story_attachment:O,genie_attachment:{genie_message:{story_attachment:O}}})}I={genie_id:N,genie_name:M[1],attachment:Q};break;case 18:I=l(y[0]);break;case 20:I=q(y[0]);break;case 21:I=m(y[0]);break;case 22:I=n(y[0]);break;case 23:I=B(y[0]);break;case 25:I=k(y[0]);break;case 26:I=j(a,y[0]);break;case 40:I=v(y[0]);break;case 41:I=w(y[0]);break;case 42:I=x(y[0]);break;case 43:I=o(y[0]);break;case 44:I=p(y[0]);break;default:I=y[0]}K=c.target;P=!(K==null)&&K.tag===7?0:null;d=c.description;O=c.source;N=c.title_with_entities;return{description:d==null?null:d.text,media:{animated_image:f==null?null:f.uri,animated_image_size:f==null?{height:null,width:null}:{height:f.height,width:f.width},image:g==null?null:g.uri,image_size:g==null?{height:null,width:null}:{height:g.height,width:g.width},duration:e==null?null:e.playable_duration,playable:e==null?null:e.is_playable,source:e==null?null:e.playable_url},source:O==null?null:O.text,style_list:c.style_list,title:N==null?null:N.text,action_links:i(c.action_links),messaging_attribution:c.messaging_attribution,messenger_ctas:b("bs_array").map(function(a){return{id:a.id,page_id:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.page_id),""),action_title:a.title,action_url:a.action_link,action_open_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceCallToActionType")[a.action_open_type])),is_high_confidence:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.is_high_confidence),!1),is_mutable_by_server:a.is_mutable_by_server,native_url:a.native_url,is_disabled:a.is_disabled,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button}}},c.messenger_call_to_actions),xma_layout_info:c.xma_layout_info,properties:h,uri:c.url,deduplication_key:c.deduplication_key,target:I,label:P}}function L(a,c){__p&&__p();var d=c.genie_attachment,e;if(d==null)e=null;else{d=d.genie_message;if(d==null)e=null;else{d=d.story_attachment;e=d==null?null:{description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target,subattachments:d.subattachments}}}d=c.story_attachment;var f;if(d==null)f=null;else{var g={description:null,media:null,source:null,style_list:[],title_with_entities:null,properties:[],url:null,deduplication_key:null,action_links:[],messaging_attribution:null,messenger_call_to_actions:[],xma_layout_info:null,target:null,subattachments:[]};c={share_id:c.legacy_attachment_id,subattachments:b("bs_array").map(function(b){return K(a,b,g)},d.subattachments)};var h={description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target};d=e==null?{description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target,subattachments:d.subattachments}:{description:e.description,media:e.media,source:e.source,style_list:e.style_list,title_with_entities:e.title_with_entities,properties:e.properties,url:e.url,deduplication_key:e.deduplication_key,action_links:e.action_links,messaging_attribution:e.messaging_attribution,messenger_call_to_actions:e.messenger_call_to_actions,xma_layout_info:e.xma_layout_info,target:e.target,subattachments:e.subattachments};f=Object.assign(c,K(a,h,d))}return{app_attribution:null,attach_type:b("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:f,thumbnail_url:null}}f._getCallToActions=h;f._getActionLinks=i;f._getColor=a;f._getLogo=c;f._getPageTarget=j;f._getGroupCommerceProductItemTarget=k;f._getExternalSongTarget=l;f._getAgentSuggestionItemTarget=m;f._getFundraiserTarget=n;f._getWECFileTarget=o;f._getWECMessageVideoTarget=p;f._getRetailItemTarget=q;f._getPagesPlatformBookingMessageTarget=r;f._getServicesAppointmentAvailabilityTarget=s;f._getServicesGenericAdminTextTarget=t;f._getMessageLiveLocationTarget=u;f._getWECMessageTarget=v;f._getWECMessageImageTarget=w;f._getWECMessageAudioTarget=x;f._getBusinessRetailItem=y;f._getMessengerBusinessMessageTarget=z;f._getMessengerRetailPromotionTarget=A;f._getMessengerRetailReceiptTarget=B;f._getPagesPlatformAttachmentTarget=C;f._getPagesPlatformLeadGenInfoTarget=D;f._getQuickInviteTarget=E;f._getCrisisListingTarget=F;f._getMoneyTransferTarget=G;f._getP2PTransferTarget=H;f._getP2PTransferRequestTarget=I;f._getP2PTransferRequestWithIndividualRequests=J;f.transformStoryAttachment=K;f.getExtensibleAttachmentPayload=L}),null);
__d("MessengerAttachmentTransformer.bs",["fbt","bs_array","bs_caml_primitive","MercuryAttachmentType","MessageSharedMediaIDStore.bs","MercuryAttachmentContentType","MessengerStoryAttachmentTransformer.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();if(a.is_malicious)return{app_attribution:null,icon_type:b("MercuryAttachmentContentType").UNKNOWN,metadata:null,name:null,preview_height:null,preview_url:null,preview_width:null,rel:null,share:null,thumbnail_url:null,url:null,attach_type:b("MercuryAttachmentType").ERROR,error_msg:g._("This attachment has been marked as malicious."),message_file_fbid:null,url_shimhash:null,url_skipshim:null};else{var c=a.attribution_app,d;if(c==null)d=null;else{var e=c.square_logo;d={id:c.id,icon_url:e==null?null:e.uri,metadata:a.attribution_metadata,name:c.name}}e=a.url;return{app_attribution:d,icon_type:a.content_type,metadata:null,name:a.filename,preview_height:null,preview_url:null,preview_width:null,rel:"ignore",share:null,thumbnail_url:null,url:e==null?null:e,attach_type:b("MercuryAttachmentType").FILE,error_msg:void 0,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}}}function i(a,c,d){__p&&__p();var e=a.chat_image;e=e==null?[null,null,null]:[e.uri,e.width,e.height];var f=e[0],g=a.chat_image;g=g==null?null:{width:g.width,height:g.height};var h=a.large_image;h=h==null?[null,null]:[h.uri,{width:h.width,height:h.height}];var i=a.inbox_image;i=i==null?[null,null]:[i.uri,{width:i.width,height:i.height}];var j=a.attribution_app,k;if(j==null)k=null;else{var l=j.square_logo;k={id:j.id,icon_url:l==null?null:l.uri,metadata:a.attribution_metadata,name:j.name}}return{app_attribution:k,attach_type:b("MercuryAttachmentType").VIDEO,name:a.filename,url:a.playable_url,rel:"async",preview_url:f,preview_width:e[1],preview_height:e[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").VIDEO,metadata:{fbid:a.legacy_attachment_id,render_as_sticker:a.video_type==="SPEAKING_STICKER",dimensions:{width:a.original_dimensions.x,height:a.original_dimensions.y},duration:a.playable_duration_in_ms,large_size:h[1],large_preview:h[0],chat_size:g,chat_preview:f,inbox_size:i[1],inbox_preview:i[0],pageid:d?c:void 0},thumbnail_url:f,share:null}}function j(a){var c=a.attribution_app,d;if(c==null)d=null;else{var e=c.square_logo;d={id:c.id,icon_url:e==null?null:e.uri,metadata:a.attribution_metadata,name:c.name}}return{app_attribution:d,attach_type:b("MercuryAttachmentType").FILE,name:a.filename,url:a.playable_url,rel:"ignore",preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").MUSIC,metadata:{duration:a.playable_duration_in_ms,isVoicemail:a.is_voicemail?"1":"0",type:a.audio_type==="VOICE_MESSAGE"?"fb_voice_message":a.audio_type==="VOICE_MESSAGE_WITH_TRANSCRIPT"?"fb_voice_message_with_transcript":"file_attachment"},thumbnail_url:null,share:null,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}}function k(a,c,d){__p&&__p();var e=a.preview_image;e=e==null?[null,null,null]:[e.uri,e.width,e.height];var f=a.animated_image;f=f==null?null:f.uri;var g=a.attribution_app,h;if(g==null)h=null;else{var i=g.square_logo;h={id:g.id,icon_url:i==null?null:i.uri,metadata:a.attribution_metadata,name:g.name}}return{app_attribution:h,attach_type:b("MercuryAttachmentType").ANIMATED_IMAGE,name:a.filename,url:f,rel:"async",preview_url:e[0],preview_width:e[1],preview_height:e[2],large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").PHOTO,metadata:{fbid:a.legacy_attachment_id,image:f,dimensions:String(a.original_dimensions.x)+(","+String(a.original_dimensions.y)),pageid:d?c:void 0},thumbnail_url:f,share:null}}function l(a){__p&&__p();var c=a.original_extension==="gif"?b("MercuryAttachmentType").ANIMATED_IMAGE:a.render_as_sticker?b("MercuryAttachmentType").THIRDPARTYSTICKER:b("MercuryAttachmentType").PHOTO,d=a.preview;d=d==null?[null,null,null]:[d.uri,d.width,d.height];if(c===b("MercuryAttachmentType").PHOTO){var e=a.large_preview;e=e==null?[null,null,null]:[e.uri,e.width,e.height]}else e=[null,null,null];var f=a.attribution_app,g;if(f==null)g=null;else{var h=f.square_logo;g={id:f.id,icon_url:h==null?null:h.uri,metadata:a.attribution_metadata,name:f.name}}h=a.thumbnail;return{app_attribution:g,attach_type:c,blurred_image_uri:a.blurred_image_uri,name:a.filename,url:null,rel:"async",preview_url:d[0],preview_width:d[1],preview_height:d[2],large_preview_url:e[0],large_preview_width:e[1],large_preview_height:e[2],icon_type:b("MercuryAttachmentContentType").PHOTO,metadata:{fbid:a.legacy_attachment_id,dimensions:String(a.original_dimensions.x)+(","+String(a.original_dimensions.y))},thumbnail_url:h==null?null:h.uri,share:null,photo_encodings:a.photo_encodings}}function m(a,c){__p&&__p();var d=a,e=c;if(a>=c){a=b("bs_caml_primitive").caml_float_min(120,d/2);c=a/(d/2);return[a|0,e/2*c|0]}else{a=b("bs_caml_primitive").caml_float_min(120,e/2);c=a/(e/2);return[d/2*c|0,a|0]}}function n(a){var c=m(a.width,a.height),d=a.pack,e=a.sprite_image,f=a.sprite_image_2x,g=a.padded_sprite_image,h=a.padded_sprite_image_2x;return{app_attribution:null,attach_type:b("MercuryAttachmentType").STICKER,name:null,url:a.url,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:b("MercuryAttachmentContentType").UNKNOWN,metadata:{accessibilityLabel:a.label,stickerID:a.id,packID:d==null?null:d.id,frameCount:a.frame_count,frameRate:a.frame_rate,framesPerRow:a.frame_count>1?a.frames_per_row:1,framesPerCol:a.frame_count>1?a.frames_per_column:1,height:c[1],width:c[0],spriteURI:e==null?null:e.uri,spriteURI2x:f==null?null:f.uri,paddedSpriteURI:g==null?null:g.uri,paddedSpriteURI2x:h==null?null:h.uri,thumbnail_url:null,share:null}}}function o(a,c){if(c==null)return 0;else return b("MessageSharedMediaIDStore.bs").setMessageIDForAttachmentID(a,c)}function a(a,c,d,e){__p&&__p();var f=[],g={id:"",pack:null,label:"",frame_count:0,frame_rate:0,frames_per_row:0,frames_per_column:0,height:0,padded_sprite_image:null,padded_sprite_image_2x:null,sprite_image_2x:null,sprite_image:null,url:null,width:0},m=c.extensible_attachment,p;if(m==null)p=g;else{m=m.story_attachment;if(m==null)p=g;else{m=m.media;p=m==null?g:{id:m.id,pack:m.pack,label:m.label,frame_count:m.frame_count,frame_rate:m.frame_rate,frames_per_row:m.frames_per_row,frames_per_column:m.frames_per_column,height:m.height,padded_sprite_image:m.padded_sprite_image,padded_sprite_image_2x:m.padded_sprite_image_2x,sprite_image_2x:m.sprite_image_2x,sprite_image:m.sprite_image,url:m.url,width:m.width}}}g=p.id;g==null||g!==""&&f.push(n(p));m=c.extensible_attachment;m==null||f.push(b("MessengerStoryAttachmentTransformer.bs").getExtensibleAttachmentPayload(a,m));g=c.sticker;g==null||f.push(n(g));p=c.blob_attachments;p==null||b("bs_array").iter(function(b){__p&&__p();switch(b.tag|0){case 0:var c=b[0];o(c.legacy_attachment_id,d);f.push(l(c));return 0;case 1:c=b[0];o(c.legacy_attachment_id,d);f.push(k(c,a,e));return 0;case 2:f.push(j(b[0]));return 0;case 3:c=b[0];o(c.legacy_attachment_id,d);f.push(i(c,a,e));return 0;case 4:f.push(h(b[0]));return 0}},p);return f}f._getFilePayload=h;f._getVideoPayload=i;f._getAudioPayload=j;f._getAnimatedImagePayload=k;f._getImagePayload=l;f._getStickerDimensions=m;f._getStickerPayload=n;f._storeAttachmentMapping=o;f.transformAttachment=a}),null);
__d("InstantGameUpdateXMATUpdateType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNKNOWN:"unknown",GAME_SCORE:"game_score",CUSTOM_MESSAGE:"custom_message"})}),null);
__d("MNCommerceMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",ROBOT_TEXT:"robot_text",LOCATION:"location",FORCED_FETCH_MESSAGE:"forced_fetch_message",SENDER_ACTION:"sender_action",RETAIL_PRODUCT_SUBSCRIPTION:"retail_product_subscription",RETAIL_PROMOTION:"retail_promotion",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_SHIPMENT:"retail_shipment",SHIPMENT_TRACKING_EVENT:"shipment_tracking_event",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_CHECKIN:"airline_checkin",AIRLINE_BOARDINGPASS:"airline_boardingpass",AIRLINE_UPDATE:"airline_update",AIRLINE_ITINERARY:"airline_itinerary",CONTENT_SUBSCRIPTION:"content_subscription",AD_ADMIN_TEXT:"ad_admin_text",AD_TEXT:"ad_text",AD_BUBBLE:"ad_bubble",NON_AD:"non_ad",UNKNOWN:"unknown",OTHER:"other",TEMPLATE:"template",OPEN_GRAPH:"open_graph",GENERIC:"generic",LIST:"list",COMPACT_LIST:"compact_list",BUTTON:"button",RECEIPT:"receipt",GENERIC_LEGACY:"generic_legacy",ICE_BREAKER:"ice_breaker",FALLBACK:"fallback",RIDE_INTENT:"ride_intent",RIDE_SIGNUP:"ride_signup",RIDE_WELCOME:"ride_welcome",RIDE_ORDER_CONFIRMATION:"ride_order_confirmation",RIDE_REQUESTED:"ride_requested",RIDE_DRIVER_ON_THE_WAY:"ride_driver_on_the_way",RIDE_NO_DRIVER:"ride_no_driver",RIDE_DRIVER_ARRIVING:"ride_driver_arriving",RIDE_DRIVER_CANCELED:"ride_driver_canceled",RIDE_RIDER_CANCELED:"ride_rider_canceled",RIDE_COMPLETE:"ride_complete",RIDE_ADMIN_MESSAGE:"ride_admin_message",RIDE_RECEIPT:"ride_receipt",RIDE_REENGAGEMENT_FIRST_RIDE:"ride_reengagement_first_ride",GET_RIDE:"give_get_ride",GIVE_RIDE:"send_give_get_ride",REFERER_PROMO:"referer_promo",INSTANT_GAMES_SHARE:"instant_games_share",INSTANT_GAMES_SCORE:"instant_games_score",INSTANT_GAMES_LIVE_STREAM:"instant_games_live_stream",INSTANT_GAMES_CUSTOM_UPDATE:"instant_games_custom_update",INSTANT_GAMES_CUSTOM_UPDATE_MEDIA:"instant_games_custom_update_media",INSTANT_GAMES_TOURNAMENT_UPDATE:"instant_games_tournament_update",LINK:"link_admin_message",UNLINK:"unlink_admin_message",BLOCK_ALL:"block_all_admin_message",UNBLOCK_ALL:"unblock_all_admin_message",BLOCK_PROMOTION:"block_promotion_admin_message",UNBLOCK_PROMOTION:"unblock_promotion_admin_message",INITIAL_PROMOTION:"initial_promotion_admin_message",WEAK_CONSENT_ADMIN_MESSAGE:"weak_consent_admin_message",MESSENGER_TEAM_BOT_MESSAGE:"messenger_team_bot",MESSENGER_BOT_BASE_GENERIC:"messenger_bot_base_generic",COMMERCE_COMPACT_LIST:"commerce_compact_list",FEEDBACK:"feedback",FORM_PROGRESS:"form_progress",MEDIA:"media",PLACE_CARD:"place_card"})}),null);
__d("MercuryActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD_GROUP_ADMINS:"ma-type:add_group_admins",ADD_PARTICIPANTS:"ma-type:add-participants",APPROVAL_MODE:"ma-type:approval-mode",APPROVAL_QUEUE:"ma-type:approval-queue",BLOCK_STATUS_CHANGED:"ma-type:block-status-changed",BLURRED_IMAGE_STATUS:"ma-type:blurred-image-status",CANCEL_ATTACHMENT_PLACEHOLDER:"ma-type:cancel-attachment-placeholder",CHANGE_ARCHIVED_STATUS:"ma-type:change-archived-status",CHANGE_FLAG:"ma-type:change_flag",CHANGE_FOLDER:"ma-type:change-folder",CHANGE_MUTE_SETTINGS:"ma-type:change-mute-settings",CHANGE_PAGE_FOLLOW_UP_STATUS:"ma-type:change-page-follow-up-status",CHANGE_PINNED_STATUS:"ma-type:change-pinned-status",CHANGE_READ_STATUS:"ma-type:change_read_status",CONFIRM_ATTACHMENT_PLACEHOLDER:"ma-type:confirm-attachment-placeholder",CREATE_OMNI_M_SUGGESTIONS:"ma-type:create-omni-m-suggestions",CREATE_PAGE_ADMIN_NOTE:"ma-type:create-page-admin-note",DELETE_MESSAGES:"ma-type:delete-messages",DELETE_MONTAGE_MESSAGES:"ma-type:delete-montage-messages",DELETE_THREAD:"ma-type:delete-thread",DESCRIPTION_CHANGED:"ma-type:description-changed",EVENT_RSVP_CHANGED:"ma-type:event-rsvp-changed",GROUPS_SYNC_METADATA_UPDATE:"ma-type:groups-sync-metadata-update",GROUPS_SYNC_STATUS_CHANGED:"ma-type:groups-sync-status-changed",IS_PIN_PROTECTED:"ma-type:is_pin_protected",JOINABLE_MODE:"ma-type:joinable-mode",LIVE_LOCATION_UPDATE:"ma-type:live-location-update",LOG_MESSAGE:"ma-type:log-message",MARK_THREAD_SEEN:"ma-type:mark_thread_seen",MONTAGE_DIRECT_EXPIRE:"ma-type:montage-direct-expire",MOVE_PENDING_TO_INBOX:"ma-type:move_pending_to_inbox",MUTATE_TAGS:"ma-type:mutate_tags",NEW_MONTAGE_MESSAGE:"ma-type:new-montage-message",PROMOTE_GROUP_ADMINS:"ma-type:promote-group-admins",REACTION_UPDATE:"ma-type:reaction-update",REMOVE_GROUP_ADMINS:"ma-type:remove_group_admins",REMOVE_MESSAGE:"ma-type:remove-message",REPLACE_MESSAGE:"ma-type:replace-message",SEND_MESSAGE:"ma-type:send-message",UNSUBSCRIBE_STATUS_UPDATE:"ma-type:unsubscribe-status-update",UNWRAP_MESSAGE:"ma-type:unwrap-message",UPDATE_COMM_ITEM_OWNER:"ma-type:update-comm-item-owner",UPDATE_COMM_STATUS:"ma-type:update-comm-status",UPDATE_CONNECTIVITY_STATUS:"ma-type:update-connectivity-status",UPDATE_CUSTOM_LIKE:"ma-type:update_custom_like",UPDATE_JOINABLE_LINK:"ma-type:update-joinable-link",UPDATE_RTC_CALL_DATA:"ma-type:update-rtc-call-data",UPDATE_SNIPPET:"ma-type:update-snippet",UPDATE_THREAD_THEME:"ma-type:update-thread-theme",USER_GENERATED_MESSAGE:"ma-type:user-generated-message"})}),null);
__d("MercuryLogMessageType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SUBSCRIBE:"log:subscribe",UNSUBSCRIBE:"log:unsubscribe",VIDEO_CALL:"log:video-call",PHONE_CALL:"log:phone-call",THREAD_NAME:"log:thread-name",THREAD_IMAGE:"log:thread-image",SERVER_ERROR:"log:error-msg",LIVE_LISTEN:"log:live-listen",WALLPAPER:"log:wallpaper",ORION:"log:orion",SWITCH_TO_WORK:"log:switch",PAGE_REPLY:"log:page-reply",GENERIC_ADMIN_TEXT:"log:generic-admin-text"})}),null);
__d("MessagingGenericAdminTextType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ALOHA_AUTOCONNECT_INVITED:"aloha_autoconnect_invited",ALOHA_CONTACT_ADDED:"aloha_contact_added",ALOHA_CONTACT_ADDED_TO_ALOHA_PROXY_USER:"aloha_contact_added_to_aloha_proxy_user",ALOHA_CONTACT_REMOVED:"aloha_contact_removed",ALOHA_INVITE_OWNER_ACCEPT:"aloha_invite_owner_accept",ALOHA_INVITE_OWNER_DECLINE:"aloha_invite_owner_decline",ALOHA_MEDIA_ADDED:"aloha_media_added",ALOHA_MEDIA_SENT:"aloha_media_sent",ALOHA_VISUAL_MEDIA_SENT:"aloha_visual_media_sent",ALOHA_OWNER_INVITED:"aloha_owner_invited",ALOHA_PROXY_USER_NAME_SET:"aloha_proxy_user_name_set",ALOHA_PROXY_USER_PROFILE_PHOTO_SET:"aloha_proxy_user_profile_photo_set",ALOHA_WIFI_CREDENTIALS_SET:"aloha_wifi_credentials_set",ALOHA_USER_JOINED_CALL_ON_ALOHA:"aloha_user_joined_call_on_aloha",ALOHA_CALL_ENDED_ON_ALOHA:"aloha_call_ended_on_aloha",ALOHA_CALL_INVITE:"aloha_call_invite",MADE_POLL_VOTE:"made_poll_vote",GROUP_POLL:"group_poll",GENERIC_NEW_CONNECTION:"generic_new_connection",CONFIRM_FRIEND_REQUEST:"confirm_friend_request",THREAD_CUSTOMIZATION_UPSELL:"thread_customization_upsell",PHONE_CONTACT_UPLOAD:"phone_contact_upload",RELATIONSHIP_CREATED:"relationship_created",ACCEPT_PENDING_THREAD:"accept_pending_thread",RAMP_UP_WELCOME_MESSAGE:"ramp_up_welcome_message",CHANGE_THREAD_THEME:"change_thread_theme",CHANGE_THREAD_ICON:"change_thread_icon",GROUP_THREAD_CREATED:"group_thread_created",THREAD_EPHEMERAL_SEND_MODE:"thread_ephemeral_send_mode",INVITE_ACCEPTED:"invite_accepted",MESSENGER_INVITE_SENT:"messenger_invite_sent",TURN_ON_PUSH:"turn_on_push",JOURNEY_PROMPT_COLOR:"journey_prompt_color",JOURNEY_PROMPT_LIKE:"journey_prompt_like",JOURNEY_PROMPT_NICKNAME:"journey_prompt_nickname",JOURNEY_PROMPT_SETUP:"journey_prompt_setup",CHANGE_THREAD_NICKNAME:"change_thread_nickname",NOTIFY_GROUP_MAYORSHIP:"notify_group_mayorship",PROMPT_GROUP_MAYORSHIP_CUSTOMIZATION:"prompt_group_mayorship_customization",MESSAGE_COUNT_MILESTONE_MESSAGE:"message_count_milestone_message",BOT_THREAD_SUBSCRIPTION:"bot_thread_subscription",RTC_CALL_LOG:"rtc_call_log",RTC_INSTANT_VIDEO_LIFECYCLE:"rtc_instant_video_lifecycle",JOURNEY_PROMPT_BOT:"journey_prompt_bot",RIDE_ORDERED_MESSAGE:"ride_ordered_message",DESTINATION_ETA_MESSAGE:"destination_eta_message",RIDE_ARRIVED_MESSAGE:"ride_arrived_message",JOURNEY_PROMPT_NEW_SETUP:"journey_prompt_new_setup",LIGHTWEIGHT_EVENT_CREATE:"lightweight_event_create",LIGHTWEIGHT_EVENT_DELETE:"lightweight_event_delete",LIGHTWEIGHT_EVENT_NOTIFY:"lightweight_event_notify",LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:"lightweight_event_notify_before_event",LIGHTWEIGHT_EVENT_RSVP:"lightweight_event_rsvp",LIGHTWEIGHT_EVENT_UPDATE:"lightweight_event_update",LIGHTWEIGHT_EVENT_UPDATE_LOCATION:"lightweight_event_update_location",LIGHTWEIGHT_EVENT_UPDATE_TIME:"lightweight_event_update_time",LIGHTWEIGHT_EVENT_UPDATE_TITLE:"lightweight_event_update_title",SAFETY_LOCATION_REQUEST_SENT:"safety_location_request_sent",SAFETY_LOCATION_REQUEST_RESPONDED:"safety_location_request_responded",SAFETY_LOCATION_REQUEST_DENIED:"safety_location_request_denied",AD_MANAGE_MESSAGE:"ad_manage_message",ADMIN_TEXT_WITH_LINK:"admin_text_with_link",AD_REPLY_MESSAGE:"ad_reply_message",TAGGED_PHOTO:"tagged_photo",GAME_SCORE:"game_score",INSTANT_GAME_UPDATE:"instant_game_update",INSTANT_GAME_BOT_INTRO:"instant_game_bot_intro",INSTANT_GAME_WORLD_CUP_INTRO:"intant_games_world_cup_intro",INSTANT_GAME_CUSTOM_UPDATE_NUX_ADMIN_MESSAGE:"instant_game_custom_update_nux_admin_message",INSTANT_GAME_OFFLINE_MATCH_INTRO:"instant_game_offline_match_intro",INSTANT_GAME_TOURNAMENT_REMINDER:"instant_game_tournament_reminder",MEDIA_SUBSCRIPTION_MANAGE:"media_subscription_manage",M_AI_SURVEY:"m_ai_survey",PHONE_NUMBER_LOOKUP_NOTICE:"phone_number_lookup_notice",MESSENGER_PRECHECKED_PLUGIN:"messenger_prechecked_plugin",MESSENGER_THREAD_RESURRECTION_NOTICE:"messenger_thread_resurrection_notice",MESSENGER_ENTRY_BY_MDOTME_LINK_WITH_REF:"messenger_entry_by_mdotme_link_with_ref",ADD_CONTACT:"add_contact",PRODUCT_INVOICE_RECEIPT_REJECTED:"product_invoice_receipt_rejected",PRODUCT_INVOICE_PAID:"product_invoice_paid",PRODUCT_INVOICE_VOIDED:"product_invoice_voided",PRODUCT_INVOICE_SHIPPED:"product_invoice_shipped",PRODUCT_INVOICE_PAYMENT_EXPIRED:"product_invoice_payment_expired",PRODUCT_INVOICE_RECEIPT_UPLOADED:"product_invoice_receipt_uploaded",CHANGE_JOINABLE_SETTING:"change_joinable_setting",CHANGE_THREAD_ADMINS:"change_thread_admins",CHANGE_THREAD_APPROVAL_MODE:"change_thread_approval_mode",CAPY_SESSION_BEGIN:"capy_session_begin",CAPY_SESSION_BOT_BEGIN:"capy_session_bot_begin",CAPY_SESSION_END:"capy_session_end",CAPY_AGENT_JOIN:"capy_agent_join",CAPY_AGENT_DUMPED:"capy_agent_dumped",CAPY_SESSION_WAIT_TIME:"capy_session_wait_time",GROUP_SMS_PARTICIPANT_JOINED:"group_sms_participant_joined",GROUP_SMS_PARTICIPANT_CAPPED:"group_sms_participant_capped",SMS_PHONE_NUMBER_CHECK:"sms_phone_number_check",MESSENGER_BOT_REVIEW_SENT:"messenger_bot_review_sent",MESSENGER_CODE_SCAN:"messenger_code_scan",MESSENGER_LIVECHAT_PLUGIN_OPEN:"messenger_livechat_plugin_open",MINGLE_MATCH_SUCCESS:"mingle_match_success",MINGLE_PARTICIPANT_MATCHED:"mingle_participant_matched",MN_ACCOUNT_LINKING_TEXT:"mn_account_linking_text",MN_ACCOUNT_UNLINKING_TEXT:"mn_account_unlinking_text",MN_ACCOUNT_FORCED_UNLINKING_TEXT:"mn_account_forced_unlinking_text",MN_REF_SEND_TEXT:"mn_ref_send_text",ADS_WELCOME_MSG:"ads_welcome_msg",THREAD_JOINABLE_PROMOTION_TEXT:"thread_joinable_promotion_text",PAGES_PLATFORM_REQUEST_TEXT:"pages_platform_request_text",MESSENGER_NEW_USER_GET_STARTED:"messenger_new_user_get_started",SMS_PHONE_NUMBER_TOGGLE:"sms_phone_number_toggle",PAGES_PLATFORM_CREATE_APPOINTMENT:"Pages_Platform_create_appointment",INTERNAL_CAREER_JOBSY_REACHOUT_CONNECTED:"internal_career_jobsy_reachout_connected",JOINABLE_GROUP_THREAD_CREATED:"joinable_group_thread_created",JOINABLE_ROOM_CREATED_WITH_CO_CREATORS:"joinable_room_created_with_co_creators",PAGES_PLATFORM_ACCEPT_APPOINTMENT:"pages_platform_accept_appointment",PAGES_PLATFORM_REFERRAL_CONFIRMED_APPOINTMENT:"pages_platform_referral_confirmed_appointment",PAGES_PLATFORM_DECLINE_APPOINTMENT:"pages_platform_decline_appointment",PAGES_PLATFORM_USER_CANCEL:"pages_platform_user_cancel",PAGES_PLATFORM_ADMIN_CANCEL:"pages_platform_admin_cancel",MESSENGER_OMNIM_CREATE_FLOW:"messenger_omnim_create_flow",MESSENGER_OMNIM_UPDATE_FLOW:"messenger_omnim_update_flow",MESSENGER_OMNIM_UPDATE_FLOW_STATE:"messenger_omnim_update_flow_state",MESSENGER_GROUP_DESCRITPION_UPDATE:"messenger_group_description_update",MESSENGER_GROUP_DESCRIPTION_UPDATE_V2:"messenger_group_description_update_v2",MESSENGER_EXTENSION_ADD_CART:"messenger_extension_add_cart",MESSENGER_EXTENSION_ADD_FAVORITE:"messenger_extension_add_favorite",MESSENGER_AD_CONTEXT:"messenger_ad_context",PAGES_PLATFORM_APPOINTMENT_REMINDER:"pages_platform_appointment_reminder",PAGES_PLATFORM_ADMIN_DECLINE:"pages_platform_admin_decline",POKE_RECEIVED:"poke_received",MESSENGER_STATION_SUBSCRIPTION:"messenger_station_subscription",MESSENGER_USER_ALSO_ON_MESSENGER:"messenger_user_also_on_messenger",MESSENGER_INBOX2_BIRTHDAY_BUMP:"messenger_inbox2_birthday_bump",MESSENGER_RESPOND_REMINDER_CONFIRMATION:"messenger_respond_reminder_confirmation",MESSENGER_RESPOND_REMINDER:"messenger_respond_reminder",MESSENGER_RESPOND_REMINDER_USER_CANCEL:"messenger_respond_reminder_user_cancel",MESSENGER_RESPOND_REMINDER_CANCEL_SUGGESTION:"messenger_respond_reminder_cancel_suggestion",STARTED_SHARING_VIDEO:"started_sharing_video",LIVE_VIDEO_CHAT:"live_video_chat",PARTICIPANT_JOINED_GROUP_CALL:"participant_joined_group_call",MESSENGER_ONLY_PHONE_JOINED_WITH_NEW_ACCOUNT:"messenger_only_phone_joined_with_new_account",PAGES_COMMERCE_PAYMENT_ENABLED:"pages_commerce_payment_enabled",GROUP_PAYMENT_REQUEST:"group_payment_request",P2P_CALL_ESCALATED_TO_GROUP_CALL:"p2p_call_escalated_to_group_call",INVITED_TO_ESCALATED_P2P_CALL:"invited_to_escalated_p2p_call",EVENT_UPCOMING:"event_upcoming",PAGES_VISITOR_POST_SEND_MESSAGE_UPSELL:"pages_visitor_post_send_message_upsell",PAGES_LOW_MESSAGE_RESPONSE_RATE:"pages_low_message_response_rate",PAGES_START_CALL:"pages_start_call",PARTIES_INVITE:"parties_invite",PAGES_JOIN_LOYALTY_PROGRAM:"pages_join_loyalty_program",WORK_INVITE_CLAIMED:"work_invite_claimed",WORK_BOT_INSTALLED:"work_bot_installed",WORK_NEW_MULTI_COMPANY_CHAT:"work_new_multi_company_chat",PARTIAL_AUTOMATED_FEEDBACK:"partial_automated_feedback",P2P_PAYMENT_REQUEST_REMINDER:"p2p_payment_request_reminder",PHOTO_TAG_BUMP:"photo_tag_bump",MESSENGER_CALL_UPGRADE_LEGACY_CLIENT:"messenger_call_upgrade_legacy_client",DIRECTED_WALL_POST:"directed_wall_post",MESSENGER_CALL_LOG:"messenger_call_log",P2P_PAYMENT_MONEY_RAIN_GAME_ENTRY_POINT:"p2p_payment_money_rain_game_entry_point",MESSENGER_MONTAGE_MENTIONS:"messenger_montage_mentions",PAGES_MESSAGING_BLOCK_WORDS:"pages_messaging_block_words",SHIPPO_TRACKING_UPDATES:"shippo_tracking_updates",NEO_APPROVED_CONNECTION_ADDED:"neo_approved_connection_added",NEO_PARENT_UNLOCK_STICKER:"neo_parent_unlock_sticker",CHANGE_FAVORITE_COLOR:"change_favorite_color",VAULT_NEW_FRIEND:"vault_new_friend",VAULT_DELETE_THREAD:"vault_delete_thread",VAULT_SCREENSHOT_THREAD:"vault_screenshot_thread",MARKETPLACE_ITEM_CHANGED:"marketplace_item_changed",MARKETPLACE_SERVICES_INITIAL_MESSAGE_CONTEXT:"marketplace_services_initial_message_context",LINK_CTA:"link_cta",SERVICES_VERTICAL_REDEEMED_REFERRAL:"services_vertical_redeemed_referral",SERVICES_VERTICAL_OPT_OUT_REQUESTS:"services_vertical_opt_out_requests",SERVICES_VERTICAL_OPT_OUT_REQUESTS_SUCCESS:"services_vertical_opt_out_requests_success",SERVICES_VERTICAL_LEAD_GEN_SURVEY:"services_vertical_lead_gen_survey",SERVICES_VERTICAL_LEAD_GEN_SURVEY_EDIT:"services_vertical_lead_gen_survey_edit",PAGES_MARK_AS_PAID:"pages_mark_as_paid",MIGRATED_TO_WORKPLACE:"migrated_to_workplace",MESSENGER_GROUP_EVENT_STATUS_UPDATE:"messenger_group_event_status_update",NEO_APPROVED_USER_REMOVED_FROM_GROUP:"neo_approved_user_removed_from_group",LIVE_CHAT_SUPPORT_AGENT_JOIN:"live_chat_support_agent_join",LIVE_CHAT_SUPPORT_SESSION_BEGIN:"live_chat_support_session_begin",LIVE_CHAT_SUPPORT_SESSION_END:"live_chat_support_session_end",MONTAGE_DIRECT_KEEP:"montage_direct_keep",MONTAGE_DIRECT_EXPIRE:"montage_direct_expire",CHSBOT_CONVERSATION_ENDED:"chsbot_conversation_ended",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_BEGIN:"chsbot_live_chat_support_agent_begin",CHSBOT_LIVE_CHAT_SUPPORT_AGENT_END:"chsbot_live_chat_support_agent_end",CHSBOT_LIVE_PHONE_SUPPORT_AGENT_CALLING:"chsbot_live_phone_support_agent_calling",CHSBOT_SUPPORT_REQUESTED:"chsbot_support_requested",SUPPORT_BOT_SESSION_AGENT_JOIN:"support_bot_session_agent_join",SUPPORT_BOT_SESSION_AGENT_LEAVE:"support_bot_session_agent_leave",SUPPORT_BOT_SESSION_END:"support_bot_session_end",SUPPORT_BOT_CALL_BEGIN:"support_bot_call_begin",SUPPORT_BOT_CALL_END:"support_bot_call_end",MESSENGER_SUBSCRIBE_TO_UPDATES:"messenger_subscribe_to_updates",MESSENGER_UNSUBSCRIBE_FROM_UPDATES:"messenger_unsubscribe_from_updates",MESSENGER_BLOCK_MESSAGES:"messenger_block_messages",MESSENGER_UNBLOCK_MESSAGES:"messenger_unblock_messages",MESSENGER_TURN_ON_MESSAGES:"messenger_turn_on_messages",MESSENGER_TURN_OFF_MESSAGES:"messenger_turn_off_messages",THANKS_FOR_SHARING_MESSAGE_CONTEXT:"thanks_for_sharing_message_context",GROUP_ADMIN_MODEL_NUX:"group_admin_model_nux",MESSENGER_PAYMENT_INCENTIVE_INFO:"messenger_payment_incentive_info",MESSENGER_PLATFORM_PERSONA:"messenger_platform_persona",MESSENGER_GROUP_SYNC_OPT_IN:"messenger_group_sync_opt_in",MESSENGER_GROUP_SYNC_OPT_OUT:"messenger_group_sync_opt_out",MENTORSHIP_MATCH:"mentorship_match",MENTORSHIP_PROGRAM_MATCH:"mentorship_program_match",MENTORSHIP_PROGRAM_CONTINUE:"mentorship_program_continue",MENTORSHIP_PROGRAM_LEAVE:"mentorship_program_leave",MENTORSHIP_PROGRAM_LEAVE_PROMPT:"mentorship_program_leave_prompt",MENTORSHIP_CURRICULUM_STEP:"mentorship_curriculum_step",MENTORSHIP_DISCUSSION_TOPIC_SET_PROMPT:"mentorship_discussion_topic_set_prompt",MENTORSHIP_CHECK_IN_REMINDER:"mentorship_check_in_reminder",PAGES_CALL_DEFLECTION_UPSELL:"pages_call_deflection_upsell",RTC_PHOTOBOOTH:"rtc_photobooth",DELAYED_PHONE_NUMBER_MATCH:"delayed_phone_number_match",AUTOMATIC_TRANSLATION_ENABLED:"automatic_translation_enabled",AUTOMATIC_TRANSLATION_AUTO_ENABLED:"automatic_translation_auto_enabled",AUTOMATIC_TRANSLATION_DISABLED:"automatic_translation_disabled",AUTOMATIC_TRANSCRIPTION_ENABLED:"automatic_transcription_enabled",AUTOMATIC_TRANSCRIPTION_DISABLED:"automatic_transcription_disabled",MESSENGER_ROOM_MIGRATION:"messenger_room_migration",PAGE_ADMIN_RESPONSIVENESS_REMINDER:"page_admin_responsiveness_reminder",MESSENGER_GROWTH_GENERIC_ADMIN_TEXT:"messenger_growth_generic_admin_text",MESSENGER_TALK_TO_YOUR_MOM_REMINDER:"messenger_talk_to_your_mom_reminder",PAYMENT_INCENTIVE_RECEIVED:"payment_incentive_received",PAGES_THREAD_REMINDER:"pages_thread_reminder",MESSENGER_PLATFORM_PERSONA_LEAVE_THREAD:"messenger_platform_persona_leave_thread",STORY_REPLY_CONTEXT:"story_reply_context",PAGES_AUTOMATED_RESPONSE_RECOMMENDATION:"pages_automated_response_recommendation",PAGES_AUTOMATED_RESPONSE_SMART_REPLY:"pages_automated_response_smart_reply",PAGES_AUTOMATED_RESPONSE_JOB_APPLICATION:"pages_automated_response_job_APPLICATION",MESSENGER_ICEBREAKER_VOTE_CAST:"messenger_icebreaker_vote_cast",PARTIES_PRESENCE:"parties_presence",PAGE_THREAD_ADMIN_ASSIGNMENT_TEXT:"page_thread_admin_assignment_text",RTC_INSTANT_ACTIVITY_LIFECYCLE:"rtc_instant_activity_lifecycle",RTC_VIDEO_CHAT_LINK_LIFECYCLE:"rtc_video_chat_link_lifecycle",SHIBA_MOCK_BOT_RESTART_CHAT_TEXT:"shiba_mock_bot_restart_chat_text",MARKETPLACE_RENTALS_INITIAL_MESSAGE:"marketplace_rentals_initial_message",MARKETPLACE_RENTALS_SENDER_INFO:"marketplace_rentals_sender_info",PAGES_MARK_AS_PAID_NEW:"pages_mark_as_paid_new",MESSENGER_BUSINESS_REPORT_SPAM:"messenger_business_report_spam",MESSENGER_BUSINESS_REPORT_INAPPROPRIATE:"messenger_business_report_inappropriate",MESSENGER_BUSINESS_REPORT_OTHER_ABUSE:"messenger_business_report_other_abuse",FRIENDED_IN_MESSENGER:"friended_in_messenger",MARKETPLACE_REPLY_REMINDER:"marketplace_reply_reminder",VOD_CONVERSATION_SEND_MESSAGE:"vod_conversation_send_message",SENT_UNCONNECTED_MESSAGE:"sent_unconnected_message",MESSENGER_SHARED_WITH:"messenger_shared_with",PAGE_THREAD_ACTION_SYSTEM_ADD_DETAILS:"page_thread_action_system_add_details",PAGE_USER_MESSENGER_CONNECTED:"page_user_messenger_connected",FB_ONLY_BOT_TEXT:"fb_only_bot_text",MESSENGER_SCHOOL_CHAT_AUTO_ADD_USER:"messenger_school_chat_auto_add_user",LIVING_ROOM_MESSAGE:"living_room_message",MESSENGER_FRIENDVERSARY_SHARED_TO:"messenger_friendversary_shared_to",PARENT_APPROVED_NEW_FRIEND_CODE:"parent_approved_new_friend_code",CHAT_ENTICEMENT_JOINED:"chat_enticement_joined",EVENT_CONFIRMED_GOING:"event_confirmed_going",CHEX_ORDER_STATE_CHANGED:"chex_order_state_changed",TWEENS_MUTUAL_INTERESTS:"tweens_mutual_interests",MESSENGER_CARE_PII_PRIVACY_INTRO:"messenger_care_pii_privacy_intro",MESSENGER_CARE_AUTH_LINKS_REF:"messenger_care_auth_links_ref",MARKETPLACE_RATE_SELLER:"marketplace_rate_seller",GEMSTONE_THREAD_CREATION:"gemstone_thread_creation",MNF_LIGHTWEIGHT_LIKE:"mnf_lightweight_like"})}),null);
__d("MessagingSourceEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_ORCA:"source:chat:orca",CHAT_LIGHT_SPEED:"source:chat:light_speed",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",COWORKER_GROUP:"source:work:coworker_group",CUSTOMER_CHAT_PLUGIN:"source:discovery:customer_chat_plugin",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_TICKETING:"source:event_ticket",EVENT_REMINDERS:"source:event_reminders",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",GENERIC_ADMIN_TEXT:"source:generic_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",GROUP_GENERAL_THREAD_AUTOJOIN:"source:group:general_thread_autojoin",INVITE:"source:invite",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",PAGE_UNIFIED_INBOX:"source:page_unified_inbox",WHATSAPP_CALLBACK:"source:wa_callback",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",MESSENGER_EMPLOYEE_ONLY_BOT:"source:bot:employee_only",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",MARKETPLACE:"source:marketplace",MARKETPLACE_BOT:"source:marketplace:bot",CHEX_C2C:"source:chex:c2c",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERNAL_TEST_INBOX:"source:internal:test_inbox",INTERNAL_TEST_PENDING:"source:internal:test_pending",INTERNAL_TEST_OTHER:"source:internal:test_other",INTERNAL_TEST_ML_ONLY:"source:internal:test_ml_only",JOB_SEARCH_APPLICATION:"source:job_search:application",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_ADD_WITH_APPROVAL:"source:messenger:add_with_approval",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation",PAGES_ORDER_MANAGEMENT:"source:pages:order_management",PAGE_AUTO_RESPONSE:"source:pages:auto_response",PAGES_INVITE:"source:pages:invite",PAGES_CHAT_EXTENSION:"source:pages:chat_extension",PAGES_COMPOSER:"source:pages:composer",PTX:"source:ptx",SAVED_CHAT_EXTENSION:"source:saved:chat_extension",CREATOR_PAGE_INITIATE_TO_CREATOR_PAGE:"source:pages:creator_page_initiate_to_creator_page",LIVE_VIDEO_CHAT:"source:live_video_chat",GEMSTONE:"source:gemstone",WATCH_PARTY:"source:watch_party",WORK_ACTIVATION_CARD_GENERAL_GROUP_CHAT:"source:work:activation_card_general_group_chat",SCHOOL_COMMUNITY:"source:school_community",SCHOOL_COMMUNITY_COURSE:"source:school_community_course",BELL_RESEARCH:"source:bell_research",BELL_MESSENGER_LINKED:"source:bell_messenger_linked",BELL_MESSENGER_UNLINKED:"source:bell_messenger_unlinked",BELL_MESSENGER_ONBOARD:"source:bell_messenger_onboard",PROFILE_MEET_NEW_FRIENDS:"source:profile_meet_new_friends",PROFILE_MEET_NEW_FRIENDS_REPLY:"source:profile_meet_new_friends_reply",FRIENDING_ADMIN_BUMP:"source:messenger_growth:friending_admin_bump",NEW_MESSENGER_USER_ADMIN_BUMP:"source:messenger_growth:new_messenger_user_admin_bump",EVENT_UPCOMING_BUMP:"source:messenger_growth:event_upcoming_bump",PHOTO_TAG_BUMP:"source:messenger_growth:photo_tag_bump",WALL_POST_BUMP:"source:messenger_growth:wall_post_bump",FRIENDVERSARY_BUMP:"source:messenger_growth:friendversary_bump",CUSTOMIZATION_UPSELL_BUMP:"source:messenger_growth:customization_upsell_bump",MESSENGER_BROADCASTFLOW:"source:messenger:broadcastflow",PAGE_COMMENT_MSG:"source:pages:question_triggered_convo",COMMENT_PIVOT:"source:messenger_growth:comment_pivot",PAGE_HOVERCARD:"source:pages:hovercard",INSTANT_GAMES_GAME_UPDATE:"source:instant_games_game_updates",INSTANT_GAMES_GAME_SHARE:"source:instant_games_game_share",INSTANT_GAMES_MATCH_MAKING:"source:instant_games_match_making",INSTANT_GAMES_GROUP_CREATION:"source:instant_games_group_creation",MOBILE_GAME_SHARE:"source:games_app:mobile_game_share",PAGE_EMAIL_REPLY:"source:pages:email_reply",PAGE_HOME_PAGE_PANEL:"source:page_home_page_panel",GROUPSYNC_MESSENGER_GROUP_CREATE:"source:groupsync:messenger_group_create",GROUPSYNC_SYNC_FROM_FB:"source:groupsync:sync_from_fb",GROUPSYNC_NAMING:"source:groupsync:naming",GROUPSYNC_THREAD_INFO_SYNC_FROM_FB:"source:groupsync:thread_info_sync",WORK_GROUP_SYNCED_CHAT_CREATION:"source:work:groupchat:creation",WORK_DEFAULT_GROUP_SYNCED_CHAT_CREATION:"source:work:defaultgroupchat:creation",WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC:"source:work:groupchat:member_sync",WORK_GROUP_SYNCED_CHAT_DESCRIPTION_SYNC:"source:work:groupchat:description_sync",WORK_GROUP_SYNCED_CHAT_NAME_SYNC:"source:work:groupchat:name_sync",PAGE_PQI_MESSAGE:"source:pages:pqi_message",PAGE_PLUGIN_MESSAGE:"source:pages:page_plugin_message",WORKPLACE_CHAT_DESKTOP:"source:workchat:desktop",WORKPLACE_QUICKCHAT:"source:workchat:quickchat",WORKPLACE_SIGNUP_PAGE_ADMIN_INVITE:"source:workplace:signup_page_admin_invite",WORKPLACE_APPROVALS:"source:workplace:approvals",CREATOR_STUDIO:"source:creator_studio",FB_GROUP_ADMINSHIP_SYNC:"source:fbgroup:adminship_sync",FB_GROUP_CHAT_MUTE_MEMBER:"source:fbgroup:mute_member",MESSENGER_ADS_PARTIAL_AUTOMATED_REMINDER:"source:ads_partial_automated:reminder",MENTORSHIP:"source:mentorship",MENTORSHIP_DISCUSSION_TOPIC:"source:mentorship_discussion_topic",VOD_CONVERSATION:"source:vod_conversation",LOCAL_SEARCH_SERVICES:"source:local_search_services",YOUTH_VAULT:"source:youth_vault",MESSENGER_KIDS:"source:messenger_kids",STORY_REPLY:"source:story_reply",LOCAL_DEV_PLATFORM:"source:local_dev_platform",INSTAGRAM_DIRECT:"source:instagram_direct",WA_MSGR_INTEROP:"source:wa-msgr-interop",C4G_CURRENT_GROUP_MEMBERS_ENTINTEGRITY:"source:c4g_current_group_members_entintegrity",FB_STORY:"source:fb_story",FB_INBOX:"source:messaging_inbox_in_blue",FB_PROFILE:"source:fb_profile",KOTOTORO:"source:kototoro"})}),null);
__d("MercuryMessageSourceTags",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT:"source:chat",EMAIL:"source:email",MESSENGER:"source:messenger",MOBILE:"source:mobile",WORK_DESKTOP:"source:workchat:desktop"})}),null);
__d("MessagingTagUtils",["MercuryMessageSourceTags","MessagingSourceEnum","MessagingTagConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Set(Object.values(b("MessagingSourceEnum")));function a(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(g.has(e))return e}return b("MessagingSourceEnum").UNKNOWN}function h(a){__p&&__p();for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.split(b("MessagingTagConstants").app_id_root);if(e.length>1)return e[1].trim()}return null}function c(a,c){var d=[],e=h(a);e&&b("MessagingTagConstants").orca_app_ids.indexOf(e)!==-1&&d.push(b("MercuryMessageSourceTags").MESSENGER);b("MessagingTagConstants").chat_sources.indexOf(c)!==-1&&d.push(b("MercuryMessageSourceTags").CHAT);b("MessagingTagConstants").email_source===c&&d.push(b("MercuryMessageSourceTags").EMAIL);b("MessagingTagConstants").mobile_sources.indexOf(c)!==-1&&d.push(b("MercuryMessageSourceTags").MOBILE);a.indexOf(b("MessagingSourceEnum").WORKPLACE_CHAT_DESKTOP)!==-1&&d.push(b("MercuryMessageSourceTags").WORK_DESKTOP);return d}e.exports={getSourceFromTags:a,getSourceTags:c}}),null);
__d("P2PPaymentLogMessageSubtype",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail",REQUEST_CANCELED_BY_REQUESTER:"request_canceled_by_requester",REQUEST_DECLINED_BY_REQUESTEE:"request_declined_by_requestee",REQUEST_EXPIRED:"request_expired",REQUEST_REMINDER:"request_reminder",MONEY_RAIN_GAME_ENTRY_POINT:"money_rain_game_entry_point"})}),null);
__d("StoryAttachmentStyle",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FALLBACK:"fallback",SHARE:"share",SHARE_MEDIUM:"share_medium",SHARE_SEVERE:"share_severe",SHARE_PORTRAIT:"share_portrait",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",INSPIRATION_PHOTO:"inspiration_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",CANCELED_EVENT:"canceled_event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",TOPIC_FOLLOWING_TOPIC:"topic_following_topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",VIDEO_SHOP:"video_shop",INSPIRATION_VIDEO:"inspiration_video",MULTI_VIDEOS_STITCHED:"multi_videos_stitched",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_NON_LINK_VIDEO:"multi_share_non_link_video",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",MULTI_SHARE_FIXED_TEXT:"multi_share_fixed_text",MULTI_SHARE_CAROUSEL_FREE_SCROLL:"multi_share_carousel_free_scroll",MULTI_SHARE_CAROUSEL_FREE_SCROLL_SNAP_CENTER:"multi_share_carousel_free_scroll_snap_center",MULTI_SHARE_LARGER_CAROUSEL:"multi_share_larger_carousel",MULTI_SHARE_WITH_INSTANT_EXPERIENCE:"multi_share_with_instant_experience",MULTI_SHARE_WITH_PROMO_CARD:"multi_share_with_promo_card",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",BIRTHDAY_PERCEPTICONS:"birthday_percepticons",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_LEAGUE:"gametime_league",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",POST_CHANNEL:"post_channel",TEXT_FOR_COLLAGE:"text_for_collage",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",P2P_PAYMENT:"p2p_payment",P2P_SERVER_BUBBLE:"p2p_server_bubble",INSTANT_ARTICLE:"instant_article",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",GROUP_ADD_MEMBERS:"group_add_memebers",GROUP_MEMBER_ADDED:"group_member_added",RTC_CALL_LOG:"rtc_call_log",EVENTS_PENDING_POST_QUEUE:"events_pending_post_queue",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",RICH_MEDIA_COLLECTION:"rich_media_collection",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",GROUPSMASH_MEDIA:"groupsmash_media",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET_DEPRECATED:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",WELCOME_CARD_IMAGE:"welcome_card_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card",GOODWILL_THROWBACK_ANNIVERSARY_COLLAGE_CARD:"goodwill_throwback_anniversary_collage_card",MESSAGE_EVENT:"message_event",MESSAGE_THREAD:"message_thread",QUOTE:"quote",ELECTION_BALLOT_CONFIG:"election_ballot_config",AIRLINE_ITINERARY:"airline_itinerary",AIRLINE_UPDATE:"airline_update",PLACE_LIST:"place_list",IMPLICIT_PLACE_LIST_CONVERSION:"implicit_place_list_conversion",AIRLINE_CHECKIN_REMINDER:"airline_checkin_reminder",MINUTIAE_UNIT:"minutiae_unit",INSTANT_ARTICLE_PHOTO:"instant_article_photo",INSTANT_ARTICLE_VIDEO:"instant_article_video",PHOTO_LINK_SHARE:"photo_link_share",PHOTO_LINK_SHARE_WITH_INSTAGRAM_CONTEXT:"photo_link_share_with_instagram_context",BUSINESS_LOCATION:"business_location",GOODWILL_WEATHER:"goodwill_weather",CULTURAL_MOMENT_HOLIDAY_CARD:"cultural_moment_holiday_card",GROUP:"group",COMMENT_PLACE_INFO:"comment_place_info",COMMENT_PRODUCT_INFO:"comment_product_info",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD_IPB:"goodwill_throwback_friendversary_polaroids_card_ipb",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD_IPB:"goodwill_throwback_friendversary_collage_card_ipb",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",FUNDRAISER_FOR_STORY:"fundraiser_for_story",FUNDRAISER_PROFILE_FOR_CHARITY:"fundraiser_profile_for_charity",MESSAGE_LIVE_LOCATION:"message_live_location",MESSENGER_INVITE:"messenger_invite",MESSENGER_NATIVE_TEMPLATES:"messenger_native_templates",GAMES_INSTANT_PLAY:"games_instant_play",PROFILE_MEDIA:"profile_media",NATIVE_TEMPLATES:"native_templates",NATIVE_TEMPLATES_FOX:"native_templates_fox",NATIVE_TEMPLATES_KEEP_ATTACHED:"native_templates_keep_attached",GOODWILL_THROWBACK_VIDEO_BASIC:"goodwill_throwback_video_basic",COMMERCE_PRODUCT_MINI:"commerce_product_mini",COMMERCE_PRODUCT_MINI_LIST:"commerce_product_mini_list",COMMENT:"comment",MESSENGER_TEAM_BOT_SHARE:"messenger_team_bot_share",LIVE_VIDEO_SCHEDULE:"live_video_schedule",PRODUCT_ITEM:"product_item",PLATFORM_INSTANT_APP:"platform_instant_app",YEAR_OVERVIEW:"year_overview",NATIVE_COMPONENT_FLOW_BOOKING_REQUEST:"native_component_flow_booking_request",FRIEND_REQUEST:"friend_request",MESSENGER_GROUP_JOINABLE_LINK:"messenger_group_joinable_link",MESSENGER_GROUP_JOINABLE_LINK_V2:"messenger_group_joinable_link_v2",SOCIAL_SEARCH_CONVERSION_PROMPT:"social_search_conversion_prompt",MDOTME_USER_LINK:"mdotme_user_link",DYNAMIC_MULTI_SHARE_ITEMS:"dynamic_multi_share_items",EVENT_REMINDER:"event_reminder",INSTANT_GAMES_SHARE_MESSAGE:"instant_games_share_message",INSTANT_GAMES_LEADERBOARD_UPDATE:"instant_games_leaderboard_update",INSTANT_GAMES_CUSTOM_UPDATE:"instant_games_custom_update",MESSENGER_PLATFORM_COMPACT_ITEM:"messenger_platform_compact_item",MESSENGER_PLATFORM_COVER_ITEM:"messenger_platform_cover_item",MULTI_SHARE_NON_LINK_VIDEO_AUTO_SCROLL:"multi_share_non_link_video_auto_scroll",ENDORSEMENT:"endorsement",OFFER_VIEW_LIVE_COUNTDOWN:"offer_view_live_countdown",ENHANCED_LINK_REDDIT_POST:"enhanced_link_reddit_post",MESSENGER_COMMERCE_COVER_ITEM:"messenger_commerce_cover_item",ENHANCED_LINK_YELP_BUSINESS:"enhanced_link_yelp_business",PAGES_PLATFORM_LEAD_GEN:"pages_platform_lead_gen",NATIVE_STORY:"native_story",MFS_BILL_PAY_CREATION_UPDATE:"mfs_bill_pay_creation_update",MFS_BILL_PAY_REFERENCE_CODE_UPDATE:"mfs_bill_pay_reference_code_update",MFS_BILL_PAY_AGENT_CASH_IN_UPDATE:"mfs_bill_pay_agent_cash_in_update",ISSUE_POSITION:"issue_position",PAGES_PLATFORM_BOOKING_MESSAGE:"pages_platform_booking_message",EXTERNAL_GALLERY:"external_gallery",MEME_SHARE:"meme_share",MESSENGER_PLATFORM_ELEMENT:"messenger_platform_element",INSTANT_GAMES_SHARE_SCORE_MESSAGE:"instant_games_share_score_message",MESSENGER_PLATFORM_BUTTON_LIST:"messenger_platform_button_list",BALLOT:"ballot",LIGHTWEIGHT_ACTION:"lightweight_action",TAROT_DIGEST:"tarot_digest",EVENT_TOUR:"event_tour",ADAPTIVE_MEDIA:"adaptive_media",DYNAMIC_GAME_BOARD:"dynamic_game_board",PAYMENT_PLATFORM:"payment_platform",OMNI_M_FLOW:"omni_m_flow",GROUP_QUIZ:"group_quiz",TRIAL_AD:"trial_ad",TEEM_COLLECTIONS:"teem_collections",CRISIS_DONATION:"crisis_donation",CRISIS_STATUS:"crisis_status",CRISIS_SHARE:"crisis_share",CRISIS_MARK_SAFE:"crisis_mark_safe",CRISIS_LISTING:"crisis_listing",VR_CONTENT:"vr_content",VIDEO_RECOMMENDATION_HSCROLL:"video_recommendation_hscroll",VIDEO_TRAILER:"video_trailer",SHOW_PAGE_SHARE:"show_page_share",MFS_ATTACHMENT:"mfs_attachment",MFS_TIME_SENSITIVE_ATTACHMENT:"mfs_time_sensitive_attachment",GROUP_TASK:"group_task",CHECKLIST:"checklist",VIDEO_RECOMMENDATION_SINGLETON:"video_recommendation_singleton",PAGE_REVIEW_PROMPT:"page_review_prompt",VIDEO_SHOW:"video_show",UNCONNECTED_VIDEO:"unconnected_video",SHOW_SHARE:"show_share",JOB_SEARCH_JOB_APPLICATION:"job_search_job_application",PAGE_MESSENGER_ATTACHMENT:"page_messenger_attachment",CONTACT_YOUR_REP:"contact_your_rep",LOCATION_EXTENSION:"location_extension",PLACE_RECOMMENDATION:"place_recommendation",JOB_SEARCH_JOB_OPENING:"job_search_job_opening",PAGE_MESSAGE_ONLINE_INDICATOR:"page_message_online_indicator",LOCAL_PIVOT:"local_pivot",ORION_REQUEST_NEW:"orion_request_new",PHOTO_WITH_SHIELD:"photo_with_shield",PLAYABLE_AD:"playable_ad",FUN_FACT_PROMPT:"fun_fact_prompt",FUN_FACT_STACK:"fun_fact_stack",FATIGUED_SHARE:"fatigued_share",DISCUSSION_QUESTION:"discussion_question",PARTIES_INVITE:"parties_invite",PROFILE_INTRO_CARD_BIO:"profile_intro_card_bio",PAGES_SHARE:"pages_share",PRODUCT_RECOMMENDATION_LIST:"product_recommendation_list",VISUAL_POLL:"visual_poll",MULTI_PLACE_RECOMMENDATION:"multi_place_recommendation",PAGE_IN_COMMENT:"page_in_comment",PAGE_ANNOUNCEMENT:"page_announcement",MESSENGER_PLATFORM_MEDIA_ATTACHMENT:"messenger_platform_media_attachment",SCHEDULED_VIDEO_ANNOUNCEMENT:"scheduled_video_announcement",HSCROLL_ITEM:"hscroll_item",MESSENGER_CALL_LOG:"messenger_call_log",PAGE_REVIEW_UPDATE:"page_review_update",LOYALTY_CARD_OFFER:"loyalty_card_offer",GOODWILL_GRID:"goodwill_grid",TRAVEL_PLAN:"travel_plan",FIND_PLAYERS:"find_players",ASSET3D:"asset3d",MESSENGER_GROUP_PERSONAL_LINK:"messenger_group_personal_link",FREQUENTLY_ASKED_QUESTION:"frequently_asked_question",STORY_LIST:"story_list",GOODWILL_SHARED_CARD:"goodwill_shared_card",PAYMENT_BUBBLE_VIEW:"PAYMENT_BUBBLE_VIEW",POST_TO_EVENT_CREATE:"post_to_event_create",MONTAGE_DIRECT:"montage_direct",NEO_INVITATION:"NEO_INVITATION",NATIVE_TEMPLATES_LINK_SHARE_TEST:"native_templates_link_share_test",GOODWILL_HSCROLL:"goodwill_hscroll",NEO_KID_INITIATE_FRIENDING:"NEO_KID_INITIATE_FRIENDING",NEO_VIDEO_PROMPT:"NEO_VIDEO_PROMPT",EVENT_MICRO_ATTACHMENT:"event_micro_attachment",SAVED_LIST:"saved_list",LOCAL_GUIDE:"local_guide",MEET_UP_EVENT:"meet_up_event",DONATION:"donation",FUNDRAISER_FB_SEEDING_GIFT:"fundraiser_fb_seeding_gift",BREAKING_NEWS:"breaking_news",GOODWILL_COLLAGE:"goodwill_collage",LEAD_FORM:"lead_form",LEAD_FORM_USER_INFO:"lead_form_user_info",EVENT_TICKET_ORDER:"event_ticket_order",PROFILE_CHANNEL:"profile_channel",ICE_BREAKER:"ICE_BREAKER",MOVIE:"movie",ALOHA_CALL:"aloha_call",TIP_JAR_PAYMENT:"tip_jar_payment",COMMENT_MESSAGE_INFO:"comment_message_info",CASH_ON_DELIVERY_ORDER:"cash_on_delivery_order",VOTER_REGISTRATION_DRIVE:"voter_registration_drive",VOTING_INFO:"voting_info",LIVING_ROOM:"living_room",ACHIEVEMENT_POST:"achievement_post",M_BIRTHDAY_REMINDER:"m_birthday_reminder",INSIGHTS_CHART:"insights_chart",GROUP_PROACTIVE_FLAGGED_POST_QUEUE:"group_proactive_flagged_post_queue",GROUP_ACCEPT_RULE_TO_UNMUTE:"group_accept_rule_to_unmute",SHOW_CLICK_TO_WATCH_TAB:"show_click_to_watch_tab",SHOW_CLICK_TO_WATCH_TAB_V2:"show_click_to_watch_tab_v2",SHOW_CLICK_TO_WATCH_TAB_V3:"show_click_to_watch_tab_v3",SHOW_CLICK_TO_WATCH_TAB_V4:"show_click_to_watch_tab_v4",SHOW_MASKED:"show_masked",SHOW_CONTINUE_WATCHING:"show_continue_watching",WATCH_CLICK_STORY_HEADER_TO_WATCH_TAB:"watch_click_story_header_to_watch_tab",FOX_ALBUM:"fox_album",TOOL_SHARE:"tool_share",PHONE_REMOVED_ACTION_LIST:"phone_removed_action_list",AMP:"amp",LDP_APP_INSTANCE:"ldp_app_instance",PAGE_RECOMMENDATION_V2:"page_recommendation_v2",PLAY_WITH_FRIENDS:"play_with_friends",BLOOD_REQUEST:"blood_request",HIGH_SCHOOL_COMMUNITY_INVITE:"high_school_community_invite",CIVIC_ACTION_POST:"civic_action_post",SCHEDULED_LIVE_VIDEO:"scheduled_live_video",GAMESHOW:"gameshow",GAMESHOW_INVITE:"gameshow_invite",MK_FRIEND_REQUEST:"mk_friend_request",GOODWILL_PHOTO_CIRCLE:"goodwill_photo_circle",SERVICES_APPOINTMENT_AVAILABILITY:"services_appointment_availability",NEO_SOCIAL_INVITATION:"neo_social_invitation",NEO_KID_INVITATION:"neo_kid_invitation",GROUP_SELL_PRODUCT_ITEM_CONDENSED:"group_sell_product_item_condensed",GROUP_SELL_PRODUCT_ITEM_MARK_AS_PENDING:"group_sell_product_item_mark_as_pending",GAMES_VIDEO:"games_video",MOVIE_WITH_SHOWTIMES:"movie_with_showtimes",WORK_CONTENT_ATTACHMENT:"work_content_attachment",GROUP_SAFETY_HUB:"group_safety_hub",NEWS_STORYLINE:"news_storyline",EVENT_TICKET_REQUEST:"event_ticket_request",GROUP_APPLICATION:"group_application",MESSAGE_MULTIPLE_LOCATIONS:"message_multiple_locations",TODO_LIST:"todo_list",PERSONAL_REMINDER:"personal_reminder",ARTICLE_MESSAGE:"article_message",PERSONAL_REMINDER_LIST:"personal_reminder_list",GAMES_APP:"games_app",GAMES_APP_SHARED:"games_app_shared",MOBILE_GAME_SHARE:"mobile_game_share",MONTAGE_MEDIA_EFFECT:"montage_media_effect",GROUPS_VOTER_REGISTRATION_DRIVE:"groups_voter_registration_drive",MONTAGE_SHARE:"montage_share",WEC_MESSAGE:"wec_message",INSTAGRAM_DIRECT_MESSAGE_ATTACHMENT:"instagram_direct_message_attachment",GROUP_APPLICATION_CTA:"group_application_cta",MENTORSHIP_CURRICULUM_STEP:"mentorship_curriculum_step",SCHEDULED_LIVING_ROOM:"scheduled_living_room",STORY_ADS_SURVEY:"story_ads_survey",MESSENGER_FORM_PROGRESS_ATTACHMENT:"messenger_form_progress_attachment",VIDEO_COMMERCE_INTEREST:"video_commerce_interest",PAGES_COMMERCE_BUYER_INTENT:"pages_commerce_buyer_intent",BREAKING_NEWS_STORY_GALLERY:"breaking_news_story_gallery",BRANDING_PLAYABLE_AD:"branding_playable_ad",PAGE_SURFACE_MENU_ITEM:"page_surface_menu_item",CIVIC_PROPOSAL:"civic_proposal",VIDEO_LIVING_ROOM_MESSENGER:"video_living_room_messenger",IMAGE_SHARE_NO_OVERLAY:"image_share_no_overlay",JOIN_GROUP_CTA:"join_group_cta",ASSISTANT_DRAFT_MESSAGE:"assistant_draft_message",ASSISTANT_CONTACT_INFO:"assistant_contact_info",NEO_DRAW_AND_GUESS_GAME_REQUEST:"neo_draw_and_guess_game_request",SOCIAL_LEARNING_UNIT_CREATED:"social_learning_unit_created",SOCIAL_LEARNING_UNIT_COMPLETED:"social_learning_unit_completed",GOODWILL_THROWBACK_SINGLE_PHOTO:"goodwill_throwback_single_photo",FAN_FUNDING_SUPPORT_CREATOR_CTA:"fan_funding_support_creator_cta",GOODWILL_VIDEO_SHARED_VIDEO:"goodwill_video_shared_video",INSTANT_GAMES_TOURNAMENT:"instant_games_tournament",SCHEDULED_LIVE_VIDEO_POST:"scheduled_live_video_post",CHAT_COMMAND_RESULT:"chat_command_result",CROSSROADS:"crossroads",MOBILE_GAME_THREAD_SHARE:"mobile_game_thread_share",SHOW_CLICK_TO_WATCH_TOPIC:"show_click_to_watch_topic",LIFE_EVENT_FB_STORY:"life_event_fb_story",GROUP_KEYWORD_ALERTED_QUEUE:"group_keyword_alerted_queue",CIVIC_PROPOSAL_POST_QUEUE:"civic_proposal_post_queue",PARENT_APPROVED_PLAIN_TEXT_BOT_MESSAGE:"parent_approved_plain_text_bot_message",LIVE_VIDEO_REHEARSAL:"live_video_rehearsal",ASSISTANT_CONTACT_INFO_LIST:"assistant_contact_info_list",PARENT_APPROVED_IMAGE_AND_TEXT_BOT_MESSAGE:"parent_approved_image_and_text_bot_message",LIVE_VIDEO_SCHEDULED_REHEARSAL:"live_video_scheduled_rehearsal",LIVE_VIDEO_SCHEDULED_POST_REHEARSAL:"live_video_scheduled_post_rehearsal",GROUPS_LINKED_GROUP_FEED_HSCROLL:"groups_linked_group_feed_hscroll",SCHEDULED_LIVING_ROOM_POST:"scheduled_living_room_post",EVENT_ATTENDANCE_CONFIRMATION:"event_attendance_confirmation",ATTACHMENT_FOOTER_SIMPLE_HEADLINE:"attachment_footer_simple_headline",ATTACHMENT_FOOTER_CTA:"attachment_footer_cta",ATTACHMENT_FOOTER_ACCENT_COLOR:"attachment_footer_accent_color",CLICK_TO_WATCH_TAB_WARION_V1:"click_to_watch_tab_warion_v1",COMMERCE_UPSELL_MESSAGE:"commerce_upsell_message",PROFILE_SONG:"profile_song",MENTORSHIP_DISCUSSION_TOPIC_SET:"mentorship_discussion_topic_set",LINK_SOCIAL_CONTEXT:"link_social_context",POLITICAL_CANDIDATE_VIDEO:"political_candidate_video",TWEENS_WOULD_YOU_RATHER:"tweens_would_you_rather",TWEENS_INTEREST_CONTENT:"tweens_interest_content",SERVICES_GENERIC_ADMIN_TEXT:"services_generic_admin_text",MENTORSHIP_H_SCROLL:"mentorship_h_scroll",CRS_FEED_LINK_LARGE:"crs_feed_link_large",CRS_FEED_LINK_SMALL:"crs_feed_link_small",CRS_FEED_PHOTO_SMALL:"crs_feed_photo_small",CRS_FEED_PHOTO_LARGE:"crs_feed_photo_large",ANONYMOUS_AUTHOR_INFO:"anonymous_author_info",MENTORSHIP_XMA:"mentorship_xma",GEMSTONE:"gemstone",SHOW_EPISODE:"show_episode",RECRUITING_CANDIDATE:"recruiting_candidate",RECRUITING_RECOMMENDED_CANDIDATES:"recruiting_recommended_candidates",VIDEO_LIST:"video_list",GROUPS_BUY_SELL_TAB_SALE_ITEM:"groups_buy_sell_tab_sale_item",ALBUM_SALE_ITEM:"album_sale_item",PHOTO_SALE_ITEM:"photo_sale_item",MARKETPLACE_GENERIC_ADMIN_TEXT:"marketplace_generic_admin_text",PARENT_APPROVED_USER_SCHOOL_REQUEST:"parent_approved_user_school_request",PARENT_APPROVED_REMIX_PHOTO_REQUEST:"PARENT_APPROVED_REMIX_PHOTO_REQUEST",ANONYMOUS_POST_CONTENT:"anonymous_post_content",TWEENS_TOPIC_STORY:"tweens_topic_story",NEO_KID_PARENT_INVITATION:"neo_kid_parent_invitation",GAMING_VIDEO_CHAT_ATTACHMENT:"gaming_video_chat_attachment",GAMING_VIDEO_CLIP_ATTACHMENT:"gaming_video_clip_attachment",MARKETPLACE_RATE_SELLER_REQUEST:"marketplace_rate_seller_request",GROUP_INVITE_NONMEMBER_MENTIONED:"group_invite_nonmember_mentioned"})}),null);
__d("MessengerMessageTransformer.bs",["bs_array","bs_block","bs_string","FBIDCheck","getByPath","MercuryIDs","bs_caml_format","CurrentUser","bs_js_primitive","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","MessageUnsendabilityStatus.bs","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","MessengerAttachmentTransformer.bs","InstantGameUpdateXMATUpdateType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();a=a.blob_attachments;var c=[];a==null||b("bs_array").iter(function(a){__p&&__p();if(a.__typename==="MessageImage"){c.push(b("bs_block").__(0,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,blurred_image_uri:a.blurred_image_uri,filename:a.filename,preview:a.preview,large_preview:a.large_preview,thumbnail:a.thumbnail,legacy_attachment_id:a.legacy_attachment_id,original_dimensions:a.original_dimensions,original_extension:a.original_extension,render_as_sticker:a.render_as_sticker,photo_encodings:a.photo_encodings}]));return 0}else if(a.__typename==="MessageAnimatedImage"){c.push(b("bs_block").__(1,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,animated_image:a.animated_image,legacy_attachment_id:a.legacy_attachment_id,preview_image:a.preview_image,original_dimensions:a.original_dimensions}]));return 0}else if(a.__typename==="MessageAudio"){c.push(b("bs_block").__(2,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,is_voicemail:a.is_voicemail,audio_type:a.audio_type,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else if(a.__typename==="MessageVideo"){c.push(b("bs_block").__(3,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,legacy_attachment_id:a.legacy_attachment_id,chat_image:a.chat_image,video_type:a.video_type,original_dimensions:a.original_dimensions,large_image:a.large_image,inbox_image:a.inbox_image}]));return 0}else if(a.__typename==="MessageFile"){c.push(b("bs_block").__(4,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,url:a.url,content_type:a.content_type,is_malicious:a.is_malicious,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else return 0},a);return c}function h(a,c,d){var e=c.call_capture_attachments;if(e==null)return[];else return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:null,blob_attachments:g({blob_attachments:b("bs_array").map(function(a){return a.node},e.edges)}),sticker:null},c.message_id,d)}function i(a,c,d,e,f){__p&&__p();if(c.__typename==="GroupPollExtensibleMessageAdminText"){var g=c.question,i;if(g==null)i=[{},null];else{var j=Object.assign({},g);Object.assign(j,{total_count:c.total_count,options:b("bs_array").map(function(a){var c=Object.assign({},a);return Object.assign(c,{total_count:a.voters.nodes.length,voters:b("bs_array").map(function(a){return a.id},a.voters.nodes)})},g.options.nodes)});i=[j,g.id]}j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:{event_type:b("bs_string").lowercase(c.event_type),question_id:i[1],question_json:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(JSON.stringify(i[0])))}}}else if(c.__typename==="InstantGameUpdateExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:{game_id:b("getByPath")(c,["game","id"]),update_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("InstantGameUpdateXMATUpdateType")[c.update_type])),collapsed_text:c.collapsed_text,expanded_text:c.expanded_text,leaderboard_json:c.leaderboard_json,cta_url:b("getByPath")(c,["instant_game_update_data","cta_url"]),cta_title:b("getByPath")(c,["instant_game_update_data","cta_title"]),custom_image_url:b("getByPath")(c,["instant_game_update_data","photo","image","uri"]),template:b("getByPath")(c,["instant_game_update_data","template"])}};else if(c.__typename==="MessengerAdContextAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:{ad_url:c.ad_url}};else if(c.__typename==="AdExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:{ad_client_token:c.ad_client_token,ad_id:c.ad_id,ad_preferences_link:c.ad_preferences_link,ad_properties:c.ad_properties}};else if(c.__typename==="MessengerCallLogExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:Object.assign(Object.assign({},c),{call_capture_attachments:h(a,c,f)})};else if(c.__typename==="ThemeColorExtensibleMessageAdminText"||c.__typename==="ThreadIconExtensibleMessageAdminText"||c.__typename==="ThreadNicknameExtensibleMessageAdminText"||c.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||c.__typename==="AddContactExtensibleMessageAdminText"||c.__typename==="RtcCallLogExtensibleMessageAdminText"||c.__typename==="GameScoreExtensibleMessageAdminText"||c.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||c.__typename==="MessengerGrowthGenericExtensibleMessageAdminText"||c.__typename==="PartiesInviteExtensibleMessageAdminText"||c.__typename==="AppointmentReminderExtensibleMessageAdminText"||c.__typename==="LinkCTAExtensibleMessageAdminText"||c.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"||c.__typename==="ServicesLeadGenSurveyExtensibleMessageAdminText"||c.__typename==="ServicesLeadGenSurveyEditExtensibleMessageAdminText"||c.__typename==="MessengerIcebreakerVoteCastExtensibleMessageAdminText"||c.__typename==="PagesMarkAsPaidExtensibleMessageAdminText"||c.__typename==="PagesMarkAsPaidNewExtensibleMessageAdminText"||c.__typename==="WorkBotInstalledExtensibleMessageAdminText"||c.__typename==="PageThreadActionSystemAddDetailsXMAT")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:Object.assign({},c)};else if(c.__typename==="LightweightEventCreateExtensibleMessageAdminText"||c.__typename==="LightweightEventDeleteExtensibleMessageAdminText"||c.__typename==="LightweightEventNotifyBeforeEventExtensibleMessageAdminText"||c.__typename==="LightweightEventNotifyExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateLocationExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateTimeExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateTitleExtensibleMessageAdminText"||c.__typename==="LightweightEventRSVPExtensibleMessageAdminText"){g=c.event_reminder;if(g==null)i=void 0;else{a=g.lightweight_event_creator;f=a==null?void 0:a.id;a=g.location_page;a=a==null?void 0:a.id;var k=g.timezone_id;k=k==null?void 0:k.timezone;var l=g.location_coordinates;l=l==null?{latitude:void 0,longitude:void 0}:l;var m=g.event_reminder_members;m=m==null?void 0:m.edges;i={event_creator_id:f,event_id:g.id,event_location_id:a,event_location_name:g.location_name,event_seconds_to_notify_before:g.seconds_to_notify_before,event_time:g.time,event_end_time:g.end_time,event_timezone:k,event_title:g.event_title,event_type:g.lightweight_event_type,event_track_rsvp:g.allows_rsvp,latitude:l.latitude,longitude:l.longitude,guest_state_list:m,guest_id:c.guest_id,guest_status:c.guest_status}}j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:i}}else j=c.__typename==="AdReplyMessageAdminText"?{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:{ad_url:c.ad_url,should_show_url:c.should_show_url}}:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[d])),untypedData:void 0};return{log_message_body:e,log_message_data:j,log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}}function j(a){return b("bs_array").map(function(a){if(a==="p2p_transfer")return b("StoryAttachmentStyle").ORION;else if(a==="p2p_payment_request")return b("StoryAttachmentStyle").ORION_REQUEST;else return a},a)}function k(a){__p&&__p();var c=a.target,d;if(c==null)d=null;else if(c.__typename==="CrisisListing")d=b("bs_block").__(0,[{listing_type:c.listing_type,listing_category:c.listing_category,map_image:c.map_image}]);else if(c.__typename==="MoneyTransfer")d=b("bs_block").__(1,[{sender:c.sender,receiver:c.receiver,transfer_id:c.transfer_id,bubble_view:c.bubble_view}]);else if(c.__typename==="PeerToPeerTransfer")d=b("bs_block").__(2,[{sender:c.sender,receiver_profile:c.receiver_profile,transaction_amount:c.transaction_amount,transfer_status:c.transfer_status,transfer_id:c.transfer_id,completedTime:c.completedTime,updatedTime:c.updatedTime,creationTime:c.creationTime,transfer_context:c.transfer_context,amount_fb_discount:c.amount_fb_discount,funds_availability:c.funds_availability,group_thread_fbid:c.group_thread_fbid,platform_item:c.platform_item,id:c.id,status_description:c.status_description,bubble_view:c.bubble_view,currency_amount:c.currency_amount}]);else if(c.__typename==="PeerToPeerPaymentRequest")d=b("bs_block").__(3,[{amount:c.amount,transaction_amount:c.transaction_amount,requester:c.requester,requestee:c.requestee,request_status:c.request_status,request_theme:c.request_theme,id:c.id,memo_text:c.memo_text,transfer:c.transfer,creation_time:c.creation_time,group_thread_fbid:c.group_thread_fbid,updated_time:c.updated_time,status_description:c.status_description,bubble_view:c.bubble_view,individual_requests:c.individual_requests}]);else if(c.__typename==="PaymentPlatformAttachment")d=b("bs_block").__(4,[{payment_modules_client:c.payment_modules_client,is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list,components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,invoicer_id:c.invoicer_id}]);else if(c.__typename==="MomentsAppMessengerInvitation")d=b("bs_block").__(5,[{snippet:c.snippet}]);else if(c.__typename==="MomentsAppMessengerPhotoRequest")d=b("bs_block").__(6,[{snippet:c.snippet}]);else if(c.__typename==="MessengerRetailPromotion")d=b("bs_block").__(7,[{message:c.message,call_to_actions:c.call_to_actions,promotion_items:c.promotion_items}]);else if(c.__typename==="MessengerBusinessMessage")d=b("bs_block").__(8,[{message:c.message,call_to_actions:c.call_to_actions,business_items:c.business_items}]);else if(c.__typename==="Video")d=b("bs_block").__(9,[{video_id:c.video_id,video_messenger_cta_payload:c.video_messenger_cta_payload}]);else if(c.__typename==="PagesPlatformLeadGenInfo")d=b("bs_block").__(10,[{field_data_list:c.field_data_list}]);else if(c.__typename==="MessageLiveLocation")d=b("bs_block").__(11,[{live_location_id:c.live_location_id,is_expired:c.is_expired,expiration_time:c.expiration_time,sender:c.sender,coordinate:c.coordinate,location_title:c.location_title,sender_destination:c.sender_destination,stop_reason:c.stop_reason}]);else if(c.__typename==="QuickInvite")d=b("bs_block").__(12,[{id:c.id,invite_sender:c.invite_sender,invite_recipient:c.invite_recipient}]);else if(c.__typename==="PagesPlatformBookingMessage")d=b("bs_block").__(13,[{id:c.id,page:c.page,message_bubble_type:c.message_bubble_type,user:c.user,native_component_flow_request:c.native_component_flow_request}]);else if(c.__typename==="ServicesAppointmentAvailability")d=b("bs_block").__(14,[{id:c.id,page:c.page,consumer:c.consumer,formatted_available_time_ranges:c.formatted_available_time_ranges,has_booking_request_created:c.has_booking_request_created}]);else if(c.__typename==="ServicesGenericAdminText")d=b("bs_block").__(15,[{id:c.id}]);else if(c.__typename==="GenieMessage")d=b("bs_block").__(16,[{genie_sender:c.genie_sender,story_attachment:c.story_attachment}]);else if(c.__typename==="Event")d=b("bs_block").__(17,[{eventID:c.eventID,guestStatus:c.guestStatus,canViewerJoin:c.canViewerJoin,timeString:c.timeString,event_place:c.event_place,social_context:c.social_context,watchStatus:c.watchStatus,connection_style:c.connection_style,canViewerWatch:c.canViewerWatch,profile_picture:c.profile_picture,name:c.name,start_timestamp:c.start_timestamp}]);else if(c.__typename==="ExternalSong")d=b("bs_block").__(18,[{application_name:c.application_name,artist_names:c.artist_names,audio_url:c.audio_url,duration_ms:c.duration_ms,music_title:c.music_title}]);else if(c.__typename==="LightweightAction")d=b("bs_block").__(19,[{lwa_state:c.lwa_state,lwa_type:c.lwa_type}]);else if(c.__typename==="MessengerRetailItem")d=b("bs_block").__(20,[{id:c.id,name:c.name,desc:c.desc,thumb_url:c.thumb_url,item_url:c.item_url,source:c.source,image_aspect_ratio:c.image_aspect_ratio,first_metaline:c.first_metaline,second_metaline:c.second_metaline,third_metaline:c.third_metaline,default_action:c.default_action,call_to_actions:c.call_to_actions}]);else if(c.__typename==="AgentItemSuggestion")d=b("bs_block").__(21,[{id:c.id,desc:c.desc,total_cost:c.total_cost,merchant_name:c.merchant_name,target_url:c.target_url,thumb_url:c.thumb_url,raw_amount:c.raw_amount,payment:c.payment,price_amount:c.price_amount,price_currency:c.price_currency,name:c.name}]);else if(c.__typename==="FundraiserPersonToCharity"||c.__typename==="FundraiserPersonForPerson"){var e=c.fundraiser_detailed_progress_text,f=c.fundraiser_subtitle_text,g=c.focused_cover_photo;d=b("bs_block").__(22,[{fundraiserID:c.id,canDonate:c.can_donate,hasViewerDonated:c.has_viewer_donated,fundraiserDetailedProgressText:e==null?null:e.text,fundraiserSubtitleText:f==null?null:f.text,focusedCoverPhoto:g==null?null:{src:g.photo.image.uri,data:{height:g.photo.image.height,width:g.photo.image.width}}}])}else d=c.__typename==="MessengerRetailReceipt"?b("bs_block").__(23,[{account_holder_name:c.account_holder_name,adjustments:c.retail_adjustments,cancellation_url:c.cancellation_url,items:c.retail_items,merchant_name:c.merchant_name,messenger_commerce_bubble_type:c.bubble_type,order_id:c.receipt_id,order_time:c.order_time_for_display,order_url:c.receipt_url,payment_method:c.order_payment_method,receipt_id:c.id,recipient_name:c.recipient_name,shipping_cost:c.shipping_cost,shipping_method:c.shipping_method,status:c.status,structured_address:c.structured_address,subtotal:c.subtotal,total_cost:c.total,total_tax:c.tax,partner_logo:c.partner_log}]):c.__typename==="JobApplication"?b("bs_block").__(24,[{id:c.id}]):c.__typename==="GroupCommerceProductItem"?b("bs_block").__(25,[{group_commerce_item_description:c.group_commerce_item_description,group_commerce_item_seller:c.group_commerce_item_seller,formatted_price:c.formatted_price,group_commerce_item_title:c.group_commerce_item_title,primary_photo:c.primary_photo,url:c.url}]):c.__typename==="Page"?b("bs_block").__(26,[{address:c.address,top_category_name:c.top_category_name,cover_photo:c.cover_photo,location:c.location,name:c.name,overall_star_rating:c.overall_star_rating,id:c.id,price_range_description:c.price_range_description}]):c.__typename==="MessengerEventReminder"?b("bs_block").__(27,[{is_active:c.is_active,event_title:c.event_title,time:c.time}]):c.__typename==="FormProgressStoryAttachment"?b("bs_block").__(54,[{progress:c.progress,url:c.url}]):c.__typename==="AirlineBoardingPassCollectionMessageAttachment"?b("bs_block").__(28,[{tint_color:c.tint_color,logo:c.logo,flight_label:c.flight_label,boarding_time_label:c.boarding_time_label,departure_label:c.departure_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,flight_terminal_label:c.flight_terminal_label,flight_gate_label:c.flight_gate_label,view_boarding_pass_cta_label:c.view_boarding_pass_cta_label,boarding_passes:c.boarding_passes,share_cta_label:c.share_cta_label,message_cta_label:c.message_cta_label,boarding_pass_title_label:c.boarding_pass_title_label,boarding_pass_error_title_label:c.boarding_pass_error_title_label}]):c.__typename==="AirlineCheckInReminderMessageAttachment"?b("bs_block").__(29,[{pnr_number:c.pnr_number,tint_color:c.tint_color,checkin_url:c.checkin_url,booking_number_label:c.booking_number_label,flight_label:c.flight_label,arrival_time_label:c.arrival_time_label,departure_time_label:c.departure_time_label,checkin_cta_label:c.checkin_cta_label,logo:c.logo,flight_infos:c.flight_infos}]):c.__typename==="AirlineUpdateMessageAttachment"?b("bs_block").__(30,[{pnr_number:c.pnr_number,tint_color:c.tint_color,update_type:c.update_type,departure_time_label:c.departure_time_label,arrival_time_label:c.arrival_time_label,booking_number_label:c.booking_number_label,flight_gate_label:c.flight_gate_label,flight_label:c.flight_label,flight_status_label:c.flight_status_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,logo:c.logo,flight_info:c.flight_info,hightlighted_labels:c.hightlighted_labels}]):c.__typename==="AirlineItineraryMessageAttachment"?b("bs_block").__(31,[{confirmation_number:c.confirmation_number,pnr_number:c.pnr_number,tint_color:c.tint_color,formatted_total:c.formatted_total,itemized_price_infos:c.itemized_price_infos,formatted_tax:c.formatted_tax,formatted_base_price:c.formatted_base_price,passenger_infos:c.passenger_infos,logo:c.logo,aircraft_type_label:c.aircraft_type_label,arrival_time_label:c.arrival_time_label,base_price_label:c.base_price_label,booking_number_label:c.booking_number_label,cabin_type_label:c.cabin_type_label,departure_time_label:c.departure_time_label,flight_confirmation_label:c.flight_confirmation_label,flight_date_label:c.flight_date_label,flight_label:c.flight_label,flight_terminal_label:c.flight_terminal_label,itinerary_error_title_label:c.itinerary_error_title_label,itinerary_title_label:c.itinerary_title_label,passenger_name_label:c.passenger_name_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,purchase_summary_label:c.purchase_summary_label,taxes_label:c.taxes_label,total_label:c.total_label,view_details_cta_label:c.view_details_cta_label,itinerary_legs:c.itinerary_legs}]):c.__typename==="MessengerRetailShipmentTrackingEvent"?b("bs_block").__(32,[{id:c.id,shipment:c.shipment,tracking_event_time_for_display:c.tracking_event_time_for_display,shipment_tracking_event_type:c.shipment_tracking_event_type,messenger_commerce_location:c.messenger_commerce_location,tracking_event_description:c.tracking_event_description,bubble_type:c.bubble_type}]):c.__typename==="MessengerRetailShipment"?b("bs_block").__(33,[{id:c.id,tracking_number:c.tracking_number,shipdate_for_display:c.shipdate_for_display,estimated_delivery_time_for_display:c.estimated_delivery_time_for_display,commerce_origin:c.commerce_origin,commerce_destination:c.commerce_destination,retail_carrier:c.retail_carrier,shipment_tracking_events:c.shipment_tracking_events,receipt:c.receipt,recipient:c.recipient,retail_shipment_items:c.retail_shipment_items,bubble_type:c.bubble_type}]):c.__typename==="TicketOrderAttachment"?b("bs_block").__(35,[{ticket_order_id:c.ticket_order_id,ticket_order:c.ticket_order,event:c.event}]):c.__typename==="EventTicketRequest"?b("bs_block").__(36,[{id:c.id,guest_notes:c.guest_notes,event:c.event}]):c.__typename==="EventAttendanceConfirmation"?b("bs_block").__(37,[{id:c.id,num_guests:c.num_guests,attendee_answers:c.attendee_answers,event:c.event}]):c.__typename==="LeadGenDeepLinkData"?b("bs_block").__(34,[{id:c.id,cover_image:c.cover_image,headline:c.headline,name:c.name,page:c.page}]):c.__typename==="UserLeadGenInfo"?b("bs_block").__(38,[{id:c.id,field_data:c.field_data}]):c.__typename==="WECMessageAudio"?b("bs_block").__(42,[{id:c.id,filename:c.filename,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,duration:c.duration}]):c.__typename==="IceBreakerMessageAttachment"?b("bs_block").__(39,[{ice_breaker_title:c.ice_breaker_title,ice_breaker_messages:c.ice_breaker_messages,ad_id:c.ad_id}]):c.__typename==="WECMessage"?b("bs_block").__(40,[{sender_wec_number:c.sender_wec_number,sender_wec_number_formated:c.sender_wec_number_formated,sender_wec_number_fbid:c.sender_wec_number_fbid,sender_wec_name:c.sender_wec_name}]):c.__typename==="WECMessageImage"?b("bs_block").__(41,[{id:c.id,extension:c.extension,preview:c.preview,large_preview:c.large_preview}]):c.__typename==="WECMessageFile"?b("bs_block").__(43,[{id:c.id,name:c.name,is_malicious:c.is_malicious,uri:c.uri,extension:c.extension,filesize:c.filesize}]):c.__typename==="WECMessageVideo"?b("bs_block").__(44,[{id:c.id,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,filename:c.filename,height:c.height,width:c.width}]):c.__typename==="MontageDirect"?b("bs_block").__(45,[{message_state:c.message_state,is_keep_disabled:c.is_keep_disabled,blob_media_type:c.blob_media_type,blob_media:c.blob_media,image:c.image}]):c.__typename==="MBirthdayReminderAttachment"?b("bs_block").__(46,[{friend_id:c.friend_id,confidence:c.confidence,birthday_date:c.birthday_date}]):c.__typename==="MPersonalRemindersList"?b("bs_block").__(47,[{has_more_upcoming_reminders:c.has_more_upcoming_reminders,personal_reminders:c.personal_reminders}]):c.__typename==="MentorshipMessengerCurriculumStep"?b("bs_block").__(48,[{id:c.id,module_name:c.module_name,mentorship_program:c.mentorship_program,program_name:c.program_name,curriculum_message:c.curriculum_message,prompt:c.prompt,step_count:c.step_count,total_steps:c.total_steps}]):c.__typename==="MentorshipMessengerDiscussionTopicSet"?b("bs_block").__(49,[{id:c.id,topics:c.topics}]):c.__typename==="MentorshipMessengerLeavePrompt"?b("bs_block").__(50,[{mentorship_program:c.mentorship_program,id:c.id,xma_type:c.xma_type}]):c.__typename==="MentorshipMessengerReminder"?b("bs_block").__(51,[{id:c.id,xma_type:c.xma_type}]):c.__typename==="MentorshipMessengerSurvey"?b("bs_block").__(52,[{id:c.id,xma_type:c.xma_type,xma_title:c.xma_title,xma_disclaimer:c.xma_disclaimer,mentorship_program:c.mentorship_program}]):c.__typename==="MentorshipMessengerProgressTracker"?b("bs_block").__(53,[{id:c.id,xma_type:c.xma_type,xma_title:c.xma_title,xma_body:c.xma_body}]):c.__typename==="Story"?b("bs_block").__(55,[{title:c.title,description:c.description,actors:c.actors,to:c.to,attachments:c.attachments,attached_story:c.attached_story}]):c.__typename==="User"?b("bs_block").__(56,[{type:c.__typename,id:c.id,name:c.name,profile_picture:c.profile_picture,cover_photo:c.cover_photo,work_info:c.work_info,subscribe_status:c.subscribe_status}]):c.__typename==="Group"?b("bs_block").__(57,[{type:c.__typename,id:c.id,name:c.name,cover_photo:c.cover_photo,visibility:c.visibility,visibility_sentence:c.visibility_sentence,viewer_join_state:c.viewer_join_state,group_general_chat:c.group_general_chat,work_groups_sync_metadata:c.work_groups_sync_metadata}]):null;return{description:a.description,media:a.media,source:a.source,style_list:j(a.style_list),title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:d}}function l(a){var c=k({description:a.description,media:a.media,source:a.source,style_list:a.style_list,title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:a.target});if(c==null)return null;else{a=b("bs_array").map(k,a.subattachments);return Object.assign({subattachments:a},c)}}function m(a){__p&&__p();a=a.message;if(a==null)return[];else{var c=[];b("bs_array").iter(function(a){__p&&__p();var b=a.entity;if(b==null)return 0;else{var d=b.id;b=b.thread_key;if(d==null)if(b==null)return 0;else{b=b.thread_fbid;if(b==null)return 0;else{c.push({id:b,offset:a.offset,length:a.length,type:a.__typename});return 0}}else{c.push({id:d,offset:a.offset,length:a.length,type:a.__typename});return 0}}},a.ranges);return c}}function n(a,c,d,e){__p&&__p();var f={};b("bs_array").iter(function(a){f[a.user.id]=a.reaction;return 0},c.message_reactions);var j=b("FBIDCheck").isUser_deprecated(c.message_sender.id),k=j?b("MessagingTagUtils").getSourceFromTags(c.tags_list):b("MessagingSourceEnum").UNKNOWN;j=j?b("MessagingTagUtils").getSourceTags(c.tags_list,k):[];var o=c.message_id,p=d.thread_id,q=d.thread_fbid,r=d.other_user_fbid;r=p==null?q==null?r==null?null:b("MercuryIDs").getThreadIDFromUserID(r):b("MercuryIDs").getThreadIDFromThreadFBID(q):p;q=c.tags_list.some(function(a){if(a===b("MessagingTag").ACTION_COPIED_MESSAGE||a===b("MessagingTag").ACTION_COPIED_SELF_MESSAGE||a===b("MessagingTag").ACTION_COPIED_ATTACHMENT)return!0;else return a===b("MessagingTag").ACTION_COPIED_SELF_ATTACHMENT});p=c.commerce_message_type;var s=c.customizations,t=c.replied_to_message,u;if(t==null)u=null;else{var v=t.message;u=v==null?{status:t.status,message:null}:{status:t.status,message:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").some(n(a,v,d,e)))}}t=c.error_data;v=c.unsent_timestamp_precise;v=!(v==null)&&v!=="0"?b("bs_js_null_undefined").fromOption(b("bs_caml_format").caml_float_of_string(v)):null;var w=c.unsender;r={thread_id:r,thread_fbid:d.thread_fbid,other_user_fbid:d.other_user_fbid,action_type:c.__typename==="UserMessage"?b("MercuryActionType").USER_GENERATED_MESSAGE:b("MercuryActionType").LOG_MESSAGE,message_id:o,threading_id:null,offline_threading_id:c.offline_threading_id,author:b("MercuryIDs").getParticipantIDFromUserID(c.message_sender.id),author_email:c.message_sender.email,ephemeral_ttl_mode:c.ttl,timestamp:b("bs_caml_format").caml_float_of_string(c.timestamp_precise),is_unread:c.unread,is_filtered_content:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT)!==-1,is_filtered_content_bh:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_BH)!==-1,is_filtered_content_account:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1,is_filtered_content_quasar:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1,is_filtered_content_invalid_app:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1,is_sponsored:c.is_sponsored,is_one_way_sent:c.tags_list.some(function(a){return a===b("MessagingTag").ONE_WAY_MESSAGE}),ad_id:c.ad_id,ad_client_token:c.ad_client_token,commerce_message_type:p==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MNCommerceMessageType")[p])),customizations:s==null?[]:s,source:k,source_tags:j,tags:c.tags_list,is_spoof_warning:c.tags_list.indexOf(b("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||c.tags_list.indexOf(b("MessagingTag").SPAM_SPOOFING)!==-1||c.tags_list.indexOf(b("MessagingTag").SPOOF_WARNING)!==-1,folder:d.folder,platform_xmd:c.platform_xmd_encoded,message_source:c.message_source_data,montage_reply_data:c.montage_reply_data,replied_to_message:u,skip_bump_thread:!1,profile_ranges:m(c),reactions:f,error_data:t==null?null:{description:t.description},removed_timestamp:v,unsender:w==null?null:{id:b("MercuryIDs").getParticipantIDFromUserID(w.messaging_actor.id),name:w.messaging_actor.name,short_name:w.messaging_actor.short_name},message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.message_unsendability_status),has_attachment:null,attachments:null,raw_attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,body:null,subject:null,creator_info:null,is_forwarded:q};if(c.__typename==="UserMessage"){p=g(c);s=c.extensible_attachment;if(s==null)k=null;else{j=s.story_attachment;u=s.genie_attachment;if(u==null)t=null;else{v=u.genie_message;if(v==null)w=null;else{q=v.story_attachment;w={story_attachment:q==null?null:l(q)}}t={genie_message:w}}k={legacy_attachment_id:s.legacy_attachment_id,story_attachment:j==null?null:l(j),genie_attachment:t}}u=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:k,blob_attachments:p,sticker:c.sticker},o,e);v=c.message;q=c.page_admin_sender;Object.assign(r,{body:v==null?null:v.text,creator_info:q==null?null:{creatorID:q.admin_id,creatorName:q.name,creatorType:q.sender_type,labelType:q.label_type,pageID:q.page_id,profileURI:q.profile_uri},subject:null,has_attachment:u.length>0,attachments:u,raw_attachments:null,ranges:void 0,meta_ranges:c.meta_ranges.map(function(a){return babelHelpers["extends"]({},a,{data:JSON.parse(a.data)})})})}else if(c.__typename==="VoiceCallMessage"||c.__typename==="VideoCallMessage"){w=c.__typename;s=w==="VoiceCallMessage"?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL;j=c.message_sender.id;t=d.other_user_fbid;k=t==null?null:b("MercuryIDs").getParticipantIDFromUserID(j===t?b("CurrentUser").getID():t);p=c.answered;Object.assign(r,{log_message_type:s,log_message_data:{answered:p==null?!1:p,call_capture_attachments:h(a,c,e),caller:b("MercuryIDs").getParticipantIDFromUserID(j),callee:k},log_message_body:c.snippet})}else if(c.__typename==="ThreadNameMessage")Object.assign(r,{log_message_type:b("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:c.thread_name},log_message_body:c.snippet});else if(c.__typename==="ThreadImageMessage"){o=c.image_with_metadata;if(o==null)v=null;else{q=o.preview;v={preview_url:q==null?null:q.uri,metadata:{fbid:o.legacy_attachment_id,dimensions:String(o.original_dimensions.x)+(","+String(o.original_dimensions.y))}}}Object.assign(r,{log_message_type:b("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:v},log_message_body:c.snippet})}else if(c.__typename==="ParticipantsAddedMessage"){u=c.participants_added;Object.assign(r,{log_message_type:b("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:u==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)},u)},log_message_body:c.snippet})}else if(c.__typename==="ParticipantLeftMessage"){w=c.participants_removed;Object.assign(r,{log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:w==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)},w)},log_message_body:c.snippet})}else if(c.__typename==="GenericAdminTextMessage"){d=c.extensible_message_admin_text;t=c.extensible_message_admin_text_type;d==null?t==null||Object.assign(r,{log_message_body:c.snippet,log_message_data:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingGenericAdminTextType")[t])),untypedData:void 0},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}):t==null||Object.assign(r,i(a,d,t,c.snippet,e))}else if(c.__typename==="P2PPaymentRequestMessage"||c.__typename==="P2PPaymentMessage"){s=c.p2p_sender;p=c.p2p_receiver;j=c.amount;k=c.message_type;Object.assign(r,{log_message_body:c.snippet,log_message_data:{transfer_id:c.transfer_id,senderId:s==null?null:b("MercuryIDs").getParticipantIDFromUserID(s.id),receiverId:p==null?null:b("MercuryIDs").getParticipantIDFromUserID(p.id),formattedAmount:j==null?null:j.formatted,subtype:k==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("P2PPaymentLogMessageSubtype")[k]))},log_message_type:b("MercuryLogMessageType").ORION})}return r}f.unsafeCastBlobAttachments=g;f._getCallCaptureAttachments=h;f._getGenericAdminTextMessage=i;f._getStyleList=j;f.unsafeCastExtensibleAttachmentWithoutSubattachments=k;f.unsafeCastExtensibleAttachment=l;f._getProfileRanges=m;f.transformMessage=n}),null);
__d("MessengerAttachmentTransformerForSend.bs",["bs_array","bs_caml_array","MercuryAttachmentType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e){__p&&__p();c=c.node;if(c==null)return{attach_type:b("MercuryAttachmentType").ERROR};else{if(c.__typename==="ExtensibleMessageAttachment"){var f=c.story_attachment,g=c.genie_attachment,h;if(g==null)h=null;else{g=g.genie_message;var i;if(g==null)i=null;else{g=g.story_attachment;i={story_attachment:g==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(g)}}h={genie_message:i}}g={legacy_attachment_id:c.legacy_attachment_id,story_attachment:f==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(f),genie_attachment:h}}else g=null;i=c.__typename==="Sticker"?c:null;f=c.__typename;var j;switch(f){case"MessageAnimatedImage":case"MessageAudio":case"MessageFile":case"MessageImage":case"MessageVideo":j=[c];break;default:j=null}h=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments({blob_attachments:j});f=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:h,sticker:i},d,e);if(f.length!==0)return b("bs_caml_array").caml_array_get(f,0);else return{}}}function a(a,c,d,e){return b("bs_array").map(function(b){return g(a,b,d,e)},c)}f._transform=g;f.transform=a}),null);
__d("MessagingThreadType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5,FOLDER:6,TINCAN_ONE_TO_ONE:7})}),null);
__d("MessengerFolders.bs",["gkx","qex","MessagingTag","MessagingThreadType","MercuryFoldersConfig","MessengerEnvironment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=b("qex")._("998180")&&b("MessengerEnvironment").messengerdotcom?[b("MessagingTag").INBOX,b("MessagingTag").PENDING,b("MessagingTag").OTHER,b("MessagingTag").ACTION_ARCHIVED,b("MessagingTag").MARKETPLACE_FOLDER]:[b("MessagingTag").INBOX,b("MessagingTag").PENDING,b("MessagingTag").OTHER,b("MessagingTag").ACTION_ARCHIVED];var g=d.filter(function(a){if(a===b("MessagingTag").PENDING)return!b("MercuryFoldersConfig").hide_message_filtered;else if(a===b("MessagingTag").OTHER)return!b("MercuryFoldersConfig").hide_message_requests;else return!0});function a(){return[].concat(g)}function c(a){if(a.is_archived)return b("MessagingTag").ACTION_ARCHIVED;else{var c=a.thread_type;if(!(c==null)&&c===b("MessagingThreadType").MARKETPLACE&&b("gkx")("965951"))return b("MessagingTag").MARKETPLACE_FOLDER;else return a.folder}}f.getSupportedFolders=a;f.getFromMeta=c}),null);
__d("MessengerGroupAdminModelStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUIRED:"required",OPTIONAL:"optional",NOT_SUPPORTED:"not_supported"})}),null);
__d("MessengerGroupAdminModelStatus.bs",["bs_string","MessengerGroupAdminModelStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return null;else{a=b("bs_string").uppercase(a);switch(a){case"NOT_SUPPORTED":return b("MessengerGroupAdminModelStatus").NOT_SUPPORTED;case"OPTIONAL":return b("MessengerGroupAdminModelStatus").OPTIONAL;case"REQUIRED":return b("MessengerGroupAdminModelStatus").REQUIRED;default:return null}}}f.fromNullableString=a}),null);
__d("MessengerGroupAdminType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REGULAR_ADMIN:0,GROUP_CREATOR:1,CHAT_SUPER_ADMIN:2})}),null);
__d("MessengerGroupThreadSubType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADMIN_MODEL_V2_THREAD:1,FB_GROUP_CHAT:2,MARKETPLACE_THREAD:3,SCHOOL_CHAT:4,DEPRECATED__WORK_SYNCED_CHAT:5,ADMIN_NOT_SUPPORTED_THREAD:6,BELL_SYNCED_CHAT:7,GAMES_APP_THREAD:8,VAULT_CHAT:9,VERSE_CHAT:10,GENERIC_COMMERCE_THREAD:11,USER_JOB_THREAD:12,COWORKER_GROUP_THREAD:13})}),null);
__d("MessengerGroupsSyncStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PENDING_OPT_IN:"PENDING_OPT_IN",OPT_IN:"OPT_IN",PENDING_OPT_OUT:"PENDING_OPT_OUT",OPT_OUT:"OPT_OUT",UNSET:"UNSET",UNSUPPORTED:"UNSUPPORTED"})}),null);
__d("MessengerGroupsSyncStatus.bs",["MessengerGroupsSyncStatus"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a==null)return null;else switch(a){case"OPT_IN":return b("MessengerGroupsSyncStatus").OPT_IN;case"OPT_OUT":return b("MessengerGroupsSyncStatus").OPT_OUT;case"PENDING_OPT_IN":return b("MessengerGroupsSyncStatus").PENDING_OPT_IN;case"PENDING_OPT_OUT":return b("MessengerGroupsSyncStatus").PENDING_OPT_OUT;case"UNSET":return b("MessengerGroupsSyncStatus").UNSET;case"UNSUPPORTED":return b("MessengerGroupsSyncStatus").UNSUPPORTED;default:return null}}f.fromNullableString=a}),null);
__d("MessengerThreadCannotReplyReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BLOCKED:"blocked",MESSENGER_BLOCKEE:"messenger_blockee",COMPOSER_DISABLED_BOT:"composer_disabled_bot",HAS_EMAIL_PARTICIPANT:"has_email_participant",OBJECT_ORIGINATED:"object_originated",READ_ONLY:"read_only",VIEWER_NOT_SUBSCRIBED:"viewer_not_subscribed",RECIPIENTS_NOT_LOADABLE:"recipients_not_loadable",RECIPIENTS_UNAVAILABLE:"recipients_unavailable",RECIPIENTS_INVALID:"recipients_invalid",RECIPIENTS_INACTIVE_WORK_ACC:"recipients_inactive_work_account",MONTAGE_NOT_AUTHOR:"montage_not_author",VIEWER_MUTED_IN_FBGROUP:"viewer_muted_in_fbgroup"})}),null);
__d("MessengerThreadCannotReplyReason.bs",["bs_js_primitive","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return void 0;else return b("bs_js_primitive").undefined_to_opt(b("MessengerThreadCannotReplyReason")[a])}function c(a){if(a==null)return null;else if(a!==0)switch(a-1|0){case 0:return b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE;case 1:return b("MessengerThreadCannotReplyReason").BLOCKED;case 2:return b("MessengerThreadCannotReplyReason").MESSENGER_BLOCKEE}else return b("MessengerThreadCannotReplyReason").BLOCKED}f.fromName=a;f.fromMessageThreadCannotReplyReason=c}),null);
__d("MessengerServerPayloadTransformer.bs",["fbt","URI","FBID.bs","bs_array","bs_string","bs_js_json","getByPath","bs_caml_array","ChatConfig","MercuryIDs","bs_belt_Option","bs_caml_format","CurrentUser","GenderConst","bs_js_primitive","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","isMessengerDotComURI","WorkForeignEntityType","MercuryParticipantTypes","MessengerGroupAdminType","MessengerGroupsSyncStatus.bs","MessengerGroupThreadSubType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerGroupAdminModelStatus.bs","MessengerObjectAssociationType","MessageThreadUnsendabilityStatus.bs","MessengerThreadCannotReplyReason","MessengerThreadCannotReplyReason.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){__p&&__p();var c=a.location_coordinates;c=c==null?[null,null]:[c.latitude,c.longitude];var d=a.location_page,e;if(d==null)e=null;else{d=d.address;e=d==null?null:d.full_address}d=a.allows_rsvp;d=d?1:0;var f=b("bs_array").fold_left(function(a,b){a[b.node.id]=b.guest_list_state;return a},{},a.event_reminder_members.edges),g=a.lightweight_event_creator;return{creator_id:g==null?null:g.id,event_members:f,event_time:a.time,event_type:a.lightweight_event_type,latitude:c[0],longitude:c[1],location_address:e,location_name:a.location_name,note:a.note,oid:a.id,related_event:a.related_event,repeat_mode:a.repeat_mode,seconds_to_notify_before:a.seconds_to_notify_before,status:a.lightweight_event_status,title:a.event_title,track_rsvp:d}}function i(a){__p&&__p();a=a.associated_object;if(a==null)return null;else{var c=a.action_link,d;if(c==null)d=null;else{var e=b("CurrentUser").isWorkUser();d=e?c:new(b("URI"))(c).setDomain("www.facebook.com")}e=a.profile_picture;c=a.group_general_chat;var f=a.group_events,g=a.group_saves,h=a.verse_group_link;return{id:a.id,name:a.name,action_link:d,profile_picture:e==null?null:{uri:e.uri},group_general_chat:c==null?null:{id:c.id},room_type:a.room_type,privacy_mode:a.privacy_mode,approval_mode_toggleable:a.approval_mode_toggleable,start_timestamp:a.start_timestamp,event_place:a.event_place,mentorship_program:a.mentorship_program,group_events:f==null?{count:0}:{count:f.count},group_saves:g==null?{count:0}:{count:g.count},verse_group_link:h==null?null:new(b("URI"))(h).setDomain("www.facebook.com")}}}function j(a){a=a.related_page_thread;if(a==null)return null;else{var c=b("bs_array").map(function(a){return{id:a.id,name:a.name,color:a.color}},a.custom_thread_tags.nodes),d=a.page;d=d==null?null:d.id;return{flagged:a.is_flagged,pageID:d,customTags:c}}}function k(a){__p&&__p();var c=a.thread_key.other_user_id;if(c==null)return!1;else{a=a.all_participants.edges;return b("bs_array").fold_left(function(a,b){b=b.node.messaging_actor;if(b.id===c)return b.__typename==="User";else return a},!1,a)}}function l(a){__p&&__p();if(a.length===0)return null;else{var c={};b("bs_array").iter(function(a){var b=a.nickname;if(b==null)return 0;else{c[a.participant_id]=b;return 0}},a);return c}}function m(a){return"#"+b("bs_string").sub(a,2,a.length-2|0)}function n(a){if(!(a==null)&&a!=="")return m(a);else return null}function a(a){return a.thread_key.thread_fbid}function c(a){return a.thread_key.other_user_id}function d(a){return b("bs_js_primitive").nullable_to_opt(b("getByPath")(a,["messages","page_info"]))}function e(a){var c=g._("Facebook User");return{id:"fbid:"+a,fbid:b("FBID.bs").ofStringExn(a),gender:b("GenderConst").UNKNOWN_SINGULAR,href:null,image_src:null,big_image_src:null,name:c,short_name:c,user_type:null,vanity:null,accepts_messenger_user_feedback:!1,is_friend:!1,is_viewer_managing_parent:!1,is_messenger_user:!1,is_aloha_proxy_confirmed:!1,is_business_enabled:!1,is_verified:!1,is_messenger_platform_bot:!1,is_messenger_ignored:null,is_messenger_blocked:!1,is_facebook_blocked:!0,is_subscribed_to_page_updates:!1,title:null,company_name:null,employee:!1,instant_game_channel:null,work_foreign_entity_info:null,timezone:null,wec_group_admins:[],wec_group_creation_time:null,wec_group_invite_link:null,wec_group_participant_count:null,wec_group_participants:[]}}function o(a){__p&&__p();var c=a.profile_picture_url;if(c==null){var d=a.big_image_src;d=d==null?null:d.uri}else d=c;c=a.gender;var e=a.url,f;if(e==null)f=null;else{var g=b("isMessengerDotComURI")(new(b("URI"))(e));f=g?new(b("URI"))(e).getUnqualifiedURI().setDomain("www.facebook.com").setProtocol("https").toString():e}g=a.__typename;var h;switch(g){case"MessengerCallGuestUser":h=b("MercuryParticipantTypes").GUEST;break;case"NeoApprovedUser":h=b("MercuryParticipantTypes").PARENT_APPROVED_USER;break;case"Page":h=b("MercuryParticipantTypes").PAGE;break;case"User":h=b("MercuryParticipantTypes").USER;break;default:h=null}e=a.accepts_messenger_user_feedback;g=a.is_viewer_friend;var i=a.is_viewer_managing_parent,j=a.is_messenger_user,k=a.is_aloha_proxy_confirmed,l=a.is_verified,m=a.is_messenger_platform_bot,n=a.is_message_blocked_by_viewer,o=a.is_blocked_by_viewer,p=a.is_viewer_subscribed_to_message_updates,q=a.work_info,r;if(q==null)r=null;else{var s=q.work_community;s=s==null?null:s.name;q=q.job_title;r=s==null?q==null?null:q:!(q==null)&&q.length!==0?""+(String(q)+(" \u2022 "+(String(s)+""))):s}q=a.work_info;if(q==null)s=null;else{q=q.work_community;q=q==null?null:q.name;var t=a.work_foreign_entity_info;s=!(q==null)&&!(t==null)&&t.type===b("WorkForeignEntityType").FOREIGN?q:null}t=a.is_employee;q=a.work_foreign_entity_info;var u=a.wec_group_creation_time,v=a.wec_group_invite_link,w=a.wec_group_participants,x=a.wec_group_participants,y=a.wec_group_admins;return{id:"fbid:"+a.id,fbid:a.id,gender:c==null?b("GenderConst").NOT_A_PERSON:c===b("DisplayGenderConst").MALE?b("GenderConst").MALE_SINGULAR:c===b("DisplayGenderConst").FEMALE?b("GenderConst").FEMALE_SINGULAR:b("GenderConst").NOT_A_PERSON,href:f,image_src:d,big_image_src:d,name:a.name,short_name:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.short_name),a.name),user_type:h,vanity:a.username,accepts_messenger_user_feedback:e==null?!1:e,is_friend:g==null?!1:g,is_viewer_managing_parent:i==null?!1:i,is_messenger_user:j==null?!1:j,is_aloha_proxy_confirmed:k==null?!1:k,is_business_enabled:a.__typename==="Page",is_verified:l==null?!1:l,is_messenger_platform_bot:m==null?!1:m,is_messenger_ignored:null,is_messenger_blocked:n==null?!1:n,is_facebook_blocked:o==null?!1:o,is_subscribed_to_page_updates:p==null?!0:p,title:r,company_name:s,employee:t==null?!1:t,instant_game_channel:a.__typename==="Page"?a.instant_game_channel:null,work_foreign_entity_info:q==null?null:q,timezone:null,wec_group_creation_time:u==null?null:u,wec_group_invite_link:v==null?null:v,wec_group_participant_count:w==null?null:w.count,wec_group_participants:x==null?[]:b("bs_array").map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}},x.nodes),wec_group_admins:y==null?[]:b("bs_array").map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}},y.nodes)}}function p(a){return b("bs_array").map(function(a){return o(a.node.messaging_actor)},a.all_participants.edges)}function q(a,c){__p&&__p();c=c.read_receipts;if(c==null)return void 0;else{var d={};b("bs_array").iter(function(c){var e=c.actor;if(!(e==null)&&a!==e.id){d[e.id]={action:b("bs_caml_format").caml_float_of_string(c.action),watermark:b("bs_caml_format").caml_float_of_string(c.watermark)};return 0}else return 0},c.nodes);return b("bs_js_primitive").some(d)}}function r(a){__p&&__p();a=a.delivery_receipts;if(a==null)return[];else return a.nodes.sort(function(a,c){a=b("bs_caml_format").caml_float_of_string(a.timestamp_precise);c=b("bs_caml_format").caml_float_of_string(c.timestamp_precise);if(a>c)return-1;else if(a===c)return 0;else return 1})}function s(a,c,d){var e=c.messages;if(e==null)return void 0;else return b("bs_array").map(function(e){return b("MessengerMessageTransformer.bs").transformMessage(a,e,{thread_id:null,thread_fbid:c.thread_key.thread_fbid,other_user_fbid:c.thread_key.other_user_id,folder:b("bs_string").lowercase(c.folder)},d)},e.nodes)}function t(a,c,d){__p&&__p();var e=b("bs_array").map(function(f){__p&&__p();var g=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(f),h=f.extensible_attachment,i;if(h==null)i=null;else{var a=h.story_attachment,c=h.genie_attachment,d;if(c==null)d=null;else{c=c.genie_message;var e;if(c==null)e=null;else{c=c.story_attachment;e={story_attachment:c==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(c)}}d={genie_message:e}}i={legacy_attachment_id:h.legacy_attachment_id,story_attachment:a==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(a),genie_attachment:d}}return{message_id:f.message_id,snippet:f.snippet,message_sender:f.message_sender,timestamp_precise:f.timestamp_precise,commerce_message_type:f.commerce_message_type,extensible_attachment:i,blob_attachments:g,sticker:f.sticker,extensible_message_admin_text:f.extensible_message_admin_text,platform_xmd_encoded:f.platform_xmd_encoded}},c.last_message.nodes);e={thread_key:c.thread_key,name:c.name,all_participants:c.all_participants,last_message:{nodes:e},unread_count:c.unread_count,message_count:c.messages_count,image:c.image,updated_time_precise:c.updated_time_precise,mute_until:c.mute_until,is_pinned:c.is_pinned,is_pin_protected:c.is_pin_protected,is_viewer_subscribed:c.is_viewer_subscribed,is_canonical_neo_user:c.is_canonical_neo_user,thread_queue_enabled:c.thread_queue_enabled,folder:c.folder,has_viewer_archived:c.has_viewer_archived,is_page_follow_up:c.is_page_follow_up,is_page_unresponded_thread:c.is_page_unresponded_thread,cannot_reply_reason:c.cannot_reply_reason,can_viewer_report:c.can_viewer_report,ephemeral_ttl_mode:c.ephemeral_ttl_mode,customization_info:c.customization_info,thread_admins:c.thread_admins,approval_mode:c.approval_mode,joinable_mode:c.joinable_mode,thread_queue_metadata:c.thread_queue_metadata,event_reminders:c.event_reminders,montage_thread:c.montage_thread,last_read_receipt:c.last_read_receipt,related_page_thread:c.related_page_thread,rtc_call_data:c.rtc_call_data,associated_object:c.associated_object,reactions_mute_mode:c.reactions_mute_mode,mentions_mute_mode:c.mentions_mute_mode,privacy_mode:c.privacy_mode,customization_enabled:c.customization_enabled,thread_type:c.thread_type,group_thread_subtype:c.group_thread_subtype,thread_pin_timestamp:c.thread_pin_timestamp,page_unsubscribe_status:c.page_unsubscribe_status,participant_add_mode_as_string:c.participant_add_mode_as_string,participants_event_status:c.participants_event_status,marketplace_thread_data:c.marketplace_thread_data,page_comm_item:c.page_comm_item,group_approval_queue:c.group_approval_queue,admin_model_status_string:c.admin_model_status_string,groups_sync_status_string:c.groups_sync_status_string,work_groups_sync_metadata:c.work_groups_sync_metadata,description:c.description,joinable_link:c.joinable_link,linked_mentorship_programs:c.linked_mentorship_programs,theme:c.thread_theme,thread_connectivity_data:c.thread_connectivity_data,thread_unsendability_status:c.thread_unsendability_status,is_business_page_active:c.is_business_page_active};c=e.customization_info;var f;if(c==null)f=[null,null,null];else{var g=c.emoji;f=[n(c.outgoing_bubble_color),g==null?null:{emoji:g},l(c.participant_customizations)]}g=f[0];c=e.theme;if(c==null)g=[g,g,g,[],null];else{var o=c.gradient_colors.length,p=m(c.fallback_color),q=b("FBID.bs").ofString(c.id);q=q!==void 0?b("bs_js_primitive").valFromOption(q):null;if(o>0&&b("ChatConfig").get("chat_tab_has_gradients")){c=b("bs_array").map(m,c.gradient_colors);g=[p,b("bs_caml_array").caml_array_get(c,0),b("bs_caml_array").caml_array_get(c,o-1|0),c,q]}else g=[p,p,p,[],q]}o=e.page_comm_item;c=o==null?[null,null,null,null,null]:[o.comm_status,o.comm_source_id,o.id,o.subtitle,o.comm_item_owners];p=e.last_message.nodes.length!==0?b("bs_js_primitive").some(b("bs_caml_array").caml_array_get(e.last_message.nodes,0)):void 0;q=e.last_read_receipt.nodes.length!==0?b("bs_js_primitive").some(b("bs_caml_array").caml_array_get(e.last_read_receipt.nodes,0)):void 0;if(p!==void 0){o=b("bs_js_primitive").valFromOption(p);a=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:o.extensible_attachment,blob_attachments:o.blob_attachments,sticker:o.sticker},o.message_id,d)}else a=[];if(p!==void 0){o=b("bs_js_primitive").valFromOption(p).extensible_message_admin_text;if(o==null)d=null;else{o=o.game;d=o==null?null:o.id}}else d=null;o=b("MessengerThreadCannotReplyReason.bs").fromName(e.cannot_reply_reason);var r=e.thread_key.other_user_id;if(r==null){var s=e.thread_key.thread_fbid;s=s==null?null:s}else s=r;r=b("bs_array").fold_left(function(a,c){a[c.id]=b("MessengerGroupAdminType").REGULAR_ADMIN;return a},{},e.thread_admins);r=b("bs_array").fold_left(function(b,c){var d=c.node.messaging_actor.id;c=c.admin_type;var a=b[d];c==null||a!==void 0&&(b[d]=c);return b},r,e.all_participants.edges);var t=e.thread_queue_metadata,u=e.thread_type,v=e.group_thread_subtype,w=e.montage_thread,x=e.image,y=e.thread_key.other_user_id,z;if(p!==void 0){var A=b("bs_js_primitive").valFromOption(p).platform_xmd_encoded;if(A==null)z=!1;else{try{A=JSON.parse(A)}catch(a){A={}}A=b("bs_js_json").classify(A);z=typeof A==="number"||A.tag!==2?!1:b("bs_js_primitive").undefined_to_opt(A[0].landing_exp)!==void 0}}else z=!1;A=e.thread_queue_metadata;var B=e.name,C=e.associated_object,D;if(C==null)D=null;else{C=C.group_general_chat;if(C==null||s==null)D=null;else{C=C.id===s;D=C?b("MessengerObjectAssociationType").GENERAL_CHAT:b("MessengerObjectAssociationType").REGULAR_CHAT}}C=e.rtc_call_data;var E;if(C==null)E=null;else{var F=C.initiator;E={call_state:C.call_state,server_info_data:C.server_info_data,initiator_fbid:F==null?null:b("bs_js_null_undefined").fromOption(b("FBID.bs").ofString(F.id))}}C=e.marketplace_thread_data;if(C==null)F=null;else{var G=C.for_sale_item,H;if(G==null)H=null;else{var I=G.formatted_price,J=G.location,K;if(J==null)K=null;else{J=J.reverse_geocode;K={reverse_geocode:J==null?null:{city:J.city,state:J.state}}}J=G.primary_photo;var L;if(J==null)L=null;else{J=J.image;L=J==null?null:J.uri}H={id:G.id,story_id:G.story_id,title:G.group_commerce_item_title,price:I==null?null:I.text,location:K,is_pending:G.is_pending,is_sold:G.is_sold,image_uri:L,url:G.url}}J=C.buyer;I=C.seller;F={for_sale_item:H,buyer_fbid:J==null?null:J.id,seller_fbid:I==null?null:I.id}}K=e.group_approval_queue;L=e.work_groups_sync_metadata;if(L==null)G=null;else{C=L.fb_group;G=C==null?null:C}H=e.linked_mentorship_programs;return{admins:r,approval_mode:e.approval_mode,approval_queue_ids:t==null?[]:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(a.id))},t.approval_requests.nodes),can_reply:o===void 0,cannot_reply_reason:o!==void 0?b("bs_js_primitive").valFromOption(o):null,can_viewer_report:e.can_viewer_report,solid_color:g[0],header_color:g[1],footer_color:g[2],gradient_colors:g[3],theme_id:g[4],thread_connectivity_data:e.thread_connectivity_data,custom_like_icon:f[1],custom_nickname:f[2],customization_enabled:e.customization_enabled,thread_type:u==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessagingThreadType")[u])),group_thread_subtype:v==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessengerGroupThreadSubType")[v])),page_unsubscribe_status:e.page_unsubscribe_status,participant_add_mode:e.participant_add_mode_as_string,ephemeral_ttl_mode:e.ephemeral_ttl_mode,folder:b("bs_string").lowercase(e.folder),has_email_participant:o!==void 0?b("bs_js_primitive").valFromOption(o)===b("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT:!1,has_montage:!(w==null),image_src:x==null?null:x.uri,is_archived:e.has_viewer_archived,is_pinned:e.is_pinned,is_page_follow_up:e.is_page_follow_up,is_page_unresponded_thread:e.is_page_unresponded_thread,is_canonical_user:k(e),is_canonical:!(y==null),is_from_weak_entry_point:z,is_pin_protected:e.is_pin_protected,is_subscribed:e.is_viewer_subscribed,is_canonical_neo_user:e.is_canonical_neo_user,is_thread_queue_enabled:!(A==null),joinable_mode:{mode:b("bs_caml_format").caml_int_of_string(e.joinable_mode.mode),link:e.joinable_mode.link},last_message_timestamp:p!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_js_primitive").valFromOption(p).timestamp_precise):0,last_message_id:null,last_message_type:p!==void 0?b("bs_js_primitive").valFromOption(p).commerce_message_type:null,last_read_timestamp:q!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_js_primitive").valFromOption(q).timestamp_precise):0,lightweight_event:e.event_reminders.nodes.length===0?null:h(b("bs_caml_array").caml_array_get(e.event_reminders.nodes,0)),lightweight_events:b("bs_array").fold_left(function(a,b){a[b.id]=h(b);return a},{},e.event_reminders.nodes),message_count:e.message_count,mute_until:e.mute_until,name:B==null?"":B,object_association_type:D,other_user_fbid:e.thread_key.other_user_id,page_thread_info:j(e),participants:b("bs_array").map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.node.messaging_actor.id)},e.all_participants.edges),participants_event_status:e.participants_event_status,read_only:o!==void 0?b("bs_js_primitive").valFromOption(o)===b("MessengerThreadCannotReplyReason").READ_ONLY:!1,recipients_loadable:o!==void 0?b("bs_js_primitive").valFromOption(o)!==b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE:!0,server_timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),snippet_attachments:a,snippet_sender:p!==void 0?b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(p).message_sender.messaging_actor.id):null,snippet:p!==void 0?b("bs_js_primitive").valFromOption(p).snippet:null,thread_fbid:s,thread_id:"",thread_pin_timestamp:e.thread_pin_timestamp,timestamp:b("bs_caml_format").caml_float_of_string(e.updated_time_precise),unread_count:e.unread_count,rtc_call_data:E,marketplace_thread_data:F,associated_object:i(e),reactions_mute_mode:e.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:e.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:c[0],page_comm_item_id:c[2],comm_source_id:c[1],subtitle:c[3],comm_item_owners:c[4],group_approval_queue:K==null?null:K.nodes,game_id:d,admin_model_status:b("MessengerGroupAdminModelStatus.bs").fromNullableString(e.admin_model_status_string),groups_sync_status:b("MessengerGroupsSyncStatus.bs").fromNullableString(e.groups_sync_status_string),work_associated_group:G,description:e.description,joinable_link:e.joinable_link,linked_mentorship_programs:H==null?null:H,thread_unsendability_status:b("MessageThreadUnsendabilityStatus.bs").fromNullableString(e.thread_unsendability_status),is_business_page_active:e.is_business_page_active}}f.getThreadFBID=a;f.getOtherUserID=c;f.getMessagePageInfo=d;f.getBlockedParticipant=e;f.transformParticipant=o;f.transformParticipants=p;f.transformReadReceipts=q;f.transformDeliveryReceipts=r;f.transformMessages=s;f.transformThread=t}),null);
__d("MessengerWebQuickLogModule",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPOSER_INTERACTION:25296900,FETCH_MORE_THREAD_LIST:25296906,FETCH_THREAD_INFO:25296904,FETCH_THREAD_LIST:25296905,FIRSTCHATTABOPEN_WWW:25296897,GROUP_INPUT_INDIVIDUAL_TAB_OPEN_WWW:25296899,GROUP_INPUT_TAB_OPEN_WWW:25296898,PAGE_LOAD_MDOTCOM_WWW:25296901,SEND_MESSAGE:25296903,THREAD_LOAD_MDOTCOM_WWW:25296902})}),null);
__d("MessengerThreadFetchLoggerUtil",["FBLogger","MercuryIDs","MessengerWebQuickLogModule","QuickPerformanceLogger","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1,h=new Map();a={markerStart:function(a){try{b("QuickPerformanceLogger").markerStart(b("MessengerWebQuickLogModule").FETCH_THREAD_INFO,g);a=b("MercuryIDs").isValid(a)?b("MercuryIDs").tokenize(a).value:a;h.set(a,g);g++}catch(a){b("FBLogger")("mercury").catching(a).warn("Logging thread info fetch encountered error")}},markerEnd:function(a,c){try{a=b("MercuryIDs").isValid(a)?b("MercuryIDs").tokenize(a).value:a;var d=h.get(a);d!=null&&(b("QuickPerformanceLogger").markerEnd(b("MessengerWebQuickLogModule").FETCH_THREAD_INFO,c,d),h["delete"](a))}catch(a){b("FBLogger")("mercury").catching(a).warn("Logging thread info fetch encountered error")}},markerPoint:function(a,c,d){d===void 0&&(d=b("performanceAbsoluteNow")());a=h.get(a);a!=null&&b("QuickPerformanceLogger").markerPoint(b("MessengerWebQuickLogModule").FETCH_THREAD_INFO,c,void 0,a,d)}};e.exports=a}),null);
__d("MessengerThreadsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2132096180232610"};b.getQueryID=function(){return"1392886734196615"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerGraphQLThreadFetcher.bs",["Promise","bs_array","BanzaiODS","bs_caml_array","bs_pervasives","WebGraphQL","bs_caml_format","bs_js_primitive","bs_js_null_undefined","MercuryServerRequestsConfig","ChatReliabilityInstrumentation","MessengerThreadFetchLoggerUtil","MessengerThreadsWebGraphQLQuery","MessengerServerPayloadTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e,f){__p&&__p();if(a==null)if(e)return{actions:null,thread:void 0,end_of_history:{type:"user",fbid:c},roger:null,delivery_receipts:[]};else return{actions:null,thread:void 0,end_of_history:void 0,roger:null,delivery_receipts:[]};else{e=[];var g=b("MessengerServerPayloadTransformer.bs").getThreadFBID(a),h=b("MessengerServerPayloadTransformer.bs").getOtherUserID(a);g=h==null?g==null?b("bs_pervasives").failwith("No thread ID"):g:h;g!==c&&b("bs_pervasives").failwith("Thread ID mismatch");h=b("MessengerServerPayloadTransformer.bs").transformThread(d,a,f);g=b("bs_js_null_undefined").fromOption(b("MessengerServerPayloadTransformer.bs").transformMessages(d,a,f));f=b("MessengerServerPayloadTransformer.bs").transformReadReceipts(d,a);if(f!==void 0){d={};d[c]=b("bs_js_primitive").valFromOption(f);f=d}else f=null;d=b("MessengerServerPayloadTransformer.bs").transformDeliveryReceipts(a);if(d.length>=1){d=b("bs_caml_array").caml_array_get(d,0);h.is_canonical?e.push({other_user_fbid:c,thread_fbid:null,time:b("bs_caml_format").caml_float_of_string(d.timestamp_precise)}):e.push({other_user_fbid:null,thread_fbid:c,time:b("bs_caml_format").caml_float_of_string(d.timestamp_precise)})}d=b("MessengerServerPayloadTransformer.bs").getMessagePageInfo(a);if(d!==void 0)if(b("bs_js_primitive").valFromOption(d).has_previous_page)return{actions:g,thread:h,end_of_history:void 0,roger:f,delivery_receipts:e};else return{actions:g,thread:h,end_of_history:{type:"thread",fbid:c},roger:f,delivery_receipts:e};else return{actions:g,thread:h,end_of_history:void 0,roger:f,delivery_receipts:e}}}function h(a){b("MessengerThreadFetchLoggerUtil").markerPoint(a.id,"sendThreadInfoFetchRequest");return new(b("MessengerThreadsWebGraphQLQuery"))({id:a.id,message_limit:a.limit,load_messages:a.limit>0,load_read_receipts:a.loadReadReceipts,load_delivery_receipts:a.loadDeliveryReceipts,before:a.timestamp})}function a(a,c,d){__p&&__p();var e=b("bs_array").map(h,c);return b("Promise").all(b("WebGraphQL").execAll(e,{actorID:d?a:null,batchName:"MessengerGraphQLThreadFetcher",msgrRegion:b("MercuryServerRequestsConfig").msgrRegion,allowCrossPageTransition:!0}))["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_thread.failure");c.forEach(function(a){b("MessengerThreadFetchLoggerUtil").markerEnd(a.id,"FAIL");return 0});b("ChatReliabilityInstrumentation").logERROR("fetch_thread_fail");return b("Promise").reject(a)}).then(function(e){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_thread.success");return b("bs_array").mapi(function(e,f){f=f.message_thread;e=b("bs_caml_array").caml_array_get(c,e);b("MessengerThreadFetchLoggerUtil").markerPoint(e.id,"getThreadInfoFetchResponse");return g(f,e.id,a,e.isCanonical,d)},e)})}f._transformPayload=g;f._getQuery=h;f.fetchAll=a}),null);
__d("MercuryActionStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNSENT:0,SUCCESS:1,UNCONFIRMED:3,FAILED_UNKNOWN_REASON:4,UNABLE_TO_CONFIRM:5,RESENT:6,RESENDING:7,ERROR:10})}),null);
__d("MercuryMessageDeliveryState",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1});e.exports=a}),null);
__d("MercuryViewer",["CurrentUser","MercuryAssert"],(function(a,b,c,d,e,f){"use strict";var g="fbid:"+b("CurrentUser").getID();a={getID:function(){return g},isViewer:function(a){b("MercuryAssert").isParticipantID(a);return a===g}};e.exports=a}),null);
__d("Utils.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){if(a==null)return!1;else return a}function b(a){if(a!==void 0)return a;else return!1}function c(a){if(a!==void 0)return a;else return!1}f.isTruthy=a;f.isSomeTrue=b;f.optionBoolToBool=c}),null);
__d("MessengerMessage.bs",["URI","bs_array","Utils.bs","bs_js_json","bs_caml_obj","bs_js_primitive","MercuryViewer","bs_caml_primitive","MercuryActionType","MercuryActionStatus","MercuryPayloadSource","isMessengerDotComURI","MercuryLogMessageType","MercuryMessageDeliveryState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c,d,e,f){b={thread_id:b,thread_fbid:null,other_user_fbid:null,action_type:d,message_id:a,threading_id:null,offline_threading_id:null,author:c,author_email:"",ephemeral_ttl_mode:null,timestamp:e,is_unread:null,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_sponsored:!1,is_one_way_sent:!1,ad_id:null,ad_client_token:null,commerce_message_type:null,customizations:[],source:"",source_tags:[],tags:[],is_spoof_warning:!1,folder:"inbox",platform_xmd:null,message_source:null,montage_reply_data:null,replied_to_message:null,skip_bump_thread:!1,profile_ranges:[],reactions:null,attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,raw_attachments:null,body:null,subject:null,has_attachment:null,creator_info:null,error_data:null,removed_timestamp:null,unsender:null,message_unsendability_status:null,is_forwarded:!1};return Object.assign(b,f)}function c(a){var b=a.offline_threading_id;if(b==null)return!1;else return b===a.message_id}function d(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE))return!0;else{a=a.log_message_type;if(a==null)return!0;else return!(b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").UNSUBSCRIBE)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").SERVER_ERROR)||b("bs_caml_obj").caml_equal(a,b("MercuryLogMessageType").LIVE_LISTEN))}}function e(a){__p&&__p();var c=a.ranges;if(c==null)return 0;else{c=b("bs_array").map(function(c){__p&&__p();var a=c.entity;if(a==null)return c;else{var d=b("Utils.bs").isTruthy(a.external),e=a.url;if(d||e==null)return c;else{d=new(b("URI"))(e);e=b("isMessengerDotComURI")(b("URI").getRequestURI());var f=d.getDomain();if(e&&(f==null||f===""))e=1;else return c;if(e===1)return Object.assign(Object.assign({},c),{entity:Object.assign(Object.assign({},a),{url:d.setProtocol("https").setDomain("www.facebook.com").toString()})})}}},c);Object.assign(a,{ranges:c});return 0}}function g(){return!0}function h(a){return a.filter(function(){return!0})}function i(a){if(b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").UNKNOWN)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_INITIAL_DATA)||b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryPayloadSource").SERVER_THREAD_SYNC)}function j(a){return b("bs_caml_obj").caml_equal(a.author,b("MercuryViewer").getID())}function k(a){return!j(a)}function l(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNSENT)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNCONFIRMED)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").RESENDING)}function m(a){a=a.status;if(a==null)return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").SUCCESS)}function n(a,c){return b("bs_caml_primitive").caml_float_compare(a.timestamp,c.timestamp)}function o(a){a=a.status;if(a==null)return!1;else if(b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").FAILED_UNKNOWN_REASON)||b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").UNABLE_TO_CONFIRM))return!0;else return b("bs_caml_obj").caml_equal(a,b("MercuryActionStatus").ERROR)}function p(a){a=a.error_data;if(a==null)return void 0;else return b("bs_js_primitive").nullable_to_opt(a.description)}function q(a,c){__p&&__p();if(o(a))return b("MercuryMessageDeliveryState").ERROR;else if(l(a))return b("MercuryMessageDeliveryState").SENDING;else if(m(a)){a=a.timestamp<=c;if(a)return b("MercuryMessageDeliveryState").DELIVERED;else return b("MercuryMessageDeliveryState").SENT}else return b("MercuryMessageDeliveryState").UNKNOWN}function r(a,b){__p&&__p();if(o(a))return 4;else if(l(a))return 1;else if(m(a)){b=a.timestamp<=b&&!a.is_one_way_sent;if(b)return 3;else return 2}else return 0}function s(a){__p&&__p();try{a=b("bs_js_primitive").some(JSON.parse(a))}catch(b){a=void 0}if(a!==void 0){a=b("bs_js_json").classify(b("bs_js_primitive").valFromOption(a));if(typeof a==="number"||a.tag!==2)return void 0;else{a=a[0].persona;if(a!==void 0){a=b("bs_js_json").classify(a);if(typeof a==="number"||a.tag!==2)return void 0;else return b("bs_js_primitive").some(a[0])}else return void 0}}}function t(a){__p&&__p();if(a==null)return null;else{a=a.platform_xmd;if(a==null)return null;else{a=s(a);if(a!==void 0){a=b("bs_js_primitive").valFromOption(a);var c=a.id,d=a.name;a=a.profile_picture_url;if(c!==void 0&&d!==void 0&&a!==void 0)return{id:c,name:d,profile_picture_url:a};else return null}else return null}}}function u(a){var c=a.log_message_type;if(!(c==null)&&b("bs_caml_obj").caml_equal(c,b("MercuryLogMessageType").SERVER_ERROR))return b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").LOG_MESSAGE);else return!1}function v(a,b){var c=a.thread_fbid,d=a.other_user_fbid;a=a.is_from_iris;if(b==null||!b)b=1;else return!1;if(b===1)if(!(c==null)||!(d==null)||a)return!0;else return!1}f.makeFakeMessage=a;f.isLocalMessage=c;f.isTitanMessage=d;f.finalizeRanges=e;f.canSaveMessage=g;f.getSavedMessages=h;f.shouldSortForPayloadSource=i;f.isOutbound=j;f.isInbound=k;f.isSending=l;f.isSent=m;f.compare=n;f.hasError=o;f.getError=p;f.getDeliveryState=q;f.getGutterItemStatus=r;f.getPersonaData=s;f.getPersona=t;f.isErrorLogMessage=u;f.hasServerTimestamp=v}),null);
__d("ImageSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({PROFILE_PICTURE:"profile_picture",IMAGE:"image"});e.exports=a}),null);
__d("ImageSourceRequest",["CurrentUser","ImageSourceType","KeyedCallbackManager","MercuryServerDispatcher","PhotoResizeModeConst"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this._request={fbid:null,type:null,width:null,height:null,resize_mode:null},this._callback=null}var c=a.prototype;c.setFBID=function(a){this._request.fbid=a;return this};c.setType=function(a){if(![b("ImageSourceType").PROFILE_PICTURE,b("ImageSourceType").IMAGE].includes(a))throw new TypeError("ImageSourceRequest.setType: invalid type "+a);this._request.type=a;return this};c.setDimensions=function(a,b){this._request.width=a;this._request.height=b;return this};c.setResizeMode=function(a){if(![b("PhotoResizeModeConst").COVER,b("PhotoResizeModeConst").CONTAIN].includes(a))throw new TypeError("ImageSourceRequest.setResizeMode: invalid resize mode "+a);this._request.resize_mode=a;return this};c.setCallback=function(a){this._callback=a;return this};c.send=function(){if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error("ImageSourceRequest: You must set all the fields");var a=h(),c=i(this._request);a.executeOrEnqueue(c,this._callback);if(a.getUnavailableResourcesFromRequest(c).length===1){b("MercuryServerDispatcher").trySend("/ajax/image_source.php",{requests:[this._request]});return!0}return!1};return a}();var g=null;function h(){__p&&__p();if(g)return g;var a=new(b("KeyedCallbackManager"))();g=a;b("MercuryServerDispatcher").registerEndpoints({"/ajax/image_source.php":{request_user_id:b("CurrentUser").getID(),mode:b("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,batch_function:function(a,b){var c;(c=a.requests).push.apply(c,b.requests);return a},handler:function(b,c){c=c.getData().requests;for(var d=0;d<c.length;++d)a.setResource(i(c[d]),b[d])}}});return a}function i(a){return[a.fbid,a.type,a.width,a.height,a.resize_mode].join("|")}e.exports=a}),null);
__d("MessengerParticipantsWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1864334867005873"};b.getQueryID=function(){return"2464897177088574"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerParticipantsFetcher.bs",["Promise","bs_array","BanzaiODS","WebGraphQL","MessengerServerPayloadTransformer.bs","MessengerParticipantsWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=new(b("MessengerParticipantsWebGraphQLQuery"))(a);return b("WebGraphQL").exec(c,{actorID:null,batchName:"MessengerParticipantsFetcher"})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.failure");return b("Promise").reject(a)}).then(function(c){__p&&__p();b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.success");var d=[],e=new Set();b("bs_array").iter(function(a){if(a==null)return 0;else{a=b("MessengerServerPayloadTransformer.bs").transformParticipant(a);e.add(a.fbid);d.push(a);return 0}},c.messaging_actors);c=a.ids.filter(function(a){return!e.has(a)});c.length>0&&c.forEach(function(a){d.push(b("MessengerServerPayloadTransformer.bs").getBlockedParticipant(a));return 0});return d})}f.fetch=a}),null);
__d("MessengerParticipants.bs",["fbt","Promise","FBID.bs","bs_curry","bs_caml_obj","BanzaiODS","immutable","bs_belt_Array","MercuryIDs","CurrentUser","bs_js_primitive","MercuryAssert","ImageSourceType","ImmutableObject","bs_js_null_undefined","ImageSourceRequest","MercuryVanityIDMap.bs","PhotoResizeModeConst","MercuryParticipantTypes","MercuryParticipantsConstants","MessengerParticipantsFetcher.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=[1],i={},j=new Set(),k={},l=function(b,a){delete b[a];return 0},m=function(b,a){delete b[a];return 0};function n(){var a=b("CurrentUser").isWorkUser();if(a)return g._("Workplace User");else return g._("Facebook User")}function o(a){__p&&__p();var c=a.user_type;if(c==null||!(b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").USER)||b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").FRIEND)))return a;else{c=a.href;var d=a.vanity;if(c==null&&d==null){c=n(0);return Object.assign(a,{name:c,short_name:c})}else return a}}function a(){Object.keys(i).forEach(function(a){return b("bs_curry")._2(m,i,a)});return 0}function c(a){__p&&__p();a=a.participants;if(a==null)return 0;else{a.map(function(a){__p&&__p();var c=a.id,d=a.vanity;d==null||b("MercuryVanityIDMap.bs").set(d,c);d=i[c];if(d!==void 0){i[c]=b("ImmutableObject").set(d,a);return 0}else{i[c]=new(b("ImmutableObject"))(o(a));return 0}});return 0}}function p(a,c){__p&&__p();var d={},e=[];a.forEach(function(a){var b=i[a];if(b!==void 0){d[a]=b;return 0}else{e.push(a);return 0}});if(e.length===0){c(d);return null}else{var f=[];e.forEach(function(a){__p&&__p();if(j.has(a))return 0;else{var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c==null)return 0;else{f.push(c);j.add(a);return 0}}});var g=h[0].toString();k[g]=[a,c];h[0]=h[0]+1|0;f.length>0&&b("MessengerParticipantsFetcher.bs").fetch({ids:f}).then(function(a){__p&&__p();a.forEach(function(a){i[a.id]=new(b("ImmutableObject"))(a);var c=a.id;a=a.vanity;a==null||b("MercuryVanityIDMap.bs").set(a,c);j["delete"](c);return 0});Object.keys(k).forEach(function(a){__p&&__p();var d=k[a];if(d!==void 0){var e=d[0],c={};e.forEach(function(b){var a=i[b];if(a!==void 0){c[b]=a;return 0}else return 0});if(Object.keys(c).length===e.length){b("bs_curry")._2(l,k,a);return d[1](c)}else return 0}else return 0});b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.success");return b("Promise").resolve(0)})["catch"](function(){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.failure");return b("Promise").resolve(0)});return g}}function d(a,c){b("MercuryAssert").isParticipantID(a);return p([a],function(d){d=d[a];if(d!==void 0)return b("bs_curry")._1(c,d);else return 0})}function q(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(i[a]))}function r(c,d){__p&&__p();var e=[],a=[];c.forEach(function(b){var c=q(b);c==null?e.push(b):a.push(c);return 0});if(e.length!==0){var f=p(e,function(){return b("bs_curry")._1(d,b("bs_belt_Array").keepMap(c,function(a){return b("bs_js_primitive").nullable_to_opt(q(a))}))});return[a,f]}else return[a,null]}function e(a,c){var d=function(a){return b("immutable").Map(a.map(function(a){return[a.id,a]}))},e=function(a){return b("bs_curry")._1(c,d(a))};a=r(a,e);return[d(a[0]),a[1]]}function s(a){return b("bs_curry")._2(l,k,a)}function t(a,c,d){new(b("ImageSourceRequest"))().setFBID(b("bs_js_null_undefined").fromOption(b("bs_js_primitive").nullable_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a)))).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(c,c).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(function(c){return b("bs_curry")._2(d,a,c)}).send();return 0}function u(a,c,d,e){__p&&__p();b("MercuryAssert").allParticipantIDs(a);var f=[!1],g=p(a,function(e){__p&&__p();var g={},h=function(d,e){g[d]=e;if(!f[0]&&a.length===Object.keys(g).length)return b("bs_curry")._1(c,g);else return 0},j=function(a,c){var d=e[a];d!==void 0&&(e[a]=b("ImmutableObject").set(d,{big_image_src:c.uri}));return h(a,c.uri)};Object.keys(e).map(function(a){return a}).forEach(function(a){var c=e[a];if(c!==void 0){var f=d===b("MercuryParticipantsConstants").BIG_IMAGE_SIZE;f=f?b("bs_js_primitive").nullable_to_opt(c.big_image_src):void 0;if(f!==void 0)return h(c.id,f);else return t(a,d,j)}else return t(a,d,j)});return 0});return{remove:function(){f[0]=!0;if(g==null)return 0;else return s(g)}}}function v(a,c,d){return u(a,c,b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,0)}function w(a,c){return v(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(d[a]))}))},0)}function x(a,c,d){return u(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(d[a]))}))},d,0)}function y(a){__p&&__p();if(a==null)return null;else if(b("MercuryVanityIDMap.bs").hasVanity(a)){var c=b("MercuryVanityIDMap.bs").getID(a);if(c==null)return null;else return c}else{c=/^\d+$/;if(c.test(a)){c=b("FBID.bs").ofString(a);if(c!==void 0)return b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(c));else return null}else return null}}f.reset=a;f.addParticipants=c;f.getDefaultName=n;f.get=d;f.getNow=q;f.getMulti=p;f.getMultiEager=r;f.getMultiEagerMap=e;f.removeCallback=s;f.getBigImageMultiWithSize=u;f.getBigImageMulti=v;f.getOrderedBigImageMulti=w;f.getOrderedBigImageMultiWithSize=x;f.getIDFromVanityOrFBID=y}),null);
__d("MessengerPersonas.bs",["bs_js_primitive","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){if(a==null)return 0;else{var b=g[a.id];if(b!==void 0)return 0;else{g[a.id]=a;return 0}}}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(g[a]))}f.personas=g;f.addPersona=a;f.getNow=c}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),f=c.extensible_attachment,g;if(f==null)g=null;else{var h=f.story_attachment,i=f.genie_attachment,j;if(i==null)j=null;else{i=i.genie_message;var k;if(i==null)k=null;else{i=i.story_attachment;k={story_attachment:i==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(i)}}j={genie_message:k}}g={legacy_attachment_id:f.legacy_attachment_id,story_attachment:h==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(h),genie_attachment:j}}return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:e,sticker:c.sticker},null,d)}f.transform=a}),null);
__d("MessengerThreadFetcher.bs",["Promise","bs_curry","gkx","FBIDCheck","bs_belt_Array","bs_caml_int32","MercuryIDs","bs_js_primitive","MercuryDispatcher","MercuryThreadIDMap","MercuryPayloadSource","bs_caml_builtin_exceptions","setTimeoutAcrossTransitions","MessengerGraphQLThreadFetcher.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a,c){__p&&__p();var d=c.other_user_fbid;if(d==null){c=c.thread_fbid;if(c==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Encountered thread with no server identifier"];else c=[c,b("MercuryIDs").getThreadIDFromThreadFBID(c)]}else c=[d,b("MercuryIDs").getThreadIDFromUserID(d)];d=c[1];c=c[0];a=b("MercuryThreadIDMap").getForFBID(a);var e={},f=a.getClientIDFromServerIDNow(c);if(f==null){a.setServerIDToClientID(c,d);e[c]=d;return[d,e]}else return[f,e]}function i(a,c,d){__p&&__p();var e=!b("FBIDCheck").isUser_deprecated(a);return b("MessengerGraphQLThreadFetcher.bs").fetchAll(a,[{id:c,limit:0,loadReadReceipts:!1,loadDeliveryReceipts:!1,timestamp:null,isCanonical:d}],e).then(function(c){__p&&__p();c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_js_primitive").valFromOption(c).thread;if(c==null)return b("Promise").resolve(!1);else{var d=h(a,c);b("MercuryDispatcher").getForFBID(a).handleUpdate({threads:[Object.assign(c,{thread_id:d[0]})],pinned_thread_ids:[],newlyAddedClientIDs:d[1],actions:[],preprocessed:!0,payload_source:b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO});return b("Promise").resolve(!0)}}else return b("Promise").resolve(!1)})}function j(a,c,d){__p&&__p();return i(a,c,d).then(function(d){__p&&__p();var e=g.get(a);if(e==null)return b("Promise").resolve(!1);else{var f=e.get(c);if(f==null)return b("Promise").resolve(!1);else{b("bs_belt_Array").forEach(f[1],function(a){return b("bs_curry")._1(a,d)});e["delete"](c);return b("Promise").resolve(d)}}})["catch"](function(){__p&&__p();var e=g.get(a);if(e==null)return b("Promise").resolve(!1);else{var f=e.get(c);if(f==null)return b("Promise").resolve(!1);else{var h=f[1];f=f[0];if(f<5||b("gkx")("678666")){var k=b("bs_caml_int32").imul(Math.pow(2,Math.min(f,5)),1e3),l=new(b("Promise"))(function(f,g){__p&&__p();b("setTimeoutAcrossTransitions")(function(){i(a,c,d).then(function(a){f(a);b("bs_belt_Array").forEach(h,function(c){return b("bs_curry")._1(c,a)});e["delete"](c);return b("Promise").resolve(a)})["catch"](function(){return j(a,c,d)});return 0},k);return 0});e.set(c,[f+1|0,h]);return l}else{e["delete"](c);return b("Promise").resolve(!1)}}}})}function a(a,b,c,d){__p&&__p();var e=g.get(a);if(e==null){var f=new Map();f.set(b,[0,[d]]);g.set(a,f);j(a,b,c);return 0}else{f=e.get(b);if(f==null){e.set(b,[0,[d]]);j(a,b,c);return 0}else{f[1].push(d);return 0}}}f.fetch=a}),null);
__d("ClientSyncProtocol_GroupsSyncAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPT_IN:0,OPT_OUT:1})}),null);
__d("MSuggestionDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("MSuggestionActions",["MSuggestionDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SAVE_ALL_SUGGESTIONS:null,REMOVE_ALL_SUGGESTIONS:null,REMOVE_SUGGESTIONS_BY_TYPE:null});var g={Types:a,saveAllSuggestions:function(a,c){b("MSuggestionDispatcher").dispatch({type:g.Types.SAVE_ALL_SUGGESTIONS,threadID:a,suggestions:c})},removeAllSuggestions:function(a){a&&b("MSuggestionDispatcher").dispatch({type:g.Types.REMOVE_ALL_SUGGESTIONS,threadID:a})},removeSuggestionsByType:function(a,c){b("MSuggestionDispatcher").dispatch({type:g.Types.REMOVE_SUGGESTIONS_BY_TYPE,threadID:a,typeID:c})}};e.exports=g}),null);
__d("MercuryGlobalActionType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MARK_ALL_READ:"mga-type:mark-all-read",MARK_ALL_SEEN:"mga-type:mark-all-seen"})}),null);
__d("MercuryMessageCustomizations",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=JSON.parse(a),c=[];Object.keys(b).forEach(function(a){c.push({customization_type:a,customization_value:b[a]})});return c}e.exports={parseCustomizations:a}}),null);
__d("MercuryProfileRanges",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!a.id&&a.i?{id:a.i,offset:a.o,length:a.l}:a}e.exports={extractFromDelta:function(a){a=(a=a)!=null?(a=a.data)!=null?a.prng:a:a;if(!a)return[];var b=[];try{b=JSON.parse(a);if(b.length>0)return b.map(g)}catch(a){}return b}}}),null);
__d("MercurySyncDeltaTypes",[],(function(a,b,c,d,e,f){"use strict";a={AdminAddedToGroupThread:"AdminAddedToGroupThread",AdminRemovedFromGroupThread:"AdminRemovedFromGroupThread",AdminTextMessage:"AdminTextMessage",ChangeViewerStatus:"ChangeViewerStatus",DeliveryReceipt:"DeliveryReceipt",ForcedFetch:"ForcedFetch",MarkRead:"MarkRead",MarkUnread:"MarkUnread",MarkFolderSeen:"MarkFolderSeen",MessageDelete:"MessageDelete",NewMessage:"NewMessage",NoOp:"NoOp",PagesManagerEvent:"PagesManagerEvent",ParticipantLeftGroupThread:"ParticipantLeftGroupThread",ParticipantsAddedToGroupThread:"ParticipantsAddedToGroupThread",ReadReceipt:"ReadReceipt",ReplaceMessage:"ReplaceMessage",RTCEventLog:"RTCEventLog",ThreadAction:"ThreadAction",ThreadDelete:"ThreadDelete",ThreadFolder:"ThreadFolder",ThreadMuteSettings:"ThreadMuteSettings",ThreadName:"ThreadName",JoinableMode:"JoinableMode",ApprovalMode:"ApprovalMode",ApprovalQueue:"ApprovalQueue",ClientPayload:"ClientPayload",GenieMessage:"GenieMessage",MontageMessage:"MontageMessage",RtcCallData:"RtcCallData"};e.exports=a}),null);
__d("MessageThreadReadState",[],(function(a,b,c,d,e,f){"use strict";a={MARK_READ:1,MARK_UNREAD:2,KEEP_AS_IS:3};e.exports=a}),null);
__d("MessageThreadReadStateEffect",["MessageThreadReadState"],(function(a,b,c,d,e,f){"use strict";a=function(a,c){var d=c.messageMetadata.threadReadStateEffect;if(d!=null)return b("MessageThreadReadState")[d];d=c.messageMetadata.skipBumpThread;return d===!0?b("MessageThreadReadState").KEEP_AS_IS:a!==c.messageMetadata.actorFbId?b("MessageThreadReadState").MARK_UNREAD:b("MessageThreadReadState").KEEP_AS_IS};e.exports={extractThreadStateEffectFromDelta:a}}),null);
__d("MessagingThreadAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_INVALID:"ACTION_INVALID",ACTION_ARCHIVED:"ACTION_ARCHIVED",ACTION_UNARCHIVED:"ACTION_UNARCHIVED"})}),null);
__d("MessengerApprovalModeTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({OPEN:0,APPROVALS:1})}),null);
__d("MessengerApprovalQueueTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REQUESTED:"REQUESTED",REMOVED:"REMOVED"})}),null);
__d("MessengerGroupRequestSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD:0,JOIN_THROUGH_LINK:1})}),null);
__d("MessengerWebDeltaEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DELTA_RECEIVED:"DELTA_RECEIVED",DELTA_IGNORED:"DELTA_IGNORED"})}),null);
__d("MessengerWebDeltasTypedLoggerBootloader.bs",["Bootload.bs","Bootloader"],(function(a,b,c,d,e,f){"use strict";function a(a){b("Bootloader").loadModules(["MessengerWebDeltasTypedLogger"],a,"MessengerWebDeltasTypedLoggerBootloader.bs");return 0}c=[a];d=b("Bootload.bs").Create(c);f.BootloadableMessengerWebDeltasTypedLogger=c;f.LoadableMessengerWebDeltasTypedLogger=d}),null);
__d("PagesMessagingEventType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FLAG:1,CREATE_ADMIN_NOTE:2,PRIORITY_UPDATE:3})}),null);
__d("RepliedToMessageStatusForGraphQL",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VALID:"VALID",DELETED:"DELETED",TEMPORARILY_UNAVAILABLE:"TEMPORARILY_UNAVAILABLE"})}),null);
__d("MessengerDeltaTransformer.bs",["Promise","FBID.bs","bs_block","bs_curry","gkx","bs_js_json","bs_caml_obj","FBIDCheck","bs_belt_Array","bs_caml_array","DateConsts","MercuryIDs","bs_belt_Option","bs_js_primitive","MessagingTag","MessengerState.bs","MontageActions","bs_js_null_undefined","MercuryActionType","MercuryDispatcher","MSuggestionActions","MercuryThreadIDMap","PageCommItemStatus","MercuryPayloadSource","MercuryProfileRanges","MercuryLogMessageType","MercuryServerRequests","MercurySyncDeltaTypes","MessagingThreadAction","MessageThreadReadState","MessengerThreadFetcher.bs","bs_caml_builtin_exceptions","MercuryGlobalActionType","MessengerWebDeltaEvents","PagesMessagingEventType","MessengerGroupsSyncStatus","MessengerGroupsSyncStatus.bs","MessageUnsendabilityStatus.bs","MessengerApprovalModeTypes","IrisProtocolMessageLifetime","MessengerApprovalQueueTypes","MessengerGroupRequestSource","MercuryMessageCustomizations","MessageThreadReadStateEffect","MessengerParticipantsFetcher.bs","MessengerWebDeltasTypedLogger","RepliedToMessageStatusForGraphQL","ClientSyncProtocol_GroupsSyncAction","MessengerRealtimeAttachmentTransformer.bs","MessengerWebDeltasTypedLoggerBootloader.bs","MessageLiveLocationClientSyncProtocolStopReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){try{return JSON.parse(a)}catch(a){return{}}}c=b("gkx")("780647");var h=c?0:1;function i(a,c){__p&&__p();var d=b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(c.otherUserFbId),function(a){return a.toString()});c=b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(c.threadFbId),function(a){return a.toString()});a=b("MercuryThreadIDMap").getForFBID(a);if(d!==void 0){d=d;d=[b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromUserID(b("FBID.bs").ofStringExn(d))),d]}else if(c!==void 0){c=c;d=[b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c))),c]}else d=[void 0,void 0];c=d[1];d=d[0];if(c!==void 0&&d!==void 0){c=c;var e=a.hasClientIDForServerID(c);if(e)return b("bs_js_primitive").nullable_to_opt(a.getClientIDFromServerIDNow(c));else return b("bs_js_primitive").valFromOption(d)}}function j(a,c){__p&&__p();var d=parseInt(c.messageMetadata.timestamp,10),e=b("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta(a,c),f=c.messageMetadata.actorFbId.toString(),h=b("bs_caml_obj").caml_equal(e,b("MessageThreadReadState").MARK_UNREAD)&&a!==f,j=!b("FBIDCheck").isUser_deprecated(a),k=c.attachments;k=k==null?[]:b("bs_belt_Array").keepMapU(k,function(e){__p&&__p();var c=e.mercury;if(c==null){e=e.mercuryJSON;e=e==null?null:g(e)}else e=c;if(e==null)return void 0;else{c=e.extensible_attachment;var d=e.blob_attachment;e=e.sticker_attachment;e=c==null?d==null?e==null?[]:b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:null,sticker:e},j):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:[d],sticker:null},j):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:b("bs_js_null_undefined").fromOption(c==null?void 0:b("bs_js_primitive").some(c)),blob_attachments:null,sticker:null},j);return b("bs_belt_Array").get(e,0)}});var l=c.messageMetadata.tags;l=l==null?void 0:b("bs_js_null_undefined").fromOption(b("bs_belt_Array").get(l,0));var m=c.data,n;if(m==null)n=null;else{var o=m.adminSignatureCreatorID;n=o!==void 0?{creatorID:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignatureCreatorID)),creatorName:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignatureCreatorName)),creatorType:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignatureCreatorType)),labelType:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignatureLabelType)),pageID:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignaturePageID)),profileURI:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(m.adminSignatureProfileURI))}:null}o=i(a,c.messageMetadata.threadKey);if(o!==void 0){m=c.ttl;var p=c.messageMetadata.threadKey.threadFbId,q=c.messageMetadata.threadKey.otherUserFbId,r=c.body,s=c.data;if(s==null){var t=c.untypedData;t=t==null?!1:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").undefined_to_opt(t.is_sponsored),"false")==="true"}else t=b("bs_belt_Option").getWithDefault(b("bs_js_primitive").undefined_to_opt(s.is_sponsored),"false")==="true";s=c.data;var u=c.data,v;if(u==null)v=null;else{u=u.customization;v=u!==void 0?b("MercuryMessageCustomizations").parseCustomizations(u):null}u=c.data;var w=c.data,x;if(w==null)x=null;else{w=w.message_source_data;if(w!==void 0){w=g(w);w=b("bs_js_json").classify(w);if(typeof w==="number"||w.tag!==2)x=null;else{w=w[0].message_source;x=w!==void 0?b("bs_js_null_undefined").fromOption(w===void 0?void 0:b("bs_js_primitive").some(w)):null}}else x=null}w=c.messageMetadata.skipBumpThread;var y=c.data,z;if(y==null)z=null;else{y=y.montage_reply_data;z=y!==void 0?g(y):null}y=c.data;var A;if(y==null)A=null;else{y=y.meta_ranges;A=y!==void 0?g(y):null}return{message_id:c.messageMetadata.messageId,threading_id:null,offline_threading_id:c.messageMetadata.offlineThreadingId,author:b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(f)),author_email:f+"@facebook.com",ephemeral_ttl_mode:m==null?0:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").undefined_to_opt(b("IrisProtocolMessageLifetime")[m]),0),timestamp:d,is_unread:h,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_one_way_sent:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){return a===b("MessagingTag").ONE_WAY_MESSAGE}),is_forwarded:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){if(a===b("MessagingTag").ACTION_COPIED_MESSAGE||a===b("MessagingTag").ACTION_COPIED_SELF_MESSAGE||a===b("MessagingTag").ACTION_COPIED_ATTACHMENT)return!0;else return a===b("MessagingTag").ACTION_COPIED_SELF_ATTACHMENT}),source:l,tags:c.messageMetadata.tags,is_spoof_warning:!1,folder:null,thread_fbid:p==null?null:p.toString(),other_user_fbid:q==null?null:q.toString(),body:r==null?"":r,html_body:null,subject:null,has_attachment:k.length>0,attachments:k,ranges:void 0,thread_id:o,action_type:b("MercuryActionType").USER_GENERATED_MESSAGE,is_from_iris:!0,is_sponsored:t,commerce_message_type:s==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(s.commerce_message_type)),customizations:v,platform_xmd:u==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(u.platform_xmd)),profile_ranges:b("MercuryProfileRanges").extractFromDelta(c),message_source:x,skip_bump_thread:w==null?!1:w,thread_read_state_effect:e,montage_reply_data:z,meta_ranges:A,creator_info:n,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.messageMetadata.unsendType),comm_status:j?b("PageCommItemStatus").TODO:null}}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"invalid thread id"]}function k(a,c,d,e){return b("bs_curry")._1(b("MessengerWebDeltasTypedLoggerBootloader.bs").LoadableMessengerWebDeltasTypedLogger[0],function(){var f=new(b("MessengerWebDeltasTypedLogger"))();f=f.setDeltaEvent(a).setDeltaType(c).setIgnoreReason(d).setSyncSeqID(e);f.log();return 0})}function l(a){return k(b("MessengerWebDeltaEvents").DELTA_RECEIVED,a,null,null)}function m(a,c){return k(b("MessengerWebDeltaEvents").DELTA_IGNORED,a,c,null)}function n(a,c,d,e){__p&&__p();var f=c.other_user_fbid;if(f==null){var g=c.thread_fbid;if(g==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"invalid thread id"];else g=[g,!1]}else g=[f,!0];f=g[0];var h=b("MercuryThreadIDMap").getForFBID(a);h=h.getClientIDFromServerIDNow(f);if(h==null)if(e)return b("MessengerThreadFetcher.bs").fetch(a,f,g[1],function(e){if(e){b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[c],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return l(d)}else return m(d,"thread fetch failed")});else return m(d,"thread not already loaded, not required to be loaded");else{b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[c],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return l(d)}}function o(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_js_primitive").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_js_primitive").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=i(a,b("bs_js_primitive").valFromOption(f));if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").REACTION_UPDATE,messageId:c.messageId,offlineThreadingId:c.offlineThreadingId,reaction:c.reaction,senderId:c.senderId.toString(),thread_fbid:e.toString(),other_user_fbid:null,userId:c.userId.toString()};else return void 0}}function p(a){return a/Math.pow(10,8)}function q(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_js_primitive").some(d),f=c.threadKey.otherUserFbId,g=f==null?void 0:b("bs_js_primitive").some(f);d=d==null?f==null?[void 0,void 0]:[g,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(g)}]:[e,{otherUserFbId:b("bs_js_null_undefined").fromOption(e),threadFbId:null}];f=d[1];g=d[0];if(g!==void 0&&f!==void 0){e=i(a,b("bs_js_primitive").valFromOption(f));if(e!==void 0&&c.messageLiveLocations.length===1){d=b("bs_caml_array").caml_array_get(c.messageLiveLocations,0);a=d.expirationTime;f=d.stopReason;c=f==null?Date.now()/b("DateConsts").MS_PER_SEC>a:!0;f=d.coordinate;f=f==null?null:{latitude:p(f.latitude),longitude:p(f.longitude)};var h=d.destination;h=h==null?null:{latitude:p(h.latitude),longitude:p(h.longitude),label:h.label};var j=d.stopReason;j=j==null?null:j===b("MessageLiveLocationClientSyncProtocolStopReason").EXPIRED||j===b("MessageLiveLocationClientSyncProtocolStopReason").CANCELED?"EXPIRED":j===b("MessageLiveLocationClientSyncProtocolStopReason").ARRIVED?"ARRIVED":null;return{thread_id:e,action_type:b("MercuryActionType").LIVE_LOCATION_UPDATE,thread_fbid:g.toString(),other_user_fbid:null,messageId:d.messageId,liveLocation:{live_location_id:d.id.toString(),is_expired:c,expiration_time:a,sender:{id:d.senderId.toString()},coordinate:f,location_title:d.locationTitle,sender_destination:h,stop_reason:j}}}else return void 0}}function r(a,c){var d=c.threadKey.threadFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").EVENT_RSVP_CHANGED,actor_fbid:c.actorFbId.toString(),rsvp_status:c.rsvpStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return void 0}}function s(a,c){__p&&__p();var d=c.threadKey.otherUserFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0){c=c.isFollowUp;return{action_type:b("MercuryActionType").UPDATE_COMM_STATUS,comm_status:c?b("PageCommItemStatus").FOLLOW_UP:b("PageCommItemStatus").TODO,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a}}else return void 0}}function t(a,c){__p&&__p();var d=[];c.forEach(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(a==null)return 0;else{d.push(a);return 0}});return b("MessengerParticipantsFetcher.bs").fetch({ids:d}).then(function(c){__p&&__p();var d=[],e=[];c.forEach(function(a){var b=a.id;if(a.is_messenger_blocked||a.is_facebook_blocked){d.push(b);return 0}else{e.push(b);return 0}});b("MercuryDispatcher").getForFBID(a).handleUpdate({from_client:!0,message_blocked_ids:d,message_unblocked_ids:e});return b("Promise").resolve(0)})["catch"](function(){return b("Promise").resolve(0)})}function u(a,c){__p&&__p();var d=c.actorFbid.toString(),e=b("FBID.bs").ofStringExn(d);if(b("bs_caml_obj").caml_notequal(e,a))e=b("bs_js_primitive").some(b("MercuryIDs").getParticipantIDFromUserID(a));else{var f=c.threadKey.otherUserFbId;if(f==null)e=void 0;else{f=b("FBID.bs").ofString(f.toString());e=f!==void 0?b("bs_js_primitive").some(b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(f))):void 0}}if(e!==void 0){f=b("bs_js_primitive").valFromOption(e);e=c.threadKey.otherUserFbId;if(e==null)return void 0;else{t(a,[f]);a=i(a,{otherUserFbId:e,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLOCK_STATUS_CHANGED,actorFbid:d,canViewerReply:c.canViewerReply,reason:c.reason,message_blocked_ids:[f],other_user_fbid:e.toString(),thread_fbid:null,thread_id:a};else return void 0}}}function v(a,c){__p&&__p();var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_js_primitive").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").MONTAGE_DIRECT_EXPIRE,messageId:c.messageId,timestamp:c.timestamp,thread_fbid:e,other_user_fbid:null,keep_expiry_timestamp:c.keepExpiryTimestamp,thread_id:a};else return void 0}}function w(a,c){__p&&__p();var d=j(a,c.message),e=c.repliedToMessage;if(e==null)return b("bs_js_primitive").some(d);else{a=j(a,e);e=c.status;var f;if(e==null||e>2||e<0)f=void 0;else switch(e){case 0:f=b("bs_js_primitive").some(b("RepliedToMessageStatusForGraphQL").VALID);break;case 1:f=b("bs_js_primitive").some(b("RepliedToMessageStatusForGraphQL").DELETED);break;case 2:f=b("bs_js_primitive").some(b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE);break}if(f!==void 0)return b("bs_js_primitive").some(Object.assign(d,{replied_to_message:{status:b("bs_js_primitive").valFromOption(f),message:a}}));else return void 0}}function x(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_js_primitive").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_js_primitive").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=i(a,b("bs_js_primitive").valFromOption(f));if(d!==void 0)return{action_type:b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_status_string:b("MessengerGroupsSyncStatus.bs").fromNullableString(c.groupsSyncStatus),thread_id:d};else return void 0}}function y(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_js_primitive").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_js_primitive").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];d=c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_IN?b("bs_js_primitive").some(b("MessengerGroupsSyncStatus").OPT_IN):c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_OUT?b("bs_js_primitive").some(b("MessengerGroupsSyncStatus").OPT_OUT):void 0;if(e!==void 0&&d!==void 0&&f!==void 0){a=i(a,b("bs_js_primitive").valFromOption(f));if(a!==void 0){f=c.syncedFbGroupId;return{action_type:b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_action:b("bs_js_primitive").valFromOption(d),source_surface:c.sourceSurface,fb_group_id:f==null?null:f.toString(),thread_id:a}}else return void 0}}function z(a,c){var d=c.threadKey.threadFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").DESCRIPTION_CHANGED,thread_fbid:d.toString(),other_user_fbid:null,group_thread_description_string:c.threadDescription,thread_id:a};else return void 0}}function A(a){return"#"+a.slice(2)}function B(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_js_primitive").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_js_primitive").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=e;e=i(a,b("bs_js_primitive").valFromOption(f));if(e!==void 0){a=e;f=c.fallbackColor!==""?A(c.fallbackColor):"";e=c.gradientColors;var g;if(e==null||!e.length)g=1;else{e=b("bs_belt_Array").map(e,A);return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),other_user_fbid:null,theme_id:c.themeId,solid_color:f,header_color:b("bs_caml_array").caml_array_get(e,0),footer_color:b("bs_caml_array").caml_array_get(e,e.length-1|0),gradient_colors:e,thread_id:a}}if(g===1)return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),other_user_fbid:null,theme_id:c.themeId,solid_color:f,header_color:f,footer_color:f,gradient_colors:[],thread_id:a}}else return void 0}}function C(a,c){__p&&__p();var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_js_primitive").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").CHANGE_PINNED_STATUS,thread_fbid:e,other_user_fbid:null,is_pinned:c.isPinned,thread_id:a,thread_pin_timestamp:c.timestamp};else return void 0}}function D(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;e=d==null?e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]:[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_js_primitive").valFromOption(d));if(a!==void 0){d=c.isSaved;var f=c.isSaved;return{action_type:b("MercuryActionType").MUTATE_TAGS,thread_fbid:e,other_user_fbid:null,thread_id:a,messageId:c.messageId,tags_to_add:d?["message:save"]:[],tags_to_delete:f?[]:["message:save"]}}else return void 0}}function E(a,c){var d=c.threadKey.threadFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_JOINABLE_LINK,joinable_link:c.privateGroupLink,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return void 0}}function F(a){__p&&__p();a=a.directives;if(a==null)return void 0;else{a=b("bs_belt_Array").get(a,0);if(a!==void 0){a=b("bs_js_primitive").valFromOption(a).data;if(a==null)return void 0;else{a=a.add_actions;if(a==null)return void 0;else{var c=a.actions;if(c==null)return void 0;else{c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_js_primitive").valFromOption(c).thread_key;if(c==null)return void 0;else{var d=c.thread_fbid;c=c.other_user_fbid;var e;if(d==null)if(c==null)return void 0;else c=c,e=1;else c=d,e=1;if(e===1)return{action_type:b("MercuryActionType").CREATE_OMNI_M_SUGGESTIONS,thread_fbid:b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c)),other_user_fbid:null,thread_id:c,suggestions:a}}}else return void 0}}}}else return void 0}}function G(a,c){var d=c.threadKey.threadFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").PROMOTE_GROUP_ADMINS,thread_fbid:d.toString(),other_user_fbid:null,promoted_admins:b("bs_belt_Array").map(c.promotedAdmins,function(a){return{admin_fbid:a.adminFbId.toString(),admin_type:a.adminType}}),thread_id:a};else return void 0}}function H(a,c){__p&&__p();var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;if(d==null)if(e==null)return void 0;else{var f=i(a,{otherUserFbId:e,threadFbId:null});if(f!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:null,messageId:c.messageID,other_user_fbid:e.toString(),removed_timestamp:c.deletionTimestamp,thread_id:f,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return void 0}else{e=i(a,{otherUserFbId:null,threadFbId:d});if(e!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:d.toString(),messageId:c.messageID,other_user_fbid:null,removed_timestamp:c.deletionTimestamp,thread_id:e,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return void 0}}function I(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE,page_unsubscribe_status:c.unSubscribeStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return void 0}}function J(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLURRED_IMAGE_STATUS,blurred_image_uri:c.blurredImageUri,image_message_id:c.messageId,image_id:c.imageId,should_show:c.shouldShow,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return void 0}}function K(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").IS_PIN_PROTECTED,thread_fbid:d.toString(),other_user_fbid:null,is_pin_protected:c.isPinProtected,thread_id:a};else return void 0}}function L(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return void 0;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS,other_user_fbid:d.toString(),subtitle_type:c.subtitleType,thread_connectivity_status:c.threadConnectivityStatus,thread_fbid:d.toString(),thread_id:a};else return void 0}}var M=function(a){return String.fromCharCode.apply(null,a)};function N(a,c){__p&&__p();c=JSON.parse(M(c.payload));c=b("bs_js_json").classify(c);if(typeof c==="number"||c.tag!==2)return b("bs_block").__(1,["DeltaClientDelta","malformed payload"]);else{c=c[0].deltas;if(c!==void 0){c=b("bs_js_json").classify(c);if(typeof c==="number"||c.tag!==3)return b("bs_block").__(1,["DeltaClientDelta","delta is not an array"]);else{c=b("bs_belt_Array").get(c[0],0);if(c!==void 0){c=b("bs_js_json").classify(b("bs_js_primitive").valFromOption(c));if(typeof c==="number"||c.tag!==2)return b("bs_block").__(1,["DeltaClientDelta","client delta is not an object"]);else{c=c[0];var d=!1,e=0,f=c.deltaMessageReaction;if(f!==void 0){d=!0;f=o(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaMessageReaction",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaMessageReaction","transform failed"])}f=c.liveLocationData;if(f!==void 0&&!d){d=!0;f=q(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.liveLocationData",h):e=b("bs_block").__(1,["DeltaClientDelta.liveLocationData","transform failed"])}f=c.deltaUpdateGroupEventRSVPStatus;if(f!==void 0&&!d){d=!0;f=r(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupEventRSVPStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupEventRSVPStatus","transform failed"])}f=c.deltaPageThreadFollowUpData;if(f!==void 0&&!d){d=!0;f=s(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaPageThreadFollowUpData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPageThreadFollowUpData","transform failed"])}f=c.deltaChangeViewerStatus;if(f!==void 0&&!d){d=!0;f=u(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaChangeViewerStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaChangeViewerStatus","transform failed"])}f=c.deltaMontageDirectExpire;if(f!==void 0&&!d){d=!0;f=v(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaMontageDirectExpire",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaMontageDirectExpire","transform failed"])}f=c.deltaMessageReply;if(f!==void 0&&!d){d=!0;f=w(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaMessageReply",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaMessageReply","transform failed"])}f=c.deltaUpdateGroupsSyncStatus;if(f!==void 0&&!d){d=!0;f=x(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupsSyncStatus","transform failed"])}f=c.deltaUpdateGroupsSyncMetadata;if(f!==void 0&&!d){d=!0;f=y(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncMetadata",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupsSyncMetadata","transform failed"])}f=c.deltaGroupThreadDescription;if(f!==void 0&&!d){d=!0;f=z(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaGroupThreadDescription",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaGroupThreadDescription","transform failed"])}f=c.deltaUpdateThreadTheme;if(f!==void 0&&!d){d=!0;f=B(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdateThreadTheme",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateThreadTheme","transform failed"])}f=c.deltaUpdateSavedMessage;if(f!==void 0&&!d){d=!0;f=D(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdateSavedMessage",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateSavedMessage","transform failed"])}f=c.deltaUpdatePinnedThread;if(f!==void 0&&!d){d=!0;f=C(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdatePinnedThread",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedThread","transform failed"])}f=c.deltaUpdatePrivateGroupJoinableLink;if(f!==void 0&&!d){d=!0;f=E(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink","transform failed"])}f=c.deltaOmniMDirectivesV2;if(f!==void 0&&!d){d=!0;f=F(f);if(f!==void 0){f=b("bs_js_primitive").valFromOption(f);e=b("bs_block").__(0,["DeltaClientDelta.deltaOmniMDirectivesV2"]);b("MSuggestionActions").saveAllSuggestions(f.thread_id,f.suggestions)}else e=b("bs_block").__(1,["DeltaClientDelta.deltaOmniMDirectivesV2","transform failed"])}f=c.deltaPromoteGroupThreadAdmin;if(f!==void 0&&!d){d=!0;f=G(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaPromoteGroupThreadAdmin",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPromoteGroupThreadAdmin","transform failed"])}f=c.deltaRecallMessageData;if(f!==void 0&&!d){d=!0;f=H(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaRecallMessageData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaRecallMessageData","transform failed"])}f=c.deltaPageUnSubscribeStatus;if(f!==void 0&&!d){d=!0;f=I(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaPageUnSubscribeStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPageUnSubscribeStatus","transform failed"])}f=c.deltaPageBlurredImageStatus;if(f!==void 0&&!d){d=!0;f=J(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaPageBlurredImageStatus",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPageBlurredImageStatus","transform failed"])}f=c.deltaPaymentPinProtectionStatusData;if(f!==void 0){if(!d){d=!0;f=K(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaPaymentPinProtectionStatusData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaPaymentPinProtectionStatusData","transform failed"])}}else d||(e=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join()]));f=c.deltaThreadConnectivityStatusUpdate;if(f!==void 0){if(!d){d=!0;f=L(a,f);f!==void 0?n(a,b("bs_js_primitive").valFromOption(f),"DeltaClientDelta.deltaThreadConnectivityStatusUpdateData",h):e=b("bs_block").__(1,["DeltaClientDelta.deltaThreadConnectivityStatusUpdateData","transform failed"])}}else d||(e=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join()]));return e}}else return b("bs_block").__(1,["DeltaClientDelta","client delta is missing"])}}else return b("bs_block").__(1,["DeltaClientDelta","client delta has no deltas"])}}function O(a,c){__p&&__p();var d=[],e=[],f=c.folders,g=0;!(f==null)&&f.length!==0?b("bs_belt_Array").forEachU(f,function(a){d.push({action_type:b("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:b("bs_js_primitive").undefined_to_opt(b("MessagingTag").IRIS_MAPPING[a]),timestamp:parseInt(c.watermarkTimestamp,10)});return 0}):g=1;g===1&&b("bs_belt_Array").forEachU(c.threadKeys,function(f){var d=i(a,f);if(d!==void 0){var g=parseInt(c.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(g);e.push({thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:f.otherUserFbId,thread_fbid:f.threadFbId,mark_as_read:!0,timestamp:g,folder:b("MessagingTag").INBOX});return 0}else return 0});return[d,e]}function P(a){if(a==null)return null;else return a.toString()}function Q(a){a=a.skipBumpThread;if(!(a==null)&&a)return h;else return 1}function R(a,c){__p&&__p();var d;switch(c.tag|0){case 0:var e=c[0],f=j(a,e);n(a,f,"deltaNewMessage",Q(e.messageMetadata));d=0;break;case 1:f=c[0];n(a,Object.assign(j(a,f.newMessage),{action_type:b("MercuryActionType").REPLACE_MESSAGE,replaced_message_id:f.replacedMessageId}),"deltaReplaceMessage",h);d=0;break;case 2:e=c[0];f=e.threadKey.otherUserFbId;var g;if(f==null){var k=e.threadKey.threadFbId;if(k==null)g=void 0;else{var o=b("MercuryThreadIDMap").getForFBID(a);o=o.getClientIDFromServerIDNow(k.toString());g=o==null?void 0:b("bs_js_primitive").some(o)}}else{k=b("FBID.bs").ofString(f.toString());g=k!==void 0?b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromUserID(b("bs_js_primitive").valFromOption(k))):void 0}if(g!==void 0){o={};o[b("bs_js_primitive").valFromOption(g)]=parseInt(e.deliveredWatermarkTimestampMs,10);b("MercuryDispatcher").getForFBID(a).handleUpdate({delivery_receipts:o,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d=b("bs_block").__(0,["DeltaDeliveryReceipt"])}else d=b("bs_block").__(1,["DeltaDeliveryReceipt","no thread id"]);break;case 3:f=O(a,c[0]);k=f[1];g=f[0];g.length&&b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[],global_actions:g,pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});k.length&&b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:k,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=g.length===0&&k.length===0?b("bs_block").__(1,["DeltaMarkRead","no local or global action"]):b("bs_block").__(0,["DeltaMarkRead"]);break;case 4:var p=c[0];e=b("bs_belt_Array").keepMapU(p.threadKeys,function(c){var d=i(a,c);if(d!==void 0){var e=parseInt(p.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(e);return{thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!1,timestamp:e,folder:b("MessagingTag").INBOX}}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:e,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaMarkUnread"]);break;case 5:o=c[0];n(a,Object.assign(j(a,o),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:o.messageMetadata.adminText,log_message_data:{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(o.leftParticipantFbId)]},log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE}),"DeltaParticipantLeftGroupThread",Q(o.messageMetadata));d=0;break;case 6:f=c[0];n(a,Object.assign(j(a,f),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:f.messageMetadata.adminText,log_message_data:{added_participants:b("bs_belt_Array").map(f.addedParticipants,function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.userFbId)})},log_message_type:b("MercuryLogMessageType").SUBSCRIBE}),"DeltaParticipantsAddedToGroupThread",Q(f.messageMetadata));d=0;break;case 7:g=c[0];k=j(a,g);e=b("FBID.bs").ofString(g.messageMetadata.actorFbId.toString());if(e!==void 0){o=b("bs_js_primitive").valFromOption(e);if(b("bs_caml_obj").caml_notequal(o,a))f=b("bs_js_primitive").some(a);else{e=g.messageMetadata.threadKey.otherUserFbId;if(e==null)f=void 0;else{e=b("FBID.bs").ofString(e.toString());f=e!==void 0?e:void 0}}if(f!==void 0){e=g.eventType;var q;if(e==null)q=b("MercuryLogMessageType").VIDEO_CALL;else{e=e==="VOICE_EVENT";q=e?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL}e=g.duration;n(a,Object.assign(k,{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:g.messageMetadata.adminText,log_message_data:{answered:e==null?!1:e>0,callee:b("MercuryIDs").getParticipantIDFromUserID(b("bs_js_primitive").valFromOption(f)),caller:b("MercuryIDs").getParticipantIDFromUserID(o)},log_message_type:q,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(g.messageMetadata.unsendType)}),"DeltaRTCEventLog",Q(g.messageMetadata));d=0}else d=b("bs_block").__(1,["DeltaParticipantsAddedToGroupThread","calleeFBID is invalid"])}else d=b("bs_block").__(1,["DeltaRTCEventLog","actorFbId is not an fbid"]);break;case 8:k=c[0];n(a,Object.assign(j(a,k),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:k.messageMetadata.adminText,log_message_data:{name:k.name},log_message_type:b("MercuryLogMessageType").THREAD_NAME}),"DeltaThreadName",Q(k.messageMetadata));d=0;break;case 9:e=c[0];f={watermark:parseInt(e.watermarkTimestampMs,10),action:parseInt(e.actionTimestampMs,10)};o=e.threadKey.otherUserFbId;q=o==null?b("bs_js_primitive").nullable_to_opt(e.actorFbId):o.toString();g=e.threadKey.otherUserFbId;if(g==null){k=e.threadKey.threadFbId;o=k==null?void 0:k.toString()}else o=g.toString();if(q!==void 0)if(o!==void 0){e=o;k=b("MercuryThreadIDMap").getForFBID(a);g=k.getClientIDFromServerIDNow(e);if(g==null)d=b("bs_block").__(1,["DeltaReadReceipt","No clientID for serverID: "+e]);else{o={};k={};e=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(q));k[e]=f;o[g]=k;b("MercuryDispatcher").getForFBID(a).handleUpdate({roger:o,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d=b("bs_block").__(0,["DeltaReadReceipt"])}}else d=b("bs_block").__(1,["DeltaReadReceipt","serverID is invalid"]);else d=b("bs_block").__(1,["DeltaReadReceipt","userID is invalid"]);break;case 10:q=c[0];n(a,Object.assign(j(a,q),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:q.messageMetadata.adminText,log_message_data:{message_type:q.type,untypedData:q.untypedData},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(q.messageMetadata.unsendType)}),"DeltaAdminTextMessage",Q(q.messageMetadata));d=0;break;case 11:e=c[0];f=i(a,{otherUserFbId:e.threadKey.otherUserFbId,threadFbId:e.threadKey.threadFbId});g=f!==void 0?{action_type:b("MercuryActionType").DELETE_MESSAGES,message_ids:e.messageIds,other_user_fbid:P(e.threadKey.otherUserFbId),thread_fbid:P(e.threadKey.threadFbId),thread_id:f}:void 0;k=e.threadKey.threadFbId;o=e.folder;if(g!==void 0){q=b("bs_js_primitive").valFromOption(g);k==null?(n(a,q,"DeltaMessageDelete",h),d=0):o==null?(n(a,q,"DeltaMessageDelete",h),d=0):(o==="FOLDER_MONTAGE"?b("MontageActions").requestUpdate(k.toString()):n(a,q,"DeltaMessageDelete",h),d=0)}else d=b("bs_block").__(1,["DeltaMessageDelete","transform failed"]);break;case 12:f=c[0];e=i(a,{otherUserFbId:f.threadKey.otherUserFbId,threadFbId:f.threadKey.threadFbId});if(e!==void 0){g=f.action;n(a,{action_type:b("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:P(f.threadKey.threadFbId),other_user_fbid:P(f.threadKey.otherUserFbId),archived:g==null?!1:g===b("MessagingThreadAction").ACTION_ARCHIVED,thread_id:e},"DeltaThreadAction",h);d=0}else d=b("bs_block").__(1,["DeltaThreadAction","transform failed"]);break;case 13:o=b("bs_belt_Array").keepMapU(c[0].threadKeys,function(c){var d=i(a,c);if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").DELETE_THREAD,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:o,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadDelete"]);break;case 14:k=c[0];q=i(a,{otherUserFbId:null,threadFbId:k.messageMetadata.threadKey.threadFbId});q!==void 0?(n(a,{action_type:b("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:P(k.messageMetadata.threadKey.threadFbId),other_user_fbid:null,removed_admin_ids:k.removedAdminFbIds,thread_id:q},"DeltaAdminRemovedFromGroupThread",h),d=0):d=b("bs_block").__(1,["DeltaAdminRemovedFromGroupThread","transform failed"]);break;case 15:f=c[0];g=i(a,f.threadKey);if(g!==void 0){e=[{thread_id:g,action_type:b("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:f.threadKey.threadFbId,other_user_fbid:f.threadKey.otherUserFbId,mute_until:parseInt(f.expireTime,10)}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:e,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadMuteSettings"])}else d=b("bs_block").__(1,["DeltaThreadMuteSettings","invalid thread ID"]);break;case 16:o=c[0];k=o.jsonBlob;if(k==null)d=b("bs_block").__(1,["DeltaPagesManagerEvent","no jsonBlob"]);else{try{q=JSON.parse(k)}catch(a){q={}}g=b("bs_js_json").classify(q);if(typeof g==="number"||g.tag!==2)d=b("bs_block").__(1,["DeltaPagesManagerEvent","jsonBlob is not an object"]);else{f=g[0];e=f.type;if(e!==void 0){k=b("bs_js_json").classify(e);if(typeof k==="number"||k.tag!==1)d=b("bs_block").__(1,["DeltaPagesManagerEvent","type is not a number"]);else if(k[0]===b("PagesMessagingEventType").FLAG){q=f.flagData;if(q!==void 0){g=b("bs_js_json").classify(q);if(typeof g==="number"||g.tag!==2)e=!1;else{k=g[0].state;if(k!==void 0){f=b("bs_js_json").classify(k);e=typeof f==="number"?f===1:!1}else e=!1}}else e=!1;q=i(a,o.threadKey);if(q!==void 0){g=[{thread_id:q,action_type:b("MercuryActionType").CHANGE_FLAG,mark_as_flag:e,other_user_fbid:o.threadKey.otherUserFbId,thread_fbid:o.threadKey.threadFbId}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaPagesManagerEvent"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","threadID is invalid"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","type is not pagesFlag"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","no type on jsonBlob"])}}break;case 17:k=c[0];f=i(a,{otherUserFbId:null,threadFbId:k.messageMetadata.threadKey.threadFbId});f!==void 0?(n(a,{action_type:b("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:P(k.messageMetadata.threadKey.threadFbId),other_user_fbid:null,approval_mode:b("bs_js_null_undefined").fromOption(b("bs_js_primitive").undefined_to_opt(b("MessengerApprovalModeTypes")[k.mode])),thread_id:f},"DeltaApprovalMode",h),d=0):d=b("bs_block").__(1,["DeltaApprovalMode","transform failed"]);break;case 18:q=c[0];e=i(a,{otherUserFbId:q.messageMetadata.threadKey.otherUserFbId,threadFbId:q.messageMetadata.threadKey.threadFbId});if(e!==void 0){o=e;g=q.inviterFbId;if(g==null){k=q.recipientFbId;if(!(k==null)){f=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(k));e=q.action===b("MessengerApprovalQueueTypes").REMOVED;k=q.action===b("MessengerApprovalQueueTypes").REQUESTED;n(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:P(q.messageMetadata.threadKey.threadFbId),other_user_fbid:P(q.messageMetadata.threadKey.otherUserFbId),removed_id:e?f:null,added_id:k?f:null,thread_id:o},"DeltaApprovalQueue",h)}}else{e=q.action===b("MessengerApprovalQueueTypes").REMOVED;k=q.action===b("MessengerApprovalQueueTypes").REQUESTED;if(k){f=q.requestSource;var r;if(f==null)r=b("MessengerGroupRequestSource").ADD;else switch(f){case"ADD":r=b("MessengerGroupRequestSource").ADD;break;case"JOIN_THROUGH_LINK":r=b("MessengerGroupRequestSource").JOIN_THROUGH_LINK;break;default:r=b("MessengerGroupRequestSource").ADD}k={requester:{id:q.recipientFbId},inviter:{id:g},request_source:r,request_timestamp:q.requestTimestamp}}else k=null;n(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:P(q.messageMetadata.threadKey.threadFbId),other_user_fbid:P(q.messageMetadata.threadKey.otherUserFbId),removed_group_id:e?q.recipientFbId:null,added_group_id:k,thread_id:o},"DeltaApprovalQueue",h)}d=0}else d=b("bs_block").__(1,["DeltaApprovalQueue","transform failed"]);break;case 19:f=c[0];n(a,j(a,f.deltaNewMessage),"DeltaGenieMessage",Q(f.deltaNewMessage.messageMetadata));d=0;break;case 20:g=c[0];e=g.messageMetadata.threadKey;if(e==null)q=void 0;else{k=e.threadFbId;q=k==null?void 0:k}o=g.initiator;if(o==null)f=void 0;else{e=o.userFbId;f=e==null?void 0:e.toString()}k=i(a,{otherUserFbId:null,threadFbId:q});k!==void 0?(n(a,{action_type:b("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:P(q),other_user_fbid:null,call_state:g.callState,server_info_data:g.serverInfoData,initiator_fbid:f,thread_id:k},"DeltaRTCCallData",h),d=0):d=b("bs_block").__(1,["DeltaRTCCallData","transform failed"]);break;case 21:o=c[0];e=i(a,o.threadKey);if(e!==void 0){q=[{thread_id:e,action_type:b("MercuryActionType").CHANGE_FOLDER,other_user_fbid:o.threadKey.otherUserFbId,new_folder:b("bs_js_primitive").undefined_to_opt(b("MessagingTag").IRIS_MAPPING[o.folder])}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:q,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadFolder"])}else d=b("bs_block").__(1,["DeltaThreadFolder","threadID is invalid"]);break;case 22:g=c[0];f=i(a,g.threadKey);if(f!==void 0){k=[{thread_id:f,action_type:b("MercuryActionType").MUTATE_TAGS,messageId:g.messageId,tags_to_add:g.tagsToAdd,tags_to_delete:g.tagsToDelete}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:k,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaMutateMessageTags"])}else d=b("bs_block").__(1,["DeltaMutateMessageTags","threadID is invalid"]);break;case 23:d=N(a,c[0]);break}if(typeof d==="number")return 0;else if(d.tag)return m(d[0],d[1]);else return l(d[0])}function a(a,c){__p&&__p();if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").NewMessage))return R(a,b("bs_block").__(0,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReplaceMessage))return R(a,b("bs_block").__(1,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").DeliveryReceipt))return R(a,b("bs_block").__(2,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkRead))return R(a,b("bs_block").__(3,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkUnread))return R(a,b("bs_block").__(4,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantLeftGroupThread))return R(a,b("bs_block").__(5,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread))return R(a,b("bs_block").__(6,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").RTCEventLog))return R(a,b("bs_block").__(7,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadName))return R(a,b("bs_block").__(8,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReadReceipt))return R(a,b("bs_block").__(9,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminTextMessage))return R(a,b("bs_block").__(10,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MessageDelete))return R(a,b("bs_block").__(11,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadAction))return R(a,b("bs_block").__(12,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadDelete))return R(a,b("bs_block").__(13,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminRemovedFromGroupThread))return R(a,b("bs_block").__(14,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadMuteSettings))return R(a,b("bs_block").__(15,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").PagesManagerEvent))return R(a,b("bs_block").__(16,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalMode))return R(a,b("bs_block").__(17,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalQueue))return R(a,b("bs_block").__(18,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ClientPayload))return R(a,b("bs_block").__(23,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").GenieMessage))return R(a,b("bs_block").__(19,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").RtcCallData))return R(a,b("bs_block").__(20,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkFolderSeen)){l("DeltaMarkFolderSeen");return b("bs_curry")._2(b("MessengerState.bs").send,b("bs_js_primitive").some(a),[b("bs_block").__(0,[b("bs_block").__(64,[c])])])}else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadFolder))return R(a,b("bs_block").__(21,[c]));else return 0}f.transform=a}),null);
__d("EmojiLikeConstants",["EmojiStaticConfig"],(function(a,b,c,d,e,f){"use strict";a=b("EmojiStaticConfig").sizeMap;c=Object.freeze({XSMALL:"xsmall",SMALL:"small",MEDIUM:"medium",LARGE:"large"});d={dp16:"xsmall",dp32:"small",dp64:"medium",db64:"medium",dp128:"large"};f=Object.freeze({PICKER:"picker",HOT_LIKE:"hot_like"});b=[983040];var g="hot_emoji_source",h="hot_emoji_size",i="emoji_like",j="\ud83d\udc4d",k=[128077];e.exports={FB_THUMBS_UP_EMOJI:b,size:c,sizeMap:a,sizeMapTransfer:d,source:f,SOURCE_TAG_PREFIX:g,TAG_PREFIX_NEW:h,TAG_PREFIX_OLD:i,THUMBS_UP_EMOJI:j,THUMBS_UP_EMOJI_CODES:k}}),null);
__d("MercuryTagHelper",[],(function(a,b,c,d,e,f){"use strict";a={get:function(a,b){a=a.find(function(a){return a.startsWith(b)});return a==null?a:a.substr(a.indexOf(":")+1)}};e.exports=a}),null);
__d("EmojiLikeUtils",["EmojiLikeConstants","MercuryTagHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){!a.tags?a.tags=[g(b)]:a.tags.push(g(b));return a}function g(a){var c=b("EmojiLikeConstants").TAG_PREFIX_NEW;return c+":"+a}function c(a,b){!a.tags?a.tags=[h(b)]:a.tags.push(h(b));return a}function h(a){return b("EmojiLikeConstants").SOURCE_TAG_PREFIX+":"+a}function d(a){return i(a)!=null}function i(a){if(!a.tags)return null;var c=b("MercuryTagHelper").get(a.tags,b("EmojiLikeConstants").TAG_PREFIX_NEW);return c?c:b("MercuryTagHelper").get(a.tags,b("EmojiLikeConstants").TAG_PREFIX_OLD)}e.exports={getEmojiSize:i,isEmojiLike:d,setEmojiSize:a,setEmojiSource:c}}),null);
__d("MercuryAttachment",["cx","requireCond","EmojiLikeUtils","MercuryAttachmentContentType","MercuryAttachmentType","MercuryAudioType","cr:936657"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();b("cr:936657");var h=function(a){return a===Object(a)},i="_1c_u",j=new Set([b("MercuryAttachmentType").ANIMATED_IMAGE,b("MercuryAttachmentType").PHOTO,b("MercuryAttachmentType").VIDEO,b("MercuryAttachmentType").THIRDPARTYSTICKER]),k={getAttachIconClass:function(a){__p&&__p();switch(a){case b("MercuryAttachmentContentType").PHOTO:return"_y2-";case b("MercuryAttachmentContentType").VIDEO:return"_y2_";case b("MercuryAttachmentContentType").MUSIC:return"_y30";case b("MercuryAttachmentContentType").VOICE:return"_y31";case b("MercuryAttachmentContentType").TEXT:return"_y32";case b("MercuryAttachmentContentType").PDF:return"_1k9k";case b("MercuryAttachmentContentType").RICHTEXT:return"_1k9l";case b("MercuryAttachmentContentType").SPREADSHEET:return"_1k9p";case b("MercuryAttachmentContentType").PRESENTATION:return"_1k9r";case b("MercuryAttachmentContentType").ARCHIVE:return"_1k9s";case b("MercuryAttachmentContentType").MSWORD:return"_y33";case b("MercuryAttachmentContentType").MSXLS:return"_y34";case b("MercuryAttachmentContentType").MSPPT:return"_y35"}return"_y36"},getAttachIconClassByMime:function(a){return this.getAttachIconClass(this.getAttachTypeByMime(a))},getAttachTypeByMime:function(a){__p&&__p();if(!a)return b("MercuryAttachmentContentType").UNKNOWN;if(a.startsWith("image"))return b("MercuryAttachmentContentType").PHOTO;else if(a.startsWith("video"))return b("MercuryAttachmentContentType").VIDEO;else if(a.startsWith("audio"))return b("MercuryAttachmentContentType").MUSIC;else if(a.startsWith("text/plain"))return b("MercuryAttachmentContentType").TEXT;else if(a=="text/pdf"||a=="application/pdf"||a=="application/vnd.pdf"||a=="application/x-pdf")return b("MercuryAttachmentContentType").PDF;else if(a=="text/richtext"||a=="application/rtf"||a=="application/x-iwork-pages-sffkey")return b("MercuryAttachmentContentType").RICHTEXT;else if(a=="text/csv"||a=="application/x-iwork-numbers-sffkey")return b("MercuryAttachmentContentType").SPREADSHEET;else if(a=="application/x-iwork-keynote-sffkey")return b("MercuryAttachmentContentType").PRESENTATION;else if(a=="application/vnd.ms-cab-compressed"||a=="application/x-7z-compressed"||a=="application/x-ace-compressed"||a=="application/x-apple-diskimage"||a=="application/x-compress"||a=="application/x-compressed"||a=="application/x-gzip"||a=="application/x-rar-compressed"||a=="application/x-tar"||a=="application/x-zip-compressed"||a=="application/zip")return b("MercuryAttachmentContentType").ARCHIVE;else if(a=="application/msword"||a.startsWith("application/vnd.ms-word")||a.startsWith("application/vnd.openxmlformats-officedocument.wordprocessingml"))return b("MercuryAttachmentContentType").MSWORD;else if(a.startsWith("application/vnd.ms-excel")||a.startsWith("application/vnd.openxmlformats-officedocument.spreadsheetml"))return b("MercuryAttachmentContentType").MSXLS;else if(a.startsWith("application/vnd.ms-powerpoint")||a.startsWith("application/vnd.openxmlformats-officedocument.presentationml"))return b("MercuryAttachmentContentType").MSPPT;else return b("MercuryAttachmentContentType").UNKNOWN},convertRaw:function(a){__p&&__p();var c=[];for(var d=0;d<a.length;d++){var e=a[d];if(e.attach_type===b("MercuryAttachmentType").PHOTO)c.push(e);else if(e.filename){var f=k.getAttachTypeByMime(e.filetype),g={};g.attach_type=b("MercuryAttachmentType").FILE;g.name=e.filename;g.icon_type=f;g.url="";c.push(g)}}return c},get:function(a){__p&&__p();var c=[];a.attachments?c=a.attachments:a.raw_attachments&&(c=this.convertRaw(a.raw_attachments));var d=b("EmojiLikeUtils").getEmojiSize(a);d&&(c=c.concat([{attach_type:b("MercuryAttachmentType").EMOJI_LIKE,size:d}]));if(!(a.attachments&&a.attachments.length>0)){if(a.sticker_id)return c.concat([{attach_type:b("MercuryAttachmentType").STICKER}]);if(a.preview_attachments&&a.preview_attachments.length>0)return c.concat(a.preview_attachments)}return c},resizeContain:function(a,b){var c=a.width/a.height,d=b.width/b.height;if(d<c)return{width:Math.ceil(Math.min(a.height*d,b.width)),height:Math.ceil(Math.min(a.height,b.height))};else return{width:Math.ceil(Math.min(a.width,b.width)),height:Math.ceil(Math.min(a.width/d,b.height))}},isBubblePreferred:function(a){return this.isFileAttachment(a)},isPhotoAttachment:function(a){return!!(a.attach_type==b("MercuryAttachmentType").PHOTO||a.attach_type==b("MercuryAttachmentType").ANIMATED_IMAGE||a.attach_type==b("MercuryAttachmentType").THIRDPARTYSTICKER||a.attach_type==b("MercuryAttachmentType").FILE&&a.preview_url)},isPhotoGroupAttachment:function(a){return j.has(a.attach_type)},isSinglePhotoGroupAttachment:function(a){return!!(a.attachments&&a.attachments.length===1&&a.attachments[0]&&this.isPhotoGroupAttachment(a.attachments[0]))},isVideoAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").VIDEO},isShareAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").SHARE},isFileAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").FILE},isErrorAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").ERROR},isStickerAttachment:function(a){return a.attach_type==b("MercuryAttachmentType").STICKER},isEmojiLikeAttachment:function(a){return a.attach_type===b("MercuryAttachmentType").EMOJI_LIKE},isVoiceAttachment:function(a){return!a.metadata?!1:a.metadata.type===b("MercuryAudioType").AudioClip||a.metadata.type===b("MercuryAudioType").VoiceMessageWithTranscript},hasAttribution:function(a){return!!a.app_attribution},isLightweightActionAttachment:function(a){return!!(k.isShareAttachment(a)&&a.share&&a.share.target!=null&&a.share.target.lwa_type!=null)},isSingleVideoAttachment:function(a){var b=this;a=this.get(a).filter(h).filter(function(a){return b.isVideoAttachment(a)});return a.length===1},isSharedVideoAttachment:function(a){a=a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.subattachments&&a.share.subattachments[0];return!!(a&&a.target&&a.target.video_id)},isGenieSharedVideoAttachment:function(a){return!!(a.attach_type===b("MercuryAttachmentType").SHARE&&a.share&&a.share.style_list.indexOf("genie_message")>-1&&a.share.target&&a.share.target.attachment&&this.isSharedVideoAttachment(a.share.target.attachment))},isSharedVideoAttachmentMessage:function(a){var b=this;a=this.get(a).filter(h).filter(function(a){return b.isSharedVideoAttachment(a)||b.isGenieSharedVideoAttachment(a)});return a.length===1},getVideoElem:function(a,b){b=b.getMessageElement(a);if(!b)return null;a=b.getElementsByClassName(i);return a&&a.length?a[0]:b}};e.exports=k}),null);
__d("MercuryDisplayTimeFilterMessageRenderer",["fbt"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={renderFilteredContent:function(a){if(a.is_filtered_content_bh)return g._("This message was removed because it includes a link that goes against our Community Standards.");if(a.is_filtered_content_account)return g._("This message has been temporarily removed because the sender's account requires verification.");if(a.is_filtered_content_quasar)return g._("This message was removed because it contains blocked or harmful content.");return a.is_filtered_content_invalid_app?g._("This message was removed because the app it's being sent from is blocked from sending messages."):g._("This message has been temporarily removed because the sender's account requires verification, or it was identified as abusive.")}};e.exports=a}),null);
__d("MercuryLocalIDs",["randomInt"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={generateThreadID:function(a){return"root:"+g.generateOfflineThreadingID(a)},generateOfflineThreadingID:function(a){a=a||Date.now();var c=b("randomInt")(0,4294967295);c=("0000000000000000000000"+c.toString(2)).slice(-22);a=a.toString(2)+c;return h(a.slice(-63))}};function h(a){var b="";while(a!="0"){var c=0,d="";for(var e=0;e<a.length;e++)c=2*c+parseInt(a[e],10),c>=10?(d+="1",c-=10):d+="0";b=c.toString()+b;a=d.slice(d.indexOf("1"))}return b}e.exports=g}),null);
__d("MercuryMessageClientState",[],(function(a,b,c,d,e,f){a=Object.freeze({DO_NOT_SEND_TO_SERVER:"do_not_send_to_server",SEND_TO_SERVER:"send_to_server"});e.exports=a}),null);
__d("MercurySyncEventsProxy",["Arbiter","Bootloader","ChannelConstants","LogHistory","MercurySingletonProvider","MessengerMQTTConnectionEvents","MessengerMQTTGating","gkx","ifRequired"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LogHistory").getInstance("mercury_event_proxy"),h={DELTA:"DELTA",FAKE_DFF:"FAKE_DFF",FLOW:"FLOW",FLOW_REJECT:"FLOW_REJECT",INIT:"MercurySyncDeltaHandler/initSeqID",CONNECTED:"CONNECTED",RECONNECTING:"RECONNECTING",SHUTDOWN:"SHUTDOWN",TYP:"TYP"};a=function(){__p&&__p();a.getArbiterTypeForFBID=function(a,b){return a+"/"+b};a.getForFBID=function(a){return i.getForFBID(a)};a.get=function(){return i.get()};function a(a){this.$2=[],this.$3=[],this.$1=a,this.init()}var c=a.prototype;c.getArbiterType=function(b){return a.getArbiterTypeForFBID(this.$1,b)};c.init=function(){__p&&__p();var a=this;this.$2.forEach(function(a){return b("Arbiter").unsubscribe(a)});this.$3.forEach(function(a){return b("ifRequired")("ChannelConnection",function(b){return b.unsubscribe(a)})});var c=[],d=[],e=b("MessengerMQTTGating").isEnabled(),f=e?b("MessengerMQTTConnectionEvents").DELTA_EVENT:b("ChannelConstants").getArbiterType("delta");c.push(b("Arbiter").subscribe(f,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.DELTA)].concat(e))}),b("Arbiter").subscribe("messenger-mqtt-drop-down-to-channel",function(){return a.init()}));!e?(c.push(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("deltaflow"),function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.FLOW)].concat(e))}),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("deltaflowreject"),function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.FLOW_REJECT)].concat(e))})),b("Bootloader").loadModules(["ChannelConnection","ChannelConnectionEvents"],function(c,e){__p&&__p();d.push(c.subscribe(e.CONNECTED,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.CONNECTED)].concat(e))}),c.subscribe(e.RECONNECTING,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.RECONNECTING)].concat(e))}),c.subscribe(e.SHUTDOWN,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.SHUTDOWN)].concat(e))}))},"MercurySyncEventsProxy")):c.push(b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").STREAM_CONNECT,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.CONNECTED)].concat(e))}),b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").STREAM_DISCONNECT,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.SHUTDOWN)].concat(e))}),b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").STREAM_CONNECTING,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.RECONNECTING)].concat(e))}));c.push(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType(b("ChannelConstants").FAKE_DFF),function(c){g.debug("fakedff",JSON.stringify({fbid:a.$1}));for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.FAKE_DFF)].concat(e))}));e&&b("gkx")("678650")?c.push(b("Arbiter").subscribe(b("MessengerMQTTConnectionEvents").TYP,function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.TYP)].concat(e))})):c.push(b("Arbiter").subscribe([b("ChannelConstants").getArbiterType("typ"),b("ChannelConstants").getArbiterType("ttyp")],function(c){for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];b("Arbiter").inform.apply(b("Arbiter"),[a.getArbiterType(h.TYP)].concat(e))}));this.$2=c;this.$3=d};return a}();a.Events=h;var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryThreadInfo",["MercuryIDs","MessengerThreadCannotReplyReason","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={canReply:function(a){return!!(a.is_subscribed&&(a.can_reply===void 0||a.can_reply)&&!a.has_email_participant&&!a.read_only)},getMuteSetting:function(a){return a.mute_until?a.mute_until:void 0},isEmptyLocalThread:function(a){return b("MercuryIDs").tokenize(a.thread_id).type==="root"&&!a.timestamp},isMuted:function(a){a=g.getMuteSetting(a);return a!=null&&(a>Date.now()/1e3||a===-1)},areMentionsMuted:function(a){return a.mentions_mute_mode===1},areReactionsMuted:function(a){return a.reactions_mute_mode===1},isNewEmptyLocalThread:function(a){return!!(g.isEmptyLocalThread(a)&&a.participants&&a.participants.length===0)},showSettingsMenu:function(a){return!!((a.can_reply||!a.cannot_reply_reason||a.cannot_reply_reason.toLowerCase()===b("MessengerThreadCannotReplyReason").BLOCKED||a.cannot_reply_reason.toLowerCase()===b("MessengerThreadCannotReplyReason").MESSENGER_BLOCKEE)&&!a.has_email_participant&&!a.read_only&&(a.is_subscribed||b("gkx")("982744")))},isColdOpen:function(a){return!!(a.is_canonical_user&&(a.message_count===0||!a.timestamp))}};e.exports=g}),null);
__d("ThreadConnectivityStatusGraphQLType.bs",[],(function(a,b,c,d,e,f){"use strict";a="UNCONNECTED";b="IMPLICIT_OR_TWO_WAY_MESSAGING";f.unconnected=a;f.implicitOrTwoWayMessaging=b}),null);
__d("ThreadConnectivityStatusGraphQLType.re",["ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){a=b("ThreadConnectivityStatusGraphQLType.bs").unconnected;f.unconnected=a;c=b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging;f.implicitOrTwoWayMessaging=c}),null);
__d("getPageIDFromThreadID",["FBIDCheck","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("MercuryIDs").getUserIDFromThreadID(a);return!a||b("FBIDCheck").isUser_deprecated(a)?null:a}e.exports=a}),null);
__d("MessageRequestUtils",["CurrentUser","MercuryIDs","MessagingTag","ThreadConnectivityStatusGraphQLType.re","getPageIDFromThreadID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isMessageRequest:function(a){return(a.folder===b("MessagingTag").PENDING||a.folder===b("MessagingTag").OTHER)&&a.can_reply},isFiltered:function(a){return a.folder===b("MessagingTag").OTHER},shouldShowComposerPendingActions:function(a){return this.isMessageRequest(a)&&(b("MercuryIDs").isGroupChat(a.thread_id)||!!b("getPageIDFromThreadID")(a.thread_id)||b("CurrentUser").isWorkUser())},shouldShowThreadlistPendingActions:function(a){return a.folder===b("MessagingTag").PENDING&&a.can_reply&&(b("MercuryIDs").isGroupChat(a.thread_id)||!!b("getPageIDFromThreadID")(a.thread_id)||b("CurrentUser").isWorkUser())},shouldShowUnconnectedThreadInfoText:function(a){var c;return!b("CurrentUser").isWorkUser()&&b("CurrentUser").getID()!==a.other_user_fbid&&((c=a.thread_connectivity_data)==null?void 0:c.connectivity_status)===b("ThreadConnectivityStatusGraphQLType.re").unconnected&&((c=a.thread_connectivity_data)==null?void 0:c.first_sender_id)===a.other_user_fbid},shouldSendTypingIndicators:function(a){return a&&!this.isMessageRequest(a)&&((a=a.thread_connectivity_data)==null?void 0:a.connectivity_status)===b("ThreadConnectivityStatusGraphQLType.re").implicitOrTwoWayMessaging}};e.exports=a}),null);
__d("RemoteAction.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(){return 0}function a(){return[g]}function c(a,b){if(b[0]===g){b[0]=a;return b}}function d(a){a[0]=g;return 0}function e(a,c){return b("bs_curry")._1(a[0],c)}f.create=a;f.subscribe=c;f.unsubscribe=d;f.send=e}),null);
__d("MessengerPersistantViewerKeyedSubscriptionComponent.bs",["bs_curry","React","bs_belt_Id","CurrentUser","bs_js_primitive","RemoteAction.bs","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=[0],d=function(a,c){return b("bs_caml_primitive").caml_int_compare(a[0],c[0])};b("bs_belt_Id").MakeComparable([d]);var e={},f=function(a,c){a=a!==void 0?b("bs_js_primitive").valFromOption(a):b("CurrentUser").getID();var d=e[a];if(d!==void 0)return b("RemoteAction.bs").send(d[0],c);else{d=g(a,void 0,0);return b("RemoteAction.bs").send(d[0],c)}},g=function(d,g,h){__p&&__p();h=g!==void 0?b("bs_js_primitive").valFromOption(g):b("RemoteAction.bs").create(0);var i=new Set(),j=[b("bs_curry")._1(a[0],d)];b("RemoteAction.bs").subscribe(function(c){var d=j[0];j[0]=b("bs_curry")._2(a[1],c,d);if(j[0]!==d){i.forEach(function(a){return b("bs_curry")._1(a[1],0)});return 0}else return 0},h);g=function(a,d){__p&&__p();var e=b("React").useState(function(){return j[0]}),f=e[1],g=e[0],h=b("React").useCallback(function(){if(a!==void 0)if(b("bs_curry")._2(a,g,j[0]))return b("bs_curry")._1(f,function(){return j[0]});else return 0;else return b("bs_curry")._1(f,function(){return j[0]})},[a,g,j[0]]);b("React").useEffect(function(){c[0]=c[0]+1|0;var a=c[0],d=[a,h];i.add(d);b("bs_curry")._1(h,0);return function(){i["delete"](d);return 0}},[h]);return b("bs_curry")._1(d,g)};h=[h,g];e[d]=h;var k=b("bs_js_primitive").some(d);b("bs_curry")._2(a[2],d,function(a){return f(k,a)});return h};d=function(a){var c=a.shouldUpdate,d=a.remoteAction,f=a.fbid;f=f!==void 0?b("bs_js_primitive").valFromOption(f):b("CurrentUser").getID();a=a.children;var h=e[f];if(h!==void 0)return b("bs_curry")._2(h[1],c,a);else return b("bs_curry")._2(g(f,d,0)[1],c,a)};d.displayName="MessengerPersistantViewerKeyedSubscriptionComponent("+(a[3]+")");return[d,f]}f.Make=a}),null);
__d("MessengerJoinableModeType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRIVATE:0,JOINABLE:1})}),null);
__d("MessengerThreadUtils.bs",["FBID.bs","bs_caml_obj","MercuryIDs","CurrentUser","MessagingTag","ImmutableObject","MessengerParticipants.bs","MercuryParticipantTypes","MessengerJoinableModeType","MessengerObjectAssociationType","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){return c.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a)}).length<=1}function h(a,c,d,e){var f=b("MercuryIDs").tokenize(c),h=f.type;f=f.value;var i=d.find(function(b){return b!==a});i=i!==void 0?b("MessengerParticipants.bs").getNow(i):null;var j=b("CurrentUser").isWorkUser();j=!(i==null)&&j&&i.work_foreign_entity_info==null&&i.user_type===b("MercuryParticipantTypes").USER?[!1,b("MessengerThreadCannotReplyReason").RECIPIENTS_INVALID]:[!0,null];i=h==="user";return new(b("ImmutableObject"))({thread_id:c,participants:Array.from(d),admins:{},name:"",snippet:"",snippet_sender:null,unread_count:e==null?0:e,message_count:0,image_src:null,timestamp:0,other_user_fbid:i?b("FBID.bs").ofStringExn(f):null,is_canonical_user:h==="user",is_canonical:g(a,d),is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:j[0],cannot_reply_reason:j[1],can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,group_approval_queue:null,work_associated_group:null,groups_sync_status:null,group_thread_subtype:null,has_email_participant:!1,has_montage:!1,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{mode:0,link:""},last_message_timestamp:0,last_message_id:null,last_message_type:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,object_association_type:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!1,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],solid_color:null,subtitle:null,theme_id:null,thread_connectivity_data:null,thread_fbid:null,thread_pin_timestamp:null,thread_type:null,thread_unsendability_status:null,gradient_colors:[],joinable_link:null,linked_mentorship_programs:null,is_business_page_active:!1})}function a(a,c,d,e){a=h(a,c,d,null);return b("ImmutableObject").set(a,{associated_object:e,name:e.name,joinable_mode:{mode:b("MessengerJoinableModeType").JOINABLE,link:""},object_association_type:b("MessengerObjectAssociationType").GENERAL_CHAT})}f.isCanonicalFromInitialParticipants=g;f.createNewLocalThread=h;f.createNewLocalGroupGeneralThread=a}),null);
__d("ParticipantId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable([a]);d=c[0];f.cmp=d}),null);
__d("ThreadConnectivityStatus",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UNCONNECTED:0,IMPLICIT_OR_TWO_WAY_MESSAGING:1})}),null);
__d("ThreadConnectivityStatus.bs",["bs_caml_obj","ThreadConnectivityStatus","ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("bs_caml_obj").caml_equal(a,b("ThreadConnectivityStatus").UNCONNECTED);if(a)return b("ThreadConnectivityStatusGraphQLType.bs").unconnected;else return b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging}f.toGraphQLValue=a}),null);
__d("ThreadId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable([a]);d=c[0];f.cmp=d}),null);
__d("XMercuryThreadLikeIconController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/like_icon/",{emoji:{type:"String",defaultValue:""}})}),null);
__d("bs_belt_internalAVLtree",["bs_curry","bs_js_primitive","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==null)return a.height;else return 0}function h(a){if(a!==null){var b=a.left,c=a.right;return{key:a.key,value:a.value,height:a.height,left:h(b),right:h(c)}}else return a}function i(a,b,c,d){var e=g(a),f=g(d);return{key:b,value:c,height:e>=f?e+1|0:f+1|0,left:a,right:d}}function j(a,b){return{key:a,value:b,height:1,left:null,right:null}}function k(a,b){if(b!==null)if(a!==null)return a.height>=b.height;else return!1;else return!0}function a(a,b){if(a.value===b)return a;else return{key:a.key,value:b,height:a.height,left:a.left,right:a.right}}function l(a,b,c,d){__p&&__p();var e=a!==null?a.height:0,f=d!==null?d.height:0;if(e>(f+2|0)){var h=a.left,j=a.key,k=a.value,l=a.right;if(g(h)>=g(l))return i(h,j,k,i(l,b,c,d));else{var m=l.left,n=l.key,o=l.value;l=l.right;return i(i(h,j,k,m),n,o,i(l,b,c,d))}}else if(f>(e+2|0)){h=d.left;j=d.key;k=d.value;m=d.right;if(g(m)>=g(h))return i(i(a,b,c,h),j,k,m);else{n=h.left;o=h.key;l=h.value;h=h.right;return i(i(a,b,c,n),o,l,i(h,j,k,m))}}else return{key:b,value:c,height:e>=f?e+1|0:f+1|0,left:a,right:d}}function m(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return b.key}}function c(a){if(a!==null)return b("bs_js_primitive").some(m(a))}function d(a){if(a!==null)return m(a)}function n(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return b.key}}function e(a){if(a!==null)return b("bs_js_primitive").some(n(a))}function o(a){if(a!==null)return n(a)}function p(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return[b.key,b.value]}}function q(a){if(a!==null)return p(a)}function r(a){if(a!==null)return p(a)}function s(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return[b.key,b.value]}}function t(a){if(a!==null)return s(a)}function aa(a){if(a!==null)return s(a)}function u(a,b,c){var d=a.left,e=a.right,f=a.key;a=a.value;if(d!==null)return l(u(d,b,c),f,a,e);else{b[0]=f;c[0]=a;return e}}function ba(a){return a===null}function v(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d,c];a=d.left;continue}else return c}}function w(a,b){__p&&__p();if(a!==null){var c=w(a.left,b);if(c!==void 0)return c;else{c=a.key;var d=a.value,e=b(c,d);if(e)return[c,d];else{e=w(a.right,b);if(e!==void 0)return e;else return void 0}}}}function ca(a,c){return w(a,b("bs_curry").__2(c))}function x(a,b){__p&&__p();while(!0){var c=a;if(c!==null){x(c.left,b);b(c.key,c.value);a=c.right;continue}else return 0}}function da(a,c){return x(a,b("bs_curry").__2(c))}function y(a,b){if(a!==null){var c=y(a.left,b),d=b(a.value);b=y(a.right,b);return{key:a.key,value:d,height:a.height,left:c,right:b}}else return null}function ea(a,c){return y(a,b("bs_curry").__1(c))}function z(a,b){if(a!==null){var c=a.key,d=z(a.left,b),e=b(c,a.value);b=z(a.right,b);return{key:c,value:e,height:a.height,left:d,right:b}}else return null}function fa(a,c){return z(a,b("bs_curry").__2(c))}function A(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e!==null){var f=e.left,g=e.key,h=e.value;e=e.right;b=c(A(f,d,c),g,h);a=e;continue}else return d}}function ga(a,c,d){return A(a,c,b("bs_curry").__3(d))}function B(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.key,c.value)&&B(c.left,b)){a=c.right;continue}else return!1;else return!0}}function ha(a,c){return B(a,b("bs_curry").__2(c))}function C(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.key,c.value)||C(c.left,b))return!0;else{a=c.right;continue}else return!1}}function ia(a,c){return C(a,b("bs_curry").__2(c))}function D(a,b,c){if(a!==null)return l(D(a.left,b,c),a.key,a.value,a.right);else return j(b,c)}function E(a,b,c){if(a!==null)return l(a.left,a.key,a.value,E(a.right,b,c));else return j(b,c)}function F(a,b,c,d){__p&&__p();if(a!==null)if(d!==null){var e=a.left,f=a.key,g=a.value,h=a.right,j=a.height,k=d.left,m=d.key,n=d.value,o=d.right,p=d.height;if(j>(p+2|0))return l(e,f,g,F(h,b,c,d));else if(p>(j+2|0))return l(F(a,b,c,k),m,n,o);else return i(a,b,c,d)}else return E(a,b,c);else return D(d,b,c)}function G(a,b){if(a!==null)if(b!==null){var c=[b.key],d=[b.value],e=u(b,c,d);return F(a,c[0],d[0],e)}else return a;else return b}function ja(a,c,d,e){if(d!==void 0)return F(a,c,b("bs_js_primitive").valFromOption(d),e);else return G(a,e)}function H(a,b){if(a!==null){var c=a.key,d=a.value,e=H(a.left,b),f=b(c,d);a=H(a.right,b);if(f)return F(e,c,d,a);else return G(e,a)}else return null}function ka(a,c){return H(a,b("bs_curry").__2(c))}function I(a,c){if(a!==null){var d=a.key,e=a.value,f=I(a.left,c);e=c(d,e);a=I(a.right,c);if(e!==void 0)return F(f,d,b("bs_js_primitive").valFromOption(e),a);else return G(f,a)}else return null}function la(a,c){return I(a,b("bs_curry").__2(c))}function J(a,b){__p&&__p();if(a!==null){var c=a.key,d=a.value,e=J(a.left,b),f=e[1];e=e[0];var g=b(c,d);a=J(a.right,b);b=a[1];a=a[0];if(g)return[F(e,c,d,a),G(f,b)];else return[G(e,a),F(f,c,d,b)]}else return[null,null]}function ma(a,c){return J(a,b("bs_curry").__2(c))}function K(a){var b=a.left;a=a.right;b=b!==null?K(b):0;a=a!==null?K(a):0;return(1+b|0)+a|0}function L(a){if(a!==null)return K(a);else return 0}function M(a,b){__p&&__p();while(!0){var c=b,d=a;if(d!==null){var e=d.left,f=d.right,g=d.key;d=d.value;b=[[g,d],M(f,c)];a=e;continue}else return c}}function na(a){return M(a,0)}function N(a){__p&&__p();while(!0){var b=a;if(b!==null){var c=b.left;b=b.right;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw new Error('File "belt_internalAVLtree.ml", line 385, characters 6-12');N(c);a=b;continue}else return 0}}function O(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.key;e=e.right;f=f!==null?O(f,d,c):d;c[f]=g;d=f+1|0;if(e!==null){b=d;a=e;continue}else return d}}function P(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.right;f=f!==null?P(f,d,c):d;c[f]=e.value;d=f+1|0;if(g!==null){b=d;a=g;continue}else return d}}function Q(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.key,h=e.right;f=f!==null?Q(f,d,c):d;c[f]=[g,e.value];d=f+1|0;if(h!==null){b=d;a=h;continue}else return d}}function oa(b){if(b!==null){var a=K(b);a=new Array(a);Q(b,0,a);return a}else return[]}function pa(b){if(b!==null){var a=K(b);a=new Array(a);O(b,0,a);return a}else return[]}function qa(b){if(b!==null){var a=K(b);a=new Array(a);P(b,0,a);return a}else return[]}function R(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=R(a,b,d),f=a[b-d|0];d=R(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f[0],f[1],d)}else switch(c){case 0:return null;case 1:e=a[b];return j(e[0],e[1]);case 2:f=a[b];d=a[b-1|0];c=d;e=f;return{key:c[0],value:c[1],height:2,left:j(e[0],e[1]),right:null};case 3:d=a[b];f=a[b-1|0];c=a[b-2|0];e=c;a=f;b=d;return{key:a[0],value:a[1],height:2,left:j(b[0],b[1]),right:j(e[0],e[1])}}}function S(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=S(a,b,d),f=a[b+d|0];d=S(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f[0],f[1],d)}else switch(c){case 0:return null;case 1:e=a[b];return j(e[0],e[1]);case 2:f=a[b];d=a[b+1|0];c=d;e=f;return{key:c[0],value:c[1],height:2,left:j(e[0],e[1]),right:null};case 3:d=a[b];f=a[b+1|0];c=a[b+2|0];e=c;a=f;b=d;return{key:a[0],value:a[1],height:2,left:j(b[0],b[1]),right:j(e[0],e[1])}}}function ra(a){return S(a,0,a.length)}function T(a,b,c,d){__p&&__p();var e=L(a),f=L(b);if(e===f){a=v(a,0);b=v(b,0);c=c;d=d;while(!0){var g=b,h=a;if(h&&g){var i=g[0],j=h[0],k=c(j.key,i.key);if(k===0){var l=d(j.value,i.value);if(l===0){b=v(i.right,g[1]);a=v(j.right,h[1]);continue}else return l}else return k}else return 0}}else if(e<f)return-1;else return 1}function sa(a,c,d,e){return T(a,c,d,b("bs_curry").__2(e))}function U(a,b,c,d){__p&&__p();var e=L(a),f=L(b);if(e===f){e=v(a,0);f=v(b,0);a=c;b=d;while(!0){c=f;d=e;if(d&&c){var g=c[0],h=d[0];if(a(h.key,g.key)===0&&b(h.value,g.value)){f=v(g.right,c[1]);e=v(h.right,d[1]);continue}else return!1}else return!0}}else return!1}function ta(a,c,d,e){return U(a,c,d,b("bs_curry").__2(e))}function ua(c,d,a){__p&&__p();while(!0){var e=c;if(e!==null){var f=e.key;f=a(d,f);if(f===0)return b("bs_js_primitive").some(e.value);else{c=f<0?e.left:e.right;continue}}else return void 0}}function va(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return d.value;else{b=e<0?d.left:d.right;continue}}else return void 0}}function wa(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return d.value;else{b=e<0?d.left:d.right;continue}}else throw new Error("getExn0")}}function xa(b,c,d,a){__p&&__p();while(!0){var e=b;if(e!==null){var f=e.key;f=a(c,f);if(f===0)return e.value;else{b=f<0?e.left:e.right;continue}}else return d}}function ya(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return!0;else{b=e<0?d.left:d.right;continue}}else return!1}}function V(a){var b=a.left;a.left=b.right;b.right=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.left);d=a.height;b.height=(c>d?c:d)+1|0;return b}function W(a){var b=a.right;a.right=b.left;b.left=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.right);d=a.height;b.height=(c>d?c:d)+1|0;return b}function za(a){var b=W(a.left);a.left=b;return V(a)}function Aa(a){var b=V(a.right);a.right=b;return W(a)}function X(a){var b=g(a.left),c=g(a.right);a.height=(b>c?b:c)+1|0;return a}function Y(a){__p&&__p();var b=a.left,c=a.right,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.left;b=b.right;if(k(f,b))return X(V(a));else return X(za(a))}else if(e>(2+d|0)){f=c.left;b=c.right;if(k(b,f))return X(W(a));else return X(Aa(a))}else{a.height=(d>e?d:e)+1|0;return a}}function Z(b,c,d,a){__p&&__p();if(b!==null){var e=b.key;e=a(c,e);if(e===0){b.value=d;return b}else{var f=b.left,g=b.right;if(e<0){e=Z(f,c,d,a);b.left=e}else b.right=Z(g,c,d,a);return Y(b)}}else return j(c,d)}function Ba(c,a){__p&&__p();var d=c.length;if(d===0)return null;else{var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b[0],c[0])<0}),f;e>=0?f=S(c,0,e):(e=-e|0,f=R(c,e-1|0,e));for(var e=e,d=d-1|0;e<=d;++e){var g=c[e];f=Z(f,g[0],g[1],a)}return f}}function $(a,b){var c=b.right,d=b.left;if(d!==null){b.left=$(a,d);return Y(b)}else{a.key=b.key;return c}}var Ca=null;f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.updateValue=a;f.minKey=c;f.minKeyUndefined=d;f.maxKey=e;f.maxKeyUndefined=o;f.minimum=q;f.minUndefined=r;f.maximum=t;f.maxUndefined=aa;f.removeMinAuxWithRef=u;f.empty=Ca;f.isEmpty=ba;f.stackAllLeft=v;f.findFirstByU=w;f.findFirstBy=ca;f.forEachU=x;f.forEach=da;f.mapU=y;f.map=ea;f.mapWithKeyU=z;f.mapWithKey=fa;f.reduceU=A;f.reduce=ga;f.everyU=B;f.every=ha;f.someU=C;f.some=ia;f.join=F;f.concat=G;f.concatOrJoin=ja;f.keepSharedU=H;f.keepShared=ka;f.keepMapU=I;f.keepMap=la;f.partitionSharedU=J;f.partitionShared=ma;f.lengthNode=K;f.size=L;f.toList=na;f.checkInvariantInternal=N;f.fillArray=Q;f.toArray=oa;f.keysToArray=pa;f.valuesToArray=qa;f.fromSortedArrayAux=S;f.fromSortedArrayRevAux=R;f.fromSortedArrayUnsafe=ra;f.cmpU=T;f.cmp=sa;f.eqU=U;f.eq=ta;f.get=ua;f.getUndefined=va;f.getWithDefault=xa;f.getExn=wa;f.has=ya;f.fromArray=Ba;f.updateMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_belt_MapDict",["bs_curry","bs_js_primitive","bs_belt_internalAVLtree"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(c,d,e,a){__p&&__p();if(c!==null){var f=c.key,h=a(d,f);if(h===0)return b("bs_belt_internalAVLtree").updateValue(c,e);else{var i=c.left,j=c.right;c=c.value;if(h<0)return b("bs_belt_internalAVLtree").bal(g(i,d,e,a),f,c,j);else return b("bs_belt_internalAVLtree").bal(i,f,c,g(j,d,e,a))}}else return b("bs_belt_internalAVLtree").singleton(d,e)}function h(c,d,e,a){__p&&__p();if(c!==null){var f=c.key,g=a(d,f);if(g===0){var i=e(b("bs_js_primitive").some(c.value));if(i!==void 0)return b("bs_belt_internalAVLtree").updateValue(c,b("bs_js_primitive").valFromOption(i));else{i=c.left;var j=c.right;if(i!==null)if(j!==null){var k=[j.key],l=[j.value],m=b("bs_belt_internalAVLtree").removeMinAuxWithRef(j,k,l);return b("bs_belt_internalAVLtree").bal(i,k[0],l[0],m)}else return i;else return j}}else{k=c.left;l=c.right;m=c.value;if(g<0){i=h(k,d,e,a);if(k===i)return c;else return b("bs_belt_internalAVLtree").bal(i,f,m,l)}else{j=h(l,d,e,a);if(l===j)return c;else return b("bs_belt_internalAVLtree").bal(k,f,m,j)}}}else{g=e(void 0);if(g!==void 0)return b("bs_belt_internalAVLtree").singleton(d,b("bs_js_primitive").valFromOption(g));else return c}}function a(c,d,e,a){return h(c,d,b("bs_curry").__1(e),a)}function i(c,d,a){__p&&__p();var e=c.left,f=c.key,g=c.right,h=a(d,f);if(h===0)if(e!==null)if(g!==null){var j=[g.key],k=[g.value],l=b("bs_belt_internalAVLtree").removeMinAuxWithRef(g,j,k);return b("bs_belt_internalAVLtree").bal(e,j[0],k[0],l)}else return e;else return g;else if(h<0)if(e!==null){j=i(e,d,a);if(j===e)return c;else return b("bs_belt_internalAVLtree").bal(j,f,c.value,g)}else return c;else if(g!==null){k=i(g,d,a);if(k===g)return c;else return b("bs_belt_internalAVLtree").bal(e,f,c.value,k)}else return c}function c(c,d,a){if(c!==null)return i(c,d,a);else return b("bs_belt_internalAVLtree").empty}function d(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=g(b,f[0],f[1],a)}return b}function j(c,d,e,a){__p&&__p();var f=c.left,g=c.key,h=c.value,i=c.right,k=a(d,g);if(k===0){e[0]=b("bs_js_primitive").some(h);return[f,i]}else if(k<0)if(f!==null){k=j(f,d,e,a);return[k[0],b("bs_belt_internalAVLtree").join(k[1],g,h,i)]}else return[b("bs_belt_internalAVLtree").empty,c];else if(i!==null){k=j(i,d,e,a);return[b("bs_belt_internalAVLtree").join(f,g,h,k[0]),k[1]]}else return[c,b("bs_belt_internalAVLtree").empty]}function e(c,d,a){if(c!==null){var e=[void 0];c=j(c,d,e,a);return[c,e[0]]}else return[[b("bs_belt_internalAVLtree").empty,b("bs_belt_internalAVLtree").empty],void 0]}function k(c,d,e,a){__p&&__p();if(c!==null)if(d!==null)if(c.height>=d.height){var f=c.left,g=c.key,h=c.value,i=c.right,l=[void 0],m=j(d,g,l,a);l=l[0];f=k(f,m[0],e,a);h=e(g,b("bs_js_primitive").some(h),l);l=k(i,m[1],e,a);return b("bs_belt_internalAVLtree").concatOrJoin(f,g,h,l)}else{i=d.left;m=d.key;f=d.value;g=d.right;h=[void 0];l=j(c,m,h,a);h=h[0];i=k(l[0],i,e,a);h=e(m,h,b("bs_js_primitive").some(f));f=k(l[1],g,e,a);return b("bs_belt_internalAVLtree").concatOrJoin(i,m,h,f)}else return b("bs_belt_internalAVLtree").keepMapU(c,function(a,c){return e(a,b("bs_js_primitive").some(c),void 0)});else if(d!==null)return b("bs_belt_internalAVLtree").keepMapU(d,function(a,c){return e(a,void 0,b("bs_js_primitive").some(c))});else return b("bs_belt_internalAVLtree").empty}function l(c,d,e,a){return k(c,d,b("bs_curry").__3(e),a)}function m(c,d,a){__p&&__p();var e=d.length;if(c!==null){c=c;d=d;var f=0;e=e;a=a;while(!0){var g=f,h=c;if(g<e){var j=d[g];j=i(h,j,a);if(j!==null){f=g+1|0;c=j;continue}else return j}else return h}}else return b("bs_belt_internalAVLtree").empty}var n=b("bs_belt_internalAVLtree").empty,o=b("bs_belt_internalAVLtree").isEmpty,p=b("bs_belt_internalAVLtree").has,q=b("bs_belt_internalAVLtree").cmpU,r=b("bs_belt_internalAVLtree").cmp,s=b("bs_belt_internalAVLtree").eqU,t=b("bs_belt_internalAVLtree").eq,u=b("bs_belt_internalAVLtree").findFirstByU,v=b("bs_belt_internalAVLtree").findFirstBy,w=b("bs_belt_internalAVLtree").forEachU,x=b("bs_belt_internalAVLtree").forEach,y=b("bs_belt_internalAVLtree").reduceU,z=b("bs_belt_internalAVLtree").reduce,A=b("bs_belt_internalAVLtree").everyU,B=b("bs_belt_internalAVLtree").every,C=b("bs_belt_internalAVLtree").someU,D=b("bs_belt_internalAVLtree").some,E=b("bs_belt_internalAVLtree").size,F=b("bs_belt_internalAVLtree").toList,G=b("bs_belt_internalAVLtree").toArray,H=b("bs_belt_internalAVLtree").fromArray,I=b("bs_belt_internalAVLtree").keysToArray,J=b("bs_belt_internalAVLtree").valuesToArray,K=b("bs_belt_internalAVLtree").minKey,L=b("bs_belt_internalAVLtree").minKeyUndefined,M=b("bs_belt_internalAVLtree").maxKey,N=b("bs_belt_internalAVLtree").maxKeyUndefined,O=b("bs_belt_internalAVLtree").minimum,P=b("bs_belt_internalAVLtree").minUndefined,Q=b("bs_belt_internalAVLtree").maximum,R=b("bs_belt_internalAVLtree").maxUndefined,S=b("bs_belt_internalAVLtree").get,T=b("bs_belt_internalAVLtree").getUndefined,U=b("bs_belt_internalAVLtree").getWithDefault,V=b("bs_belt_internalAVLtree").getExn,W=b("bs_belt_internalAVLtree").checkInvariantInternal,X=b("bs_belt_internalAVLtree").keepSharedU,Y=b("bs_belt_internalAVLtree").keepShared,Z=b("bs_belt_internalAVLtree").partitionSharedU,$=b("bs_belt_internalAVLtree").partitionShared,aa=b("bs_belt_internalAVLtree").mapU,ba=b("bs_belt_internalAVLtree").map,ca=b("bs_belt_internalAVLtree").mapWithKeyU,da=b("bs_belt_internalAVLtree").mapWithKey;f.empty=n;f.isEmpty=o;f.has=p;f.cmpU=q;f.cmp=r;f.eqU=s;f.eq=t;f.findFirstByU=u;f.findFirstBy=v;f.forEachU=w;f.forEach=x;f.reduceU=y;f.reduce=z;f.everyU=A;f.every=B;f.someU=C;f.some=D;f.size=E;f.toList=F;f.toArray=G;f.fromArray=H;f.keysToArray=I;f.valuesToArray=J;f.minKey=K;f.minKeyUndefined=L;f.maxKey=M;f.maxKeyUndefined=N;f.minimum=O;f.minUndefined=P;f.maximum=Q;f.maxUndefined=R;f.get=S;f.getUndefined=T;f.getWithDefault=U;f.getExn=V;f.checkInvariantInternal=W;f.remove=c;f.removeMany=m;f.set=g;f.updateU=h;f.update=a;f.mergeU=k;f.merge=l;f.mergeMany=d;f.keepU=X;f.keep=Y;f.partitionU=Z;f.partition=$;f.split=e;f.mapU=aa;f.map=ba;f.mapWithKeyU=ca;f.mapWithKey=da}),null);
__d("bs_belt_Map",["bs_curry","bs_belt_MapDict"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){c=c[0];return{cmp:c,data:b("bs_belt_MapDict").fromArray(a,c)}}function c(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_MapDict").remove(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function d(c,d){var a=c.cmp;c=c.data;c=b("bs_belt_MapDict").removeMany(c,d,a);return{cmp:a,data:c}}function e(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").set(c.data,d,e,a)}}function g(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").mergeMany(c.data,d,a)}}function h(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").updateU(c.data,d,e,a)}}function i(a,c,d){return h(a,c,b("bs_curry").__1(d))}function j(c,d){var a=c.cmp;c=b("bs_belt_MapDict").split(c.data,d,a);d=c[0];return[[{cmp:a,data:d[0]},{cmp:a,data:d[1]}],c[1]]}function k(c,d,e){var a=c.cmp;return{cmp:a,data:b("bs_belt_MapDict").mergeU(c.data,d.data,e,a)}}function l(a,c,d){return k(a,c,b("bs_curry").__3(d))}function m(a){return{cmp:a[0],data:b("bs_belt_MapDict").empty}}function n(a){return b("bs_belt_MapDict").isEmpty(a.data)}function o(a,c){return b("bs_belt_MapDict").findFirstByU(a.data,c)}function p(a,c){return b("bs_belt_MapDict").findFirstByU(a.data,b("bs_curry").__2(c))}function q(a,c){return b("bs_belt_MapDict").forEachU(a.data,c)}function r(a,c){return b("bs_belt_MapDict").forEachU(a.data,b("bs_curry").__2(c))}function s(a,c,d){return b("bs_belt_MapDict").reduceU(a.data,c,d)}function t(a,c,d){return s(a,c,b("bs_curry").__3(d))}function u(a,c){return b("bs_belt_MapDict").everyU(a.data,c)}function v(a,c){return b("bs_belt_MapDict").everyU(a.data,b("bs_curry").__2(c))}function w(a,c){return b("bs_belt_MapDict").someU(a.data,c)}function x(a,c){return b("bs_belt_MapDict").someU(a.data,b("bs_curry").__2(c))}function y(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").keepU(a.data,c)}}function z(a,c){return y(a,b("bs_curry").__2(c))}function A(c,d){var a=c.cmp;c=b("bs_belt_MapDict").partitionU(c.data,d);return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function B(a,c){return A(a,b("bs_curry").__2(c))}function C(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").mapU(a.data,c)}}function D(a,c){return C(a,b("bs_curry").__1(c))}function E(a,c){return{cmp:a.cmp,data:b("bs_belt_MapDict").mapWithKeyU(a.data,c)}}function F(a,c){return E(a,b("bs_curry").__2(c))}function G(a){return b("bs_belt_MapDict").size(a.data)}function H(a){return b("bs_belt_MapDict").toList(a.data)}function I(a){return b("bs_belt_MapDict").toArray(a.data)}function J(a){return b("bs_belt_MapDict").keysToArray(a.data)}function K(a){return b("bs_belt_MapDict").valuesToArray(a.data)}function L(a){return b("bs_belt_MapDict").minKey(a.data)}function M(a){return b("bs_belt_MapDict").minKeyUndefined(a.data)}function N(a){return b("bs_belt_MapDict").maxKey(a.data)}function O(a){return b("bs_belt_MapDict").maxKeyUndefined(a.data)}function P(a){return b("bs_belt_MapDict").minimum(a.data)}function Q(a){return b("bs_belt_MapDict").minUndefined(a.data)}function R(a){return b("bs_belt_MapDict").maximum(a.data)}function S(a){return b("bs_belt_MapDict").maxUndefined(a.data)}function T(a,c){return b("bs_belt_MapDict").get(a.data,c,a.cmp)}function U(a,c){return b("bs_belt_MapDict").getUndefined(a.data,c,a.cmp)}function V(a,c,d){return b("bs_belt_MapDict").getWithDefault(a.data,c,d,a.cmp)}function W(a,c){return b("bs_belt_MapDict").getExn(a.data,c,a.cmp)}function X(a,c){return b("bs_belt_MapDict").has(a.data,c,a.cmp)}function Y(a){return b("bs_belt_MapDict").checkInvariantInternal(a.data)}function Z(a,c,d){return b("bs_belt_MapDict").eqU(a.data,c.data,a.cmp,d)}function aa(a,c,d){return Z(a,c,b("bs_curry").__2(d))}function $(a,c,d){return b("bs_belt_MapDict").cmpU(a.data,c.data,a.cmp,d)}function ba(a,c,d){return $(a,c,b("bs_curry").__2(d))}function ca(a){return a.data}function da(a){a=a.cmp;return[a]}function ea(a,b){return{cmp:a[0],data:b}}var fa=0,ga=0,ha=0;f.Int=fa;f.$$String=ga;f.Dict=ha;f.make=m;f.isEmpty=n;f.has=X;f.cmpU=$;f.cmp=ba;f.eqU=Z;f.eq=aa;f.findFirstByU=o;f.findFirstBy=p;f.forEachU=q;f.forEach=r;f.reduceU=s;f.reduce=t;f.everyU=u;f.every=v;f.someU=w;f.some=x;f.size=G;f.toArray=I;f.toList=H;f.fromArray=a;f.keysToArray=J;f.valuesToArray=K;f.minKey=L;f.minKeyUndefined=M;f.maxKey=N;f.maxKeyUndefined=O;f.minimum=P;f.minUndefined=Q;f.maximum=R;f.maxUndefined=S;f.get=T;f.getUndefined=U;f.getWithDefault=V;f.getExn=W;f.remove=c;f.removeMany=d;f.set=e;f.updateU=h;f.update=i;f.mergeMany=g;f.mergeU=k;f.merge=l;f.keepU=y;f.keep=z;f.partitionU=A;f.partition=B;f.split=j;f.mapU=C;f.map=D;f.mapWithKeyU=E;f.mapWithKey=F;f.getData=ca;f.getId=da;f.packIdData=ea;f.checkInvariantInternal=Y}),null);
__d("bs_belt_internalMapString",["bs_curry","bs_js_primitive","bs_belt_SortArray","bs_caml_primitive","bs_belt_internalAVLtree"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e)return b("bs_belt_internalAVLtree").updateValue(a,d);else{var f=a.value;if(c<e)return b("bs_belt_internalAVLtree").bal(g(a.left,c,d),e,f,a.right);else return b("bs_belt_internalAVLtree").bal(a.left,e,f,g(a.right,c,d))}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function a(a,c){__p&&__p();while(!0){var d=a;if(d!==null){var e=d.key;if(c===e)return b("bs_js_primitive").some(d.value);else{a=c<e?d.left:d.right;continue}}else return void 0}}function c(a,b){__p&&__p();while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return c.value;else{a=b<d?c.left:c.right;continue}}else return void 0}}function d(a,b){__p&&__p();while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return c.value;else{a=b<d?c.left:c.right;continue}}else throw new Error("getExn")}}function e(a,b,c){__p&&__p();while(!0){var d=a;if(d!==null){var e=d.key;if(b===e)return d.value;else{a=b<e?d.left:d.right;continue}}else return c}}function h(a,b){__p&&__p();while(!0){var c=a;if(c!==null){var d=c.key;if(b===d)return!0;else{a=b<d?c.left:c.right;continue}}else return!1}}function i(a,c){__p&&__p();if(a!==null){var d=a.left,e=a.key,f=a.right;if(c===e)if(d!==null)if(f!==null){var g=[f.key],h=[f.value],j=b("bs_belt_internalAVLtree").removeMinAuxWithRef(f,g,h);return b("bs_belt_internalAVLtree").bal(d,g[0],h[0],j)}else return d;else return f;else if(c<e)return b("bs_belt_internalAVLtree").bal(i(d,c),e,a.value,f);else return b("bs_belt_internalAVLtree").bal(d,e,a.value,i(f,c))}else return a}function j(a,c){__p&&__p();var d=c.left,e=c.key,f=c.value,g=c.right;if(a===e)return[d,b("bs_js_primitive").some(f),g];else if(a<e)if(d!==null){var h=j(a,d);return[h[0],h[1],b("bs_belt_internalAVLtree").join(h[2],e,f,g)]}else return[b("bs_belt_internalAVLtree").empty,void 0,c];else if(g!==null){h=j(a,g);return[b("bs_belt_internalAVLtree").join(d,e,f,h[0]),h[1],h[2]]}else return[c,void 0,b("bs_belt_internalAVLtree").empty]}function k(a,c){if(c!==null)return j(a,c);else return[b("bs_belt_internalAVLtree").empty,void 0,b("bs_belt_internalAVLtree").empty]}function l(a,c,d){__p&&__p();if(a!==null)if(a.height>=(c!==null?c.height:0)){var e=a.left,f=a.key,g=a.value,h=a.right,i=k(f,c);return b("bs_belt_internalAVLtree").concatOrJoin(l(e,i[0],d),f,d(f,b("bs_js_primitive").some(g),i[1]),l(h,i[2],d))}else e=1;else if(c!==null)e=1;else return b("bs_belt_internalAVLtree").empty;if(e===1)if(c!==null){f=c.left;g=c.key;h=c.value;i=c.right;e=k(g,a);return b("bs_belt_internalAVLtree").concatOrJoin(l(e[0],f,d),g,d(g,e[1],b("bs_js_primitive").some(h)),l(e[2],i,d))}else return 0}function m(a,c,d){return l(a,c,b("bs_curry").__3(d))}function n(a,c,d){__p&&__p();while(!0){var e=c,f=a;if(f&&e){var g=e[0],h=f[0],i=b("bs_caml_primitive").caml_string_compare(h.key,g.key);if(i===0){var j=d(h.value,g.value);if(j===0){c=b("bs_belt_internalAVLtree").stackAllLeft(g.right,e[1]);a=b("bs_belt_internalAVLtree").stackAllLeft(h.right,f[1]);continue}else return j}else return i}else return 0}}function o(c,d,a){var e=b("bs_belt_internalAVLtree").size(c),f=b("bs_belt_internalAVLtree").size(d);if(e===f)return n(b("bs_belt_internalAVLtree").stackAllLeft(c,0),b("bs_belt_internalAVLtree").stackAllLeft(d,0),a);else if(e<f)return-1;else return 1}function p(a,c,d){return o(a,c,b("bs_curry").__2(d))}function q(c,d,a){__p&&__p();while(!0){var e=d,f=c;if(f&&e){var g=e[0],h=f[0];if(h.key===g.key&&a(h.value,g.value)){d=b("bs_belt_internalAVLtree").stackAllLeft(g.right,e[1]);c=b("bs_belt_internalAVLtree").stackAllLeft(h.right,f[1]);continue}else return!1}else return!0}}function r(c,d,a){var e=b("bs_belt_internalAVLtree").size(c),f=b("bs_belt_internalAVLtree").size(d);if(e===f)return q(b("bs_belt_internalAVLtree").stackAllLeft(c,0),b("bs_belt_internalAVLtree").stackAllLeft(d,0),a);else return!1}function s(a,c,d){return r(a,c,b("bs_curry").__2(d))}function t(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e){a.key=c;a.value=d;return a}else{var f=a.left,g=a.right;if(c<e){e=t(f,c,d);a.left=e}else a.right=t(g,c,d);return b("bs_belt_internalAVLtree").balMutate(a)}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function u(a){__p&&__p();var c=a.length;if(c===0)return b("bs_belt_internalAVLtree").empty;else{var d=b("bs_belt_SortArray").strictlySortedLengthU(a,function(a,b){return a[0]<b[0]}),e;d>=0?e=b("bs_belt_internalAVLtree").fromSortedArrayAux(a,0,d):(d=-d|0,e=b("bs_belt_internalAVLtree").fromSortedArrayRevAux(a,d-1|0,d));for(var d=d,c=c-1|0;d<=c;++d){var f=a[d];e=t(e,f[0],f[1])}return e}}var v=0,w=0,x=0;f.N=v;f.A=w;f.S=x;f.add=g;f.get=a;f.getUndefined=c;f.getExn=d;f.getWithDefault=e;f.has=h;f.remove=i;f.splitAux=j;f.split=k;f.mergeU=l;f.merge=m;f.compareAux=n;f.cmpU=o;f.cmp=p;f.eqAux=q;f.eqU=r;f.eq=s;f.addMutate=t;f.fromArray=u}),null);
__d("bs_belt_MapString",["bs_curry","bs_js_primitive","bs_belt_internalAVLtree","bs_belt_internalMapString"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e)return b("bs_belt_internalAVLtree").updateValue(a,d);else{var f=a.value;if(c<e)return b("bs_belt_internalAVLtree").bal(g(a.left,c,d),e,f,a.right);else return b("bs_belt_internalAVLtree").bal(a.left,e,f,g(a.right,c,d))}}else return b("bs_belt_internalAVLtree").singleton(c,d)}function h(a,c,d){__p&&__p();if(a!==null){var e=a.key;if(c===e){var f=d(b("bs_js_primitive").some(a.value));if(f!==void 0)return b("bs_belt_internalAVLtree").updateValue(a,b("bs_js_primitive").valFromOption(f));else{f=a.left;var g=a.right;if(f!==null)if(g!==null){var i=[g.key],j=[g.value],k=b("bs_belt_internalAVLtree").removeMinAuxWithRef(g,i,j);return b("bs_belt_internalAVLtree").bal(f,i[0],j[0],k)}else return f;else return g}}else{i=a.left;j=a.right;k=a.value;if(c<e){f=h(i,c,d);if(i===f)return a;else return b("bs_belt_internalAVLtree").bal(f,e,k,j)}else{g=h(j,c,d);if(j===g)return a;else return b("bs_belt_internalAVLtree").bal(i,e,k,g)}}}else{f=d(void 0);if(f!==void 0)return b("bs_belt_internalAVLtree").singleton(c,b("bs_js_primitive").valFromOption(f));else return a}}function a(a,c,d){return h(a,c,b("bs_curry").__1(d))}function i(a,c){__p&&__p();var d=a.left,e=a.key,f=a.right;if(c===e)if(d!==null)if(f!==null){var g=[f.key],h=[f.value],j=b("bs_belt_internalAVLtree").removeMinAuxWithRef(f,g,h);return b("bs_belt_internalAVLtree").bal(d,g[0],h[0],j)}else return d;else return f;else if(c<e)if(d!==null){g=i(d,c);if(g===d)return a;else return b("bs_belt_internalAVLtree").bal(g,e,a.value,f)}else return a;else if(f!==null){h=i(f,c);return b("bs_belt_internalAVLtree").bal(d,e,a.value,h)}else return a}function c(a,c){if(a!==null)return i(a,c);else return b("bs_belt_internalAVLtree").empty}function d(a,c){__p&&__p();var d=c.length;if(a!==null){a=a;c=c;var e=0;d=d;while(!0){var f=e,g=a;if(f<d){var h=c[f];h=i(g,h);if(h!==null){e=f+1|0;a=h;continue}else return h}else return g}}else return b("bs_belt_internalAVLtree").empty}function e(a,b){var c=b.length;a=a;for(var d=0,c=c-1|0;d<=c;++d){var e=b[d];a=g(a,e[0],e[1])}return a}var j=b("bs_belt_internalAVLtree").empty,k=b("bs_belt_internalAVLtree").isEmpty,l=b("bs_belt_internalMapString").has,m=b("bs_belt_internalMapString").cmpU,n=b("bs_belt_internalMapString").cmp,o=b("bs_belt_internalMapString").eqU,p=b("bs_belt_internalMapString").eq,q=b("bs_belt_internalAVLtree").findFirstByU,r=b("bs_belt_internalAVLtree").findFirstBy,s=b("bs_belt_internalAVLtree").forEachU,t=b("bs_belt_internalAVLtree").forEach,u=b("bs_belt_internalAVLtree").reduceU,v=b("bs_belt_internalAVLtree").reduce,w=b("bs_belt_internalAVLtree").everyU,x=b("bs_belt_internalAVLtree").every,y=b("bs_belt_internalAVLtree").someU,z=b("bs_belt_internalAVLtree").some,A=b("bs_belt_internalAVLtree").size,B=b("bs_belt_internalAVLtree").toList,C=b("bs_belt_internalAVLtree").toArray,D=b("bs_belt_internalMapString").fromArray,E=b("bs_belt_internalAVLtree").keysToArray,F=b("bs_belt_internalAVLtree").valuesToArray,G=b("bs_belt_internalAVLtree").minKey,H=b("bs_belt_internalAVLtree").minKeyUndefined,I=b("bs_belt_internalAVLtree").maxKey,J=b("bs_belt_internalAVLtree").maxKeyUndefined,K=b("bs_belt_internalAVLtree").minimum,L=b("bs_belt_internalAVLtree").minUndefined,M=b("bs_belt_internalAVLtree").maximum,N=b("bs_belt_internalAVLtree").maxUndefined,O=b("bs_belt_internalMapString").get,P=b("bs_belt_internalMapString").getUndefined,Q=b("bs_belt_internalMapString").getWithDefault,R=b("bs_belt_internalMapString").getExn,S=b("bs_belt_internalAVLtree").checkInvariantInternal,T=b("bs_belt_internalMapString").mergeU,U=b("bs_belt_internalMapString").merge,V=b("bs_belt_internalAVLtree").keepSharedU,W=b("bs_belt_internalAVLtree").keepShared,X=b("bs_belt_internalAVLtree").partitionSharedU,Y=b("bs_belt_internalAVLtree").partitionShared,Z=b("bs_belt_internalMapString").split,$=b("bs_belt_internalAVLtree").mapU,aa=b("bs_belt_internalAVLtree").map,ba=b("bs_belt_internalAVLtree").mapWithKeyU,ca=b("bs_belt_internalAVLtree").mapWithKey;f.empty=j;f.isEmpty=k;f.has=l;f.cmpU=m;f.cmp=n;f.eqU=o;f.eq=p;f.findFirstByU=q;f.findFirstBy=r;f.forEachU=s;f.forEach=t;f.reduceU=u;f.reduce=v;f.everyU=w;f.every=x;f.someU=y;f.some=z;f.size=A;f.toList=B;f.toArray=C;f.fromArray=D;f.keysToArray=E;f.valuesToArray=F;f.minKey=G;f.minKeyUndefined=H;f.maxKey=I;f.maxKeyUndefined=J;f.minimum=K;f.minUndefined=L;f.maximum=M;f.maxUndefined=N;f.get=O;f.getUndefined=P;f.getWithDefault=Q;f.getExn=R;f.checkInvariantInternal=S;f.remove=c;f.removeMany=d;f.set=g;f.updateU=h;f.update=a;f.mergeU=T;f.merge=U;f.mergeMany=e;f.keepU=V;f.keep=W;f.partitionU=X;f.partition=Y;f.split=Z;f.mapU=$;f.map=aa;f.mapWithKeyU=ba;f.mapWithKey=ca}),null);
__d("bs_belt_internalAVLset",["bs_curry","bs_js_primitive","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==null)return a.height;else return 0}function h(a){if(a!==null){var b=a.left,c=a.right;return{value:a.value,height:a.height,left:h(b),right:h(c)}}else return a}function i(a,b,c){var d=a!==null?a.height:0,e=c!==null?c.height:0;return{value:b,height:d>=e?d+1|0:e+1|0,left:a,right:c}}function j(a){return{value:a,height:1,left:null,right:null}}function k(a,b){if(b!==null)if(a!==null)return a.height>=b.height;else return!1;else return!0}function l(a,b,c){__p&&__p();var d=a!==null?a.height:0,e=c!==null?c.height:0;if(d>(e+2|0)){var f=a.left,g=a.value,h=a.right;if(k(f,h))return i(f,g,i(h,b,c));else{var j=h.left,l=h.value;h=h.right;return i(i(f,g,j),l,i(h,b,c))}}else if(e>(d+2|0)){f=c.left;g=c.value;j=c.right;if(k(j,f))return i(i(a,b,f),g,j);else{l=f.left;h=f.value;f=f.right;return i(i(a,b,l),h,i(f,g,j))}}else return{value:b,height:d>=e?d+1|0:e+1|0,left:a,right:c}}function m(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return b.value}}function a(a){if(a!==null)return b("bs_js_primitive").some(m(a))}function c(a){if(a!==null)return m(a)}function n(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return b.value}}function d(a){if(a!==null)return b("bs_js_primitive").some(n(a))}function e(a){if(a!==null)return n(a)}function o(a,b){var c=a.left,d=a.right;a=a.value;if(c!==null)return l(o(c,b),a,d);else{b[0]=a;return d}}function p(a){return a===null}function q(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d,c];a=d.left;continue}else return c}}function r(a,b){__p&&__p();while(!0){var c=a;if(c!==null){r(c.left,b);b(c.value);a=c.right;continue}else return 0}}function s(a,c){return r(a,b("bs_curry").__1(c))}function t(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e!==null){var f=e.left,g=e.value;e=e.right;b=c(t(f,d,c),g);a=e;continue}else return d}}function u(a,c,d){return t(a,c,b("bs_curry").__2(d))}function v(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.value)&&v(c.left,b)){a=c.right;continue}else return!1;else return!0}}function w(a,c){return v(a,b("bs_curry").__1(c))}function x(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.value)||x(c.left,b))return!0;else{a=c.right;continue}else return!1}}function y(a,c){return x(a,b("bs_curry").__1(c))}function z(a,b){if(a!==null)return l(z(a.left,b),a.value,a.right);else return j(b)}function A(a,b){if(a!==null)return l(a.left,a.value,A(a.right,b));else return j(b)}function B(a,b,c){__p&&__p();if(a!==null)if(c!==null){var d=a.height,e=c.height;if(d>(e+2|0))return l(a.left,a.value,B(a.right,b,c));else if(e>(d+2|0))return l(B(a,b,c.left),c.value,c.right);else return i(a,b,c)}else return A(a,b);else return z(c,b)}function C(a,b){if(a!==null)if(b!==null){var c=[b.value],d=o(b,c);return B(a,c[0],d)}else return a;else return b}function D(a,b){__p&&__p();if(a!==null){var c=a.value,d=D(a.left,b),e=d[1];d=d[0];var f=b(c);a=D(a.right,b);b=a[1];a=a[0];if(f)return[B(d,c,a),C(e,b)];else return[C(d,a),B(e,c,b)]}else return[null,null]}function E(a,c){return D(a,b("bs_curry").__1(c))}function F(a){var b=a.left;a=a.right;b=b!==null?F(b):0;a=a!==null?F(a):0;return(1+b|0)+a|0}function G(a){if(a!==null)return F(a);else return 0}function H(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d.value,H(d.right,c)];a=d.left;continue}else return c}}function I(a){return H(a,0)}function J(a){__p&&__p();while(!0){var b=a;if(b!==null){var c=b.left;b=b.right;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw new Error('File "belt_internalAVLset.ml", line 302, characters 6-12');J(c);a=b;continue}else return 0}}function K(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.value;e=e.right;f=f!==null?K(f,d,c):d;c[f]=g;d=f+1|0;if(e!==null){b=d;a=e;continue}else return d}}function L(a,b,c,d){__p&&__p();while(!0){var e=a,f=e.left,g=e.value;e=e.right;f!==null&&L(f,b,c,d);if(d(g)){f=b.forward;c[f]=g;b.forward=f+1|0}else{f=b.backward;c[f]=g;b.backward=f-1|0}if(e!==null){a=e;continue}else return 0}}function M(a,b,c,d){__p&&__p();while(!0){var e=b,f=a,g=f.left,h=f.value;f=f.right;g=g!==null?M(g,e,c,d):e;e=d(h)?(c[g]=h,g+1|0):g;if(f!==null){b=e;a=f;continue}else return e}}function N(b){if(b!==null){var a=F(b);a=new Array(a);K(b,0,a);return a}else return[]}function O(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=O(a,b,d),f=a[b-d|0];d=O(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f,d)}else switch(c){case 0:return null;case 1:return j(a[b]);case 2:e=a[b];f=a[b-1|0];return{value:f,height:2,left:j(e),right:null};case 3:d=a[b];c=a[b-1|0];f=a[b-2|0];return{value:c,height:2,left:j(d),right:j(f)}}}function P(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=P(a,b,d),f=a[b+d|0];d=P(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f,d)}else switch(c){case 0:return null;case 1:return j(a[b]);case 2:e=a[b];f=a[b+1|0];return{value:f,height:2,left:j(e),right:null};case 3:d=a[b];c=a[b+1|0];f=a[b+2|0];return{value:c,height:2,left:j(d),right:j(f)}}}function aa(a){return P(a,0,a.length)}function Q(a,b){__p&&__p();if(a!==null){var c=a.left,d=a.value,e=a.right,f=Q(c,b),g=b(d);b=Q(e,b);if(g)if(c===f&&e===b)return a;else return B(f,d,b);else return C(f,b)}else return null}function ba(a,c){return Q(a,b("bs_curry").__1(c))}function R(b,c){if(b!==null){var a=F(b);a=new Array(a);b=M(b,0,a,c);return P(a,0,b)}else return null}function ca(a,c){return R(a,b("bs_curry").__1(c))}function S(b,c){if(b!==null){var a=F(b),d=new Array(a),e=a-1|0,f={forward:0,backward:e};L(b,f,d,c);b=f.forward;return[P(d,0,b),O(d,e,a-b|0)]}else return[null,null]}function da(a,c){return S(a,b("bs_curry").__1(c))}function ea(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value;e=a(c,e);if(e===0)return!0;else{b=e<0?d.left:d.right;continue}}else return!1}}function T(a,b,c){__p&&__p();var d=G(a),e=G(b);if(d===e){a=q(a,0);b=q(b,0);c=c;while(!0){var f=b,g=a;if(g&&f){var h=f[0],i=g[0],j=c(i.value,h.value);if(j===0){b=q(h.right,f[1]);a=q(i.right,g[1]);continue}else return j}else return 0}}else if(d<e)return-1;else return 1}function fa(a,b,c){return T(a,b,c)===0}function U(b,c,a){__p&&__p();while(!0){var d=c,e=b;if(e!==null)if(d!==null){var f=e.left,g=e.value;e=e.right;var h=d.left,j=d.value;d=d.right;j=a(g,j);if(j===0)if(U(f,h,a)){c=d;b=e;continue}else return!1;else if(j<0)if(U(i(f,g,null),h,a)){b=e;continue}else return!1;else if(U(i(null,g,e),d,a)){b=f;continue}else return!1}else return!1;else return!0}}function ga(c,d,a){__p&&__p();while(!0){var e=c;if(e!==null){var f=e.value,g=a(d,f);if(g===0)return b("bs_js_primitive").some(f);else{c=g<0?e.left:e.right;continue}}else return void 0}}function ha(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value,f=a(c,e);if(f===0)return e;else{b=f<0?d.left:d.right;continue}}else return void 0}}function ia(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value,f=a(c,e);if(f===0)return e;else{b=f<0?d.left:d.right;continue}}else throw new Error("getExn0")}}function V(a){var b=a.left;a.left=b.right;b.right=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.left);d=a.height;b.height=(c>d?c:d)+1|0;return b}function W(a){var b=a.right;a.right=b.left;b.left=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.right);d=a.height;b.height=(c>d?c:d)+1|0;return b}function ja(a){var b=W(a.left);a.left=b;return V(a)}function ka(a){var b=V(a.right);a.right=b;return W(a)}function X(a){var b=g(a.left),c=g(a.right);a.height=(b>c?b:c)+1|0;return a}function Y(a){__p&&__p();var b=a.left,c=a.right,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.left;b=b.right;if(k(f,b))return X(V(a));else return X(ja(a))}else if(e>(2+d|0)){f=c.left;b=c.right;if(k(b,f))return X(W(a));else return X(ka(a))}else{a.height=(d>e?d:e)+1|0;return a}}function Z(a,b,c){__p&&__p();if(b!==null){var d=b.value;d=a(c,d);if(d===0)return b;else{var e=b.left,f=b.right;if(d<0){d=Z(a,e,c);b.left=d}else b.right=Z(a,f,c);return Y(b)}}else return j(c)}function la(c,a){__p&&__p();var d=c.length;if(d===0)return null;else{var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b,c)<0}),f;e>=0?f=P(c,0,e):(e=-e|0,f=O(c,e-1|0,e));for(var e=e,d=d-1|0;e<=d;++e)f=Z(a,f,c[e]);return f}}function $(a,b){var c=b.right,d=b.left;if(d!==null){b.left=$(a,d);return Y(b)}else{a.value=b.value;return c}}var ma=null;f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.minimum=a;f.minUndefined=c;f.maximum=d;f.maxUndefined=e;f.removeMinAuxWithRef=o;f.empty=ma;f.isEmpty=p;f.stackAllLeft=q;f.forEachU=r;f.forEach=s;f.reduceU=t;f.reduce=u;f.everyU=v;f.every=w;f.someU=x;f.some=y;f.joinShared=B;f.concatShared=C;f.keepSharedU=Q;f.keepShared=ba;f.keepCopyU=R;f.keepCopy=ca;f.partitionSharedU=D;f.partitionShared=E;f.partitionCopyU=S;f.partitionCopy=da;f.lengthNode=F;f.size=G;f.toList=I;f.checkInvariantInternal=J;f.fillArray=K;f.toArray=N;f.fromSortedArrayAux=P;f.fromSortedArrayRevAux=O;f.fromSortedArrayUnsafe=aa;f.has=ea;f.cmp=T;f.eq=fa;f.subset=U;f.get=ga;f.getUndefined=ha;f.getExn=ia;f.fromArray=la;f.addMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_belt_SetDict",["bs_belt_internalAVLset"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(c,d,a){__p&&__p();if(c!==null){var e=c.value,f=a(d,e);if(f===0)return c;else{var h=c.left,i=c.right;if(f<0){f=g(h,d,a);if(f===h)return c;else return b("bs_belt_internalAVLset").bal(f,e,i)}else{f=g(i,d,a);if(f===i)return c;else return b("bs_belt_internalAVLset").bal(h,e,f)}}}else return b("bs_belt_internalAVLset").singleton(d)}function h(c,d,a){__p&&__p();if(c!==null){var e=c.left,f=c.value,g=c.right,i=a(d,f);if(i===0)if(e!==null)if(g!==null){var j=[g.value],k=b("bs_belt_internalAVLset").removeMinAuxWithRef(g,j);return b("bs_belt_internalAVLset").bal(e,j[0],k)}else return e;else return g;else if(i<0){j=h(e,d,a);if(j===e)return c;else return b("bs_belt_internalAVLset").bal(j,f,g)}else{k=h(g,d,a);if(k===g)return c;else return b("bs_belt_internalAVLset").bal(e,f,k)}}else return c}function a(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=g(b,f,a)}return b}function c(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=h(b,f,a)}return b}function i(a,c,d){__p&&__p();var e=c.left,f=c.value,g=c.right,h=a(d,f);if(h===0)return[e,g];else if(h<0)if(e!==null){h=i(a,e,d);return[h[0],b("bs_belt_internalAVLset").joinShared(h[1],f,g)]}else return[b("bs_belt_internalAVLset").empty,c];else if(g!==null){h=i(a,g,d);return[b("bs_belt_internalAVLset").joinShared(e,f,h[0]),h[1]]}else return[c,b("bs_belt_internalAVLset").empty]}function j(a,c,d,e){__p&&__p();var f=c.left,g=c.value,h=c.right,i=a(d,g);if(i===0){e[0]=!0;return[f,h]}else if(i<0)if(f!==null){i=j(a,f,d,e);return[i[0],b("bs_belt_internalAVLset").joinShared(i[1],g,h)]}else return[b("bs_belt_internalAVLset").empty,c];else if(h!==null){i=j(a,h,d,e);return[b("bs_belt_internalAVLset").joinShared(f,g,i[0]),i[1]]}else return[c,b("bs_belt_internalAVLset").empty]}function d(c,d,a){if(c!==null){var e=[!1];a=j(a,c,d,e);return[a,e[0]]}else return[[b("bs_belt_internalAVLset").empty,b("bs_belt_internalAVLset").empty],!1]}function k(c,d,a){__p&&__p();if(c!==null)if(d!==null){var e=c.height,f=d.height;if(e>=f)if(f===1)return g(c,d.value,a);else{f=c.left;var h=c.value,j=c.right,l=i(a,d,h);return b("bs_belt_internalAVLset").joinShared(k(f,l[0],a),h,k(j,l[1],a))}else if(e===1)return g(d,c.value,a);else{f=d.left;h=d.value;j=d.right;l=i(a,c,h);return b("bs_belt_internalAVLset").joinShared(k(l[0],f,a),h,k(l[1],j,a))}}else return c;else return d}function l(c,d,a){__p&&__p();if(c!==null&&d!==null){var e=c.left,f=c.value;c=c.right;var g=[!1];d=j(a,d,f,g);e=l(e,d[0],a);c=l(c,d[1],a);if(g[0])return b("bs_belt_internalAVLset").joinShared(e,f,c);else return b("bs_belt_internalAVLset").concatShared(e,c)}else return b("bs_belt_internalAVLset").empty}function m(c,d,a){__p&&__p();if(c!==null&&d!==null){var e=c.left,f=c.value,g=c.right,h=[!1];d=j(a,d,f,h);e=m(e,d[0],a);g=m(g,d[1],a);if(h[0])return b("bs_belt_internalAVLset").concatShared(e,g);else return b("bs_belt_internalAVLset").joinShared(e,f,g)}else return c}e=b("bs_belt_internalAVLset").empty;var n=b("bs_belt_internalAVLset").fromArray,o=b("bs_belt_internalAVLset").fromSortedArrayUnsafe,p=b("bs_belt_internalAVLset").isEmpty,q=b("bs_belt_internalAVLset").has,r=b("bs_belt_internalAVLset").subset,s=b("bs_belt_internalAVLset").cmp,t=b("bs_belt_internalAVLset").eq,u=b("bs_belt_internalAVLset").forEachU,v=b("bs_belt_internalAVLset").forEach,w=b("bs_belt_internalAVLset").reduceU,x=b("bs_belt_internalAVLset").reduce,y=b("bs_belt_internalAVLset").everyU,z=b("bs_belt_internalAVLset").every,A=b("bs_belt_internalAVLset").someU,B=b("bs_belt_internalAVLset").some,C=b("bs_belt_internalAVLset").keepSharedU,D=b("bs_belt_internalAVLset").keepShared,E=b("bs_belt_internalAVLset").partitionSharedU,F=b("bs_belt_internalAVLset").partitionShared,G=b("bs_belt_internalAVLset").size,H=b("bs_belt_internalAVLset").toList,I=b("bs_belt_internalAVLset").toArray,J=b("bs_belt_internalAVLset").minimum,K=b("bs_belt_internalAVLset").minUndefined,L=b("bs_belt_internalAVLset").maximum,M=b("bs_belt_internalAVLset").maxUndefined,N=b("bs_belt_internalAVLset").get,O=b("bs_belt_internalAVLset").getUndefined,P=b("bs_belt_internalAVLset").getExn,Q=b("bs_belt_internalAVLset").checkInvariantInternal;f.empty=e;f.fromArray=n;f.fromSortedArrayUnsafe=o;f.isEmpty=p;f.has=q;f.add=g;f.mergeMany=a;f.remove=h;f.removeMany=c;f.union=k;f.intersect=l;f.diff=m;f.subset=r;f.cmp=s;f.eq=t;f.forEachU=u;f.forEach=v;f.reduceU=w;f.reduce=x;f.everyU=y;f.every=z;f.someU=A;f.some=B;f.keepU=C;f.keep=D;f.partitionU=E;f.partition=F;f.size=G;f.toList=H;f.toArray=I;f.minimum=J;f.minUndefined=K;f.maximum=L;f.maxUndefined=M;f.get=N;f.getUndefined=O;f.getExn=P;f.split=d;f.checkInvariantInternal=Q}),null);
__d("bs_belt_Set",["bs_curry","bs_belt_SetDict"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){c=c[0];return{cmp:c,data:b("bs_belt_SetDict").fromArray(a,c)}}function c(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_SetDict").remove(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function d(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_SetDict").add(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function e(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").mergeMany(c.data,d,a)}}function g(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").removeMany(c.data,d,a)}}function h(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").union(c.data,d.data,a)}}function i(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").intersect(c.data,d.data,a)}}function j(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").diff(c.data,d.data,a)}}function k(c,d){var a=c.cmp;return b("bs_belt_SetDict").subset(c.data,d.data,a)}function l(c,d){var a=c.cmp;c=b("bs_belt_SetDict").split(c.data,d,a);d=c[0];return[[{cmp:a,data:d[0]},{cmp:a,data:d[1]}],c[1]]}function m(a){return{cmp:a[0],data:b("bs_belt_SetDict").empty}}function n(a){return b("bs_belt_SetDict").isEmpty(a.data)}function o(a,c){var d=a.cmp;return b("bs_belt_SetDict").cmp(a.data,c.data,d)}function p(a,c){return b("bs_belt_SetDict").eq(a.data,c.data,a.cmp)}function q(a,c){return b("bs_belt_SetDict").forEachU(a.data,c)}function r(a,c){return b("bs_belt_SetDict").forEachU(a.data,b("bs_curry").__1(c))}function s(a,c,d){return b("bs_belt_SetDict").reduceU(a.data,c,d)}function t(a,c,d){return s(a,c,b("bs_curry").__2(d))}function u(a,c){return b("bs_belt_SetDict").everyU(a.data,c)}function v(a,c){return b("bs_belt_SetDict").everyU(a.data,b("bs_curry").__1(c))}function w(a,c){return b("bs_belt_SetDict").someU(a.data,c)}function x(a,c){return b("bs_belt_SetDict").someU(a.data,b("bs_curry").__1(c))}function y(a,c){return{cmp:a.cmp,data:b("bs_belt_SetDict").keepU(a.data,c)}}function z(a,c){return y(a,b("bs_curry").__1(c))}function A(a,c){c=b("bs_belt_SetDict").partitionU(a.data,c);a=a.cmp;return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function B(a,c){return A(a,b("bs_curry").__1(c))}function C(a){return b("bs_belt_SetDict").size(a.data)}function D(a){return b("bs_belt_SetDict").toList(a.data)}function E(a){return b("bs_belt_SetDict").toArray(a.data)}function F(a){return b("bs_belt_SetDict").minimum(a.data)}function G(a){return b("bs_belt_SetDict").minUndefined(a.data)}function H(a){return b("bs_belt_SetDict").maximum(a.data)}function I(a){return b("bs_belt_SetDict").maxUndefined(a.data)}function J(a,c){return b("bs_belt_SetDict").get(a.data,c,a.cmp)}function K(a,c){return b("bs_belt_SetDict").getUndefined(a.data,c,a.cmp)}function L(a,c){return b("bs_belt_SetDict").getExn(a.data,c,a.cmp)}function M(a,c){return b("bs_belt_SetDict").has(a.data,c,a.cmp)}function N(a,c){return{cmp:c[0],data:b("bs_belt_SetDict").fromSortedArrayUnsafe(a)}}function O(a){return a.data}function P(a){a=a.cmp;return[a]}function Q(a,b){return{cmp:a[0],data:b}}function R(a){return b("bs_belt_SetDict").checkInvariantInternal(a.data)}var S=0,T=0,U=0;f.Int=S;f.$$String=T;f.Dict=U;f.make=m;f.fromArray=a;f.fromSortedArrayUnsafe=N;f.isEmpty=n;f.has=M;f.add=d;f.mergeMany=e;f.remove=c;f.removeMany=g;f.union=h;f.intersect=i;f.diff=j;f.subset=k;f.cmp=o;f.eq=p;f.forEachU=q;f.forEach=r;f.reduceU=s;f.reduce=t;f.everyU=u;f.every=v;f.someU=w;f.some=x;f.keepU=y;f.keep=z;f.partitionU=A;f.partition=B;f.size=C;f.toArray=E;f.toList=D;f.minimum=F;f.minUndefined=G;f.maximum=H;f.maxUndefined=I;f.get=J;f.getUndefined=K;f.getExn=L;f.split=l;f.checkInvariantInternal=R;f.getData=O;f.getId=P;f.packIdData=Q}),null);
__d("bs_js_dict",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){delete a[b];return 0};function a(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e){var f=b[e];d[e]=[f,a[f]]}return d}function b(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=a[b[e]];return d}function c(a){__p&&__p();var b={};a=a;while(!0){var c=a;if(c){var d=c[0];b[d[0]]=d[1];a=c[1];continue}else return b}}function d(a){var b={},c=a.length;for(var d=0,c=c-1|0;d<=c;++d){var e=a[d];b[e[0]]=e[1]}return b}function e(a,b){var c={},d=Object.keys(b),e=d.length;for(var f=0,e=e-1|0;f<=e;++f){var g=d[f];c[g]=a(b[g])}return c}f.unsafeDeleteKey=g;f.entries=a;f.values=b;f.fromList=c;f.fromArray=d;f.map=e}),null);
__d("MessengerState.bs",["invariant","URI","FBID.bs","bs_array","bs_block","bs_curry","Utils.bs","FBJSON","Arbiter","gkx","bs_js_dict","qex","bs_belt_Map","bs_belt_Set","bs_caml_obj","JSLogger","ThreadId.bs","FBIDCheck","immutable","bs_belt_Array","bs_caml_array","ChatConfig","LogHistory","MercuryIDs","bs_pervasives","bs_belt_Option","AsyncRequest","bs_js_primitive","MessagingTag","TypingStates","MercuryAssert","MercuryViewer","ParticipantId.bs","bs_belt_MapString","bs_caml_primitive","MercuryFilters.bs","ImmutableObject","MercuryLocalIDs","ChannelConstants","MessengerFolders.bs","MessengerMessage.bs","bs_js_null_undefined","MercuryActionType","MercuryAttachment","MercuryDispatcher","MercuryMessageIDs.bs","MercuryThreadInfo","MessengerPersonas.bs","XGroupsController","MercuryThreadIDMap","PageCommItemStatus","MercuryActionStatus","MessageRequestUtils","MessagingThreadType","MercuryPayloadSource","MessengerEnvironment","MessengerThreadUtils.bs","MercuryLogMessageType","MercuryServerRequests","MercuryThreadInformer","MercurySyncEventsProxy","MercuryGlobalActionType","ThreadConnectivityStatus.bs","MercuryMessageClientState","MessengerGroupsSyncStatus","MercuryThreadlistConstants","MessageUnsendabilityStatus","setTimeoutAcrossTransitions","MessagingGenericAdminTextType","MessengerDesktopNotifications","ChatReliabilityInstrumentation","RemovedMessageTombstoneContent","MessengerThreadCannotReplyReason.bs","RepliedToMessageStatusForGraphQL","XMercuryThreadLikeIconController","MessengerSharedMediaActionsLoader","MercuryDisplayTimeFilterMessageRenderer","MessengerPersistantViewerKeyedSubscriptionComponent.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){var c={};b("bs_belt_Map").forEach(a,function(a,b){c[a]=b;return 0});return c}function a(a){return h(a[7])}function c(a,c){return b("bs_js_null_undefined").fromOption(b("bs_belt_Map").get(a[7],c))}function d(a){return a[0]}function e(a){return a[1]}function i(a){return a[2]}function j(a){return a[3]}function k(a){return a[4]}function l(a){return a[5]}function m(a){return a[6]}function n(a){return a[8]}function aa(a){return a[9]}function ba(a){return a[10]}function ca(a){return a[11]}function o(a){return a[12]}function p(a){return a[13]}function q(a){return a[14]}function r(a){return a[15]}function s(a){return a[16]}function da(a){return a[17]}function ea(a){return a[18]}function fa(a){b("ChatReliabilityInstrumentation").logMESSAGE_RECEIVED(b("FBJSON").stringify({otid:a.offline_threading_id,message_id:a.message_id,other_user_fbid:a.other_user_fbid}));return 0}function ga(a,c,d){d=d.reduce(b("bs_belt_Set").remove,c.reduce(b("bs_belt_Set").add,a[3]));if(d===a[3])return a;else return[a[0],a[1],a[2],d,a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}var ha=function(a,b){delete a[b];return 0};function ia(a,c,d){var e=b("bs_belt_MapString").get(a,c);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);var f=b("bs_belt_Map").get(e,d);if(f!==void 0)return b("bs_belt_MapString").set(a,c,b("bs_belt_Map").remove(e,d));else return a}else return a}function ja(a,c){__p&&__p();var d=c.thread_fbid;if(d==null)if(c.type==="typ"||c.type==="page_typing"){c=b("FBID.bs").ofString(c.from.toString());if(c!==void 0)return b("MercuryIDs").getThreadIDFromUserID(b("bs_js_primitive").valFromOption(c));else return null}else return null;else{c=b("MercuryThreadIDMap").getForFBID(a);return c.getClientIDFromServerIDNow(d.toString())}}var ka=b("MercuryFilters.bs").getSupportedFilters(0).concat([b("MercuryFilters.bs").all,b("MercuryFilters.bs").groups]),la=b("MessengerFolders.bs").getSupportedFolders(0).concat([b("MessagingTag").SPAM,b("MessagingTag").PAGE_BACKGROUND]);function ma(){var a={};la.forEach(function(b){var c={};ka.forEach(function(a){c[a]={threadlist:[],reachedEnd:!1,existingIDs:new Set()};return 0});a[b]=c;return 0});return a}function na(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.invalidatedThread(c);return 0}function t(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.updatedThread(c);return 0}function oa(a,c){a=b("MercuryThreadInformer").getForFBID(a);a.deletedThread(c);return 0}function u(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.changedThreadReadState(c,d,e);return 0}function pa(a,c){__p&&__p();var d=new Map();c.forEach(function(a,b){d.set(a,b);return 0});return c.sort(function(c,e){__p&&__p();var f=b("bs_belt_Map").get(a[7],c),g=b("bs_belt_Map").get(a[7],e);if(f!==void 0&&g!==void 0){g=b("bs_js_primitive").valFromOption(g).timestamp-b("bs_js_primitive").valFromOption(f).timestamp;if(g>0)return 1;else if(g<0)return-1;else return 0}else f=1;if(f===1){g=d.get(c);f=d.get(e);return b("bs_belt_Option").getExn(g==null?void 0:b("bs_js_primitive").some(g))-b("bs_belt_Option").getExn(f==null?void 0:b("bs_js_primitive").some(f))|0}})}function qa(a,b,c,d){__p&&__p();a=a[12][c];if(a!==void 0){var e=a[d];if(e!==void 0){b.forEach(function(a){if(e.existingIDs.has(a)){e.existingIDs["delete"](a);a=e.threadlist.indexOf(a);e.threadlist.splice(a,1);return 0}else return 0});return 0}else return 0}else return 0}function v(a,c,d,e){__p&&__p();a=a!==void 0?a:function(){return!0};var f=b("bs_belt_Map").get(c[7],d);if(f!==void 0){f=b("bs_js_primitive").valFromOption(f);if(b("bs_curry")._1(a,f)){a=b("ImmutableObject").set(f,e);f=b("bs_belt_Map").set(c[7],d,a);t(c[0],d);return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],f,c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],c[18]]}else return c}else return c}function ra(a,c,d){__p&&__p();var e=new Set(c.participants);Object.assign(c,{participants:Array.from(c.participants)});d.forEach(function(d){if(e.has(d))return 0;else{c.participants.push(d);if(b("bs_caml_obj").caml_equal(d,a)){Object.assign(c,{is_subscribed:!0,can_reply:!0,cannot_reply_reason:null});return 0}else return 0}});return 0}function sa(a,b,c,d){__p&&__p();la.forEach(function(e){if(e!==c)return qa(a,b,e,d);else return 0});var e=a[12][c];if(e!==void 0){e=e[d];e=e!==void 0?[e.threadlist,e.existingIDs]:[[],new Set()]}else e=[[],new Set()];var f=e[1],g=e[0];b.forEach(function(a){if(f.has(a))return 0;else{f.add(a);g.push(a);return 0}});return[pa(a,g),f]}function ta(a,c,d){__p&&__p();if(d!==void 0){var e=a[16][c];if(e!==void 0){e.add(b("bs_js_primitive").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a[0]);e.updatedUnreadState();return 0}else{d=b("MercuryServerRequests").getForFBID(a[0]);d.fetchUnreadThreadIDs(c);return 0}}else return 0}var ua=b("MessengerFolders.bs").getSupportedFolders(0).filter(function(a){return a!==b("MessagingTag").ACTION_ARCHIVED});function va(a,c,d){__p&&__p();if(d!==void 0){var e=a[16][c];if(e!==void 0){e["delete"](b("bs_js_primitive").valFromOption(d));e=b("MercuryThreadInformer").getForFBID(a[0]);e.updatedUnreadState();return 0}else{d=b("MercuryServerRequests").getForFBID(a[0]);d.fetchUnreadThreadIDs(c);return 0}}else return 0}function wa(a,c,d){var e=b("MessengerFolders.bs").getFromMeta(c);if(d!==e){ua.includes(e)&&c.unread_count>0&&ta(a,e,b("bs_js_primitive").some(c.thread_id));if(ua.includes(d))return va(a,d,b("bs_js_primitive").some(c.thread_id));else return 0}else return 0}function xa(a,c){__p&&__p();var d=b("MessengerFolders.bs").getFromMeta(c);if(la.includes(d)){ka.forEach(function(e){var f=a[12][d][e],g=f.existingIDs.has(c.thread_id);sa(a,[c.thread_id],d,e);var h=b("bs_caml_obj").caml_equal(b("bs_caml_array").caml_array_get(f.threadlist,f.threadlist.length-1|0),c.thread_id);if(!f.reachedEnd&&!g&&h)return qa(a,[c.thread_id],d,e);else return 0});return 0}else return 0}function ya(a,c,d){__p&&__p();var e=b("bs_belt_Map").get(a[7],c);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);var f=b("MessengerFolders.bs").getFromMeta(e);if(f!==d){var g=e.comm_status;g=g==null?b("ImmutableObject").set(e,{folder:d}):d===b("MessagingTag").OTHER?b("ImmutableObject").set(e,{folder:d,comm_status:b("PageCommItemStatus").SPAM}):d===b("MessagingTag").INBOX?b("ImmutableObject").set(e,{folder:d,comm_status:b("PageCommItemStatus").TODO}):b("ImmutableObject").set(e,{folder:d});var h=e.other_user_fbid;h=h==null?[]:d===b("MessagingTag").OTHER?[b("MercuryIDs").getParticipantIDFromUserID(h)]:[];var i=e.other_user_fbid;d=i==null?[]:d===b("MessagingTag").OTHER?[]:[b("MercuryIDs").getParticipantIDFromUserID(i)];i=ga(a,h,d);h=b("bs_belt_Map").set(i[7],c,g);wa(i,g,f);xa(i,g);t(i[0],c);return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],h,i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15],i[16],i[17],i[18]]}else{xa(a,e);return a}}else return a}function za(c,a,d){__p&&__p();d=a.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(a):d!==void 0?d:a.body;var e=a.raw_attachments;e=!(e==null)&&e.length>0?b("MercuryAttachment").convertRaw(e):a.attachments;var f=a.removed_timestamp;if(f==null){f=a.log_message_type;d={snippet:d,snippet_attachments:e,snippet_sender:f==null?a.author:null}}else d={snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(a.author),snippet_attachments:null,snippet_sender:null};return Object.assign(c,d)}function w(a,c,d){var e=a.event_title,f=a.event_time;a=a.event_location_name;return{creator_id:null,latitude:null,location_address:null,longitude:null,note:"",related_event:{id:""},repeat_mode:null,seconds_to_notify_before:0,status:null,track_rsvp:c.track_rsvp,title:e==null?c.title:e,event_time:f==null?c.event_time:parseInt(f,10),location_name:a==null?c.location_name:a,event_members:d!==void 0?b("bs_js_primitive").valFromOption(d):c.event_members,oid:c.oid,event_type:c.event_type}}function Aa(b,a){var c={};Object.keys(b).forEach(function(a){c[a]=b[a];return 0});c[a.guest_id]=a.guest_status;return c}var x=function(a,b){delete a[b];return 0},Ba=function(a,b){delete a[b];return 0};function Ca(a){__p&&__p();var c=[-1],d=[null],e=Math.floor(Date.now()/1e3);b("bs_js_dict").entries(a).forEach(function(a){a=a[1];var b=a.event_time;if(b>e&&(c[0]<0||c[0]>b)){c[0]=b;d[0]=a;return 0}else return 0});return d[0]}function Da(a,c,d){d=b("XMercuryThreadLikeIconController").getURIBuilder().setString("emoji",d).getURI();new(b("AsyncRequest"))(d).setHandler(function(d){var e=b("MercuryDispatcher").getForFBID(a);e.handleUpdate({actions:[{action_type:b("MercuryActionType").UPDATE_CUSTOM_LIKE,thread_id:c,custom_like:d.getPayload()}],from_client:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANGE_CUSTOM_LIKE});return 0}).send();return 0}function Ea(c,d,a,e){__p&&__p();a=a.log_message_data;if(a==null)return 0;else{var f=a.untypedData;if(a.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_NICKNAME){var g=d.custom_nickname;if(!(g==null)){g=b("bs_js_dict").fromArray(b("bs_js_dict").entries(g));var h=f.nickname;h.trim().length>0?g[f.participant_id]=h:b("bs_curry")._2(Ba,g,f.participant_id);Object.assign(d,{custom_nickname:g})}t(c,e)}else if(a.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_ICON)Da(c,e,f.thread_icon);else if(a.message_type===b("MessagingGenericAdminTextType").CHANGE_THREAD_THEME){if(!b("ChatConfig").get("chat_tab_has_gradients")){h=f.theme_color;if(h==null)Object.assign(d,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});else if(h.length>0){g="#"+h.slice(2);Object.assign(d,{solid_color:g,header_color:g,footer_color:g,gradient_colors:[g]})}else Object.assign(d,{solid_color:null,header_color:null,footer_color:null,gradient_colors:[]});t(c,e)}}else if(f!==void 0)if(a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE){var i={},j=f.event_creator_id;d.participants.forEach(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(a==null)return 0;else{var c=b("bs_caml_obj").caml_equal(a,j);i[a]=c?"GOING":"INVITED";return 0}});h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(d.lightweight_events));g=f.event_time;g={track_rsvp:f.event_track_rsvp,title:f.event_title,event_time:g==null?0:parseInt(g,10),location_name:f.event_location_name,event_members:i,oid:f.event_id,event_type:f.event_type};Object.assign(d,{lightweight_event:g});h[f.event_id]=Object.assign({},g);Object.assign(d,{lightweight_events:h});t(c,e)}else if(a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE||a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME||a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE||a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION){g=d.lightweight_event;if(!(g==null)){h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(d.lightweight_events));g.oid===f.event_id&&Object.assign(d,{lightweight_event:w(f,g,b("bs_js_primitive").some(g.event_members))});g=h[f.event_id];g!==void 0&&(h[f.event_id]=w(f,g,void 0),Object.assign(d,{lightweight_events:h}))}t(c,e)}else if(a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP){g=b("bs_js_dict").fromArray(b("bs_js_dict").entries(d.lightweight_events));h=d.lightweight_event;if(!(h==null)&&h.oid===f.event_id){var k=Aa(h.event_members,f);Object.assign(d,{lightweight_event:w(f,h,b("bs_js_primitive").some(k))})}h=g[f.event_id];if(h!==void 0){k=Aa(h.event_members,f);g[f.event_id]=w(f,h,b("bs_js_primitive").some(k));Object.assign(d,{lightweight_events:g})}t(c,e)}else if(a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE||a.message_type===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY){h=b("bs_js_dict").fromArray(b("bs_js_dict").entries(d.lightweight_events));b("bs_curry")._2(x,h,f.event_id);Object.assign(d,{lightweight_event:Ca(h),lightweight_events:h});t(c,e)}return 0}}function Fa(a,c,d,e){a=b("MercuryThreadInformer").getForFBID(a);a.updatedMessage(c,d,b("bs_js_null_undefined").fromOption(e));return 0}function Ga(c,a){c=b("MercuryThreadInformer").getForFBID(c);c.receivedMessage(a);return 0}function Ha(a,c,d){a=b("MercuryThreadInformer").getForFBID(a);a.reorderedMessages(c,d);return 0}var Ia=function(a,b){delete a[b];return 0};function Ja(a,c){var d=a[10].get(c);return b("bs_js_primitive").nullable_to_opt(a[9].get(b("bs_belt_Option").getWithDefault(d==null?void 0:b("bs_js_primitive").some(d),c)))}function Ka(a,c,d){a=a!==void 0?a:!1;d=b("bs_belt_Array").keepMap(d,function(a){return Ja(c,a)});if(a)return d.slice().reverse();else return d}function La(a,c){return b("bs_belt_Array").keepMap(c,function(b){return Ja(a,b)}).sort(function(a,c){return b("MessengerMessage.bs").compare(c,a)}).map(function(a){return a.message_id})}function Ma(a,b){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9].set(b[0],b[1]),a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}function y(b,a){b[10].set(a.message_id,a.message_id);return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15],b[16],b[17],b[18]]}var Na=function(a,b){delete a[b];return 0};function z(c,d){__p&&__p();var a=c[15];Object.keys(d).forEach(function(e){__p&&__p();var f=d[e];if(f!==void 0){var g=f[0],h=g[2],i=g[1];g=a.get(g[0]);if(g==null)return 0;else{g=g[1];if(g.length>=(i+h|0)){b("bs_curry")._2(Na,d,e);return b("bs_curry")._1(f[1],Ka(!0,c,g.slice(i,i+h|0)))}else return 0}}else return 0});return 0}function Oa(d,c,e){__p&&__p();var a=e[1],f=e[0];b("MessengerMessage.bs").finalizeRanges(a);var g=a.offline_threading_id;if(!(g==null)&&g!==a.message_id){d[10].set(g,a.message_id);b("MercuryMessageIDs.bs").addServerID(g,a.message_id);g=a.threading_id;g==null||b("MercuryMessageIDs.bs").addServerID(g,a.message_id)}g=d[9].has(f);var h=d[0],i=d[1],j=d[2],k=d[3],l=d[4],m=d[5],n=d[6],aa=d[7],ba=d[8],ca=d[9].set(f,a),o=d[10],p=d[11],q=d[12],r=d[13],s=d[14],da=d[15],ea=d[16],fa=d[17];d=d[18];h=[h,i,j,k,l,m,n,aa,ba,ca,o,p,q,r,s,da,ea,fa,d];if(!g&&e[2]===1){i=b("MercuryIDs").isLocalThread(a.thread_id);j=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(a.thread_id),function(a){return b("bs_js_primitive").nullable_to_opt(da.get(a))}),[i?1:0,[]]);k=a.thread_id;if(!(k==null)){l=La(h,[f].concat(j[1].filter(function(c){return b("bs_caml_obj").caml_notequal(c,a.offline_threading_id)})));da.set(k,[j[0],l])}z(h,c[3][0])}return h}function Pa(b,c,a){b[11].set(c,a);return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15],b[16],b[17],b[18]]}function Qa(a,c){var d=c[1];c=c[0];var e=a[11].get(c);b("bs_belt_Option").isSome(e==null?void 0:b("bs_js_primitive").some(e))||g(0,1777);a[11]["delete"](c);if(e==null)return b("bs_pervasives").failwith("Message must exist to update");else return Object.assign(e,{image_ids:d.image_ids,file_ids:d.file_ids,audio_ids:d.audio_ids,gif_ids:d.gif_ids,video_ids:d.video_ids,client_state:b("MercuryMessageClientState").SEND_TO_SERVER})}function Ra(a,c){__p&&__p();var d=c[0],e=a[15].get(d);if(e==null)return a;else{var f=b("bs_array").map(function(a){return a.message_id},b("bs_belt_Array").keepMap(c[1],function(b){return Ja(a,b)})),g=La(a,e[1].filter(function(a){return f.indexOf(a)===-1}));a[15].set(d,[e[0],g]);Ha(a[0],d,b("bs_js_null_undefined").fromOption(c[2]));return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}}function Sa(c,d){__p&&__p();var e={snippet:"...",snippet_attachments:null,snippet_sender:null};d=b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(c[15].get(d)),function(a){return b("bs_belt_Array").get(Ka(void 0,c,a[1]),0)});if(d!==void 0){var a=b("bs_js_primitive").valFromOption(d);a=a.is_filtered_content?b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(a):a.body}else a=null;if(d!==void 0){d=b("bs_js_primitive").valFromOption(d);var f=d.removed_timestamp;if(f==null)if(a==null)return e;else{f=d.log_message_type;return{snippet:a,snippet_attachments:d.attachments,snippet_sender:f==null?d.author:null}}else return{snippet:b("RemovedMessageTombstoneContent").getTombstoneContentForSnippet(d.author),snippet_attachments:null,snippet_sender:null}}else return e}function Ta(a){__p&&__p();var c=a.attachments;if(c==null)return 0;else{c=b("bs_belt_Array").keepMap(c,function(a){if(b("MercuryAttachment").isPhotoAttachment(a)&&b("MercuryAttachment").isVideoAttachment(a)){a=a.metadata;if(a==null)return void 0;else return b("bs_js_primitive").nullable_to_opt(a.fbid)}});b("MessengerSharedMediaActionsLoader").deletePhotos(b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id),c);return 0}}function Ua(a,c,d){__p&&__p();d=a[15].get(d);if(d==null)return a;else{d=d[1];var e=[!0];return b("bs_belt_Array").reduce(d,a,function(a,d){__p&&__p();if(e[0]){var f=a[10].get(d);f=b("bs_belt_Option").getWithDefault(f==null?void 0:b("bs_js_primitive").some(f),d);if(f===c){e[0]=!1;return a}else{d=Ja(a,f);if(d!==void 0){d=b("bs_js_primitive").valFromOption(d);var g=d.replied_to_message,h;if(g==null)h=void 0;else{g=g.message;if(g==null)h=void 0;else{var i=a[10].get(g.message_id);h=b("bs_belt_Option").getWithDefault(i==null?void 0:b("bs_js_primitive").some(i),g.message_id)}}if(h!==void 0&&h===c){i={status:b("RepliedToMessageStatusForGraphQL").DELETED,message:null};g=Object.assign(Object.assign({},d),{replied_to_message:i});return Ma(a,[f,g])}else return a}else return a}}else return a})}}function Va(d,c,e,f){__p&&__p();var g=e.client_message_id,h;if(g==null)h=d;else{var i=Ja(d,g);if(i!==void 0){i=b("bs_js_primitive").valFromOption(i);var j=e.message_id,k=e.status;if(b("bs_caml_obj").caml_equal(i.status,b("MercuryActionStatus").SUCCESS))h=d;else if(d[9].has(j)){var a=Object.assign(Object.assign({},i),e);Fa(d[0],a.thread_id,a.message_id,f);h=Ma(d,[j,a])}else{a=b("bs_caml_obj").caml_equal(e.status,b("MercuryActionStatus").SUCCESS);a=a?e.error_data:null;b("MercuryMessageIDs.bs").addServerID(g,j);d[10].set(g,j);i=Object.assign(Object.assign({},i),{status:k,error_data:a,timestamp:e.timestamp,log_message_data:e.log_message_data,ranges:e.ranges,attachments:e.attachments,is_one_way_sent:e.is_one_way_sent,is_forwarded:e.is_forwarded});b("MessengerMessage.bs").finalizeRanges(i);k=Ma(d,[j,i]);k[9].set(g,{});k[9]["delete"](g);a=i.thread_id;var l=k[15].get(a);if(!(l==null)){var m=La(k,l[1]);k[15].set(a,[l[0],m])}Fa(k[0],i.thread_id,i.message_id,f);a=b("MessengerMessage.bs").isTitanMessage(i);l=c[2].get(i.thread_id);a&&(l==null||c[2].set(i.thread_id,l-1|0));h=[k[0],k[1],k[2],k[3],k[4],k[5],k[6],k[7],k[8],k[9],k[10].set(g,j),k[11],k[12],k[13],k[14],k[15],k[16],k[17],k[18]]}}else h=d}m={};f=e.log_message_type;if(f==null)Object.assign(m,{snippet_attachments:e.attachments});else{if(b("bs_caml_obj").caml_equal(f,b("MercuryLogMessageType").THREAD_IMAGE)){a=e.log_message_data;if(a==null)c=null;else{i=a.image;c=i==null?null:i.preview_url}Object.assign(m,{image_src:c});t(h[0],e.thread_id)}b("bs_caml_obj").caml_notequal(f,b("MercuryLogMessageType").SUBSCRIBE)&&b("bs_caml_obj").caml_notequal(f,b("MercuryLogMessageType").UNSUBSCRIBE)&&Object.assign(m,{snippet_attachments:e.attachments})}return v(void 0,h,e.thread_id,m)}function Wa(c,a,d,e){__p&&__p();if(b("bs_caml_obj").caml_equal(d.action_type,b("MercuryActionType").SEND_MESSAGE))return Va(c,a,d,e);else{var f=d.offline_threading_id;f=b("bs_belt_Option").flatMap(f==null?void 0:b("bs_js_primitive").some(f),function(a){return b("bs_js_primitive").nullable_to_opt(c[10].get(a))});var g=Ja(c,d.message_id);if(f!==void 0||g!==void 0)return c;else{f=b("bs_caml_obj").caml_equal(e,b("bs_js_primitive").some(b("MercuryPayloadSource").CLIENT_SEND_MESSAGE))?y(c,d):c;g=b("bs_caml_obj").caml_equal(d.client_state,b("MercuryMessageClientState").DO_NOT_SEND_TO_SERVER);e=d.upload_id;g=g&&!(e==null)?Pa(f,e,d):f;e=b("MessengerMessage.bs").isErrorLogMessage(d);f=d.thread_id;e&&(f==null||(a[6][0][f]=!0));e=d.manual_retry_cnt;f=d.thread_id;e==null||!(f==null)&&e>0&&Ha(g[0],f,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE);e=Oa(g,a,[d.message_id,d,1]);Ga(e[0],d);return e}}}function Xa(a,c,d,e){__p&&__p();if(c!==void 0){c=b("bs_caml_obj").caml_equal(b("bs_js_primitive").valFromOption(c),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE);var f=d.thread_id;if(c&&!(f==null)){c=b("MercuryThreadInformer").getForFBID(a);return b("bs_curry")._3(e,c,f,d)}else return 0}else return 0}function Ya(a,b){var c=a.participants.indexOf(b);if(c>0){Object.assign(a,{participants:[b].concat(a.participants.slice(0,c),a.participants.slice(c+1|0))});return 0}else return 0}function Za(a,c,d,e){__p&&__p();var f=c.thread_id;if(f==null)return a;else{var g=b("bs_belt_Map").get(a[7],f);if(g!==void 0){g=b("bs_js_primitive").valFromOption(g);var h={};!c.skip_bump_thread&&b("bs_caml_obj").caml_notequal(d,b("bs_js_primitive").some(b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO))&&(za(h,c,b("bs_js_primitive").nullable_to_opt(c.log_message_body)),c.timestamp>g.timestamp&&(Object.assign(h,{timestamp:c.timestamp}),c.is_unread&&Object.assign(h,{unread_count:g.unread_count+1|0})),Object.assign(h,{message_count:g.message_count+1|0,is_archived:!1}));d=0;e!==void 0?e||(d=1):d=1;d===1&&(c.timestamp>h.server_timestamp&&Object.assign(h,{server_timestamp:c.timestamp}));if(b("bs_caml_obj").caml_notequal(h,{}))return v(void 0,a,f,h);else return a}else return a}}function $a(a,b,c){var d=new Set(c);Object.assign(b,{participants:b.participants.filter(function(a){return!d.has(a)})});if(d.has(a)){Object.assign(b,{can_reply:!1,is_subscribed:!1});return 0}else return 0}function ab(c,a,d){a=a.specific_to_list;if(a==null){d=b("MercuryIDs").tokenize(d);if(d.type!=="user"||d.value.length===0)return[c];else return[b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(d.value)),c]}else return a}function bb(c,a,d){var e=b("MercuryIDs").tokenize(d),f=e.type==="user",g=a.specific_to_list;g=f?!0:g==null?!1:b("MessengerThreadUtils.bs").isCanonicalFromInitialParticipants(c,g);if(g||f)c=ab(c,a,d);else{var h=a.specific_to_list;c=h==null?[]:h}return new(b("ImmutableObject"))({admins:{},admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:!0,cannot_reply_reason:null,can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,gradient_colors:[],group_approval_queue:null,group_thread_subtype:null,work_associated_group:null,groups_sync_status:null,has_email_participant:!1,has_montage:!1,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{link:"",mode:0},last_message_timestamp:0,last_message_type:null,last_message_id:null,last_read_timestamp:0,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!0,rtc_call_data:null,server_timestamp:0,solid_color:null,subtitle:null,theme_id:null,thread_connectivity_data:null,thread_fbid:null,thread_type:null,thread_pin_timestamp:null,thread_id:d,participants:c,name:"",snippet:a.body,snippet_attachments:[],snippet_sender:a.author,unread_count:0,message_count:0,image_src:null,timestamp:a.timestamp,other_user_fbid:f?b("FBID.bs").ofStringExn(e.value):null,is_canonical_user:f,is_canonical:g,is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,object_association_type:null,joinable_link:null,linked_mentorship_programs:null,thread_unsendability_status:null,is_business_page_active:!1})}function cb(c,d,a,e){__p&&__p();e=b("MessengerMessage.bs").hasServerTimestamp(a,e);var f=a.thread_id;if(f==null)return void 0;else{b("MercuryAssert").isThreadID(f);d=b("bs_belt_Map").get(d,f);if(d!==void 0)return b("bs_js_primitive").some(b("bs_js_primitive").valFromOption(d));else if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)&&!e)return b("bs_js_primitive").some(bb(b("MercuryIDs").getParticipantIDFromUserID(c),a,f));else return void 0}}function db(a,c){__p&&__p();var d=c.other_user_fbid;if(d==null){var e=c.thread_fbid;e=e==null?void 0:b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromThreadFBID(e))}else e=b("bs_js_primitive").some(b("MercuryIDs").getThreadIDFromUserID(d));d=c.thread_id;e=d==null?e:d==null?void 0:b("bs_js_primitive").some(d);d=c.thread_id;var f;if(d==null)f="";else{d=b("bs_belt_Map").get(a[7],d);f=d!==void 0?b("MessengerFolders.bs").getFromMeta(b("bs_js_primitive").valFromOption(d)):c.folder}ua.includes(f)&&((b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").USER_GENERATED_MESSAGE)||b("bs_caml_obj").caml_equal(c.action_type,b("MercuryActionType").LOG_MESSAGE))&&c.is_unread&&ta(a,f,e));return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}var eb=function(a,b){delete a[b];return 0};function fb(a,c){__p&&__p();Object.keys(c).forEach(function(d){__p&&__p();var e=c[d];if(e!==void 0){var f=e[0],g=h(f.reduce(function(d,e){var c=b("bs_belt_Map").get(a,e);if(c!==void 0)return b("bs_belt_Map").set(d,e,b("bs_js_primitive").valFromOption(c));else return d},b("bs_belt_Map").make([b("ThreadId.bs").cmp])));if(Object.keys(g).length===f.length){b("bs_curry")._2(eb,c,d);return b("bs_curry")._1(e[1],g)}else return 0}else return 0});return 0}function gb(a,c,d,e,f){__p&&__p();d!==0&&u(a,c.thread_id,f,d);if(c.timestamp===0){b("ChatReliabilityInstrumentation").logERROR("thread timestamp is 0");e.add(c.thread_id);return void 0}else{d=c.unread_count===0;if(d===f)return void 0;else{t(a,c.thread_id);return{unread_count:f?0:1}}}}function A(a){var c=[b("MercuryFilters.bs").all];a.unread_count>0&&c.push(b("MercuryFilters.bs").unread);a.is_canonical||c.push(b("MercuryFilters.bs").groups);return c}function B(a,c){var d;if(c.is_archived)d=b("MessagingTag").ACTION_ARCHIVED;else{var e=c.thread_type;d=!(e==null)&&e===b("MessagingThreadType").MARKETPLACE?b("MessagingTag").MARKETPLACE_FOLDER:c.folder}e=a[12][d];if(e!==void 0)return d}function hb(a,c){__p&&__p();var d={};la.forEach(function(a){var b={};ka.forEach(function(a){b[a]=[];return 0});d[a]=b;return 0});c.forEach(function(c){__p&&__p();var e=b("bs_belt_Map").get(a[7],c.thread_id);if(e!==void 0){var f=b("bs_js_primitive").valFromOption(e);e=B(a,f);if(e!==void 0){var g=e;A(f).forEach(function(a){if(f.timestamp!==0){d[g][a].push(c.thread_id);return 0}else return 0});return 0}else return 0}else return 0});la.forEach(function(b){ka.forEach(function(c){var e=d[b][c];sa(a,e,b,c);return 0});return 0});return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}function ib(a){__p&&__p();b("bs_belt_Map").map(a[7],function(c){__p&&__p();c=b("bs_belt_Map").get(a[7],c.thread_id);if(c!==void 0){c=b("bs_js_primitive").valFromOption(c);if(b("bs_js_primitive").nullable_to_opt(c.thread_type)===b("MessagingThreadType").MARKETPLACE){c=b("ImmutableObject").set(c,{folder:"marketplace_folder"});hb(a,[c]);return 0}else return 0}else return 0});return 0}function jb(c,a,d){__p&&__p();return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_primitive").undefined_to_opt(c[12][b("MessagingTag").INBOX]),function(a){return b("bs_js_primitive").undefined_to_opt(a[b("MercuryFilters.bs").all])}),function(e){__p&&__p();if(e.threadlist.length===0)if(b("bs_belt_Map").isEmpty(c[7]))return a[7][0];else return b("bs_belt_Map").reduce(c[7],0,function(a,e,f){e=B(c,f);if(e!==void 0&&e===b("MessagingTag").INBOX&&f.timestamp>(d?b("bs_caml_primitive").caml_float_max(c[18],f.last_read_timestamp):c[18]))return a+1|0;else return a});else return e.threadlist.reduce(function(a,e){e=b("bs_belt_Map").get(c[7],e);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);if(e.timestamp>(d?b("bs_caml_primitive").caml_float_max(c[18],e.last_read_timestamp):c[18]))return a+1|0;else return a}else return a},0)}),a[7][0])}function C(c,a){__p&&__p();return b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_js_primitive").undefined_to_opt(c[12][b("MessagingTag").INBOX]),function(a){return b("bs_js_primitive").undefined_to_opt(a[b("MercuryFilters.bs").all])}),function(d){__p&&__p();if(d.threadlist.length===0)if(b("bs_belt_Map").isEmpty(c[7]))return a[7][0];else return b("bs_belt_Map").reduce(c[7],0,function(a,d,e){__p&&__p();var f=B(c,e);if(f!==void 0&&f===b("MessagingTag").INBOX&&e.timestamp>c[18]&&!b("MercuryThreadInfo").isMuted(e)){f=c[16][b("MessagingTag").INBOX];if(f!==void 0){e=f.has(d);if(e)return a+1|0;else return a}else return a}else return a});else return d.threadlist.reduce(function(a,d){__p&&__p();var e=b("bs_belt_Map").get(c[7],d);if(e!==void 0){e=b("bs_js_primitive").valFromOption(e);if(e.timestamp>c[18]&&!b("MercuryThreadInfo").isMuted(e)){e=c[16][b("MessagingTag").INBOX];if(e!==void 0){e=e.has(d);if(e)return a+1|0;else return a}else return a}else return a}else return a},0)}),a[7][0])}function kb(c,a,d){if(d===b("MessagingTag").PENDING)return[c[0],c[1],c[2],c[3],c[4],0,c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],c[18]];else{if(b("gkx")("969964")){d=b("MercuryThreadInformer").getForFBID(c[0]);d.updatedUnseenTimestamp()}return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15],c[16],c[17],a]}}function D(a){var c=[b("MercurySyncEventsProxy").getArbiterTypeForFBID(a,"TYP")];b("FBIDCheck").isUser_deprecated(a)||c.push(b("ChannelConstants").getArbiterType("page_typing"));return c}function lb(a){return[a,b("bs_belt_MapString").empty,b("bs_belt_MapString").empty,b("bs_belt_Set").make([b("ParticipantId.bs").cmp]),b("bs_belt_Set").make([b("ParticipantId.bs").cmp]),0,b("bs_belt_MapString").empty,b("bs_belt_Map").make([b("ThreadId.bs").cmp]),new Set(),new Map(),new Map(),new Map(),ma(0),[],{},new Map(),{},{},0]}var mb=[{}],nb=[0],E=new Map(),F=[{}],G=[0],H=new Set(),I=[{}],J=[0],K=[mb,nb,E,F,G,H,I,J];function ob(a,c){__p&&__p();var d=K;a=a;c=c;var e=[];c=b("bs_array").fold_left(function(g,j){__p&&__p();switch(j.tag|0){case 0:e.push(j[0].tag|0);break;case 1:case 2:break}switch(j.tag|0){case 0:var k=j[0];if(typeof k==="number"){var l=g,n=d;n[0][0]={};n[1][0]=n[1][0];n[6][0]={};n[2].clear();b("bs_belt_Map").keysToArray(l[7]).forEach(function(a){return na(l[0],a)});return[l[0],l[1],b("bs_belt_MapString").empty,l[3],l[4],l[5],l[6],b("bs_belt_Map").make([b("ThreadId.bs").cmp]),new Set(),new Map(),new Map(),l[11],ma(0),l[13],l[14],new Map(),l[16],l[17],l[18]]}else switch(k.tag|0){case 0:n=g;var aa=k[0],ba=[!1],ca=[n[1]];Object.keys(aa).forEach(function(a){var c=aa[a],d=b("bs_belt_Option").getWithDefault(b("bs_belt_MapString").get(ca[0],a),0);if(c>d){ba[0]=!0;ca[0]=b("bs_belt_MapString").set(ca[0],a,c);return 0}else return 0});if(ba[0])return[n[0],ca[0],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]];else return n;case 1:return ga(g,k[0],[]);case 2:n=g;var o=k[0],p=k[1];p=p.reduce(b("bs_belt_Set").remove,o.reduce(b("bs_belt_Set").add,n[4]));if(p===n[4])return n;else return[n[0],n[1],n[2],n[3],p,n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]];case 3:o=g;p=k[0];n=p.reduce(function(c,d){var a=d.is_messenger_ignored;if(a==null)return c;else if(a)return b("bs_belt_Set").add(c,b("MercuryIDs").getParticipantIDFromUserID(d.fbid));else return b("bs_belt_Set").remove(c,b("MercuryIDs").getParticipantIDFromUserID(d.fbid))},o[3]);if(n===o[3])return o;else return[o[0],o[1],o[2],n,o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]];case 4:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("SetInitialPendingFolderUnseenCount");p=g;n=k[0];return[p[0],p[1],p[2],p[3],p[4],n,p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]];case 5:o=g;n=k[0];p=ja(o[0],n);if(p==null)return o;else{var q=b("FBID.bs").ofString(n.from.toString());if(q!==void 0){q=b("bs_js_primitive").valFromOption(q);b("MessengerPersonas.bs").addPersona(n.persona);var r=n.persona,s=b("gkx")("678634");s=!(r==null)&&s?b("MercuryIDs").getParticipantIDFromUserID(r.id):b("MercuryIDs").getParticipantIDFromUserID(q);if(n.st===b("TypingStates").TYPING){r=b("bs_belt_MapString").get(o[6],p);if(r!==void 0)return[o[0],o[1],o[2],o[3],o[4],o[5],b("bs_belt_MapString").set(o[6],p,b("bs_belt_Map").set(b("bs_js_primitive").valFromOption(r),s,Date.now())),o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]];else{q=b("bs_belt_Map").set(b("bs_belt_Map").make([b("ParticipantId.bs").cmp]),s,Date.now());return[o[0],o[1],o[2],o[3],o[4],o[5],b("bs_belt_MapString").set(o[6],p,q),o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]]}}else if(n.st===b("TypingStates").INACTIVE){r=ia(o[6],p,s);if(r!==o[6])return[o[0],o[1],o[2],o[3],o[4],o[5],r,o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]];else return o}else return o}else return o}case 6:q=g;var da=k[0],fa=[!1],a=[q[2]];Object.keys(da).forEach(function(d){__p&&__p();Object.keys(da[d]).forEach(function(e){__p&&__p();var c=b("bs_belt_MapString").get(a[0],d);c=c!==void 0?b("bs_js_primitive").valFromOption(c):b("immutable").OrderedMap();var f=c.get(e),g=da[d][e];if(f==null||g.watermark>f.watermark)f=1;else return 0;if(f===1){fa[0]=!0;a[0]=b("bs_belt_MapString").set(a[0],d,c.set(e,g));return 0}});var c=b("bs_belt_MapString").get(a[0],d);if(c!==void 0){fa[0]=!0;a[0]=b("bs_belt_MapString").set(a[0],d,b("bs_js_primitive").valFromOption(c).sort(function(a,c){return b("bs_caml_primitive").caml_float_compare(a.watermark,c.watermark)}));return 0}else return 0});if(fa[0])return[q[0],q[1],a[0],q[3],q[4],q[5],q[6],q[7],q[8],q[9],q[10],q[11],q[12],q[13],q[14],q[15],q[16],q[17],q[18]];else return q;case 7:var u=g;n=d;p=k[0];if(p.length===0)return u;else{s=u[7];r=p.reduce(function(a,c){return b("bs_belt_Map").set(a,c.thread_id,new(b("ImmutableObject"))(c))},s);fb(r,n[0][0]);p.forEach(function(a){return t(u[0],a.thread_id)});return[u[0],u[1],u[2],u[3],u[4],u[5],u[6],r,u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15],u[16],u[17],u[18]]}case 8:o=g;q=k[0];if(q.length===0)return o;else{var pa=o[8],za=b("MercuryServerRequests").getForFBID(o[0]);q.forEach(function(a){__p&&__p();var b=a.thread_id;if(pa.has(b)){pa["delete"](b);if(a.unread_count>0){za.changeThreadReadStatus(b,!0,null,null,null,null);return 0}else return 0}else return 0});return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],pa,o[9],o[10],o[11],o[12],o[13],o[14],o[15],o[16],o[17],o[18]]}case 9:var w=g,Aa=k[0];b("qex")._("998180")&&b("MessengerEnvironment").messengerdotcom&&ib(w);la.forEach(function(a){__p&&__p();ka.forEach(function(d){__p&&__p();var c=w,e=Aa,f=a,g=d,h=[];d=e.filter(function(c){var a=c.filter;a=a==null?b("MercuryFilters.bs").all:a;c=c.folder;c=c==null?f===b("MessagingTag").INBOX:c===f;if(c)return b("bs_caml_obj").caml_equal(a,g);else return!1});var i=[!1];d.forEach(function(a){a.thread_ids.forEach(function(a){h.push(a);return 0});var b=a.limit;if(a.thread_ids.length<b){i[0]=!0;return 0}else return 0});e=sa(c,h,f,g);d=c[12][f];c=d[g];c=c!==void 0?c.reachedEnd:!1;d[g]={reachedEnd:i[0]?i[0]:c,threadlist:e[0],existingIDs:e[1]};return 0});return 0});return[w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15],w[16],w[17],w[18]];case 10:return hb(g,k[0]);case 11:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdatePinnedThreads");var x=g,Ba=d;s=k[0];if(s.length>0){s.forEach(function(a){if(Ba[5].has(a))return 0;else{x[13].push(a);Ba[5].add(a);return 0}});n=b("MercuryThreadInformer").getForFBID(x[0]);n.updatedThreadlist();return[x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7],x[8],x[9],x[10],x[11],x[12],x[13],x[14],x[15],x[16],x[17],x[18]]}else return x;case 12:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UnSubscribeStatusUpdate");p=g;r=k[0];var Ca=k[1];return v(function(a){return a.page_unsubscribe_status!==Ca},p,r,{page_unsubscribe_status:Ca});case 13:q=g;o=k[0];s=k[1];n=k[2];return v(void 0,q,o,{can_reply:s,cannot_reply_reason:n});case 14:p=g;r=k[0];q=k[1];o=b("bs_belt_Map").get(p[7],r);if(o!==void 0){s=Object.assign({},b("bs_js_primitive").valFromOption(o));ra(b("MercuryIDs").getParticipantIDFromUserID(p[0]),s,q);return v(void 0,p,r,s)}else return p;case 15:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeFlag");n=g;o=k[0];q=k[1];r=b("bs_belt_Map").get(n[7],o);if(r!==void 0){s=b("bs_js_primitive").valFromOption(r);p=s.page_thread_info;r=b("ImmutableObject").set(s,{page_thread_info:Object.assign(p==null?{}:p,{flagged:q})});s=b("bs_belt_Map").set(n[7],o,r);t(n[0],o);return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],s,n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]]}else return n;case 16:p=g;q=k[0];return v(function(a){return b("MessageRequestUtils").isMessageRequest(a)},p,q,{folder:b("MessagingTag").INBOX});case 17:r=g;o=k[0];s=k[1];return v(void 0,r,o,{custom_like_icon:s});case 18:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("PromoteGroupAdmins");n=g;p=k[0];q=k[1];r=b("bs_belt_Map").get(n[7],p);if(r!==void 0){o=b("bs_js_primitive").valFromOption(r);s=b("bs_js_dict").fromArray(b("bs_js_dict").entries(o.admins));r=b("ImmutableObject").set(o,{admins:b("bs_array").fold_left(function(a,b){a[b.admin_fbid]=b.admin_type;return a},s,q)});o=b("bs_belt_Map").set(n[7],p,r);t(n[0],p);return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],o,n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]]}else return n;case 19:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("RemoveGroupAdmins");s=g;q=k[0];r=k[1];p=b("bs_belt_Map").get(s[7],q);if(p!==void 0){o=b("bs_js_primitive").valFromOption(p);n=b("bs_js_dict").fromArray(b("bs_js_dict").entries(o.admins));p=b("ImmutableObject").set(o,{admins:b("bs_array").fold_left(function(d,c){var a=d[c];a!==void 0&&b("bs_curry")._2(ha,d,c);return d},n,r)});o=b("bs_belt_Map").set(s[7],q,p);t(s[0],q);return[s[0],s[1],s[2],s[3],s[4],s[5],s[6],o,s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15],s[16],s[17],s[18]]}else return s;case 20:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("JoinableMode");n=g;r=k[0];p=k[1];return v(void 0,n,r,{joinable_mode:p});case 21:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ApprovalMode");q=g;o=k[0];s=k[1];return v(void 0,q,o,{approval_mode:s});case 22:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ApprovalQueue");n=g;r=k[0];p=k[1];q=k[2];var Da=k[3],Ga=k[4];o=b("bs_belt_Map").get(n[7],r);if(o!==void 0){s=b("bs_js_primitive").valFromOption(o);o=s.group_approval_queue;s={approval_queue_ids:s.approval_queue_ids.slice(),group_approval_queue:o==null?null:o.slice()};p==null||s.approval_queue_ids.indexOf(p)===-1&&Object.assign(s,{approval_queue_ids:s.approval_queue_ids.concat([p])});if(!(q==null)){o=s.group_approval_queue;o==null?Object.assign(s,{group_approval_queue:[q]}):o.map(function(a){return a.requester.id}).indexOf(q.requester.id)===-1&&Object.assign(s,{group_approval_queue:o.concat([q])})}Da==null||Object.assign(s,{approval_queue_ids:s.approval_queue_ids.filter(function(a){return b("bs_caml_obj").caml_notequal(a,Da)})});if(!(Ga==null)){p=s.group_approval_queue;Object.assign(s,{group_approval_queue:(p==null?[]:p).filter(function(a){return a.requester.id!==Ga})})}return v(void 0,n,r,s)}else return n;case 23:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("IsPinProtected");o=g;q=k[0];p=k[1];return v(void 0,o,q,{is_pin_protected:p});case 24:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateRtcCallData");r=g;s=k[0];n=k[1];o=k[2];q=k[3];p=b("bs_belt_Map").get(r[7],s);if(p!==void 0){if(n==null){p=b("bs_js_primitive").valFromOption(p).rtc_call_data;p=p==null?void 0:n}else p=n;return v(void 0,r,s,{rtc_call_data:new(b("ImmutableObject"))({call_state:o,server_info_data:q,initiator_fbid:p})})}else return r;case 25:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateCommStatus");n=g;s=k[0];o=k[1];return v(void 0,n,s,{comm_status:o});case 26:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateCommItemOwner");q=g;p=k[0];r=k[1];n=k[2];s=k[3];o=r==null?{nodes:[]}:{nodes:[{admin:{id:r,name:n,profile_picture:{uri:s}}}]};return v(void 0,q,p,{comm_item_owners:o});case 27:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("EventRsvpChanged");r=g;n=k[0];var Ka=k[1];s=k[2];q=b("bs_belt_Map").get(r[7],n);if(q!==void 0){p=b("bs_js_primitive").valFromOption(q).participants_event_status;o=(p==null?[]:p).filter(function(a){return b("bs_caml_obj").caml_notequal(a.participant_id,Ka)});o.push({participant_id:Ka,event_status:s});return v(void 0,r,n,{participants_event_status:o})}else return r;case 28:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("GroupsSyncStatusChanged");q=g;p=k[0];s=k[1];n=k[2];if(n==null||!b("bs_caml_obj").caml_equal(n,b("MessengerGroupsSyncStatus").OPT_IN))o=1;else return v(void 0,q,p,{groups_sync_status:s});if(o===1)return v(void 0,q,p,{groups_sync_status:s,work_associated_group:null});case 29:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("GroupsSyncMetadataUpdate");r=g;n=k[0];o=k[1];q=k[2];if(o==null)return v(void 0,r,n,{work_associated_group:null});else if(b("bs_caml_obj").caml_equal(o,b("MessengerGroupsSyncStatus").OPT_IN)){p=new(b("URI"))(document.URL);s=p.getDomain();o=b("XGroupsController").getURIBuilder().setString("idorvanity",q).getURI().setDomain(s==null?"":s.replace("messenger.com","facebook.com")).setPort(p.getPort()).setProtocol("https");return v(void 0,r,n,{work_associated_group:{id:q,url:o.toString(),group_saves:{count:0},group_events:{count:0}}})}else return v(void 0,r,n,{work_associated_group:null});case 30:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DescriptionChanged");s=g;p=k[0];q=k[1];return v(void 0,s,p,{description:q});case 31:o=g;r=k[0];n=k[1];return v(void 0,o,r,{solid_color:n.solid_color,header_color:n.header_color,footer_color:n.footer_color,gradient_colors:n.gradient_colors,theme_id:n.theme_id});case 32:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateJoinableLink");s=g;p=k[0];q=k[1];return v(void 0,s,p,{joinable_link:q});case 33:var y=g,Na=k[0];o=b("bs_belt_Map").toArray(y[7]).reduce(function(c,a){var d=a[1];a=a[0];if(d.folder===Na){t(y[0],a);return b("bs_belt_Map").set(c,a,b("ImmutableObject").set(d,{unread_count:0}))}else return c},y[7]);y[16][Na]=new Set();r=b("MercuryThreadInformer").getForFBID(y[0]);r.updatedUnreadState();return[y[0],y[1],y[2],y[3],y[4],y[5],y[6],o,y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15],y[16],y[17],y[18]];case 34:var z=g,Pa=k[0];n=b("bs_belt_Map").remove(z[7],Pa);z[15]["delete"](Pa);z[9].forEach(function(a,c,d){__p&&__p();if(b("bs_caml_obj").caml_equal(a.thread_id,Pa)){z[9]["delete"](a.message_id);c=a.offline_threading_id;if(!(c==null)){d=z[10].get(c);d==null||(z[9]["delete"](d),z[10]["delete"](c))}z[10]["delete"](a.message_id);return 0}else return 0});na(z[0],Pa);return[z[0],z[1],z[2],z[3],z[4],z[5],z[6],n,z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15],z[16],z[17],z[18]];case 35:s=k[0];return Oa(g,d,[s.message_id,s,k[1]]);case 36:p=g;q=[k[0],k[1],k[2]];r=q[2];o=q[1];var ab=q[0];if(o.length!==0){n=Ra(p,[ab,o,r]);s=0;r!==void 0?b("bs_caml_obj").caml_equal(b("bs_js_primitive").valFromOption(r),b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||(s=1):s=1;s===1&&b("MercuryServerRequests").getForFBID(n[0]).deleteMessages(ab,o);return b("bs_belt_Array").reduce(o,n,function(a,d){__p&&__p();d=Ja(a,d);var c=b("bs_belt_Map").get(a[7],ab);if(c!==void 0){c=b("bs_js_primitive").valFromOption(c);c=b("ImmutableObject").set(b("ImmutableObject").set(c,Sa(a,ab)),{message_count:c.message_count-1|0});c=b("bs_belt_Map").set(a[7],ab,c);t(a[0],ab);c=[a[0],a[1],a[2],a[3],a[4],a[5],a[6],c,a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18]]}else c=a;d!==void 0&&Ta(b("bs_js_primitive").valFromOption(d));return c})}else return p;case 37:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeFolder");return ya(g,k[0],k[1]);case 38:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeMuteSettings");q=g;r=k[0];s=k[1];o=b("bs_belt_Map").get(q[7],r);if(o!==void 0){n=b("bs_js_primitive").valFromOption(o);var bb;switch(s.tag|0){case 0:bb=b("ImmutableObject").set(n,{reactions_mute_mode:s[0]?1:0});break;case 1:bb=b("ImmutableObject").set(n,{mentions_mute_mode:s[0]?1:0});break;case 2:p=s[0];o=p===0;bb=b("ImmutableObject").set(n,{mute_until:o?void 0:p});break}s=b("bs_belt_Map").set(q[7],r,bb);t(q[0],r);return[q[0],q[1],q[2],q[3],q[4],q[5],q[6],s,q[8],q[9],q[10],q[11],q[12],q[13],q[14],q[15],q[16],q[17],q[18]]}else return q;case 39:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangeArchivedStatus");n=g;o=k[0];p=k[1];r=b("bs_belt_Map").get(n[7],o);if(r!==void 0){s=b("bs_js_primitive").valFromOption(r);if(s.is_archived!==p){q=b("MessengerFolders.bs").getFromMeta(s);r=s.comm_status;r=r==null?b("ImmutableObject").set(s,{is_archived:p}):b("ImmutableObject").set(s,{is_archived:p,comm_status:p?b("PageCommItemStatus").DONE:b("PageCommItemStatus").TODO});s=b("bs_belt_Map").set(n[7],o,r);wa(n,r,q);xa(n,r);t(n[0],o);return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],s,n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]]}else return n}else return n;case 40:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangePageFollowUpStatus");p=g;q=k[0];r=k[1];o=b("bs_belt_Map").get(p[7],q);if(o!==void 0){s=b("bs_js_primitive").valFromOption(o);if(s.is_page_follow_up!==r){n=b("ImmutableObject").set(s,{is_page_follow_up:r});o=b("bs_belt_Map").set(p[7],q,n);t(p[0],q);return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],o,p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15],p[16],p[17],p[18]]}else return p}else return p;case 41:s=g;r=k[0];n=k[1];q=k[2];o=k[3];p=k[4];var A=b("bs_belt_Map").get(s[7],r);if(A!==void 0){A=b("bs_js_primitive").valFromOption(A);q=gb(s[0],A,q,s[8],n);q=q!==void 0&&A.last_message_timestamp>A.last_read_timestamp?b("bs_js_primitive").some(Object.assign(b("bs_js_primitive").valFromOption(q),{last_read_timestamp:A.last_message_timestamp})):q;if(q!==void 0){q=b("ImmutableObject").set(A,b("bs_js_primitive").valFromOption(q));var B=b("bs_belt_Map").set(s[7],r,q);if(o){o=!A.read_only&&A.folder===b("MessagingTag").INBOX;var C=b("MercuryServerRequests").getForFBID(s[0]);C.changeThreadReadStatus(q.thread_id,n,p,q.last_read_timestamp,o,q.last_message_type)}C=B}else C=s[7];p=b("MessengerFolders.bs").getFromMeta(A);n?(qa(s,[r],p,b("MercuryFilters.bs").unread),va(s,p,b("bs_js_primitive").some(r))):(sa(s,[r],p,b("MercuryFilters.bs").unread),ta(s,p,b("bs_js_primitive").some(r)));return[s[0],s[1],s[2],s[3],s[4],s[5],s[6],C,s[8],s[9],s[10],s[11],s[12],s[13],s[14],s[15],s[16],s[17],s[18]]}else return s;case 42:var D=g,lb=k[0];o=b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(b("bs_js_primitive").nullable_to_opt(D[15].get(lb)),function(a){return[a[0],[]]}),[0,[]]);D[15].set(lb,o);q=b("bs_belt_Option").map(b("bs_belt_Map").get(D[7],lb),function(a){return b("ImmutableObject").set(a,{message_count:0})});if(q!==void 0){var mb=b("bs_js_primitive").valFromOption(q);B=b("bs_belt_Map").set(D[7],lb,mb);ka.forEach(function(a){return qa(D,[lb],b("MessengerFolders.bs").getFromMeta(mb),a)});A=B}else A=D[7];ua.forEach(function(a){a=D[16][a];if(a!==void 0){a["delete"](lb);return 0}else return 0});oa(D[0],lb);return[D[0],D[1],D[2],D[3],D[4],D[5],D[6],A,D[8],D[9],D[10],D[11],D[12],D[13],D[14],D[15],D[16],D[17],D[18]];case 43:n=g;p=d;r=[k[0],k[1],k[2]];C=Qa(n,[r[0],r[1]]);s=C.thread_id;o=Ra(n,[s,[C.message_id],r[2]]);q=p[2].get(s);q==null||p[2].set(s,Math.max(0,q-1|0));return o;case 44:B=g;A=[k[0],k[1]];n=Qa(B,[A[0],A[1]]);b("MercuryServerRequests").getForFBID(B[0]).sendNewMessage(Object.assign(n,{preview_attachments:void 0}));return B;case 45:C=g;r=[k[0],k[1],k[2],k[3]];p=r[2];s=r[1];q=r[0];o=Ja(C,q);if(o!==void 0){A=b("bs_js_primitive").valFromOption(o);n=b("bs_js_dict").map(function(a){return a},b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(A.reactions),{}));s!==void 0?n[p]=s:b("bs_curry")._2(Ia,n,p);B=Object.assign(Object.assign({},A),{reactions:n});o=A.thread_id;o==null||Fa(C[0],o,q,r[3]);return Ma(C,[q,B])}else return C;case 46:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("MontageDirectExpire");s=g;p=k[0];if(b("gkx")("676919")){n=Ja(s,p);if(n!==void 0){A=b("bs_js_primitive").valFromOption(n);o=A.attachments;if(o==null||o.length===0)return s;else{r=b("bs_caml_array").caml_array_get(o,0);q=r.share;if(q==null)return s;else{B=q.target;if(B==null)return s;else{C=B.message_state;if(C==null)return s;else{n=Object.assign(Object.assign({},A),{attachments:b("bs_caml_array").caml_array_set(b("bs_array").copy(o),0,Object.assign(Object.assign({},r),{share:Object.assign(Object.assign({},q),{target:Object.assign(Object.assign({},B),{message_state:"EXPIRED"})})}))});return Ma(s,[p,n])}}}}}else return s}else return s;case 47:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("LiveLocationUpdate");C=g;A=[k[0],k[1],k[2]];o=A[0];r=Ja(C,o);if(r!==void 0){q=b("bs_js_primitive").valFromOption(r);B=q.attachments;if(B==null||B.length===0)return C;else{p=b("bs_caml_array").caml_array_get(B,0);n=p.share;if(n==null)return C;else{s=n.target;if(s==null)return C;else{r=b("bs_array").copy(B);b("bs_caml_array").caml_array_set(r,0,Object.assign(Object.assign({},p),{share:Object.assign(Object.assign({},n),{target:Object.assign(Object.assign({},A[1]),{live_location_id:s.live_location_id})})}));B=Object.assign(Object.assign({},q),{attachments:r});p=q.thread_id;p==null||Fa(C[0],p,o,A[2]);return Ma(C,[o,B])}}}}else return C;case 48:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ReplaceMessage");n=g;s=k[0];r=k[1];var nb=s.replaced_message_id;if(nb==null)return n;else{q=Ja(n,nb);if(q!==void 0){p=s.message_id;A={timestamp:s.timestamp,profile_ranges:s.profile_ranges};o=b("bs_js_primitive").nullable_to_opt(s.status);o!==void 0&&(A.status=b("bs_js_primitive").valFromOption(o));B=b("bs_js_primitive").nullable_to_opt(s.log_message_data);B!==void 0&&(A.log_message_data=b("bs_js_primitive").valFromOption(B));C=b("bs_js_primitive").nullable_to_opt(s.meta_ranges);C!==void 0&&(A.meta_ranges=b("bs_js_primitive").valFromOption(C));o=b("bs_js_primitive").nullable_to_opt(s.ranges);o!==void 0&&(A.ranges=b("bs_js_primitive").valFromOption(o));B=b("bs_js_primitive").nullable_to_opt(s.raw_attachments);B!==void 0&&(A.raw_attachments=b("bs_js_primitive").valFromOption(B));C=b("bs_js_primitive").nullable_to_opt(s.attachments);C!==void 0&&(A.attachments=b("bs_js_primitive").valFromOption(C));o=b("bs_js_primitive").nullable_to_opt(s.body);o!==void 0&&(A.body=b("bs_js_primitive").valFromOption(o));B=b("bs_js_primitive").nullable_to_opt(s.platform_xmd);B!==void 0&&(A.platform_xmd=b("bs_js_primitive").valFromOption(B));C=A;o=Object.assign(Object.assign({},b("bs_js_primitive").valFromOption(q)),C);b("MercuryMessageIDs.bs").addServerID(p,p);var E=Ma(n,[p,o]);if(p!==nb){E[9]["delete"](nb);E[10].set(nb,p);B=b("bs_belt_Option").flatMap(b("bs_js_primitive").nullable_to_opt(s.thread_id),function(a){return b("bs_js_primitive").nullable_to_opt(E[15].get(a))});A=s.thread_id;if(B!==void 0&&!(A==null)){q=B;C=La(E,[p].concat(q[1].filter(function(a){return a!==nb})));E[15].set(A,[q[0],C])}}o=s.message_id;B=s.thread_id;B==null||(Fa(E[0],B,nb,r),Fa(E[0],B,o,r));return[E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],E[8],E[9],E[10],E[11],E[12],E[13],E[14],E[15],E[16],E[17],E[18]]}else return n}case 49:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateLocalTitanMessagesCount");p=g;A=d;q=[k[0],k[1]];C=q[0];s=Ja(p,q[1]);if(s!==void 0&&b("MessengerMessage.bs").isTitanMessage(b("bs_js_primitive").valFromOption(s))){B=A[2].get(C);B==null?A[2].set(C,1):A[2].set(C,1+B|0)}return p;case 50:return Va(g,d,k[0],k[1]);case 51:o=g;r=d;n=k[0];q=k[1];s=k[2];A=Za(o,n,q,s==null?void 0:b("bs_js_primitive").some(s));Xa(A[0],q,n,function(a,b,c){a.informNewMessage(b,c);return 0});C=A[0];B=b("MercuryIDs").getParticipantIDFromUserID(C);if(n.folder===b("MessagingTag").PENDING&&b("bs_caml_obj").caml_equal(q,b("bs_js_primitive").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)))p=[A[0],A[1],A[2],A[3],A[4],A[5]+1|0,A[6],A[7],A[8],A[9],A[10],A[11],A[12],A[13],A[14],A[15],A[16],A[17],A[18]];else if(n.folder===b("MessagingTag").INBOX){o=n.thread_id;p=o==null?A:ya(A,o,n.folder)}else{o=n.thread_id;if(o==null)p=A;else{s=cb(A[0],A[7],n,s);if(s!==void 0){s=b("bs_js_primitive").valFromOption(s);var F=A[0],G=A[1],H=A[2],I=A[3],J=A[4],K=A[5],ob=A[6],L=b("bs_belt_Map").set(A[7],s.thread_id,s),M=A[8],N=A[9],O=A[10],P=A[11],Q=A[12],pb=A[13],qb=A[14],R=A[15],S=A[16],T=A[17],U=A[18];F=[F,G,H,I,J,K,ob,L,M,N,O,P,Q,pb,qb,R,S,T,U];if(b("bs_caml_obj").caml_equal(q,b("bs_js_primitive").some(b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE))){G=n.offline_threading_id;G==null?Object.assign(n,{folder:s.folder}):b("bs_caml_obj").caml_equal(b("bs_js_primitive").nullable_to_opt(O.get(G)),G)?Object.assign(n,{client_message_id:n.offline_threading_id,status:b("MercuryActionStatus").SUCCESS,action_type:b("MercuryActionType").SEND_MESSAGE}):Object.assign(n,{folder:s.folder})}xa(F,s);H=Object.assign({},s);H.unread_count===0&&b("bs_caml_obj").caml_equal(n.author,B)&&n.timestamp>=H.last_read_timestamp&&!b("gkx")("702170")&&Object.assign(H,{last_read_timestamp:n.timestamp});I=n.offline_threading_id;if(!(I==null)&&I!==n.message_id){Object.assign(H,{last_message_timestamp:n.timestamp});J=n.comm_status;J==null||Object.assign(H,{last_message_id:n.message_id})}K=n.comm_status;ob=H.comm_status;K==null||!(ob==null)&&b("bs_caml_obj").caml_notequal(ob,b("PageCommItemStatus").FOLLOW_UP)&&Object.assign(H,{comm_status:K});L=n.creator_info;L==null||b("bs_caml_obj").caml_equal(L.pageID,C)&&Object.assign(H,{folder:n.folder});Ya(H,n.author);p=v(void 0,F,o,H)}else p=A}}M=Wa(p,r,n,q);N=db(M,n);P=N;Q=n;pb=b("bs_caml_obj").caml_notequal(Q.author,b("MercuryViewer").getID());qb=Q.thread_id;if(pb&&!(qb==null)){R=ia(P[6],qb,Q.author);if(R!==P[6])return[P[0],P[1],P[2],P[3],P[4],P[5],R,P[7],P[8],P[9],P[10],P[11],P[12],P[13],P[14],P[15],P[16],P[17],P[18]];else return P}else return P;case 52:S=g;T=d;U=k[0];O=k[1];G=k[2];s=b("bs_caml_obj").caml_notequal(G==null?void 0:b("bs_js_primitive").some(G),!1);B=b("bs_caml_obj").caml_equal(G==null?void 0:b("bs_js_primitive").some(G),!0);I=S[0];J=b("MercuryIDs").getParticipantIDFromUserID(I);ob=Wa(S,T,U,O);Xa(ob[0],O,U,function(a,b,c){a.informNewLogMessage(b,c);return 0});K=Za(ob,U,O,G==null?void 0:b("bs_js_primitive").some(G));L=U.thread_id;if(L==null)C=K;else{F=b("bs_belt_Map").get(K[7],L);if(F!==void 0){o=Object.assign({},b("bs_js_primitive").valFromOption(F));xa(K,o);o.last_message_timestamp<U.timestamp&&Object.assign(o,{last_message_timestamp:U.timestamp});H=U.log_message_type;if(!(H==null))if(b("bs_caml_obj").caml_equal(H,b("MercuryLogMessageType").SUBSCRIBE)&&!B){A=U.log_message_data;if(A==null)p=[];else{r=A.added_participants;p=r==null?[]:r}ra(J,o,p);t(I,L)}else if(b("bs_caml_obj").caml_equal(H,b("MercuryLogMessageType").UNSUBSCRIBE)&&!B){q=U.log_message_data;if(q==null)M=[];else{N=q.removed_participants;M=N==null?[]:N}$a(J,o,M);t(I,L)}else if(b("bs_caml_obj").caml_equal(H,b("MercuryLogMessageType").THREAD_IMAGE)){if(!s){n=U.log_message_data;if(n==null)pb=null;else{qb=n.image;pb=qb==null?null:qb.preview_url}Object.assign(o,{image_src:pb})}}else if(b("bs_caml_obj").caml_equal(H,b("MercuryLogMessageType").THREAD_NAME)){Q=U.log_message_data;if(!(Q==null)){R=Q.name;!(R==null)&&o.name===R||t(I,L);Object.assign(o,{name:Q.name})}}else b("bs_caml_obj").caml_equal(H,b("MercuryLogMessageType").GENERIC_ADMIN_TEXT)&&Ea(I,o,U,L);C=v(void 0,K,L,o)}else C=K}return db(C,U);case 53:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("ChangePinnedStatus");P=g;S=d;T=k[0];ob=k[1];O=k[2];G=b("bs_belt_Map").get(P[7],T);F=!1;if(ob&&!S[5].has(T))P[13].push(T),S[5].add(T),F=!0;else if(!ob&&S[5].has(T)){A=P[13].indexOf(T);A>-1&&P[13].splice(A,1);S[5]["delete"](T);F=!0}if(G!==void 0){r=b("bs_js_primitive").valFromOption(G);if(r.is_pinned!==ob){p=b("ImmutableObject").set(r,{is_pinned:ob,thread_pin_timestamp:O});B=b("bs_belt_Map").set(P[7],T,p);t(P[0],T);F=!0;q=B}else q=P[7]}else q=P[7];if(F)return[P[0],P[1],P[2],P[3],P[4],P[5],P[6],q,P[8],P[9],P[10],P[11],P[12],P[13],P[14],P[15],P[16],P[17],P[18]];else return P;case 54:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("InvalidateMontageState");N=g;J=k[0];M=b("bs_js_dict").fromArray(b("bs_js_dict").entries(N[14]));M[J]=[];return[N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],N[8],N[9],N[10],N[11],N[12],N[13],M,N[15],N[16],N[17],N[18]];case 55:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("NewMontageMessage");s=g;n=k[0];qb=b("bs_js_dict").fromArray(b("bs_js_dict").entries(s[14]));pb=n.actor.id;R=qb[pb];R!==void 0?(R.push(n),qb[pb]=R):qb[pb]=[n];return[s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13],qb,s[15],s[16],s[17],s[18]];case 56:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("InstantiateMontageThread");Q=g;H=k[0];I=b("bs_js_dict").fromArray(b("bs_js_dict").entries(Q[14]));L=I[H];L===void 0&&(I[H]=[]);return[Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],Q[7],Q[8],Q[9],Q[10],Q[11],Q[12],Q[13],I,Q[15],Q[16],Q[17],Q[18]];case 57:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DeleteMontageMessage");o=g;var rb=k[0],sb=b("bs_js_dict").fromArray(b("bs_js_dict").entries(o[14]));K=Object.keys(sb);K.forEach(function(b){var a=sb[b];if(a!==void 0){a=a.filter(function(a){return a.id!==rb.messageFBID});sb[b]=a;return 0}else return 0});return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],sb,o[15],o[16],o[17],o[18]];case 58:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("AddFetchedAllHistoryMarkers");var V=g;C=[k[0],k[1]];var tb=C[1];C[0].forEach(function(b){var a=V[15].get(b);a==null?V[15].set(b,[1,[]]):V[15].set(b,[1,a[1]]);return Ha(V[0],b,tb)});return[V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],V[8],V[9],V[10],V[11],V[12],V[13],V[14],V[15],V[16],V[17],V[18]];case 59:var W=g;U=k[0];U.forEach(function(c){__p&&__p();var a=c.folder;if(ua.includes(a)){c=c.thread_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromThreadFBID(a)}).concat(c.other_user_fbids.map(function(a){return b("MercuryIDs").getThreadIDFromUserID(a)}));W[16][a]=new Set(c);a=b("MercuryThreadInformer").getForFBID(W[0]);a.updatedUnreadState();return 0}else return 0});return[W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],W[8],W[9],W[10],W[11],W[12],W[13],W[14],W[15],W[16],W[17],W[18]];case 60:var X=g,ub=d;A=k[0];var f=[X[18]];A.forEach(function(a){X[17][a.folder]=a.unread_count;a.unread_count===0&&(X[16][a.folder]=new Set());a.folder===b("MessagingTag").INBOX&&(f[0]=b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(a.seen_timestamp),f[0]),ub[7][0]=a.unseen_count);a=b("MercuryThreadInformer").getForFBID(X[0]);a.updatedUnreadState();a.updatedUnseenState();return 0});return[X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],X[8],X[9],X[10],X[11],X[12],X[13],X[14],X[15],X[16],X[17],f[0]];case 61:var Y=g,vb=k[0];ua.forEach(function(c){__p&&__p();var a=Y[16][c];if(a!==void 0){b("bs_js_dict").entries(vb).forEach(function(b){var c=b[0];if(a.has(c)){a.add(b[1]);a["delete"](c);return 0}else return 0});return 0}else return 0});return[Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],Y[8],Y[9],Y[10],Y[11],Y[12],Y[13],Y[14],Y[15],Y[16],Y[17],Y[18]];case 62:S=g;G=k[0];r=k[1];ob=k[2];O=k[3];p=Ja(S,G);if(p!==void 0){T=b("bs_js_primitive").valFromOption(p);Ta(T);B=b("MessengerMessage.bs").makeFakeMessage(T.message_id,T.thread_id,T.author,T.action_type,T.timestamp,{removed_timestamp:ob,message_unsendability_status:b("MessageUnsendabilityStatus").DENY_TOMBSTONE_MESSAGE,attachments:T.attachments,unsender:{id:r}});F=Ma(S,[G,B]);q=T.thread_id;if(q==null)return F;else{P=Ua(F,G,q);Fa(P[0],q,G,O);J=b("bs_belt_Map").get(P[7],q);if(J!==void 0){M=b("ImmutableObject").set(b("bs_js_primitive").valFromOption(J),Sa(P,q));N=b("bs_belt_Map").set(P[7],q,M);t(P[0],q);return[P[0],P[1],P[2],P[3],P[4],P[5],P[6],N,P[8],P[9],P[10],P[11],P[12],P[13],P[14],P[15],P[16],P[17],P[18]]}else return P}}else return S;case 63:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UpdateConnectivityStatus");R=g;pb=k[0];n=k[1];qb=b("ThreadConnectivityStatus.bs").toGraphQLValue(n);s=b("bs_belt_Map").get(R[7],pb);if(s!==void 0){L=b("bs_js_primitive").valFromOption(s);H=L.thread_connectivity_data;I=H==null?b("ImmutableObject").set(L,{thread_connectivity_data:{connectivity_status:qb,first_sender_id:null}}):b("ImmutableObject").set(L,{thread_connectivity_data:{connectivity_status:qb,first_sender_id:H.first_sender_id}});return[R[0],R[1],R[2],R[3],R[4],R[5],R[6],b("bs_belt_Map").set(R[7],pb,I),R[8],R[9],R[10],R[11],R[12],R[13],R[14],R[15],R[16],R[17],R[18]]}else return R;case 64:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("DeltaMarkFolderSeen");Q=g;var wb=k[0];return b("bs_belt_Array").reduceU(wb.folders,Q,function(c,a){a=b("MessagingTag").IRIS_MAPPING[a];if(a!==void 0)return kb(c,Number(wb.timestamp),a);else return c});case 65:K=g;o=[k[0],k[1],k[2],k[3]];var xb=o[2];C=o[0];U=Ja(K,C);if(U!==void 0){A=b("bs_js_primitive").valFromOption(U);p=o[1].concat(A.tags).filter(function(a){return xb.indexOf(a)===-1});ob=Object.assign(Object.assign({},A),{tags:p});r=A.thread_id;r==null||Fa(K[0],r,C,o[3]);return Ma(K,[C,ob])}else return K;case 66:B=g;T=[k[0],k[1],k[2],k[3],k[4]];F=T[0];G=Ja(B,F);if(G!==void 0){O=b("bs_js_primitive").valFromOption(G);J=O.attachments;if(J==null||!(J.length!==0&&J.length===1))return B;else{M=b("bs_caml_array").caml_array_get(J,0);q=b("bs_array").copy(J);!b("gkx")("871037")||T[2]?b("bs_caml_array").caml_array_set(q,0,Object.assign(Object.assign({},M),{blurred_image_uri:void 0})):b("bs_caml_array").caml_array_set(q,0,Object.assign(Object.assign({},M),{blurred_image_uri:T[3]}));N=Object.assign(Object.assign({},O),{attachments:q});P=O.thread_id;P==null||Fa(B[0],P,F,T[4]);return Ma(B,[F,N])}}else return B}case 1:S=j[0];if(typeof S==="number")if(S===0){n=g;var yb=[];b("bs_belt_MapString").forEach(n[6],function(a,c){return b("bs_belt_Map").forEach(c,function(b,c){if(c<Date.now()-3e4){yb.push([a,b]);return 0}else return 0})});if(yb.length===0)return n;else{var c=[n[6]];yb.forEach(function(a){c[0]=ia(c[0],a[0],a[1]);return 0});return[n[0],n[1],n[2],n[3],n[4],n[5],c[0],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]]}}else{s=g;L=d;if(jb(s,L,!1)>0){qb=b("MercuryServerRequests").getForFBID(s[0]);qb.markSeen();return kb(s,qb.getLastActionTimestamp(),b("MessagingTag").INBOX)}else return s}else switch(S.tag|0){case 0:var Z=g,zb=d;H=S[0];pb=S[1];I=S[2];R=S[3];var Ab=Z[7],Bb=[];Q=h(H.reduce(function(c,d){var a=b("bs_belt_Map").get(Ab,d);if(a!==void 0)return b("bs_belt_Map").set(c,d,b("bs_js_primitive").valFromOption(a));else{Bb.push(d);return c}},b("bs_belt_Map").make([b("ThreadId.bs").cmp])));if(Bb.length===0){b("bs_curry")._1(I,Q);return Z}else{U=zb[1];p=U[0].toString();zb[1][0]=U[0]+1|0;zb[0][0][p]=[H,I];A=b("MercuryServerRequests").getForFBID(Z[0]);r=Bb.reduce(function(c,d){__p&&__p();var e=b("MercuryIDs").tokenize(d),f=e.type;e=e.value;if(f==="user"){f=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(e));e=b("MercuryIDs").getParticipantIDFromUserID(Z[0]);var a=b("bs_caml_obj").caml_equal(f,e);a=b("MessengerThreadUtils.bs").createNewLocalThread(e,d,a?[e]:[e,f],null);e=b("bs_belt_Map").set(c,d,a);fb(e,zb[0][0]);return e}else return c},Z[7]);A.fetchThreadData(Bb,R);b("bs_curry")._1(pb,p);if(r===Z[7])return Z;else return[Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],r,Z[8],Z[9],Z[10],Z[11],Z[12],Z[13],Z[14],Z[15],Z[16],Z[17],Z[18]]}case 1:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("UnsubscribeThread");o=d[0][0];b("bs_curry")._2(eb,o,S[0]);d[0][0]=o;return g;case 2:var $=g;C=S[0];ob=b("bs_belt_Array").keepMap(C,function(a){a=Ja($,a);if(a!==void 0)return b("bs_js_primitive").nullable_to_opt(b("bs_js_primitive").valFromOption(a).offline_threading_id)});ob.forEach(function(a){$[10]["delete"](a);return 0});return[$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],$[8],$[9],$[10],$[11],$[12],$[13],$[14],$[15],$[16],$[17],$[18]];case 3:b("ChatReliabilityInstrumentation").logPROCESS_DELTA("MontagePollStickerVoted");K=g;var Cb=S[0];k=b("bs_js_dict").fromArray(b("bs_js_dict").entries(K[14]));G=Cb.montageActorID;J=k[G];if(J!==void 0){M=J.map(function(a){__p&&__p();var c=b("bs_caml_obj").caml_equal(Cb.montageMessageID,a.id);if(c){c=a;var d=Cb,e=c.montage_overlays.map(function(a){__p&&__p();if(b("bs_caml_obj").caml_equal(a.poll.id,d.pollID)){var c=a.poll.poll_options.map(function(a,c){c=c===d.optionVotedIndex;if(c)return new(b("ImmutableObject"))({text:a.text,vote_count:a.vote_count+1|0});else return a});c=new(b("ImmutableObject"))({can_viewer_vote:a.poll.can_viewer_vote,id:a.poll.id,poll_options:c,viewer_vote_index:d.optionVotedIndex});return b("ImmutableObject").set(new(b("ImmutableObject"))(a),{poll:c})}else return a});return b("ImmutableObject").set(new(b("ImmutableObject"))(c),{montage_overlays:e})}else return a});k[G]=M}return[K[0],K[1],K[2],K[3],K[4],K[5],K[6],K[7],K[8],K[9],K[10],K[11],K[12],K[13],k,K[15],K[16],K[17],K[18]];case 4:q=b("bs_belt_Map").set(g[7],S[0],S[1]);return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],q,g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15],g[16],g[17],g[18]];case 5:b("MercuryServerRequests").getForFBID(g[0]).updateLastActionTimestamp(S[0]);return g}case 2:O=j[0];switch(O.tag|0){case 0:b("bs_curry")._1(O[0],{blocked_ids:g[4]});break;case 1:b("bs_curry")._1(O[1],b("bs_belt_Map").get(g[7],O[0]));break;case 2:b("bs_curry")._1(O[0],g[13].concat([]));break;case 3:b("bs_curry")._2(O[0],g,d);break}return g}},c,a);e.length>0&&b("LogHistory").getInstance("messenger_state").debug("actions",b("bs_belt_Option").getWithDefault(b("bs_js_primitive").undefined_to_opt(JSON.stringify(e)),""));return c}function L(c,a){__p&&__p();var d=function(c){b("bs_curry")._1(a,[b("bs_block").__(0,[b("bs_block").__(5,[c])])]);b("setTimeoutAcrossTransitions")(function(){return b("bs_curry")._1(a,[b("bs_block").__(1,[0])])},3e4);return 0};b("Arbiter").subscribe(D(c),function(a,b){a=b.obj;b=a.to;if(!(b==null)&&b.toString()!==c)return 0;else{d(a);return 0}});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(d,e){__p&&__p();d=function(d,a){__p&&__p();var f={};b("bs_belt_MapString").toArray(d[2]).forEach(function(a){var b={};a[1].forEach(function(c,d,a){b[d]=c.watermark;return 0});f[a[0]]=b;return 0});a="read_receipts:"+c;e[a]=f;return 0};return b("bs_curry")._1(a,[b("bs_block").__(2,[b("bs_block").__(3,[d])])])});return 0}mb=b("MessengerPersistantViewerKeyedSubscriptionComponent.bs").Make([lb,ob,L,"MessengerStateProvider"]);var M=mb[1];function N(a,c){return b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(0,[c])])])}function O(a,c){b("MercuryAssert").isThreadID(c);var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);return b("bs_js_null_undefined").fromOption(d[0])}function P(a,c,d,e){__p&&__p();if(c.length===0){b("bs_curry")._1(d,{});return null}else{b("MercuryAssert").allThreadID(c);var f=[null],g=function(a){f[0]=a;return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(0,[c,g,d,e])])]);return f[0]}}function Q(a,c,d,e){return P(a,[c],function(a){return b("bs_curry")._1(d,a[c])},e)}function pb(a,c,d,e){__p&&__p();var f=[void 0],g=function(a){f[0]=a;return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,g])])]);g=f[0];if(g!==void 0)return b("bs_js_primitive").valFromOption(g);else{g=b("MessengerThreadUtils.bs").createNewLocalThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(4,[c,g])])]);return g}}function qb(a){var c=b("MercuryLocalIDs").generateThreadID(null);pb(a,c,[],null);return c}function R(a,c,d,e){__p&&__p();var f=[void 0],g=function(a){f[0]=a;return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,g])])]);g=f[0];if(g!==void 0)return b("bs_js_primitive").valFromOption(g);else{g=b("MessengerThreadUtils.bs").createNewLocalGroupGeneralThread(b("MercuryIDs").getParticipantIDFromUserID(a),c,d,e);b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(4,[c,g])])]);return g}}function S(a,c,d){var e=b("MercuryLocalIDs").generateThreadID(null);R(a,e,c,d);return e}function T(a,c){var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);a=d[0];if(a!==void 0)return b("MercuryThreadInfo").isEmptyLocalThread(b("bs_js_primitive").valFromOption(a));else return!1}function U(a,c){var d=[void 0],e=function(a){d[0]=a;return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(1,[c,e])])]);a=d[0];if(a!==void 0)return b("MercuryThreadInfo").isNewEmptyLocalThread(b("bs_js_primitive").valFromOption(a));else return!1}function rb(c){var a=[[]],d=function(b){a[0]=b;return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(2,[d])])]);return a[0]}function sb(a,c){return b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(1,[c])])])}function V(a){__p&&__p();var c=a.payload_source;if(c==null)return!1;else if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_SEND_MESSAGE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_THREAD_SYNC)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)||b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS))return!0;else if(b("bs_caml_obj").caml_equal(c,b("MercuryPayloadSource").SERVER_INITIAL_DATA)){c=a.ordered_threadlists;return!(c==null)}else return!1}function tb(a,c){c=b("bs_block").__(1,[b("bs_block").__(3,[c])]);return b("bs_curry")._2(M,b("bs_js_primitive").some(a),[c])}function W(a,c){return b("bs_curry")._2(M,a==null?void 0:b("bs_js_primitive").some(a),c)}function X(a){__p&&__p();var c=[],d=!1;if(!(a==null)){var e=a.payload_source;e==null||b("bs_caml_obj").caml_equal(e,b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE)&&(d=!0);e=a.newlyAddedClientIDs;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(61,[e])]));e=a.delivery_receipts;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(0,[e])]));e=a.message_ignored_ids;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(1,[e])]));e=a.threads;if(!(e==null)){var f=a.payload_source;f==null||(b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO)&&c.push(b("bs_block").__(0,[b("bs_block").__(8,[e])])),b("bs_caml_obj").caml_equal(f,b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE)&&(e.length>0&&c.unshift(b("bs_block").__(0,[b("bs_block").__(34,[b("bs_caml_array").caml_array_get(e,0).thread_id])]))));c.push(b("bs_block").__(0,[b("bs_block").__(7,[e])]))}f=a.participants;if(!(f==null)){c.push(b("bs_block").__(0,[b("bs_block").__(3,[f])]));var g=[],h=[];f.forEach(function(a){if(a.is_messenger_blocked||a.is_facebook_blocked){g.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}else{h.push(b("MercuryIDs").getParticipantIDFromUserID(a.fbid));return 0}});(g.length>0||h.length>0)&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[g,h])]))}e=a.message_blocked_ids;e==null||e.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[e,[]])]));f=a.message_unblocked_ids;f==null||f.length>0&&c.push(b("bs_block").__(0,[b("bs_block").__(2,[[],f])]));e=a.pending_folder_unseen_count;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(4,[e])]));f=a.global_actions;f==null||f.forEach(function(a){if(b("bs_caml_obj").caml_equal(a.action_type,b("MercuryGlobalActionType").MARK_ALL_READ)){c.push(b("bs_block").__(0,[b("bs_block").__(33,[a.folder])]));return 0}else return 0});if(V(a)){e=a.ordered_threadlists;f=0;!(e==null)&&e.length>0?c.push(b("bs_block").__(0,[b("bs_block").__(9,[e])])):f=1;if(f===1){e=a.threads;f=a.payload_source;e==null||!(f==null)&&e.length>0&&f!==b("MercuryPayloadSource").SERVER_CHANGE_PINNED_STATUS&&c.push(b("bs_block").__(0,[b("bs_block").__(10,[e])]))}}f=a.pinned_thread_ids;f==null||f.length>0&&V(a)&&c.push(b("bs_block").__(0,[b("bs_block").__(11,[f])]));e=a.roger;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(6,[e])]));f=a.montage_delete_message_delta;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(57,[f])]));e=a.montage_new_message_delta;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(55,[e])]));f=a.montage_poll_sticker_vote;f==null||f.forEach(function(a){c.push(b("bs_block").__(1,[b("bs_block").__(3,[a])]));return 0});e=a.current_montage_thread;if(!(e==null)){f=e.user;if(!(f==null)){e=f.messenger_montage_thread;e==null||(c.push(b("bs_block").__(0,[b("bs_block").__(56,[f.id])])),e.montage_messages.edges.forEach(function(a){c.push(b("bs_block").__(0,[b("bs_block").__(55,[a.node])]));return 0}))}}f=a.unread_thread_fbids;f==null||c.push(b("bs_block").__(0,[b("bs_block").__(59,[f])]));e=a.message_counts;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(60,[e])]));f=a.actions;if(!(f==null)){var i=a.payload_source,j=i==null?void 0:b("bs_js_primitive").some(i);f.forEach(function(d){__p&&__p();var e=d.action_type,f=0;i==null?f=1:i.startsWith("server")||(f=1);f===1&&c.push(b("bs_block").__(1,[b("bs_block").__(5,[d.timestamp])]));if(b("bs_caml_obj").caml_equal(j,b("bs_js_primitive").some(b("MercuryPayloadSource").SERVER_SEARCH))){c.push(b("bs_block").__(0,[b("bs_block").__(35,[d,0])]));return 0}else if(b("bs_caml_obj").caml_equal(b("bs_js_primitive").nullable_to_opt(d.client_state),b("bs_js_primitive").some(b("MercuryMessageClientState").SEND_TO_SERVER))){c.push(b("bs_block").__(0,[b("bs_block").__(35,[d,0])]));return 0}else{f=d.thread_id;var g=d.upload_id,h=d.upload_data,k=d.message_ids;fa(d);if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_MESSAGES))if(!(f==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(36,[f,k,j])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FOLDER)){k=d.new_folder;if(!(f==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(37,[f,k])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_ARCHIVED_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(39,[f,d.archived])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_MUTE_SETTINGS)){k=d.reactions_mute_mode;var l=d.mentions_mute_mode,m=d.mute_until;l=k==null?l==null?m==null?void 0:b("bs_block").__(2,[m]):m==null?b("bs_block").__(1,[l===1]):void 0:!(l==null)||!(m==null)?void 0:b("bs_block").__(0,[k===1]);if(!(f==null)&&l!==void 0){c.push(b("bs_block").__(0,[b("bs_block").__(38,[f,l])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_READ_STATUS))if(f==null)return 0;else{m=a.from_client;c.push(b("bs_block").__(0,[b("bs_block").__(41,[f,d.mark_as_read,d.timestamp,m==null?!1:m,d.source])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PAGE_FOLLOW_UP_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(40,[f,d.is_page_follow_up])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLOCK_STATUS_CHANGED))if(f==null)return 0;else{k=d.canViewerReply;l=k?null:b("MessengerThreadCannotReplyReason.bs").fromMessageThreadCannotReplyReason(d.reason);c.push(b("bs_block").__(0,[b("bs_block").__(13,[f,d.canViewerReply,l])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DELETE_THREAD))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(42,[f])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REACTION_UPDATE)){m=d.messageId;k=d.userId;if(!(m==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(45,[m,b("bs_js_primitive").nullable_to_opt(d.reaction),k,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MONTAGE_DIRECT_EXPIRE)){l=d.messageId;if(l==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(46,[l,j])]));return 0}}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LIVE_LOCATION_UPDATE)){m=d.messageId;k=d.liveLocation;if(!(m==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(47,[m,k,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REPLACE_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(48,[d,j])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CONFIRM_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(44,[g,h])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CANCEL_ATTACHMENT_PLACEHOLDER))if(!(g==null)&&!(h==null)){c.push(b("bs_block").__(0,[b("bs_block").__(43,[g,h,j])]));return 0}else return 0;else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").SEND_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(50,[d,j])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").USER_GENERATED_MESSAGE)){c.push(b("bs_block").__(0,[b("bs_block").__(51,[d,j,a.from_client])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").LOG_MESSAGE))if(b("MessengerMessage.bs").isLocalMessage(d))return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(52,[d,j,a.from_client])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_PINNED_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(53,[f,d.is_pinned,d.thread_pin_timestamp])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_MESSAGE)){l=d.messageId;m=d.removed_timestamp;if(!(l==null)&&!(m==null)){c.push(b("bs_block").__(0,[b("bs_block").__(62,[l,d.author,m,j])]));b("MessengerDesktopNotifications").removeNotification(l);return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(12,[f,d.page_unsubscribe_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").BLURRED_IMAGE_STATUS)){k=d.image_message_id;g=d.image_id;h=d.should_show;m=d.blurred_image_uri;if(!(k==null)&&!(g==null)&&!(h==null)&&!(m==null)){c.push(b("bs_block").__(0,[b("bs_block").__(66,[k,g,h,m,j])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").ADD_PARTICIPANTS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(14,[f,d.participants])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").CHANGE_FLAG))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(15,[f,d.mark_as_flag])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MOVE_PENDING_TO_INBOX))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(16,[f])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_CUSTOM_LIKE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(17,[f,d.custom_like])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").PROMOTE_GROUP_ADMINS)){l=d.promoted_admins;if(!(f==null)&&!(l==null)){c.push(b("bs_block").__(0,[b("bs_block").__(18,[f,l])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").REMOVE_GROUP_ADMINS)){k=d.removed_admin_ids;if(!(f==null)&&!(k==null)){c.push(b("bs_block").__(0,[b("bs_block").__(19,[f,k])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").JOINABLE_MODE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(20,[f,d.joinable_mode])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").APPROVAL_MODE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(21,[f,d.approval_mode])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").APPROVAL_QUEUE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(22,[f,d.added_id,d.added_group_id,d.removed_id,d.removed_group_id])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").IS_PIN_PROTECTED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(23,[f,d.is_pin_protected])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_RTC_CALL_DATA))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(24,[f,d.initiator_fbid,d.call_state,d.server_info_data])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_COMM_STATUS))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(25,[f,d.comm_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_COMM_ITEM_OWNER))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(26,[f,d.id,d.name,d.profile_pic_uri])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").EVENT_RSVP_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(27,[f,d.actor_fbid,d.rsvp_status])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS)){g=d.thread_connectivity_status;if(!(f==null)&&!(g==null)){c.push(b("bs_block").__(0,[b("bs_block").__(63,[f,g])]));return 0}else return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(28,[f,d.groups_sync_action,d.groups_sync_status_string])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(29,[f,d.groups_sync_action,d.fb_group_id])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").DESCRIPTION_CHANGED))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(30,[f,d.group_thread_description_string])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_THREAD_THEME))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(31,[f,{solid_color:d.solid_color,header_color:d.header_color,footer_color:d.footer_color,gradient_colors:d.gradient_colors,theme_id:d.theme_id}])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").UPDATE_JOINABLE_LINK))if(f==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(32,[f,d.joinable_link])]));return 0}else if(b("bs_caml_obj").caml_equal(e,b("MercuryActionType").MUTATE_TAGS)){h=d.tags_to_add;m=h==null?[]:h;l=d.tags_to_delete;k=l==null?[]:l;g=d.messageId;if(g==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(65,[g,m,k,j])]));return 0}}else return 0}});b("Utils.bs").isTruthy(a.from_client)&&f.forEach(function(d){var a=d.thread_id;if(a==null)return 0;else{c.push(b("bs_block").__(0,[b("bs_block").__(49,[a,d.message_id])]));return 0}})}e=a.end_of_history;e==null||c.push(b("bs_block").__(0,[b("bs_block").__(58,[e,a.payload_source])]))}d&&c.unshift(b("bs_block").__(0,[0]));return c}function ub(c,d){var a=[[]],e=function(b,c){c=b[15].get(d);if(c==null)return 0;else{a[0]=Ka(!0,b,c[1]);return 0}};b("bs_curry")._2(M,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return a[0]}function Y(c,d){var a=[d],e=function(b,c){c=b[10].get(d);if(c==null)return 0;else{a[0]=c;return 0}};b("bs_curry")._2(M,b("bs_js_primitive").some(c),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return a[0]}function vb(a,c){var d=[void 0],e=function(a,b){d[0]=a;return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);a=d[0];if(a!==void 0)return Ka(!1,a,c);else return[]}function wb(a,c,d){__p&&__p();var e=[!1],f=function(a,b){__p&&__p();b=a[15].get(c);if(b==null)return 0;else{a=b[0];b=b[1].length;if(a){e[0]=!0;return 0}else{e[0]=b>=d;return 0}}};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[f])])]);return e[0]}function xb(a,c){__p&&__p();var d=[!1],e=function(a,b){__p&&__p();b=a[15].get(c);if(b==null)return 0;else{a=b[0];if(a){d[0]=!0;return 0}else{d[0]=!1;return 0}}};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[e])])]);return d[0]}function yb(a,c){return b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(1,[b("bs_block").__(2,[c])])])}function Z(a,c,d,e){__p&&__p();var f=[],g=function(g,h){__p&&__p();h=g[15].get(c);if(h==null)return 0;else{h=h[1];for(var i=d,j=d+e|0;i<=j;++i){var a=b("bs_belt_Option").flatMap(b("bs_belt_Array").get(h,i),function(a){return Ja(g,a)});a!==void 0&&f.push(b("bs_js_primitive").valFromOption(a))}return 0}};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[g])])]);return f}var zb=[void 0];function Ab(a,c,d,e,f,g,h){__p&&__p();var i=function(j,i){__p&&__p();zb[0]=[c,d,e];var k=j[15].get(c);k=k==null?[[],void 0]:[k[1],k[0]];var l=k[0];if(b("Utils.bs").isSomeTrue(b("bs_js_primitive").undefined_to_opt(i[6][0][c]))){zb[0]=void 0;i[6][0][c]=!1;return 0}else{var m=i[2];m=l.length-b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(m.get(c)),0)|0;m>0&&b("ChatReliabilityInstrumentation").logERROR("fetch made with message in flight");var n=m-d|0;n=e-n|0;if(n>0&&b("bs_caml_obj").caml_notequal(k[1],1)){k=b("MercuryServerRequests").getForFBID(a);var aa=b("bs_js_null_undefined").fromOption(b("bs_belt_Option").map(b("bs_belt_Option").flatMap(b("bs_belt_Array").get(l,m-1|0),function(a){return Ja(j,a)}),function(a){return a.timestamp})),ba=i[4][0];i[4][0]=ba+1|0;i[3][0][String(ba)]=[[c,d,e],f];if(b("bs_caml_obj").caml_equal([c,d,e],zb[0])){k.fetchThreadMessages(c,m,n,aa,g,h);return 0}else return 0}else return b("bs_curry")._1(f,b("bs_belt_Array").keepMap(l,function(a){return Ja(j,a)}).slice(d,e))}};return b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[i])])])}function Bb(a,b,c,d,e,f,g){if(xb(a,b))return 0;else return Ab(a,b,c,d,e,f,g)}function $(a){var c=[0],d=function(d,a){c[0]=b("bs_caml_primitive").caml_int_min(C(d,a),b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT);return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c[0]}function Cb(a){var c=[0],d=function(b,a){c[0]=C(b,a);return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c[0]}function Db(a){var c=[0],d=function(d,a){c[0]=b("bs_caml_primitive").caml_int_min(jb(d,a,!0),b("MercuryThreadlistConstants").MAX_UNSEEN_COUNT);return 0};b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(2,[b("bs_block").__(3,[d])])]);return c[0]}function Eb(a){return b("bs_curry")._2(M,b("bs_js_primitive").some(a),[b("bs_block").__(1,[1])])}nb=mb[0];E=[mb[0]];f.fbid=d;f.deliveryReceipts=e;f.readReceiptsPerThread=i;f.ignoredIds=j;f.blockedIds=k;f.pendingFolderUnseenCount=l;f.typing=m;f.pendingReadStatusThreads=n;f.messages=aa;f.localIDsMap=ba;f.messagesWithUploadsInFlight=ca;f.threadlistOrderMap=o;f.pinnedThreads=p;f.montage=q;f.orderedMessageLists=r;f.unreadCounts=s;f.initialUnreadCounts=da;f.unseenTimestamp=ea;f.threads=a;f.thread=c;f.send=M;f.compute=N;f.getThreadMetaNow=O;f.getMultiThreadMeta=P;f.getThreadMeta=Q;f.createNewLocalThread=pb;f.createNewLocalThreadGenerateID=qb;f.createNewLocalGroupGeneralThreadGenerateID=S;f.isEmptyLocalThread=T;f.isNewEmptyLocalThread=U;f.getPinnedThreadlist=rb;f.unsubscribeThread=sb;f.sendJS=W;f.invalidateSearchedMessages=yb;f.hasLoadedNMessages=wb;f.hasLoadedAllMessages=xb;f.getCurrentlyLoadedMessages=ub;f.getServerMessageID=Y;f.getMessagesFromIDs=vb;f.getThreadMessagesRange=Ab;f.getThreadMessagesRangeNow=Z;f.fetchMoreMessages=Bb;f.processPollStickerVoted=tb;f.getUnseenUnreadCount=$;f.getUnseenUnreadCountRaw=Cb;f.getUnseenCount=Db;f.markAsSeen=Eb;f.processJSActions=X;f.Provider=E;f.jsComponent=nb}),null);
__d("MercuryDelayedDispatcher",["MercuryDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){var c=this;this.$1=a;this.$2=[];this.$3=b("MercuryThreadIDMap").getForFBID(this.$1);this.$4=b("MercuryDispatcher").getForFBID(this.$1);this.$5=b("MercuryServerRequests").getForFBID(this.$1);this.$6=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1);this.$4.subscribe("model-update-completed",function(a,b){return c.$7()})}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.handleUpdateWaitForThread=function(a,b){var c=this,d=this.$3.getClientIDFromServerIDNow(b);if(d){this.$8(a);return}this.$3.getClientIDFromServerID(b,function(){return c.$2.push({thread_fbid:b,payload:a})});this.$5.ensureThreadIsFetched(b)};c.$7=function(){if(this.$2&&this.$2.length){var a=this.$2.shift(),b=a.thread_fbid;a=a.payload;this.handleUpdateWaitForThread(a,b)}};c.$8=function(a){a.from_client?this.$4.handleUpdate(a):this.$6.handleUpdate(a)};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryDispatcher",["invariant","ArbiterMixin","LogHistory","MercuryActionType","MercuryPayloadSource","MercurySingletonProvider","MercuryThreadInformer","MessengerParticipants.bs","MessengerState.bs","isEmpty","mixin"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LogHistory").getInstance("mercury_dispatcher");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return i.getForFBID(a)};c.get=function(){return i.get()};function c(b){var c;c=a.call(this)||this;c.$MercuryDispatcher1=b;return c}var d=c.prototype;d.handlePreprocessedUpdate=function(a){a.preprocessed=!0,this.handleUpdate(a)};d.handleUpdate=function(a){__p&&__p();var c=this;this.$MercuryDispatcher2(a);!!a.from_client!==!!a.preprocessed||g(0,5757);delete a.preprocessed;b("isEmpty")(a)||b("MercuryThreadInformer").getForFBID(this.$MercuryDispatcher1).synchronizeInforms(function(){__p&&__p();a.payload_source===b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE&&(c.inform("invalidate-global-state",{}),b("MessengerParticipants.bs").reset());if(a.payload_source===b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE){var d=a.threads&&a.threads.length>0&&a.threads[0]&&a.threads[0].thread_id;d&&c.inform("invalidate-thread-state",d)}b("MessengerParticipants.bs").addParticipants(a);b("MessengerState.bs").sendJS(c.$MercuryDispatcher1,b("MessengerState.bs").processJSActions(a));c.inform("update-threadlist",a);c.inform("update-messages",a);c.inform("model-update-completed",null)})};d.$MercuryDispatcher2=function(a){__p&&__p();var c=a.payload_source;if(c===b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS||c===b("MercuryPayloadSource").CLIENT_MARK_THREAD_SEEN)return;var d={from_client:a.from_client,messages:null};if(a.actions){a=a.actions.filter(function(a){return a.action_type===b("MercuryActionType").USER_GENERATED_MESSAGE||a.action_type===b("MercuryActionType").LOG_MESSAGE}).map(function(a){return{action_type:a.action_type,other_user_fbid:a.other_user_fbid,thread_fbid:a.thread_fbid,message_id:a.message_id}});a.length&&(d.messages=a)}h.debug("update:"+c,JSON.stringify(d))};return c}(b("mixin")(b("ArbiterMixin")));var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySendErrorLogger",["Banzai","BanzaiLogger"],(function(a,b,c,d,e,f){var g=b("BanzaiLogger").create({retry:!0}),h=b("Banzai").isEnabled("mercury_send_error_logging");a={log:function(a){if(!h)return;a={message_id:a.message_id,timestamp_client:Date.now(),error_type:a.error_data.type,error_code:a.error_data.code,error_description:a.error_data.description,is_transient:a.error_data.is_transient};g.log("MercurySendErrorLoggerConfig",a)}};e.exports=a}),null);
__d("MercuryServerPayloadPreprocessor",["invariant","MercuryActionStatus","MercuryActionType","MercuryAttachment","MercuryDispatcher","MercuryIDs","MercurySendErrorLogger","MercurySingletonProvider","MercuryThreadIDMap","MessengerEnvironment","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a,this.$2=b("MercuryThreadIDMap").getForFBID(this.$1),this.$3=b("MercuryDispatcher").getForFBID(this.$1)}a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};var c=a.prototype;c.handleUpdate=function(a){__p&&__p();var c=this,e={};a.from_client&&g(0,2150);(a.threads||[]).forEach(function(a){c.$4(a,e);var b=c.$2.getServerIDFromClientIDNow(a.thread_id);d(["MercuryServerRequests"],function(d){d=d.getForFBID(c.$1);d.markThreadFetched(a.thread_id);b&&d.markThreadFetched(b);d.updateLastActionTimestamp(a.timestamp)})});a.pinned_thread_ids=(a.pinned_thread_ids||[]).map(function(a){return c.$2.getClientIDFromServerIDNow(a)});(a.ordered_threadlists||[]).forEach(function(a){var b=a.thread_fbids||[];b=b.concat(a.other_user_fbids||[]);a.thread_ids=b.map(function(a){return c.$2.getClientIDFromServerIDNow(a.toString())})});if(a.delivery_receipts){var f={};for(var h=a.delivery_receipts,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{j=h.next();if(j.done)break;k=j.value}k=k;var l=k.other_user_fbid?b("MercuryIDs").getThreadIDFromUserID(k.other_user_fbid):this.$2.getClientIDFromServerIDNow(k.thread_fbid);l&&(f[l]=k.time)}a.delivery_receipts=f}a.actions=a.actions||[];a.actions.forEach(function(f){f.action_type===b("MercuryActionType").SEND_MESSAGE&&f.status===b("MercuryActionStatus").ERROR&&b("MercurySendErrorLogger").log(f);var h=null,i=null;f.other_user_fbid?(i=b("MercuryIDs").getThreadIDFromUserID(f.other_user_fbid),h=f.other_user_fbid):f.thread_fbid?(i=b("MercuryIDs").getThreadIDFromThreadFBID(f.thread_fbid),h=f.thread_fbid):f.thread_id?(i=b("MercuryIDs").getThreadIDFromThreadFBID(f.thread_id),h=f.thread_id):f.status&&f.status!=b("MercuryActionStatus").SUCCESS&&f.client_thread_id?i=f.client_thread_id:g(0,2151,f.action_type,f.status);h=h&&h.toString();f.thread_id=c.$2.hasClientIDForServerID(h)?c.$2.getClientIDFromServerIDNow(h):i;f.action_type==b("MercuryActionType").SEND_MESSAGE&&f.client_thread_id&&h&&(f.thread_id=f.client_thread_id,c.$2.forceSetServerIDToClientID(h,f.client_thread_id),e[h]=f.client_thread_id);f.thread_id||g(0,2152,f.action_type);(!a.payload_source||!a.payload_source.startsWith("server"))&&d(["MercuryServerRequests"],function(a){a.getForFBID(c.$1).updateLastActionTimestamp(f.timestamp)})});this.$5(a);this.$6(a);if(a.end_of_history){l=[];for(var k=0;k<a.end_of_history.length;k++){j=a.end_of_history[k];j.type=="user"?l.push("user:"+j.fbid):j.type=="thread"&&this.$2.hasClientIDForServerID(j.fbid)&&l.push(this.$2.getClientIDFromServerIDNow(j.fbid))}a.end_of_history=l}if(a.roger){var m={};Object.keys(a.roger).forEach(function(d){__p&&__p();var e=Object.keys(a.roger[d]),f;d?f=c.$2.getClientIDFromServerIDNow(d):e.length===1&&(f=b("MercuryIDs").getThreadIDFromUserID(e[0]));if(f){e=a.roger[d];m[f]={};for(var g in e)if(Object.prototype.hasOwnProperty.call(e,g)){d=b("MercuryIDs").getParticipantIDFromUserID(g);m[f][d]=e[g]}}});a.roger=m}a.newlyAddedClientIDs=e;a.preprocessed=!0;this.$3.handleUpdate(a)};c.$4=function(a,c){var d=a.other_user_fbid?a.other_user_fbid:a.thread_fbid;d||g(0,2153);var e=this.$2.getClientIDFromServerIDNow(d);e||(e=a.other_user_fbid?b("MercuryIDs").getThreadIDFromUserID(a.other_user_fbid):b("MercuryIDs").getThreadIDFromThreadFBID(a.thread_fbid),this.$2.setServerIDToClientID(d,e),this.$2.setDeprecatedServerIDToClientID(a.thread_id,e),c[d]=e);a.thread_id=e};c.$5=function(a){a.actions.forEach(function(a){a.action_type===b("MercuryActionType").USER_GENERATED_MESSAGE&&(a.attachments=a.attachments||[],a.attachments.forEach(function(a){if(b("MercuryAttachment").isShareAttachment(a)&&a.share&&b("MessengerEnvironment").messengerui){var c=new(b("URI"))(a.share.uri);c.getDomain()||(a.share.uri=c.setDomain("facebook.com").setSubdomain(b("URI").getRequestURI().getSubdomain()).setProtocol("https").toString())}}))})};c.$6=function(a){__p&&__p();a.actions.forEach(function(a){__p&&__p();if(a.action_type!==b("MercuryActionType").USER_GENERATED_MESSAGE)return;a=a;if(!a.has_attachment||!a.attachments)return;for(var c=a.attachments.length-1;c>=0;c-=1){var d=a.attachments[c];if(!d.share||!d.share.style_list||d.share.style_list[0]!="genie_message")continue;d.share.target.genie_id&&(a.author=b("MercuryIDs").getParticipantIDFromUserID(d.share.target.genie_id));d.share.target&&!d.share.target.attachment&&(a.attachments.splice(c,1),a.has_attachment=a.attachments.length>0)}})};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryErrorType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SERVER:1,TRANSPORT:2,TIMEOUT:3})}),null);
__d("MercuryServerSendMessageQueueOptions",[],(function(a,b,c,d,e,f){a=function(a,b,c,d,e,f){"use strict";this.success_handler=a,this.error_handler=b,this.transport_error_handler=c,this.timeout_handler=d,this.timeout=e,this.connection_retries=f};e.exports=a}),null);
__d("MercurySourceType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHAT_ORCA:"source:chat:orca",CHAT_LIGHT_SPEED:"source:chat:light_speed",CHAT_IPHONE:"source:chat:iphone",CHAT_JABBER:"source:chat:jabber",CHAT_MEEBO:"source:chat:meebo",CHAT_WEB:"source:chat:web",CHAT_TEST:"source:chat:test",CHAT_FORWARD_DIALOG:"source:chat:forward",CHAT:"source:chat",CONTACT_ADD_MUTATION:"source:contact_add:graphql_mutation",CONTACT_ADD_CYMK:"source:contact_add:cymk_suggestion",COWORKER_GROUP:"source:work:coworker_group",CUSTOMER_CHAT_PLUGIN:"source:discovery:customer_chat_plugin",EMAIL:"source:email",EVENT_MESSAGE_BLAST:"source:event_message_blast",EVENT_TICKETING:"source:event_ticket",EVENT_REMINDERS:"source:event_reminders",FUNDRAISER_MESSAGE_BLAST:"source:fundraiser_message_blast",GENERIC_ADMIN_TEXT:"source:generic_admin_text",GIGABOXX_API:"source:gigaboxx:api",GIGABOXX_BLAST:"source:gigaboxx:blast",GIGABOXX_EMAIL_REPLY:"source:gigaboxx:emailreply",GIGABOXX_MOBILE:"source:gigaboxx:mobile",GIGABOXX_WAP:"source:gigaboxx:wap",GIGABOXX_WEB:"source:gigaboxx:web",GROUP_GENERAL_THREAD_AUTOJOIN:"source:group:general_thread_autojoin",INVITE:"source:invite",LEIA:"source:leia",MESSENGER_WEB:"source:messenger:web",MESSENGER_WEB_SEARCH:"source:messenger:web_search",SAM_UFI:"source:sam:ufi",SHARE_DIALOG:"source:share:dialog",SEND_PLUGIN:"source:sendplugin",SMS:"source:sms",TEST:"source:test",TITAN_WAP:"source:titan:wap",TITAN_M_BASIC:"source:titan:m_basic",TITAN_M_FREE:"source:titan:m_free_basic",TITAN_M_JAPAN:"source:titan:m_japan",TITAN_M_MINI:"source:titan:m_mini",TITAN_M_TOUCH:"source:titan:m_touch",TITAN_M_APP:"source:titan:m_app",TITAN_M_TABLET:"source:titan:m_tablet",TITAN_M_ZERO:"source:titan:m_zero",TITAN_M_TALK:"source:titan:m_talk",TITAN_WEB:"source:titan:web",TITAN_FACEWEB_ANDROID:"source:titan:faceweb_android",TITAN_FACEWEB_BUFFY:"source:titan:faceweb_buffy",TITAN_FACEWEB_IPAD:"source:titan:faceweb_ipad",TITAN_FACEWEB_IPHONE:"source:titan:faceweb_iphone",TITAN_FACEWEB_UNKNOWN:"source:titan:faceweb_unknown",TITAN_API:"source:titan:api",TITAN_API_MOBILE:"source:titan:api_mobile",TITAN_ORCA:"source:titan:orca",TITAN_EMAIL_REPLY:"source:titan:emailreply",MOBILE:"source:mobile",PAGE_PLATFORM_API:"source:page_platform_api",PAGE_UNIFIED_INBOX:"source:page_unified_inbox",WHATSAPP_CALLBACK:"source:wa_callback",UNKNOWN:"source:unknown",WEB:"source:web",HELPCENTER:"source:helpcenter",NEW_SHARE_DIALOG:"source:share:dialog:new",PAID_PROMOTION:"source:paid_promotion",BUFFY_SMS:"source:buffy:sms",WEBRTC_MOBILE:"source:webrtc:mobile",MESSENGER_COMMERCE:"source:messenger:commerce",MESSENGER_BOT:"source:bot",MESSENGER_EMPLOYEE_ONLY_BOT:"source:bot:employee_only",MESSENGER_OMNIM:"source:messenger:omnim",PAGES_PRIVATE_REPLY:"source:pages:private_reply",MESSENGER_FORWARD_DIALOG:"source:messenger:forward",MESSENGER_AD:"source:messenger:ad",MARKETPLACE:"source:marketplace",MARKETPLACE_BOT:"source:marketplace:bot",CHEX_C2C:"source:chex:c2c",MESSENGER_LEAD_GEN:"source:messenger:lead_gen",PAGES_MESSAGE_SHORTLINK:"source:pages:message_shortlink",STICKER_SUBSCRIBE:"source:messenger:sticker_subscribe",PHOTO_TAG:"source:messenger:photo_tag",INTERNAL_TEST_INBOX:"source:internal:test_inbox",INTERNAL_TEST_PENDING:"source:internal:test_pending",INTERNAL_TEST_OTHER:"source:internal:test_other",INTERNAL_TEST_ML_ONLY:"source:internal:test_ml_only",JOB_SEARCH_APPLICATION:"source:job_search:application",MESSENGER_JOINABLE_LINK:"source:messenger:joinable_link",MESSENGER_ADD_WITH_APPROVAL:"source:messenger:add_with_approval",MESSENGER_SMS_BRIDGE_CONVERT:"source:messenger:sms_bridge_conversion",TINCAN_ORCA:"source:tincan:orca",TINCAN_IOS:"source:tincan:ios",TINCAN_UNKNOWN:"source:tincan:unknown",FACEBOOK_GROUPS_CHANNELS:"source:groups:channels",GROUP_COMMERCE:"source:group_commerce",INTERNAL_TOOL:"source:internal:tool",PAGES_PLATFORM:"source:pages:platform",PAGES_RECOMMENDATION:"source:pages:recommendation",PAGES_ORDER_MANAGEMENT:"source:pages:order_management",PAGE_AUTO_RESPONSE:"source:pages:auto_response",PAGES_INVITE:"source:pages:invite",PAGES_CHAT_EXTENSION:"source:pages:chat_extension",PAGES_COMPOSER:"source:pages:composer",PTX:"source:ptx",SAVED_CHAT_EXTENSION:"source:saved:chat_extension",CREATOR_PAGE_INITIATE_TO_CREATOR_PAGE:"source:pages:creator_page_initiate_to_creator_page",LIVE_VIDEO_CHAT:"source:live_video_chat",GEMSTONE:"source:gemstone",WATCH_PARTY:"source:watch_party",WORK_ACTIVATION_CARD_GENERAL_GROUP_CHAT:"source:work:activation_card_general_group_chat",SCHOOL_COMMUNITY:"source:school_community",SCHOOL_COMMUNITY_COURSE:"source:school_community_course",BELL_RESEARCH:"source:bell_research",BELL_MESSENGER_LINKED:"source:bell_messenger_linked",BELL_MESSENGER_UNLINKED:"source:bell_messenger_unlinked",BELL_MESSENGER_ONBOARD:"source:bell_messenger_onboard",PROFILE_MEET_NEW_FRIENDS:"source:profile_meet_new_friends",PROFILE_MEET_NEW_FRIENDS_REPLY:"source:profile_meet_new_friends_reply",FRIENDING_ADMIN_BUMP:"source:messenger_growth:friending_admin_bump",NEW_MESSENGER_USER_ADMIN_BUMP:"source:messenger_growth:new_messenger_user_admin_bump",EVENT_UPCOMING_BUMP:"source:messenger_growth:event_upcoming_bump",PHOTO_TAG_BUMP:"source:messenger_growth:photo_tag_bump",WALL_POST_BUMP:"source:messenger_growth:wall_post_bump",FRIENDVERSARY_BUMP:"source:messenger_growth:friendversary_bump",CUSTOMIZATION_UPSELL_BUMP:"source:messenger_growth:customization_upsell_bump",MESSENGER_BROADCASTFLOW:"source:messenger:broadcastflow",PAGE_COMMENT_MSG:"source:pages:question_triggered_convo",COMMENT_PIVOT:"source:messenger_growth:comment_pivot",PAGE_HOVERCARD:"source:pages:hovercard",INSTANT_GAMES_GAME_UPDATE:"source:instant_games_game_updates",INSTANT_GAMES_GAME_SHARE:"source:instant_games_game_share",INSTANT_GAMES_MATCH_MAKING:"source:instant_games_match_making",INSTANT_GAMES_GROUP_CREATION:"source:instant_games_group_creation",MOBILE_GAME_SHARE:"source:games_app:mobile_game_share",PAGE_EMAIL_REPLY:"source:pages:email_reply",PAGE_HOME_PAGE_PANEL:"source:page_home_page_panel",GROUPSYNC_MESSENGER_GROUP_CREATE:"source:groupsync:messenger_group_create",GROUPSYNC_SYNC_FROM_FB:"source:groupsync:sync_from_fb",GROUPSYNC_NAMING:"source:groupsync:naming",GROUPSYNC_THREAD_INFO_SYNC_FROM_FB:"source:groupsync:thread_info_sync",WORK_GROUP_SYNCED_CHAT_CREATION:"source:work:groupchat:creation",WORK_DEFAULT_GROUP_SYNCED_CHAT_CREATION:"source:work:defaultgroupchat:creation",WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC:"source:work:groupchat:member_sync",WORK_GROUP_SYNCED_CHAT_DESCRIPTION_SYNC:"source:work:groupchat:description_sync",WORK_GROUP_SYNCED_CHAT_NAME_SYNC:"source:work:groupchat:name_sync",PAGE_PQI_MESSAGE:"source:pages:pqi_message",PAGE_PLUGIN_MESSAGE:"source:pages:page_plugin_message",WORKPLACE_CHAT_DESKTOP:"source:workchat:desktop",WORKPLACE_QUICKCHAT:"source:workchat:quickchat",WORKPLACE_SIGNUP_PAGE_ADMIN_INVITE:"source:workplace:signup_page_admin_invite",WORKPLACE_APPROVALS:"source:workplace:approvals",CREATOR_STUDIO:"source:creator_studio",FB_GROUP_ADMINSHIP_SYNC:"source:fbgroup:adminship_sync",FB_GROUP_CHAT_MUTE_MEMBER:"source:fbgroup:mute_member",MESSENGER_ADS_PARTIAL_AUTOMATED_REMINDER:"source:ads_partial_automated:reminder",MENTORSHIP:"source:mentorship",MENTORSHIP_DISCUSSION_TOPIC:"source:mentorship_discussion_topic",VOD_CONVERSATION:"source:vod_conversation",LOCAL_SEARCH_SERVICES:"source:local_search_services",YOUTH_VAULT:"source:youth_vault",MESSENGER_KIDS:"source:messenger_kids",STORY_REPLY:"source:story_reply",LOCAL_DEV_PLATFORM:"source:local_dev_platform",INSTAGRAM_DIRECT:"source:instagram_direct",WA_MSGR_INTEROP:"source:wa-msgr-interop",C4G_CURRENT_GROUP_MEMBERS_ENTINTEGRITY:"source:c4g_current_group_members_entintegrity",FB_STORY:"source:fb_story",FB_INBOX:"source:messaging_inbox_in_blue",FB_PROFILE:"source:fb_profile",KOTOTORO:"source:kototoro"})}),null);
__d("MercurySyncDeltaHolder",["MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$2=new Map(),this.$3=[],this.$1=0}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var b=a.prototype;b.peek=function(){this.$3=this.$3.sort(function(a,b){return a-b});return this.$3[0]};b.getTop=function(){this.$3=this.$3.sort(function(a,b){return a-b});return this.$3.reverse()[0]};b.pop=function(){this.$3=this.$3.sort(function(a,b){return a-b});if(this.$3.length===0)return void 0;var a=this.$3.shift(),b=this.$2.get(a);this.$2["delete"](a);return{seqID:a,delta:b}};b.push=function(a,b){if(this.$2.has(a))return;this.$2.set(a,b);this.$3.push(a)};b.getLastSeqID=function(){return this.$1};b.updateLastSeqID=function(a){this.$1=a};b.updateLastSeqIDAndClearHistory=function(a){this.$2=new Map(),this.$3=[],this.$1=a};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("XMercuryUnseenThreadIDsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mercury/unseen_thread_ids/",{})}),null);
__d("XMessagingChangeMentionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_mentions_mute_thread/",{})}),null);
__d("XMessagingChangeReactionsMuteModeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/mercury/change_reactions_mute_thread/",{})}),null);
__d("MercuryServerRequests",["errorCode","invariant","Promise","Arbiter","AsyncResponse","BanzaiODS","Bootloader","ChannelConstants","ChatReliabilityInstrumentation","CurrentUser","EventProfiler","LogHistory","MercuryActionStatus","MercuryActionType","MercuryAPIArgsSource","MercuryAssert","MercuryDispatcher","MercuryErrorType","MercuryGlobalActionType","MercuryIDs","MercuryLogMessageType","MercuryMessageClientState","MercuryMessageIDs.bs","MercuryPayloadSource","MercurySendErrorLogger","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercuryServerRequestsConfig","MercuryServerSendMessageQueueOptions","MercuryServerSendMessageQueueRouter","MercuryServerURIs","MercurySingletonProvider","MercurySourceType","MercurySyncDeltaHolder","MercuryTagHelper","MercuryThreadIDMap","MessagingConfig","MessagingTag","MessengerEnvironment","MessengerWebStgTypedLoggerLite","XMercuryUnseenThreadIDsController","XMessagingChangeMentionsMuteModeController","XMessagingChangeReactionsMuteModeController","createObjectFrom","gkx","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerWebStgTypedLoggerLite").log,j=b("LogHistory").getInstance("mercury_server"),k=b("MercuryAPIArgsSource").MERCURY,l=30*1e3,m=!0;function n(a){return a.getError()?"_"+a.getError():""}function o(a,c){__p&&__p();var d=babelHelpers["extends"]({},a),e;if(c.threads){d.threads||(d.threads={});for(e in c.threads)d.threads[e]=Object.keys(b("createObjectFrom")((d.threads[e]||[]).concat(c.threads[e]||[])))}if(c.messages){d.messages||(d.messages={});for(e in c.messages){d.messages[e]||(d.messages[e]={});for(var f in c.messages[e])d.messages[e][f]?d.messages[e][f]=s(d.messages[e][f],c.messages[e][f]):d.messages[e][f]=c.messages[e][f]}}d.client=a.client||c.client;return d}function p(a,c){var d=Object.assign(b("createObjectFrom")(a.folders,!0),b("createObjectFrom")(c.folders,!0));a=a.client||c.client;return{folders:Object.keys(d),client:a}}function q(a,b){for(var c in b)if(a[c]&&typeof a[c]==="object")a[c]=s(a[c],b[c]);else if(b[c]&&typeof b[c]==="object"){var d={};Object.assign(d,b[c]);a[c]=d}return a}function r(a,b){return b}function s(a,b){var c=Math.max(a.limit,b.limit),d;!a.timestamp?d=b.timestamp:!b.timestamp?d=a.timestamp:d=Math.min(a.timestamp,b.timestamp);return{limit:c,timestamp:d}}function t(a,b){var c=a.client||b.client;c={ids:{},client:c};Object.assign(c.ids,a.ids,b.ids);return c}function u(a,c){__p&&__p();var d={},e,f=a.client||c.client;delete a.client;delete c.client;for(e in a)Object.assign(d,b("createObjectFrom")(a[e],e));for(e in c)Object.assign(d,b("createObjectFrom")(c[e],e));a={client:f};for(var g in d)e=d[g],a[e]||(a[e]=[]),a[e].push(g);return a}function v(a,c){var d=a.client||c.client;a=b("createObjectFrom")(a.ids,!0);c=b("createObjectFrom")(c.ids,!0);a=Object.assign(a,c);return{ids:Object.keys(a),client:d}}a=function(){__p&&__p();function a(a){__p&&__p();var c=this;this.$1=a;this.$2=0;this.$3={};this.$4={};this.__threadIDMap=b("MercuryThreadIDMap").getForFBID(this.$1);this.$5=b("MercuryDispatcher").getForFBID(this.$1);this.$6=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1);this.$7=new(b("MercuryServerSendMessageQueueOptions"))(function(a,b){c.__handleUpdate(a,b)},function(a){return c.$9(a)},function(a){c.$10(a)},function(a){return c.$11(a)},b("MercuryServerRequestsConfig").sendMessageTimeout,b("MessagingConfig").SEND_CONNECTION_RETRIES);this.$8=b("MercurySyncDeltaHolder").getForFBID(this.$1);this.$12()}a.getForFBID=function(a){return w.getForFBID(a)};a.get=function(){return w.get()};var c=a.prototype;c.fetchThreadlistInfo=function(a,c,d,e,f,g){d===void 0&&(d=b("MessagingTag").INBOX);f===void 0&&(f=k);m&&(m=!1,b("EventProfiler").tagCurrentActiveInteractionsAs("FirstMercuryThreadFetch"));var h=e?b("MercuryServerDispatcher").IMMEDIATE:null;f={client:f};f[d]={offset:a,limit:c,filter:e,before:g};this.__sendRequest(b("MercuryServerURIs").THREADLIST_INFO,f,h)};c.fetchPinnedThreadlistInfo=function(){var a={};a.onlyPinnedThreads=!0;this.__sendRequest(b("MercuryServerURIs").THREADLIST_INFO,a,null)};c.fetchUnseenThreadIDs=function(a,c){a===void 0&&b("MessagingTag").INBOX,c===void 0&&(c=k),this.__sendRequest(b("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString(),{})};c.fetchUnreadThreadIDs=function(a,c){c===void 0&&(c=k),this.__sendRequest(b("MercuryServerURIs").UNREAD_THREADS,{folders:[a],client:c})};c.fetchThreadData=function(a,c){__p&&__p();var d=this;c===void 0&&(c=k);b("MercuryAssert").allThreadID(a);var e={threads:{},client:c},f=[],g=[];a.forEach(function(a){__p&&__p();if(d.$3[a])return;d.$3[a]=!0;var c=d.__threadIDMap.getServerIDFromClientIDNow(a);a=b("MercuryIDs").tokenize(a);if(a.type=="user")f.push(a.value),e.threads.user_ids=f;else if(a.type=="thread")c?g.push(c):g.push(a.value),e.threads.thread_fbids=g;else if(a.type=="root")c&&(g.push(c),e.threads.thread_fbids=g);else if(a.type!="pending")throw new Error("Unknown thread type",a)});e.threads.user_ids&&e.threads.user_ids.forEach(function(a){a||(j.error("empty user id",JSON.stringify(f)),b("ChatReliabilityInstrumentation").logERROR("Invalid user ID sent to thread_info.php: "+JSON.stringify(f)))});e.threads.thread_fbids&&e.threads.thread_fbids.forEach(function(c){c||b("ChatReliabilityInstrumentation").logERROR("Invalid FBID sent to thread_info.php: "+JSON.stringify(a))});for(var h in e.threads){this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,e);break}};c.ensureThreadIsFetched=function(a,c){__p&&__p();c===void 0&&(c=k);if(!this.__threadIDMap.getClientIDFromServerIDNow(a)&&!this.$3[a]){if(!a){b("ChatReliabilityInstrumentation").logERROR("Ensure invalid FBID sent to thread_info.php");j.error("attempting to fetch empty thread_fbid. Bad idea!");return}this.$3[a]=!0;this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,{threads:{thread_fbids:[a]},client:c})}};c.fetchThreadMessages=function(a,c,d,e,f,g){__p&&__p();var h=this;g===void 0&&(g=k);b("MercuryAssert").isThreadID(a);var i;c=b("MercuryIDs").tokenize(a);var j=this.__threadIDMap.getServerIDFromClientIDNow(a),l=!1;if(j)j=j,i=c.type=="user"?"user_ids":"thread_fbids";else{j=c.value;switch(c.type){case"user":i="user_ids";l=!0;break;case"thread":i="thread_fbids";break}}var m={messages:{},threads:{},client:g};i?(m.messages[i]={},m.messages[i][j]={timestamp:e,limit:d},l&&(m.threads[i]=[j]),this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,m,f)):this.__threadIDMap.getServerIDFromClientID(a,function(a){m.messages.thread_fbids={},m.messages.thread_fbids[a]={timestamp:e,limit:d},h.__sendRequest(b("MercuryServerURIs").THREAD_INFO,m,f)})};c.handleThreadInfoError=function(a,c){__p&&__p();var d=a.getData();a=[];if(d.messages){for(var e in d.messages.thread_fbids){var f=this.__threadIDMap.getClientIDFromServerIDNow(e);f&&a.push(this.$13(f))}for(var g in d.messages.user_ids)a.push(this.$13("user:"+g));for(var h in d.messages.group_ids)a.push(this.$13("group:"+h))}a.length&&this.$5.handleUpdate({actions:a,from_client:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});if(d.threads&&(d.threads.user_ids||d.threads.thread_fbids||d.threads.group_ids||d.threads.thread_ids)){f=5;a=!0;!d.retry_count?(d.retry_count=0,d.messages&&delete d.messages):d.retry_count>=f&&!c&&!b("gkx")("678666")&&(a=!1,(d.threads.thread_ids||[]).concat(d.threads.thread_fbids||[]).forEach(function(a){a in this.$3&&delete this.$3[a]},this));if(a){c=Math.pow(2,Math.min(d.retry_count,f))*1e3;b("setTimeoutAcrossTransitions")(function(){j.log("retry_thread","{}"),this.__sendRequest(b("MercuryServerURIs").THREAD_INFO,d)}.bind(this),c);d.retry_count++}}};c.markFolderAsRead=function(a){this.__sendRequest(b("MercuryServerURIs").MARK_FOLDER_READ,{folder:a});a=[{action_type:b("MercuryGlobalActionType").MARK_ALL_READ,folder:a}];this.$5.handleUpdate({global_actions:a,from_client:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS})};c.changeThreadReadStatus=function(a,c,d,e,f,g){var h=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(i){var k;k={ids:(k={},k[i]=c,k),source:d,watermarkTimestamp:e,shouldSendReadReceipt:f,commerce_last_message_type:g};j.log("initiate_change_read_status",JSON.stringify({thread_id:a,thread_fbid:i,mark_as_read:c,watermarkTimestamp:e}));h.__sendRequest(b("MercuryServerURIs").CHANGE_READ_STATUS,k)})};c.changeThreadArchivedStatus=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var f={ids:{},source:d};f.ids[a]=c;e.__sendRequest(b("MercuryServerURIs").CHANGE_ARCHIVED_STATUS,f)})};c.changeThreadPinnedStatus=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var f={ids:{},source:d};f.ids[a]=c;e.__sendRequest(b("MercuryServerURIs").CHANGE_PINNED_STATUS,f)})};c.changeThreadPageFollowUpStatus=function(a,c,d){var e=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var f={ids:{},source:d};f.ids[a]=c;e.__sendRequest(b("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS,f)})};c.changeThreadFolder=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){var e={};e[c]=[a];d.__sendRequest(b("MercuryServerURIs").MOVE_THREAD,e)})};c.changeMutingOnThread=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("MercuryServerURIs").CHANGE_MUTE_THREAD,{thread_fbid:a,mute_settings:c,payload_source:k})})};c.changeMentionsMutingOnThread=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:a,mentions_mute_mode:c,payload_source:k})})};c.changeReactionsMutingOnThread=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI(),{thread_fbid:a,reactions_mute_mode:c,payload_source:k})})};c.markThreadSpam=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("MercuryServerURIs").MARK_SPAM,{id:a,source:c})})};c.unmarkThreadSpam=function(a,c){var d=this;b("MercuryAssert").isThreadID(a);this.__threadIDMap.getServerIDFromClientID(a,function(a){d.__sendRequest(b("MercuryServerURIs").UNMARK_SPAM,{id:a,source:c})})};c.deleteThread=function(a,b){this.deleteThreads([a],b)};c.deleteThreads=function(a,c){var d=this;b("promiseDone")(b("Promise").all(a.map(function(a){b("MercuryAssert").isThreadID(a);return new(b("Promise"))(function(b){return d.__threadIDMap.getServerIDFromClientID(a,b)})})).then(function(a){d.__sendRequest(b("MercuryServerURIs").DELETE_THREAD,{ids:a,source:c})}))};c.deleteMessages=function(a,c){b("MercuryMessageIDs.bs").getServerIDs(c||[],function(a){this.__sendRequest(b("MercuryServerURIs").DELETE_MESSAGES,{message_ids:a})}.bind(this))};c.sendDeliveryReceipts=function(a,c){b("MercuryMessageIDs.bs").getServerIDs(a||[],function(a){this.__sendRequest(b("MercuryServerURIs").DELIVERY_RECEIPTS,{message_ids:a,thread_ids:c})}.bind(this))};c.sendNewMessage=function(a,c){__p&&__p();var d=this;c===void 0&&(c=k);a.offline_threading_id||b("BanzaiODS").bumpEntityKey(2966,"chat.web","missing_otid_on_send");if(a.client_state&&a.client_state!==b("MercuryMessageClientState").SEND_TO_SERVER)return;var e=b("MercuryIDs").tokenize(a.thread_id),f=e.type,g=babelHelpers["extends"]({},a);g.thread_id=null;f=="user"?(g.other_user_fbid=e.value,this.$14(g,c)):f=="thread"?(g.thread_fbid=e.value,this.$14(g,c)):f=="root"&&e.value==g.offline_threading_id?(g.client_thread_id=a.thread_id,this.$14(g,c)):(b("MercuryIDs").isLocalThread(a.thread_id)||h(0,5587,a.thread_id),this.__threadIDMap.getServerIDFromClientID(a.thread_id,function(a){g.thread_fbid=a,d.$14(g,c)}));this.$15("send_msg",a);b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){b.markerStart(c.SEND_MESSAGE,a.offline_threading_id)},"MercuryServerRequests")};c.$15=function(a,c){try{var d=b("MessengerEnvironment").messengerdotcom?"messenger_dot_com":b("MessengerEnvironment").facebookdotcom?"Facebook Messenger (other)":"Other",e=b("MercuryTagHelper").get(c.tags||[],"entrypoint");i({attachment_infos:void 0,client_timestamp:Date.now(),entry_point:e,event_name:a,first_attachment_type:void 0,"interface":d,mid:c.message_id,offline_threading_id:c.offline_threading_id,other_user_fbid:b("MercuryIDs").isGroupChat(c.thread_id)?void 0:b("MercuryIDs").getThreadFBIDFromThreadID(c.thread_id),thread_fbid:b("MercuryIDs").isGroupChat(c.thread_id)?b("MercuryIDs").getThreadFBIDFromThreadID(c.thread_id):void 0})}catch(a){b("BanzaiODS").bumpEntityKey(2966,"chat.web","logging_error")}};c.$14=function(a,c){b("Arbiter").inform(b("ChannelConstants").ATTEMPT_RECONNECT),this.$4[a.message_id]=Date.now(),b("MercuryServerSendMessageQueueRouter").getForFBID(this.$1).enqueue(a.other_user_fbid||a.thread_fbid||a.client_thread_id,this.$7,c,a)};c.__getSendMessageQueueOptions=function(){return this.$7};c.markSeen=function(){var a=this.$2;this.__sendRequest(b("MercuryServerURIs").MARK_SEEN,{seen_timestamp:a})};c.$16=function(a,c,d,e){__p&&__p();a=a.getData();a=a.message_batch||[a];j.debug("handle_send_message_error_common",JSON.stringify({reliability_error_status:d,request_error_status:c,error_data:e,message_list:a}));b("ChatReliabilityInstrumentation").logERROR("send_message_fail");var f=a.map(function(a){a={action_type:b("MercuryActionType").SEND_MESSAGE,other_user_fbid:a.other_user_fbid,thread_fbid:a.thread_fbid,client_message_id:a.message_id,message_id:a.message_id,client_thread_id:a.client_thread_id,status:c,error_data:e};return a});f.forEach(function(a){a.action_type===b("MercuryActionType").SEND_MESSAGE&&a.status===b("MercuryActionStatus").ERROR&&this.__logMercurySendError(a)},this);d={actions:f,payload_source:b("MercuryPayloadSource").CLIENT_HANDLE_ERROR};b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,b){f.map(function(c){a.markerEnd(b.SEND_MESSAGE,"FAIL",c.client_message_id)})},"MercuryServerRequests");this.$6.handleUpdate(d)};c.handleSendMessageError=function(a){var c=a.getPayload(),d=null,e=null;c&&c.error_payload?(d=b("MercuryActionStatus").UNCONFIRMED,e="send_error"):(d=b("MercuryActionStatus").ERROR,e="request_error"+n(a));c=a.error;c===1404102?b("AsyncResponse").verboseErrorHandler(a):(c===1545052||c===1409009||c===1409008||c===1409007||c===1409006||c===1545083||c===1545084)&&b("AsyncResponse").defaultErrorHandler(a);c=/<.*>/.test(a.getErrorDescription())?a.getErrorSummary():a.getErrorDescription();this.$16(a.getRequest(),d,e,{type:b("MercuryErrorType").SERVER,code:a.getError(),description:c,is_transient:a.isTransient()})};c.handleSendMessageTransportError=function(a){this.$16(a.getRequest(),b("MercuryActionStatus").ERROR,"transport_error"+n(a),{type:b("MercuryErrorType").TRANSPORT,code:a.getError(),is_transient:!0})};c.handleSendMessageTimeout=function(a){this.$16(a,b("MercuryActionStatus").ERROR,"transport_timeout",{type:b("MercuryErrorType").TIMEOUT,is_transient:!0})};c.getLastActionTimestamp=function(){return this.$2};c.__logMercurySendError=function(a){b("MercurySendErrorLogger").log(a)};c.updateLastActionTimestamp=function(a){var b=Date.now()-1e3*60*60*24;a&&a>b&&(this.$2=Math.max(this.$2,a))};c.markThreadFetched=function(a){delete this.$3[a]};c.$13=function(a){return{action_type:b("MercuryActionType").LOG_MESSAGE,thread_id:a,message_id:a,timestamp:Date.now(),is_unread:!1,source:b("MercurySourceType").UNKNOWN,log_message_body:"",log_message_type:b("MercuryLogMessageType").SERVER_ERROR,log_message_data:{}}};c.__getForAsyncRequest=function(c){c=c.getData();c=c.request_user_id?c.request_user_id:b("CurrentUser").getID();return a.getForFBID(c)};c.__handleUpdate=function(a,c){a.payload_source===b("MercuryPayloadSource").SERVER_SEND_MESSAGE&&b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){var d=a.actions&&a.actions[0]&&a.actions[0].client_message_id;d&&b.markerEnd(c.SEND_MESSAGE,"SUCCESS",d)},"MercuryServerRequests"),this.__getForAsyncRequest(c).$6.handleUpdate(a)};c.$17=function(a){var b=this.__getForAsyncRequest(a);b.handleThreadInfoError(a)};c.$18=function(a){var b=this.__getForAsyncRequest(a);b.handleThreadInfoError(a,!0)};c.$9=function(a){var b=this.__getForAsyncRequest(a.getRequest());b.handleSendMessageError(a)};c.$10=function(a){var b=this.__getForAsyncRequest(a.getRequest());b.handleSendMessageTransportError(a)};c.$11=function(a){var b=this.__getForAsyncRequest(a);b.handleSendMessageTimeout(a)};c.$12=function(){__p&&__p();var a=this,c,d=null;b("MercuryServerRequestsConfig").msgrRegion&&(d={name:"X-MSGR-Region",value:b("MercuryServerRequestsConfig").msgrRegion});c=(c={},c[b("MercuryServerURIs").THREAD_INFO]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_DEFERRED_MULTI,customHeader:d,batch_function:o,handler:function(b,c){return a.__handleUpdate(b,c)},error_handler:function(b){return a.$17(b.getRequest())},timeout_handler:function(b){return a.$18(b)},timeout:l},c[b("MercuryServerURIs").MARK_FOLDER_READ]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_READ_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){a.__handleUpdate(b,c);c=(b.threads||[]).map(function(a){return a&&a.thread_id});j.log("response_change_read_status",JSON.stringify({threads:c}))}},c[b("MercuryServerURIs").MARK_SEEN]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:r,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").THREADLIST_INFO]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:d,batch_function:q,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").MARK_SPAM]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").UNMARK_SPAM]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").UNREAD_THREADS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE_UNIQUE,customHeader:d,batch_function:p,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_ARCHIVED_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:t,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_PINNED_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:t,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_PAGE_FOLLOW_UP_STATUS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:t,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").DELETE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:v,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").DELETE_MESSAGES]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").DELIVERY_RECEIPTS]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").MOVE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").BATCH_SUCCESSIVE,customHeader:d,batch_function:u,handler:function(b,c){return a.__handleUpdate(b,c)}},c[b("MercuryServerURIs").CHANGE_MUTE_THREAD]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}},c);var e=b("XMercuryUnseenThreadIDsController").getURIBuilder().getURI().toString();c[e]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}};e=b("XMessagingChangeMentionsMuteModeController").getURIBuilder().getURI().toString();c[e]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}};e=b("XMessagingChangeReactionsMuteModeController").getURIBuilder().getURI().toString();c[e]={request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:d,handler:function(b,c){return a.__handleUpdate(b,c)}};b("MercuryServerDispatcher").registerEndpoints(c)};c.__sendRequest=function(a,c,d){if(this.$8)switch(a){case b("MercuryServerURIs").THREADLIST_INFO:case b("MercuryServerURIs").THREAD_INFO:c.cachius_min_seq_id=this.$8.getLastSeqID();break;default:break}b("MercuryServerDispatcher").trySend(a,c,d,this.$1)};c.__getFBID=function(){return this.$1};return a}();var w=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryThreadIDMap",["KeyedCallbackManager","MercuryAssert","MercuryIDs","MercurySingletonProvider"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a,this.$2=new(b("KeyedCallbackManager"))(),this.$3=new(b("KeyedCallbackManager"))()}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.setServerIDToClientID=function(a,b){var c=this.getClientIDFromServerIDNow(a);if(c){c!==b;return}this.forceSetServerIDToClientID(a,b)};c.forceSetServerIDToClientID=function(a,b){this.$2.setResource(a,b),this.$3.setResource(b,a)};c.setDeprecatedServerIDToClientID=function(a,b){a&&this.$2.setResource(a,b)};c.getClientIDFromServerIDNow=function(a){return this.$2.getResource(a)};c.getClientIDFromServerID=function(a,b){var c=this;this.$2.executeOrEnqueue(a,b);d(["MercuryServerRequests"],function(b){b.getForFBID(c.$1).ensureThreadIsFetched(a)})};c.getServerIDFromClientIDNow=function(a){return this.$3.getResource(a)};c.getServerIDFromClientID=function(a,c){var e=this;b("MercuryAssert").isThreadID(a);var f=this.$3.executeOrEnqueue(a,c);d(["MercuryServerRequests"],function(c){var d=e.$3.getUnavailableResources(f),g=b("MercuryIDs").tokenize(a);d.length&&g.type!="root"&&c.getForFBID(e.$1).fetchThreadData(d)})};c.hasClientIDForServerID=function(a){return!!this.getClientIDFromServerIDNow(a)};c.convertThreadIDIfAvailable=function(a){var b=this.getClientIDFromServerIDNow(a);return b||a};c.canLinkExternally=function(a){b("MercuryAssert").isThreadID(a);var c=b("MercuryIDs").tokenize(a);return c.type=="user"||!!this.getServerIDFromClientIDNow(a)};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryLoggingHelper",[],(function(a,b,c,d,e,f){__p&&__p();function g(a){return Array.from(a).slice(0,6).join("")}a={obfuscateThread:function(a){var b=babelHelpers["extends"]({},a);a&&a.snippet&&a.snippet.length>9&&(b.snippet=g(a.snippet)+"...");return b},obfuscateMessage:function(a){var b=babelHelpers["extends"]({},a);a&&a.body&&a.body.length>9&&(b.body=g(a.body)+"...");return b}};e.exports=a}),null);
__d("MercuryServerSendMessageQueueSimulatedError",["AsyncRequest","AsyncResponse"],(function(a,b,c,d,e,f){var g=9999;a={create:function(a){a=new(b("AsyncRequest"))(this.endpoint_uri).setData({message_batch:[a],client:this.client});var c=new(b("AsyncResponse"))(a,{});Object.assign(c,{error:g,silentError:!1,transientError:!0,request:a});return c}};e.exports=a}),null);
__d("XMessagingSendController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/send/",{})}),null);
__d("MercuryServerSendMessageQueue",["fbt","BanzaiODS","ChatReliabilityInstrumentation","CurrentUser","LogHistory","MercuryIDs","MercuryLoggingHelper","MercuryServerDispatcher","MercuryServerRequestsConfig","MercuryServerSendMessageQueueSimulatedError","MercurySyncDeltaHandler","MessengerAttachmentTransformerForSend.bs","MessengerObjectAssociationType","MessengerState.bs","Run","XMessagingSendController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LogHistory").getInstance("mercury_server_send_message_queue");a=function(){__p&&__p();function a(a,c,d,e){__p&&__p();var f=this;this.pending_message=null;this.queue=[];this.$6=function(){return f.queue.length||f.pending_message?g._("You haven't sent your message yet. Do you want to leave without sending?"):void 0};this.sender_id=a;this.queue_id=c;this.$2=d.success_handler;this.$1=d.error_handler;this.$4=d.transport_error_handler;this.$3=d.timeout_handler;this.$5=b("MercurySyncDeltaHandler").getForFBID(this.sender_id);this.client=e;b("Run").onBeforeUnload(this.$6,!1);a=null;b("MercuryServerRequestsConfig").msgrRegion&&(a={name:"X-MSGR-Region",value:b("MercuryServerRequestsConfig").msgrRegion});c=this.__getSendURI();c=(e={},e[c]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:b("MercuryServerDispatcher").IMMEDIATE,customHeader:a,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:d.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:d.connection_retries},e);b("MercuryServerDispatcher").registerEndpoints(c)}var c=a.prototype;c.__getSendURI=function(){return b("XMessagingSendController").getURIBuilder().getURI().toString()};c.__preparePayload=function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.replied_to_message)!=null?(c=c.message)!=null?c.message_id:c:c:c;var d=null,e=a.client_thread_id;if(b("MercuryIDs").isLocalThread(e)){e=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),e);if(e&&e.message_count===1&&e.object_association_type===b("MessengerObjectAssociationType").GENERAL_CHAT){d=(e=e)!=null?(e=e.associated_object)!=null?e.id:e:e}}e=c?b("MessengerState.bs").getServerMessageID(b("CurrentUser").getID(),c):null;return{client:this.client,action_type:a.action_type,app_id:a.app_id,audio_ids:a.audio_ids,body:a.body,client_thread_id:a.client_thread_id,ephemeral_ttl_mode:a.ephemeral_ttl_mode,file_ids:a.file_ids,gif_ids:a.gif_ids,has_attachment:a.has_attachment,image_ids:a.image_ids,location_attachment:a.location_attachment,lightweight_action_attachment:a.lightweight_action_attachment,log_message_data:a.log_message_data,log_message_type:a.log_message_type,message_id:a.message_id,message_source_data:a.message_source_data,montage_reply_data:a.montage_reply_data,offline_threading_id:a.offline_threading_id,other_user_fbid:a.other_user_fbid,photo_fbids:a.photo_fbids,shareable_attachment:a.shareable_attachment,signature_id:a.signatureID,source:a.source,specific_to_list:a.specific_to_list,sticker_id:a.sticker_id,tags:a.tags,thread_fbid:a.thread_fbid,timestamp:a.timestamp,ui_push_phase:a.ui_push_phase,video_ids:a.video_ids,platform_xmd:a.platform_xmd,profile_xmd:a.profile_xmd,replied_to_message_id:e,work_synced_group_id:d,to_list_md5:a.to_list_md5}};c.enqueue=function(a){this.queue.push(a),this.$7()};c.$7=function(){__p&&__p();if(this.pending_message||!this.queue.length){this.pending_message&&this.$8();return}this.pending_message=this.queue.shift();var a=this.__preparePayload(this.pending_message);for(var c in a)(a[c]===void 0||a[c]===null)&&delete a[c];if(!a.action_type){var d=b("MercuryLoggingHelper").obfuscateMessage(a);b("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller");h.debug("missing_action_type",JSON.stringify(d))}if(!a.message_id){d=b("MercuryLoggingHelper").obfuscateMessage(a);b("ChatReliabilityInstrumentation").logERROR("missing action type before sending to send controller"+JSON.stringify(d));h.debug("missing_message_id",JSON.stringify(d))}this.$9();b("MercuryServerDispatcher").trySend(this.__getSendURI(),a,null,this.sender_id,this.queue_id)};c.$10=function(){while(this.queue.length)this.$11(this.queue.shift())};c.$11=function(a){this.$1(b("MercuryServerSendMessageQueueSimulatedError").create(a)),h.error("mark_as_failed",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,message:b("MercuryLoggingHelper").obfuscateMessage(a)}))};c.handleSuccess=function(a,c){__p&&__p();var d=this;this.pending_message=null;var e=(a.actions||[]).map(function(a){__p&&__p();var c=babelHelpers["extends"]({},a);if(a.graphql_payload&&a.graphql_payload.length>0){var e=b("MessengerAttachmentTransformerForSend.bs").transform(d.sender_id,a.graphql_payload,a.message_id,a.for_page);c=Object.assign(c,{attachments:e})}e=(e=a)!=null?(e=e.log_message_data)!=null?e.graphql_image:e:e;if(e){e=b("MessengerAttachmentTransformerForSend.bs").transform(d.sender_id,[e],a.message_id,a.for_page);c=Object.assign(c,{log_message_data:{image:e[0]}})}return c});a.actions=e;this.resumeAfterSuccess(a,c)};c.resumeAfterSuccess=function(a,b){this.$2(a,b),this.$12(),this.$7()};c.handleError=function(a){this.pending_message=null,this.$12(),this.$1(a),this.$10()};c.handleTransportError=function(a){this.pending_message=null,this.$12(),this.$4(a),this.$10()};c.handleTimeout=function(a){this.pending_message=null,this.$12(),this.$3(a),this.$10()};c.$9=function(){this.$5.pause()};c.$12=function(){this.$5.resume()};c.$8=function(){h.debug("maybe_send_next_pending_message",JSON.stringify({fbid:this.sender_id,queue_id:this.queue_id,pending_message:b("MercuryLoggingHelper").obfuscateMessage(this.pending_message),queue:this.queue.map(function(a){return b("MercuryLoggingHelper").obfuscateMessage(a)})}));var a="send_queue.delayed.queue_length."+this.queue.length.toString();b("BanzaiODS").bumpEntityKey(2966,"chat.web",a)};return a}();e.exports=a}),null);
__d("MercurySingletonMixin",["CurrentUser"],(function(a,b,c,d,e,f){a={_getInstances:function(){this._instances||(this._instances={});return this._instances},get:function(){return this.getForFBID(b("CurrentUser").getID())},getForFBID:function(a){var b=this._getInstances();b[a]||(b[a]=new this(a));return b[a]}};e.exports=a}),null);
__d("MercuryServerSendMessageQueueRouter",["BanzaiODS","LogHistory","MercuryServerSendMessageQueue","MercurySingletonMixin"],(function(a,b,c,d,e,f){__p&&__p();var g=b("LogHistory").getInstance("mercury_server_send_message_queue_router"),h="chat.web.send_queue_router";b("BanzaiODS").setEntitySample(h,.1);a=function(){"use strict";function a(a){this.queues=new Map(),this.fbid=a}var c=a.prototype;c.enqueue=function(a,c,d,e){var f=this.queues.get(a);f===void 0&&(f=new(b("MercuryServerSendMessageQueue"))(this.fbid,a,c,d),this.queues.set(a,f),g.debug("added queue",JSON.stringify({fbid:this.fbid,queue_id:a})),b("BanzaiODS").bumpEntityKey(2966,h,"new_queue"));f.enqueue(e)};return a}();Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MercurySyncDataFetcherImpl",["invariant","Promise","AsyncResponse","Bootloader","CurrentUser","FBIDCheck","MercuryConfig","MercuryPayloadSource","MercuryThreadlistConstants","MessagingConfig","QE2Logger","UserActivity","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i=null,j=null,k={limit:b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT+1,folder:"inbox",tags:["INBOX"],timestamp:null,filter:null,includeDeliveryReceipts:!1,includeSeqID:!0},l={};function a(a){return new(b("Promise"))(function(b,c){m(a,b,c,0)})}function m(a,c,d,e){__p&&__p();if(!b("CurrentUser").isLoggedInNow()||e>b("MessagingConfig").syncFetchRetries){b("clearTimeout")(l[a]);d();return}var f=e===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,e);b("UserActivity").isOnTab()||(b("QE2Logger").logExposureForUser("mercury_dff_fetch_delay",a),f+=b("MercuryConfig").DFFD*Math.random());b("clearTimeout")(l[a]);l[a]=b("setTimeoutAcrossTransitions")(function(){__p&&__p();var f=!1,n=function(h){__p&&__p();if(f)return;if(h.errors&&h.errors.length>0){var k=h.errors[0].message;if(k){var l=function(){j&&i||g(0,3650),new j().setErrorMessage(k).setEvent(i.DFF_FAILURE).setQueryParams(a).log()};j&&i?l():b("Bootloader").loadModules(["MessengerWebGraphQLTypedLogger","MessengerWebGraphQLEvent"],function(a,b){j=a,i=b,l()},"MercurySyncDataFetcherImpl")}}f=!0;m(a,c,d,e+1)},o=function(){if(!b("CurrentUser").isLoggedInNow())return;h||g(0,3651);h.fetchAll(a,[k],!b("FBIDCheck").isUser_deprecated(a),"dff").then(function(d){f=!0,c(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},d,{payload_source:b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE}))),b("clearTimeout")(l[a])},n)};h?o():b("Bootloader").loadModules(["MessengerGraphQLThreadlistFetcher.bs"],function(a){h=a,o()},"MercurySyncDataFetcherImpl")},f)}function c(a,c,d){return new(b("Promise"))(function(b,e){n(a,c,d,b,e,0)})}function n(a,c,d,e,f,g){__p&&__p();if(g>b("MessagingConfig").syncFetchRetries){f();return}var h=g===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,g);b("setTimeoutAcrossTransitions")(function(){var h=!1,i=function(b){if(h)return;h=!0;n(a,c,d,e,f,g+1)};b("Bootloader").loadModules(["MessengerThreadDFFFetcher.bs"],function(f){return f.fetch(a,{id:c,limit:d},!b("FBIDCheck").isUser_deprecated(a)).then(function(a){h=!0,e(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},a,{payload_source:b("MercuryPayloadSource").SERVER_INVALIDATE_THREAD_STATE})))},i)},"MercurySyncDataFetcherImpl")},h)}function d(a,c,d){return new(b("Promise"))(function(b,e){o(a,c,d,b,e,0)})}function o(a,c,d,e,f,g){__p&&__p();if(g>b("MessagingConfig").syncFetchRetries){f();return}var h=g===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,g);b("setTimeoutAcrossTransitions")(function(){var h=!1,i=function(b){if(h)return;h=!0;o(a,c,d,e,f,g+1)};b("Bootloader").loadModules(["MessengerMessageDFFFetcher.bs"],function(f){return f.fetch(a,{thread_id:c,message_id:d},!b("FBIDCheck").isUser_deprecated(a)).then(function(a){h=!0,e(new(b("AsyncResponse"))(null,babelHelpers["extends"]({},a)))},i)},"MercurySyncDataFetcherImpl")},h)}e.exports={fetchThreadlistFromGraphQL:a,fetchThreadFromGraphQL:c,fetchMessageFromGraphQL:d}}),null);
__d("MercurySyncDataFetcher",["Promise","LogHistory","MercurySyncDataFetcherImpl","MessagingConfig","WebGraphQLConfig","clearTimeout","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LogHistory").getInstance("mercury_sync_data_fetcher");function a(){var a=0;for(var c=0;c<b("MessagingConfig").syncFetchRetries;c++){var d=c===0?0:b("MessagingConfig").syncFetchInitialTimeoutMs*Math.pow(b("MessagingConfig").syncFetchTimeoutMultiplier,c);a+=d+b("MessagingConfig").syncFetchRequestTimeoutMs}return a}var h=a();function c(a){var c=null;return new(b("Promise"))(function(d,e){var f=function(a){g.error("fetch_threadlist_graphql_timeout",JSON.stringify({timeout:h})),b("clearTimeout")(c),e(a)};c=b("setTimeoutAcrossTransitions")(f,Math.max(h,b("WebGraphQLConfig").timeout*b("MessagingConfig").syncFetchRetries));b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchThreadlistFromGraphQL(a),function(a){b("clearTimeout")(c),d(a)},f)})}function d(a,c,d){return new(b("Promise"))(function(e,f){var i=function(a){g.error("fetch_thread_graphql_timeout",JSON.stringify({timeout:h})),f(a)},j=b("setTimeoutAcrossTransitions")(i,h);b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchThreadFromGraphQL(a,c,d),function(a){b("clearTimeout")(j),e(a)},i)})}function f(a,c,d){return new(b("Promise"))(function(e,f){var i=function(a){g.error("fetch_message_graphql_timeout",JSON.stringify({timeout:h})),f(a)},j=b("setTimeoutAcrossTransitions")(i,h);b("promiseDone")(b("MercurySyncDataFetcherImpl").fetchMessageFromGraphQL(a,c,d),function(a){b("clearTimeout")(j),e(a)},i)})}e.exports={fetchThreadlistFromGraphQL:c,fetchThreadFromGraphQL:d,fetchMessageFromGraphQL:f,getMaxTimeoutMs:a}}),null);
__d("MercurySyncDFFDataFetcher",["Promise","CurrentUser","MercurySingletonProvider","MercurySyncDataFetcher","MercuryThreadIDMap","MessengerState.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a,this.__threadIDMap=b("MercuryThreadIDMap").getForFBID(this.$1)}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.fetchInvalidateGlobalStateForGraphQL=function(){return this.$1&&this.$1!=="0"&&b("CurrentUser").isLoggedIn()?b("MercurySyncDataFetcher").fetchThreadlistFromGraphQL(this.$1):new(b("Promise"))(function(a,b){return b(!0)})};c.fetchInvalidateThreadState=function(a,c){var d=11,e=3;a=a||c;c=this.__threadIDMap.getClientIDFromServerIDNow(a);if(!c)return b("Promise").resolve({getPayload:function(){return{}}});e=e+b("MessengerState.bs").getCurrentlyLoadedMessages(this.$1,c).length;return!a?b("Promise").resolve({getPayload:function(){return{}}}):b("MercurySyncDataFetcher").fetchThreadFromGraphQL(this.$1,a,Math.max(e,d))};c.fetchInvalidateMessage=function(a,c,d){a=a||c;return!a?b("Promise").resolve({getPayload:function(){return{}}}):b("MercurySyncDataFetcher").fetchMessageFromGraphQL(this.$1,a,d)};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncFakeDFFSender",["Arbiter","ChannelConstants","LogHistory","MercurySingletonProvider","MercurySyncDeltaTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ChannelConstants").getArbiterType(b("ChannelConstants").FAKE_DFF),h=b("LogHistory").getInstance("dff_sender");a=function(){__p&&__p();a.getForFBID=function(a){return i.getForFBID(a)};a.get=function(){return i.get()};function a(a){this.$1=a}var c=a.prototype;c.sendGlobalDFF=function(){h.debug("sendGlobalDFF",JSON.stringify({fbid:this.$1})),b("Arbiter").inform(g,{obj:{delta:{"class":b("MercurySyncDeltaTypes").ForcedFetch},queue:this.$1}})};c.sendThreadDFF=function(a,c){h.debug("sendThreadDFF",JSON.stringify({fbid:this.$1,otherUserFBID:a,threadFBID:c})),b("Arbiter").inform(g,{obj:{delta:{"class":b("MercurySyncDeltaTypes").ForcedFetch,threadKey:{otherUserFbId:a,threadFbId:c}},queue:this.$1}})};c.sendMessageDFF=function(a,c,d){h.debug("sendMessageDFF",JSON.stringify({fbid:this.$1,otherUserFBID:a,threadFBID:c,messageID:d})),b("Arbiter").inform(g,{obj:{delta:{"class":b("MercurySyncDeltaTypes").ForcedFetch,threadKey:{otherUserFbId:a,threadFbId:c},messageId:d},queue:this.$1}})};return a}();var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncChannelMonitor",["Arbiter","ChannelConstants","CurrentUser","MercurySingletonProvider","MercurySyncFakeDFFSender","MessengerMQTTGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){var c=this;this.handleAwfulChannelEvent=function(){if(!b("CurrentUser").isLoggedInNow()){c.killSubscriptions();return}b("MercurySyncFakeDFFSender").getForFBID(c.$1).sendGlobalDFF()};this.$1=a;this.$2=!1}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.setupSubscriptions=function(){if(b("MessengerMQTTGating").isEnabled())return;this.$2||(this.$4=b("Arbiter").subscribe(b("ChannelConstants").JUMPSTART,this.handleAwfulChannelEvent),this.$3=b("Arbiter").subscribe(b("ChannelConstants").THROTTLED,this.handleAwfulChannelEvent),this.$2=!0)};c.killSubscriptions=function(){this.$2&&(b("Arbiter").unsubscribe(this.$4),b("Arbiter").unsubscribe(this.$3),this.$2=!1)};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({ARBITER_EVENT_INVALID_STATE:"SYNC:INVALID_STATE",ARBITER_EVENT_INVALID_STATE_RETRY:"SYNC:INVALID_STATE_RETRY",ARBITER_EVENT_INVALID_STATE_RECOVER:"SYNC:INVALID_STATE_RECOVER"});e.exports=a}),null);
__d("MercurySyncTopicType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DELTA:"delta",DELTAFLOW:"deltaflow",DELTAFLOWREJECT:"deltaflowreject"})}),null);
__d("MercurySyncDeltaHandler",["invariant","Arbiter","Bootloader","ChatReliabilityInstrumentation","CurrentUser","LogHistory","MercuryDelayedDispatcher","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MercurySyncChannelMonitor","MercurySyncConstants","MercurySyncDeltaHolder","MercurySyncDeltaTypes","MercurySyncEventsProxy","MercurySyncForcedFetchHandler","MercurySyncHolesTypedLogger","MercurySyncTopicType","MessengerDeltaTransformer.bs","gkx","onAfterLoadSafe","performanceAbsoluteNow","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LogHistory").getInstance("mercury_sync_delta_handler"),i="app_id:219994525426954";a=function(){__p&&__p();a.getForFBID=function(a){return j.getForFBID(a)};a.get=function(){return j.get()};function a(a){__p&&__p();var c=this;this.$1=a;this.$2=b("MercurySyncForcedFetchHandler").getForFBID(this.$1);this.__payloadPreprocessor=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1);this.__delayedDispatcher=b("MercuryDelayedDispatcher").getForFBID(this.$1);this.$3=b("MercurySyncDeltaHolder").getForFBID(this.$1);this.$4=0;this.$9=b("MercurySyncChannelMonitor").getForFBID(this.$1);this.$5=[];this.$12=b("MercurySyncEventsProxy").getForFBID(this.$1);h.debug("constructor",JSON.stringify({fbid:this.$1}));b("Arbiter").subscribe(b("MercurySyncEventsProxy").Events.INIT,function(a,d){__p&&__p();h.debug("initSeqID",JSON.stringify(d));a=d&&d.seqID;d=d&&d.fbid;if(!d)return;if(d!==c.$1)return;a?c.$3.updateLastSeqID(a):c.$3.updateLastSeqID(0);c.$14();c.$13=b("Arbiter").subscribe("messenger-mqtt-drop-down-to-channel",function(){c.$15(!0),c.$7&&b("Arbiter").unsubscribe(c.$7),c.$16(),c.$14()});b("gkx")("678667")&&b("onAfterLoadSafe")(function(){b("Bootloader").loadModules(["MessengerSyncSeqIDSanityCheck"],function(a){a.getForFBID(c.$1).init()},"MercurySyncDeltaHandler")})})}var c=a.prototype;c.$16=function(){var a=this;this.$7=b("Arbiter").subscribe(this.$12.getArbiterType(b("MercurySyncEventsProxy").Events.FLOW),function(b,c){a.$11||a.$14()})};c.$14=function(){__p&&__p();var a=this;h.debug("setUpSubscriptionsToRealTimeUpdates",JSON.stringify({fbid:this.$1}));this.$6=b("Arbiter").subscribe(this.$12.getArbiterType(b("MercurySyncEventsProxy").Events.DELTA),function(c,d){__p&&__p();c=d&&d.obj&&d.obj.queue;if(c&&c.toString()!==a.$1)return;c=d&&d.obj&&d.obj.delta;d=d&&d.obj&&d.obj.iseq;if(!c||!d)return;a.$17(d,b("MercurySyncTopicType").DELTA);a.$18(d,c);a.$3.push(d,c);a.$19()});this.$10=b("Arbiter").subscribe(this.$12.getArbiterType(b("MercurySyncEventsProxy").Events.FLOW_REJECT),function(b,c){b=c&&c.obj&&c.obj.queue;if(b&&b.toString()!==a.$1)return;a.$11&&a.$15()});this.$8=b("Arbiter").subscribe(this.$12.getArbiterType(b("MercurySyncEventsProxy").Events.FAKE_DFF),function(b,c){__p&&__p();b=c&&c.obj&&c.obj.queue;if(b&&b.toString()!==a.$1)return;b=c&&c.obj&&c.obj.delta;if(!b)return;if(a.$20(b))if(a.$5.some(function(b){return a.$20(b)}))return;else a.$5.push(b);else a.$5.push(b);a.$19()});this.$9.setupSubscriptions();this.$11=!0};c.$20=function(a){return a["class"]===b("MercurySyncDeltaTypes").ForcedFetch&&!a.threadKey&&!a.messageId};c.$19=function(){__p&&__p();if(this.$4>0)return;if(this.$5.length>0){var a=this.$5.shift();this.$21(this.$3.getLastSeqID(),a);this.$19()}a=this.$3.peek();if(!a)return;a=a-this.$3.getLastSeqID();if(a===1){var b=this.$3.pop();if(!b)return;var c=b.seqID;b=b.delta;this.$21(c,b);this.$19()}else a>1?this.$22():(this.$3.pop(),this.$19())};c.$21=function(a,c){this.$3.updateLastSeqID(a),c["class"]===b("MercurySyncDeltaTypes").ForcedFetch?(h.debug("DFF",JSON.stringify(c)),c.threadKey!==void 0&&c.messageId===void 0?this.$23(a,c):c.threadKey!==void 0&&c.messageId!==void 0?this.$24(a,c):(b("ChatReliabilityInstrumentation").logDFF_DELTA_INIT(JSON.stringify(c)),this.$25(a))):b("MessengerDeltaTransformer.bs").transform(this.$1,c)};c.$22=function(){var a=JSON.stringify({$26:this.$3.getLastSeqID(),nextSeqID:this.$3.peek()});h.warn("hole",a);var c=this.$3.peek();!c&&g(0,5132);c=c-1;b("ChatReliabilityInstrumentation").logDFF_HOLE_INIT(a);this.$25(c)};c.$27=function(a,c,d,e){var f=this;this.$4&&g(0,5134);this.$4++;h.debug("_scheduleDataFetch:start",JSON.stringify({seqID:a}));b("promiseDone")(c(),function(b){h.debug("_scheduleDataFetch:success",JSON.stringify({seqID:a})),f.$4--,d(a,b),f.$19()},function(b){h.error("_scheduleDataFetch:failure",JSON.stringify({seqID:a})),f.$4--,e(a,b),f.$19()})};c.emergencyDFF=function(a,b){this.$25(0,a,b)};c.$25=function(a,c,d){__p&&__p();var e=this;if(!b("CurrentUser").isLoggedInNow())return;this.$27(void 0,function(){return e.$2.processGlobalDFFForGraphQL()},function(a,d){a=d.getPayload();e.__payloadPreprocessor.handleUpdate(a);a.sequence_id&&(h.debug("_initiateGlobalDFF:success",JSON.stringify({seqID:a.sequence_id})),b("gkx")("678668")?e.$3.updateLastSeqIDAndClearHistory(a.sequence_id):e.$3.updateLastSeqID(a.sequence_id));b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER);c&&c(a.sequence_id)},function(f,g){h.error("_initiateGlobalDFF:failure",""),g?(e.$11&&e.$15(),d&&d()):(b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY),h.debug("_initiateGlobalDFF:retry",""),e.$25(a,c,d))})};c.$23=function(a,b){var c=this;this.$27(a,function(){return c.$2.processThreadDFF(a,b.threadKey,b.isLazy)},function(a,b){c.__payloadPreprocessor.handleUpdate(b.getPayload()),c.$3.updateLastSeqID(a)},function(){h.error("_initiateThreadDFF:failure",JSON.stringify(b));var d=babelHelpers["extends"]({},b);delete d.threadKey;c.$3.updateLastSeqID(a-1);c.$3.push(a,d)})};c.$24=function(a,c){__p&&__p();var d=this;this.$27(a,function(){return d.$2.processMessageDFF(a,c.threadKey,c.messageId,c.isLazy)},function(a,c){c=c.getPayload();var e=c.other_user_fbid?c.other_user_fbid:c.thread_fbid;c=[babelHelpers["extends"]({},c)];var f=b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE;d.__delayedDispatcher.handleUpdateWaitForThread({actions:c,payload_source:f},e);d.$3.updateLastSeqID(a)},function(){h.error("_initiateMessageDFF:failure",JSON.stringify(c));var b=babelHelpers["extends"]({},c);delete b.messageId;d.$3.updateLastSeqID(a-1);d.$3.push(a,b)})};c.$17=function(a,c){var d=a-this.$3.getLastSeqID();if(d!==1&&d!==0){if(!b("CurrentUser").isEmployee())return;new(b("MercurySyncHolesTypedLogger"))().setSeqID(a).setDifference(d).setTopicType(c).log()}};c.$18=function(a,c){__p&&__p();switch(c["class"]){case b("MercurySyncDeltaTypes").NewMessage:var d=b("performanceAbsoluteNow")();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,b){var e=c.messageMetadata.tags;Array.isArray(e)&&e.includes(i)&&a.markerEnd(b.SEND_MESSAGE,"SUCCESS",c.messageMetadata.offlineThreadingId,d)},"MercurySyncDeltaHandler");h.debug("message_delta",JSON.stringify({seqID:a,threadKey:c.messageMetadata.threadKey,messageId:c.messageMetadata.messageId}));break;case b("MercurySyncDeltaTypes").ReadReceipt:h.debug("read_receipt_delta",JSON.stringify({seqID:a,threadKey:c.threadKey,actionTimestampMs:c.actionTimestampMs,watermarkTimestampMs:c.watermarkTimestampMs}));break;case b("MercurySyncDeltaTypes").DeliveryReceipt:h.debug("delivery_receipt_delta",JSON.stringify({seqID:a,deliveredWatermarkTimestampMs:c.deliveredWatermarkTimestampMs,messageIds:c.messageIds}));break}};c.pause=function(){this.$4++};c.resume=function(){this.$4--,this.$19()};c.$15=function(a){a===void 0&&(a=!1),this.$11=!1,b("Arbiter").unsubscribe(this.$6),b("Arbiter").unsubscribe(this.$8),b("Arbiter").unsubscribe(this.$10),this.$9.killSubscriptions(),a||b("Arbiter").inform(b("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE)};return a}();var j=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercurySyncForcedFetchHandler",["Promise","MercurySingletonProvider","MercurySyncDFFDataFetcher","MercuryThreadIDMap","MessengerState.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return{getPayload:function(){return{sequence_id:a}}}}a=function(){__p&&__p();a.getForFBID=function(a){return h.getForFBID(a)};a.get=function(){return h.get()};function a(a){this.$1=a,this.$2=b("MercuryThreadIDMap").getForFBID(this.$1),this.$3=b("MercurySyncDFFDataFetcher").getForFBID(this.$1)}var c=a.prototype;c.processMessageDFF=function(a,c,d,e){__p&&__p();if(e){e=c.otherUserFbId!==void 0?c.otherUserFbId.toString():c.threadFbId.toString();e=this.$2.getClientIDFromServerIDNow(e);if(e===void 0)return b("Promise").resolve(g(a));e=b("MessengerState.bs").getMessagesFromIDs(this.$1,[d]);if(e.length===0)return b("Promise").resolve(g(a))}return this.$3.fetchInvalidateMessage(c.otherUserFbId,c.threadFbId,d)};c.processThreadDFF=function(a,c,d){if(d){d=c.otherUserFbId!==void 0?c.otherUserFbId.toString():c.threadFbId.toString();d=this.$2.getClientIDFromServerIDNow(d);if(d===void 0)return b("Promise").resolve(g(a))}return this.$3.fetchInvalidateThreadState(c.otherUserFbId,c.threadFbId)};c.processGlobalDFFForGraphQL=function(){return this.$3.fetchInvalidateGlobalStateForGraphQL()};return a}();var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MontageDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!1})}),null);
__d("MontageActions",["Bootloader","CurrentUser","MercuryServerPayloadPreprocessor","MontageDispatcher","WebGraphQL","keyMirror","promiseDone","uniqueID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({REQUEST_UPDATE:null,HAS_UPDATED:null,HANDLE_ACTION:null}),h=new Set();a={Types:g,requestUpdate:function(a){b("MontageDispatcher").dispatch({type:g.REQUEST_UPDATE,threadFBID:a})},montageThreadChanged:function(a,c){b("MontageDispatcher").dispatch({type:g.REQUEST_UPDATE,threadFBID:a})},hasUpdated:function(a){b("MontageDispatcher").dispatch({type:g.HAS_UPDATED,threadFBID:a})},loadMontageThreadForActor:function(a){if(h.has(a))return;h.add(a);b("Bootloader").loadModules(["MessengerMontageThreadQueryWebGraphQLQuery"],function(c){c=b("WebGraphQL").exec(new c({id:a}));b("promiseDone")(c,function(c){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({current_montage_thread:c}),h["delete"](a)})},"MontageActions")},deleteMontage:function(a,c){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_delete_message_delta:c})},handleNewMontageDelta:function(a,c){b("Bootloader").loadModules(["MessengerNewMontageMessageWebGraphQLQuery"],function(a){a=b("WebGraphQL").exec(new a({id:c.message_fbid}));b("promiseDone")(a,function(a){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_new_message_delta:a.montage_message})})},"MontageActions")},updatePollStickerChoice:function(a){b("Bootloader").loadModules(["MessengerState.bs","MessengerMontagePollVoteMutationWebGraphQLMutation"],function(c,d){b("MercuryServerPayloadPreprocessor").getForFBID(b("CurrentUser").getID()).handleUpdate({montage_poll_sticker_vote:[a]});c=b("WebGraphQL").exec(new d({input:{client_mutation_id:b("uniqueID")(),story_card_poll_id:a.pollID,option:a.optionVotedIndex,actor_id:b("CurrentUser").getID()}}));b("promiseDone")(c,function(a){},function(a){})},"MontageActions")}};e.exports=a}),null);
__d("RemovedMessageTombstoneContent",["fbt","CurrentUser","GenderConst","IntlVariations","MercuryIDs","MessengerParticipants.bs","MessengerState.bs","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getRemovedMessageTombstoneContent:function(a,c){__p&&__p();var d;d=((d=a.unsender)==null?void 0:d.id)||a.author;var e=b("MercuryIDs").getUserIDFromParticipantID(d),f=b("CurrentUser").getID();if(e===f)return this._getFbtForCurrentViewerAuthor();f=b("MessengerState.bs").getThreadMetaNow(f,a.thread_id);f=f==null?void 0:(f=f.custom_nickname)==null?void 0:f[e];f=f||((e=c.get(d))==null?void 0:e.short_name)||((f=a.unsender)==null?void 0:f.short_name)||((e=a.unsender)==null?void 0:e.name);e=(a=c.get(d))==null?void 0:a.gender;if(f)return this._getFbtForOtherAuthor(f,e);else return this._getFbtForUnknownAuthor()},getTombstoneContentForSnippet:function(a){var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c===b("CurrentUser").getID())return this._getFbtForCurrentViewerAuthor().toString();c=b("MessengerParticipants.bs").getNow(a);a=c&&c.short_name;c=c&&c.gender;if(a)return this._getFbtForOtherAuthor(a,c).toString();else return this._getFbtForUnknownAuthor().toString()},_getFbtForCurrentViewerAuthor:function(){return g._("You removed a message")},_getFbtForOtherAuthor:function(a,c){return g._({"*":"{name} removed a message"},[g._param("name",a,[1,c===b("GenderConst").FEMALE_SINGULAR?b("IntlVariations").GENDER_FEMALE:b("IntlVariations").GENDER_MALE])])},_getFbtForUnknownAuthor:function(){return g._("A contact removed a message")}};e.exports=a}),null);
__d("AutoFocusableLink.react",["Link.react","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.autoFocus&&b("ReactDOM").findDOMNode(this).focus()};return c}(b("Link.react"));e.exports=a}),null);
__d("MercuryTypingAnimation_DEPRECATED.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:b("joinClasses")("_4a0v _1x3z",this.props.className)},b("React").createElement("div",{className:"_4b0g"},b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"}),b("React").createElement("div",{className:"_5pd7"})))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerSecondarySearchFunnelConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({MESSENGER_DOT_COM:"messenger_dot_com",WWW:"www"});b=Object.freeze({ABANDON:"abandon",CREATE_GROUP:"create_group",ENTER_THREAD:"enter_thread",RESULT_SELECTED:"result_selected",SEND:"send",SINGLE_RESULT_SELECTED:"single_result_selected"});c=Object.freeze({ACTION:"action"});d=Object.freeze({EXISTING_TAB:"existing_tab",JEWEL:"jewel",SIDEBAR:"sidebar",COMPOSER:"composer"});f=Object.freeze({END:"end",IMPRESSIONS:"impressions",MICRO_SESSION_ENDED:"micro_session_ended",MICRO_SESSION_STARTED:"micro_session_started",QUERY_CHANGED:"query_changed",RESULT_SELECTED:"result_selected",REENTER_OMNIPICKER:"reentered_omnipicker",SOURCE_ENDED:"source_ended",SOURCE_STARTED:"source_started",START:"start",TOKEN_REMOVED:"token_removed",CLICK_OTHER_THREAD:"clicked_on_other_thread"});var g=Object.freeze({BROADCAST:"broadcast",GROUP_CREATION:"group_creation",OMNIPICKER:"omnipicker",SHARE:"share"}),h=Object.freeze({DIRECT_SEND:"direct_send",ADD:"add"}),i=Object.freeze({FINISHED:"finished",FAILED:"failed"}),j=Object.freeze({BROADCAST:9500,GROUP_CREATE:9501,M_APP_COMPOSER:9502}),k=Object.freeze({QUERY:"query",NO_QUERY:"no_query"}),l=Object.freeze({BOOTSTRAP:"bootstrap",LOCAL:"local",LOCAL_AND_SERVER:"local_and_server",LOCAL_CONTACTS:"local_contacts",ORDERED_GCF_FRIENDLIST:"local_ordered_gcf_friendlist",QUERY_CACHE:"query_cache",SERVER:"server",SHORT_PROFILES:"local_short_profiles",SUGGESTED_RECIPIENTS:"local_suggested_recipients"});e.exports={FUNNEL_NAME:"MESSENGER_SECONDARY_SEARCH_FUNNEL",CLIENTS:a,END_ACTIONS:b,END_REASONS:c,ENTRY_SURFACES:d,EVENTS:f,SEARCH_SURFACES:g,SELECTION_TYPES:h,SOURCE_STATUSES:i,LOGGING_IDS:j,MICRO_SESSION_TYPES:k,SOURCES:l}}),null);
__d("PhotoStoreCore",[],(function(a,b,c,d,e,f){__p&&__p();var g={actions:{UPDATE:"update"},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function(a){if(!this._photoCache[a])throw new Error("Photo cache requested for unknown set ID");return this._photoCache[a]},hasBeenCreated:function(a){return!!this._photoCache[a]},clearSetCache:function(a){delete this._photoCache[a],delete this._postCreateCallbacks[a]},getByIndex:function(a,b,c){this.getPhotoCache(a).getItemAtIndex(b,c)},getByIndexImmediate:function(a,b){return this._photoCache[a]?this._photoCache[a].getItemAtIndexImmediate(b):void 0},getItemsInAvailableRange:function(a){var b=this.getAvailableRange(a),c=[];for(var d=b.offset;d<b.length;d++)c.push(this.getByIndexImmediate(a,d));return c},getItemsAfterIndex:function(a,b,c,d){b=this.getCursorByIndexImmediate(a,b);this.fetchForward(a,b,c,d)},getAllByIDImmediate:function(a){var b=this,c=Object.keys(this._photoCache);return c.map(function(c){return b.getByIndexImmediate(c,b.getIndexForID(c,a))}).filter(function(a){return!!a})},getIndexForID:function(a,b){return this._photoCache[a]?this._photoCache[a].getIndexForID(b):void 0},getEndIndex:function(a){a=this.getAvailableRange(a);return a.offset+a.length-1},getCursorByIndexImmediate:function(a,b){b=this.getByIndexImmediate(a,b);return b?this._photoCache[a].getCursorForID(b.id):void 0},hasNextPage:function(a){var b=this.getCursorByIndexImmediate(a,this.getEndIndex(a));return this.getPhotoCache(a).hasNextPage(b)},getAvailableRange:function(a){return this.getPhotoCache(a).getAvailableRange()},hasLooped:function(a){return this.getPhotoCache(a).hasLooped()},fetchForward:function(a,b,c,d){this.getPhotoCache(a).getItemsAfterCursor(b,c,d)},fetchBackward:function(a,b,c,d){this.getPhotoCache(a).getItemsBeforeCursor(b,c,d)},executePostCreate:function(a,b){this._photoCache[a]?b&&b():this._postCreateCallbacks[a]=b},runPostCreateCallback:function(a){var b=this._postCreateCallbacks[a];b&&(b(),delete this._postCreateCallbacks[a])},setPreFetchCallback:function(a,b){this.getPhotoCache(a).setPreFetchCallback(b)},updateData:function(a){var b=a.set_id;!this._photoCache[b]?(this._photoCache[b]=new a.cache_class(a),this.runPostCreateCallback(b)):a.query_metadata.action==g.actions.UPDATE?this._photoCache[b].updateData(a):this._photoCache[b].addData(a)},updateFeedbackData:function(a){var b=Object.keys(a);b.forEach(function(b){return g.getAllByIDImmediate(b).forEach(function(c){c.feedback=a[b].feedback})})},reset:function(){var a=this;Object.keys(this._photoCache).forEach(function(b){return a.clearSetCache(b)})}};e.exports=g}),null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],(function(a,b,c,d,e,f){b("Arbiter").subscribe("update-photos",function(a,c){b("PhotoStoreCore").updateData(c)}),e.exports=b("PhotoStoreCore")}),null);
__d("BadgeHelper",["cx","fbt","DOM","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i={xsmall:"_5dzz",small:"_5dz-",medium:"_5dz_",large:"_5d-0",xlarge:"_5d-1"},j={bot:"_64nf",verified:"_56_f",trending:"_1gop",topcommenter:"_59t2",page_gray_check:"_5n3t",page_gray_check_solid:"_6w81",work:"_5d62",game_blue:"_59c6",work_non_coworker:"_2ad7",interest_community:"_3qcr",subscription:"_4fvy",inactive_user:"_7xv0"},k={bot:h._("Bot"),work_non_coworker:h._("Not part of your company")};function l(a,c){return b("joinClasses")(i[a],j[c],"_5dzy")}function m(a){return k[a]}function a(a,c){a=l(a,c);if(a){c=m(c);return b("DOM").create("span",{className:a},c?b("DOM").create("span",{className:"accessible_elem"},c):null)}}e.exports={getClasses:l,getAlt:m,renderBadge:a,sizes:Object.keys(i),types:Object.keys(j)}}),null);
__d("Badge.react",["BadgeHelper","React"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("BadgeHelper").getAlt(this.props.type);a=a?b("React").createElement("span",{className:"accessible_elem"},a):null;return b("React").createElement("span",{className:b("BadgeHelper").getClasses(this.props.size,this.props.type)},a)};return c}(b("React").Component);c.propTypes={size:a.oneOf(b("BadgeHelper").sizes),type:a.oneOf(b("BadgeHelper").types)};c.defaultProps={size:"xsmall",type:"verified"};e.exports=c}),null);
__d("InlineBlock.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").PropTypes;var h={baseline:null,bottom:"_6d",middle:"_6b",top:"_6e"};c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.alignv,d=a.height,e=a.fullWidth;a=babelHelpers.objectWithoutPropertiesLoose(a,["alignv","height","fullWidth"]);c=h[c];e="_6a"+(e?" _5u5j":"");var f=b("joinClasses")(e,c);if(d!=null){c=b("React").createElement("div",{className:b("joinClasses")("_6a",c),style:{height:d+"px"}});return b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses")(this.props.className,e),height:null}),c,b("React").createElement("div",{className:f},this.props.children))}else return b("React").createElement("div",babelHelpers["extends"]({},a,{className:b("joinClasses")(this.props.className,f)}),this.props.children)};return c}(b("React").Component);c.propTypes={alignv:a.oneOf(["baseline","bottom","middle","top"]),height:a.number,fullWidth:a.bool};c.defaultProps={alignv:"baseline",fullWidth:!1};e.exports=c}),null);
__d("PhotosMimeType",[],(function(a,b,c,d,e,f){var g={isImage:function(a){return h(a)[0]==="image"},isJpeg:function(a){var b=h(a);return g.isImage(a)&&(b[1]==="jpeg"||b[1]==="pjpeg")}};function h(a){return a.split("/")}e.exports=g}),null);
__d("DataTransfer",["PhotosMimeType","createArrayFromMixed","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=new RegExp("\r\n","g"),h="\n",i={"text/rtf":1,"text/html":1};function j(a){if(a.kind=="file")return a.getAsFile()}a=function(){"use strict";__p&&__p();function a(a){this.data=a,this.types=a.types?b("createArrayFromMixed")(a.types):[]}var c=a.prototype;c.isRichText=function(){if(this.getHTML()&&this.getText())return!0;return this.isImage()?!1:this.types.some(function(a){return i[a]})};c.getText=function(){var a;this.data.getData&&(!this.types.length?a=this.data.getData("Text"):this.types.indexOf("text/plain")!=-1&&(a=this.data.getData("text/plain")));return a?a.replace(g,h):null};c.getHTML=function(){if(this.data.getData)if(!this.types.length)return this.data.getData("Text");else if(this.types.indexOf("text/html")!=-1)return this.data.getData("text/html")};c.isLink=function(){return this.types.some(function(a){return a.indexOf("Url")!=-1||a.indexOf("text/uri-list")!=-1||a.indexOf("text/x-moz-url")!=-1})};c.getLink=function(){if(this.data.getData){if(this.types.indexOf("text/x-moz-url")!=-1){var a=this.data.getData("text/x-moz-url").split("\n");return a[0]}return this.types.indexOf("text/uri-list")!=-1?this.data.getData("text/uri-list"):this.data.getData("url")}return null};c.isImage=function(){__p&&__p();var a=this.types.some(function(a){return a.indexOf("application/x-moz-file")!=-1});if(a)return!0;a=this.getFiles();for(var c=0;c<a.length;c++){var d=a[c].type;if(!b("PhotosMimeType").isImage(d))return!1}return!0};c.getCount=function(){if(Object.prototype.hasOwnProperty.call(this.data,"items"))return this.data.items.length;else if(Object.prototype.hasOwnProperty.call(this.data,"mozItemCount"))return this.data.mozItemCount;else if(this.data.files)return this.data.files.length;return null};c.getFiles=function(){if(this.data.items)return Array.prototype.slice.call(this.data.items).map(j).filter(b("emptyFunction").thatReturnsArgument);else if(this.data.files)return Array.prototype.slice.call(this.data.files);else return[]};c.hasFiles=function(){return this.getFiles().length>0};return a}();e.exports=a}),null);
__d("DraftEditorTextNode.react",["invariant","React","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("UserAgent").isBrowser("IE <= 11");function i(a){return h?a.textContent==="\n":a.tagName==="BR"}var j=function(a){return h?b("React").createElement("span",{key:"A","data-text":"true",ref:a},"\n"):b("React").createElement("br",{key:"A","data-text":"true",ref:a})},k=function(a){return h?b("React").createElement("span",{key:"B","data-text":"true",ref:a},"\n"):b("React").createElement("br",{key:"B","data-text":"true",ref:a})};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$1=!1;return b}var d=c.prototype;d.shouldComponentUpdate=function(a){var b=this.$2,c=a.children==="";b instanceof Element||g(0,6158);return c?!i(b):b.textContent!==a.children};d.componentDidMount=function(){this.$1=!this.$1};d.componentDidUpdate=function(){this.$1=!this.$1};d.render=function(){var a=this;return this.props.children===""?this.$1?j(function(b){return a.$2=b}):k(function(b){return a.$2=b}):b("React").createElement("span",{key:this.$1?"A":"B","data-text":"true",ref:function(b){return a.$2=b}},this.props.children)};return c}(b("React").Component);e.exports=a}),null);
__d("fbjs/lib/CSSCore",["CSSCore"],(function(a,b,c,d,e,f){"use strict";e.exports=b("CSSCore")}),null);
__d("DraftEffects",["cx","BanzaiODS","CurrentUser","DraftEffectsPerSite","fbjs/lib/CSSCore","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("CurrentUser").isEmployee()?".employee":"",i=!1;a={initODS:function(){document.addEventListener("input",function(a){a.target.nodeType===1&&b("fbjs/lib/CSSCore").hasClass(a.target,"_5rpu")&&b("BanzaiODS").bumpEntityKey(2966,"draft_js","input_events"+h)})},handleExtensionCausedError:function(){b("BanzaiODS").bumpEntityKey(2966,"draft_js","extension_caused_errors"+h);if(i||!b("gkx")("676843"))return;i=!0;b("DraftEffectsPerSite").handleExtensionCausedError()}};e.exports=a}),null);
__d("DraftJsDebugLogging",["CurrentUser","DraftJsEventsTypedLogger","ScriptPath"],(function(a,b,c,d,e,f){"use strict";e.exports={logBlockedSelectionEvent:function(a){var c=a.anonymizedDom,d=a.extraParams;a=a.selectionState;new(b("DraftJsEventsTypedLogger"))().setEvent("blocked_selection_event").setAnonymizedDom(c).setExtraParams(d).setScriptPath(b("ScriptPath").getScriptPath()).setSelectionState(a).log()},logSelectionStateFailure:function(a){var c=a.anonymizedDom,d=a.extraParams;a=a.selectionState;b("CurrentUser").isEmployee()&&new(b("DraftJsEventsTypedLogger"))().setEvent("selection_state_failure").setAnonymizedDom(c).setExtraParams(d).setScriptPath(b("ScriptPath").getScriptPath()).setSelectionState(a).log()}}}),null);
__d("setDraftEditorSelection",["invariant","DraftEffects","DraftJsDebugLogging","containsNode","getActiveElement"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,b){if(!a)return"[empty]";a=i(a,b);if(a.nodeType===Node.TEXT_NODE)return a.textContent;a instanceof Element||g(0,3425);return a.outerHTML}function i(a,b){__p&&__p();var c=b!==void 0?b(a):[];if(a.nodeType===Node.TEXT_NODE){var d=a.textContent.length;return document.createTextNode("[text "+d+(c.length?" | "+c.join(", "):"")+"]")}d=a.cloneNode();d.nodeType===1&&c.length&&d.setAttribute("data-labels",c.join(", "));c=a.childNodes;for(var a=0;a<c.length;a++)d.appendChild(i(c[a],b));return d}function j(a,b){a=a;while(a)if(a instanceof Element&&a.hasAttribute("contenteditable"))return h(a,b);else a=a.parentNode;return"Could not find contentEditable parent of node"}function k(a){return a.nodeValue===null?a.childNodes.length:a.nodeValue.length}function c(c,d,e,f,g){__p&&__p();if(!b("containsNode")(document.documentElement,d))return;var h=a.getSelection(),i=c.getAnchorKey(),j=c.getAnchorOffset(),k=c.getFocusKey(),n=c.getFocusOffset(),o=c.getIsBackward();if(!h.extend&&o){var p=i,q=j;i=k;j=n;k=p;n=q;o=!1}p=i===e&&f<=j&&g>=j;q=k===e&&f<=n&&g>=n;if(p&&q){h.removeAllRanges();m(h,d,j-f,c);l(h,d,n-f,c);return}if(!o)p&&(h.removeAllRanges(),m(h,d,j-f,c)),q&&l(h,d,n-f,c);else{q&&(h.removeAllRanges(),m(h,d,n-f,c));if(p){i=h.focusNode;k=h.focusOffset;h.removeAllRanges();m(h,d,j-f,c);l(h,i,k,c)}}}function l(a,c,d,e){__p&&__p();var f=b("getActiveElement")();if(a.extend&&b("containsNode")(f,c)){d>k(c)&&b("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:j(c),extraParams:JSON.stringify({offset:d}),selectionState:JSON.stringify(e.toJS())});var g=c===a.focusNode;try{a.extend(c,d)}catch(h){b("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:j(c,function(b){var c=[];b===f&&c.push("active element");b===a.anchorNode&&c.push("selection anchor node");b===a.focusNode&&c.push("selection focus node");return c}),extraParams:JSON.stringify({activeElementName:f?f.nodeName:null,nodeIsFocus:c===a.focusNode,nodeWasFocus:g,selectionRangeCount:a.rangeCount,selectionAnchorNodeName:a.anchorNode?a.anchorNode.nodeName:null,selectionAnchorOffset:a.anchorOffset,selectionFocusNodeName:a.focusNode?a.focusNode.nodeName:null,selectionFocusOffset:a.focusOffset,message:h?""+h:null,offset:d},null,2),selectionState:JSON.stringify(e.toJS(),null,2)});throw h}}else{g=a.getRangeAt(0);g.setEnd(c,d);a.addRange(g.cloneRange())}}function m(a,c,d,e){var f=document.createRange();d>k(c)&&(b("DraftJsDebugLogging").logSelectionStateFailure({anonymizedDom:j(c),extraParams:JSON.stringify({offset:d}),selectionState:JSON.stringify(e.toJS())}),b("DraftEffects").handleExtensionCausedError());f.setStart(c,d);a.addRange(f)}e.exports=c}),null);
__d("DraftEditorLeaf.react",["invariant","DraftEditorTextNode.react","React","setDraftEditorSelection"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){__p&&__p();var a=this.props.selection;if(a==null||!a.getHasFocus())return;var c=this.props,d=c.block,e=c.start;c=c.text;d=d.getKey();c=e+c.length;if(!a.hasEdgeWithin(d,e,c))return;var f=this.leaf;f||g(0,5590);var h=f.firstChild;h||g(0,5591);var i;h.nodeType===Node.TEXT_NODE?i=h:h instanceof Element&&h.tagName==="BR"?i=f:(i=h.firstChild,i||g(0,5592));b("setDraftEditorSelection")(a,i,d,e,c)};d.shouldComponentUpdate=function(a){var b=this.leaf;b||g(0,5593);b=b.textContent!==a.text||a.styleSet!==this.props.styleSet||a.forceSelection;return b};d.componentDidUpdate=function(){this.$1()};d.componentDidMount=function(){this.$1()};d.render=function(){__p&&__p();var a=this,c=this.props.block,d=this.props.text;d.endsWith("\n")&&this.props.isLast&&(d+="\n");var e=this.props,f=e.customStyleMap,g=e.customStyleFn,h=e.offsetKey;e=e.styleSet;var i=e.reduce(function(a,b){var c={};b=f[b];b!==void 0&&a.textDecoration!==b.textDecoration&&(c.textDecoration=[a.textDecoration,b.textDecoration].join(" ").trim());return Object.assign(a,b,c)},{});if(g){g=g(e,c);i=Object.assign(i,g)}return b("React").createElement("span",{"data-offset-key":h,ref:function(b){return a.leaf=b},style:i},b("React").createElement(b("DraftEditorTextNode.react"),null,d))};return c}(b("React").Component);e.exports=a}),null);
__d("DraftOffsetKey",[],(function(a,b,c,d,e,f){"use strict";var g="-";a={encode:function(a,b,c){return a+g+b+g+c},decode:function(a){a=a.split(g).reverse();var b=a[0],c=a[1];a=a.slice(2);return{blockKey:a.reverse().join(g),decoratorKey:parseInt(c,10),leafKey:parseInt(b,10)}}};e.exports=a}),null);
__d("DraftEditorBlock.react",["cx","invariant","DraftEditorLeaf.react","DraftOffsetKey","React","Scroll","Style","UnicodeBidi","UnicodeBidiDirection","getElementPosition","getScrollPosition","getViewportDimensions","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=10,j=function(a,b){return a.getAnchorKey()===b||a.getFocusKey()===b};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return this.props.block!==a.block||this.props.tree!==a.tree||this.props.direction!==a.direction||j(a.selection,a.block.getKey())&&a.forceSelection};d.componentDidMount=function(){__p&&__p();var a=this.props.selection,c=a.getEndKey();if(!a.getHasFocus()||c!==this.props.block.getKey())return;a=this.$1;if(a==null)return;c=b("Style").getScrollParent(a);var d=b("getScrollPosition")(c);if(c===window){var e=b("getElementPosition")(a);e=e.y+e.height;var f=b("getViewportDimensions")().height;e=e-f;e>0&&window.scrollTo(d.x,d.y+e+i)}else{a instanceof HTMLElement||h(0,4852);f=a.offsetHeight+a.offsetTop;a=c.offsetHeight+d.y;e=f-a;e>0&&b("Scroll").setTop(c,b("Scroll").getTop(c)+e+i)}};d.$2=function(){__p&&__p();var a=this,c=this.props.block,d=c.getKey(),e=c.getText(),f=this.props.tree.size-1,g=j(this.props.selection,d);return this.props.tree.map(function(h,i){__p&&__p();var j=h.get("leaves"),k=j.size-1,l=j.map(function(j,l){var m=b("DraftOffsetKey").encode(d,i,l),h=j.get("start");j=j.get("end");return b("React").createElement(b("DraftEditorLeaf.react"),{key:m,offsetKey:m,block:c,start:h,selection:g?a.props.selection:null,forceSelection:a.props.forceSelection,text:e.slice(h,j),styleSet:c.getInlineStyleAt(h),customStyleMap:a.props.customStyleMap,customStyleFn:a.props.customStyleFn,isLast:i===f&&l===k})}).toArray(),m=h.get("decoratorKey");if(m==null)return l;if(!a.props.decorator)return l;var n=b("nullthrows")(a.props.decorator),o=n.getComponentForKey(m);if(!o)return l;n=n.getPropsForKey(m);m=b("DraftOffsetKey").encode(d,i,0);var p=j.first().get("start");j=j.last().get("end");var q=e.slice(p,j);h=c.getEntityAt(h.get("start"));var r=b("UnicodeBidiDirection").getHTMLDirIfDifferent(b("UnicodeBidi").getDirection(q),a.props.direction);q={contentState:a.props.contentState,decoratedText:q,dir:r,key:m,start:p,end:j,blockKey:d,entityKey:h,offsetKey:m};return b("React").createElement(o,babelHelpers["extends"]({},n,q),l)}).toArray()};d.render=function(){var a=this,c=this.props,d=c.direction;c=c.offsetKey;d="_1mf"+(d==="LTR"?" _1mj":"")+(d==="RTL"?" _1mk":"");return b("React").createElement("div",{"data-offset-key":c,className:d,ref:function(b){return a.$1=b}},this.$2())};return c}(b("React").Component);e.exports=a}),null);
__d("DraftEditorContents-core.react",["cx","DraftEditorBlock.react","DraftOffsetKey","React","joinClasses","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=function(a,b,c,d){return(a==="unordered-list-item"?"_3kpz":"")+(a==="ordered-list-item"?" _3kp_":"")+(c?" _3kq0":"")+(b===0?" _3kq1":"")+(b===1?" _3kq2":"")+(b===2?" _3kq3":"")+(b===3?" _3kq4":"")+(b>=4?" _3kq5":"")+(d==="LTR"?" _3kq6":"")+(d==="RTL"?" _3kq7":"")};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){__p&&__p();var b=this.props.editorState;a=a.editorState;var c=b.getDirectionMap(),d=a.getDirectionMap();if(c!==d)return!0;c=b.getSelection().getHasFocus();d=a.getSelection().getHasFocus();if(c!==d)return!0;c=a.getNativelyRenderedContent();d=b.isInCompositionMode();var e=a.isInCompositionMode();if(b===a||c!==null&&a.getCurrentContent()===c||d&&e)return!1;c=b.getCurrentContent();var f=a.getCurrentContent();b=b.getDecorator();var g=a.getDecorator();return d!==e||c!==f||b!==g||a.mustForceSelection()};d.render=function(){__p&&__p();var a=this.props,c=a.blockRenderMap,d=a.blockRendererFn,e=a.blockStyleFn,f=a.customStyleMap,g=a.customStyleFn,i=a.editorState,j=a.editorKey;a=a.textDirectionality;var k=i.getCurrentContent(),l=i.getSelection(),m=i.mustForceSelection(),n=i.getDecorator(),o=b("nullthrows")(i.getDirectionMap()),p=k.getBlocksAsArray(),q=[],r=null,s=null;for(var t=0;t<p.length;t++){var u=p[t],v=u.getKey(),w=u.getType(),x=d(u),y=void 0,z=void 0,A=void 0;x&&(y=x.component,z=x.props,A=x.editable);x=a?a:o.get(v);var B=b("DraftOffsetKey").encode(v,0,0);z={contentState:k,block:u,blockProps:z,blockStyleFn:e,customStyleMap:f,customStyleFn:g,decorator:n,direction:x,forceSelection:m,key:v,offsetKey:B,selection:l,tree:i.getBlockTree(v)};var C=c.get(w)||c.get("unstyled"),D=C.wrapper;C=C.element||c.get("unstyled").element;var E=u.getDepth(),F="";e&&(F=e(u));if(C==="li"){var G=s!==D||r===null||E>r;F=b("joinClasses")(F,h(w,E,G,x))}w=y||b("DraftEditorBlock.react");E={className:F,"data-block":!0,"data-editor":j,"data-offset-key":B,key:v};A!==void 0&&(E=babelHelpers["extends"]({},E,{contentEditable:A,suppressContentEditableWarning:!0}));G=b("React").createElement(C,E,b("React").createElement(w,z));q.push({block:G,wrapperTemplate:D,key:v,offsetKey:B});D?r=u.getDepth():r=null;s=D}x=[];for(var y=0;y<q.length;){F=q[y];if(F.wrapperTemplate){A=[];do A.push(q[y].block),y++;while(y<q.length&&q[y].wrapperTemplate===F.wrapperTemplate);C=b("React").cloneElement(F.wrapperTemplate,{key:F.key+"-wrap","data-offset-key":F.offsetKey},A);x.push(C)}else x.push(F.block),y++}return b("React").createElement("div",{"data-contents":"true"},x)};return c}(b("React").Component);e.exports=a}),null);
__d("DraftEditorDecoratedLeaves.react",["DraftOffsetKey","React","UnicodeBidi","UnicodeBidiDirection"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.block,d=a.children,e=a.contentState,f=a.decorator,g=a.decoratorKey,h=a.direction,i=a.leafSet;a=a.text;var j=c.getKey(),k=i.get("leaves"),l=f.getComponentForKey(g);f=f.getPropsForKey(g);j=b("DraftOffsetKey").encode(j,parseInt(g,10),0);g=a.slice(k.first().get("start"),k.last().get("end"));a=b("UnicodeBidiDirection").getHTMLDirIfDifferent(b("UnicodeBidi").getDirection(g),h);return b("React").createElement(l,babelHelpers["extends"]({},f,{contentState:e,decoratedText:g,dir:a,key:j,entityKey:c.getEntityAt(i.get("start")),offsetKey:j}),d)};return c}(b("React").Component);e.exports=a}),null);
__d("DraftEditorNode.react",["cx","DraftEditorDecoratedLeaves.react","DraftEditorLeaf.react","DraftOffsetKey","immutable","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();b("immutable").List;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.block,d=a.contentState,e=a.customStyleFn,f=a.customStyleMap,g=a.decorator,h=a.direction,i=a.forceSelection,j=a.hasSelection,k=a.selection;a=a.tree;var l=c.getKey(),m=c.getText(),n=a.size-1;a=this.props.children||a.map(function(a,o){var p=a.get("decoratorKey"),q=a.get("leaves"),r=q.size-1;q=q.map(function(a,d){var g=b("DraftOffsetKey").encode(l,o,d),h=a.get("start");a=a.get("end");return b("React").createElement(b("DraftEditorLeaf.react"),{key:g,offsetKey:g,block:c,start:h,selection:j?k:null,forceSelection:i,text:m.slice(h,a),styleSet:c.getInlineStyleAt(h),customStyleMap:f,customStyleFn:e,isLast:p===n&&d===r})}).toArray();return!p||!g?q:b("React").createElement(b("DraftEditorDecoratedLeaves.react"),{block:c,children:q,contentState:d,decorator:g,decoratorKey:p,direction:h,leafSet:a,text:m,key:o})}).toArray();return b("React").createElement("div",{"data-offset-key":b("DraftOffsetKey").encode(l,0,0),className:"_1mf"+(h==="LTR"?" _1mj":"")+(h==="RTL"?" _1mk":"")},a)};return c}(b("React").Component);e.exports=a}),null);
__d("DraftEditorBlockNode.react",["invariant","DraftEditorNode.react","DraftOffsetKey","React","ReactDOM","Scroll","Style","getElementPosition","getScrollPosition","getViewportDimensions","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=10;b("immutable").List;var i=function(a,b){return a.getAnchorKey()===b||a.getFocusKey()===b},j=function(a,b){var c=a.getNextSiblingKey();return c?b.getBlockForKey(c).getType()===a.getType():!1},k=function(a,c,d){__p&&__p();var e=[];for(var f=d.reverse(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;if(i.type!==c)break;e.push(i)}d.splice(d.indexOf(e[0]),e.length+1);i=e.reverse();c=i[0].key;d.push(b("React").cloneElement(a,{key:c+"-wrap","data-offset-key":b("DraftOffsetKey").encode(c,0,0)},i));return d},l=function(a,b){a=b.get(a.getType())||b.get("unstyled");var c=a.wrapper;a=a.element||b.get("unstyled").element;return{Element:a,wrapperTemplate:c}},m=function(a,b){b=b(a);if(!b)return{};a=b.component;var c=b.props;b=b.editable;return{CustomComponent:a,customProps:c,customEditable:b}},n=function(a,b,c,d,e){b={"data-block":!0,"data-editor":b,"data-offset-key":c,key:a.getKey()};c=d(a);c&&(b.className=c);e.customEditable!==void 0&&(b=babelHelpers["extends"]({},b,{contentEditable:e.customEditable,suppressContentEditableWarning:!0}));return b};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){var b=this.props,c=b.block,d=b.direction;b=b.tree;var e=!c.getChildKeys().isEmpty();c=c!==a.block||b!==a.tree||d!==a.direction||i(a.selection,a.block.getKey())&&a.forceSelection;return e||c};d.componentDidMount=function(){__p&&__p();var a=this.props.selection,c=a.getEndKey();if(!a.getHasFocus()||c!==this.props.block.getKey())return;a=b("ReactDOM").findDOMNode(this);c=b("Style").getScrollParent(a);var d=b("getScrollPosition")(c);if(c===window){var e=b("getElementPosition")(a);e=e.y+e.height;var f=b("getViewportDimensions")().height;e=e-f;e>0&&window.scrollTo(d.x,d.y+e+h)}else{a instanceof HTMLElement||g(0,4852);f=a.offsetHeight+a.offsetTop;a=c.offsetHeight+d.y;e=f-a;e>0&&b("Scroll").setTop(c,b("Scroll").getTop(c)+e+h)}};d.render=function(){__p&&__p();var a=this,d=this.props,e=d.block,f=d.blockRenderMap,g=d.blockRendererFn,h=d.blockStyleFn,o=d.contentState,p=d.decorator,q=d.editorKey,r=d.editorState,s=d.customStyleFn,t=d.customStyleMap,u=d.direction,v=d.forceSelection,w=d.selection;d=d.tree;var x=null;e.children.size&&(x=e.children.reduce(function(p,s){var d=b("DraftOffsetKey").encode(s,0,0),t=o.getBlockForKey(s),e=m(t,g),i=e.CustomComponent||c,u=l(t,f),v=u.Element;u=u.wrapperTemplate;var w=n(t,q,d,h,e);s=babelHelpers["extends"]({},a.props,{tree:r.getBlockTree(s),blockProps:e.customProps,offsetKey:d,block:t});p.push(b("React").createElement(v,w,b("React").createElement(i,s)));if(!u||j(t,o))return p;k(u,v,p);return p},[]));var y=e.getKey(),z=b("DraftOffsetKey").encode(y,0,0),A=m(e,g),B=A.CustomComponent;B=B!=null?b("React").createElement(B,babelHelpers["extends"]({},this.props,{tree:r.getBlockTree(y),blockProps:A.customProps,offsetKey:z,block:e})):b("React").createElement(b("DraftEditorNode.react"),{block:e,children:x,contentState:o,customStyleFn:s,customStyleMap:t,decorator:p,direction:u,forceSelection:v,hasSelection:i(w,y),selection:w,tree:d});if(e.getParentKey())return B;x=l(e,f);s=x.Element;t=n(e,q,z,h,A);return b("React").createElement(s,t,B)};return c}(b("React").Component);e.exports=a}),null);
__d("DraftEditorContentsExperimental.react",["DraftEditorBlockNode.react","DraftOffsetKey","React","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){__p&&__p();var b=this.props.editorState;a=a.editorState;var c=b.getDirectionMap(),d=a.getDirectionMap();if(c!==d)return!0;c=b.getSelection().getHasFocus();d=a.getSelection().getHasFocus();if(c!==d)return!0;c=a.getNativelyRenderedContent();d=b.isInCompositionMode();var e=a.isInCompositionMode();if(b===a||c!==null&&a.getCurrentContent()===c||d&&e)return!1;c=b.getCurrentContent();var f=a.getCurrentContent();b=b.getDecorator();var g=a.getDecorator();return d!==e||c!==f||b!==g||a.mustForceSelection()};d.render=function(){__p&&__p();var a=this.props,c=a.blockRenderMap,d=a.blockRendererFn,e=a.blockStyleFn,f=a.customStyleMap,g=a.customStyleFn,h=a.editorState,i=a.editorKey;a=a.textDirectionality;var j=h.getCurrentContent(),k=h.getSelection(),l=h.mustForceSelection(),m=h.getDecorator(),n=b("nullthrows")(h.getDirectionMap()),o=j.getBlocksAsArray();o=o[0];var p=[];o=o;while(o){var q=o.getKey(),r={blockRenderMap:c,blockRendererFn:d,blockStyleFn:e,contentState:j,customStyleFn:g,customStyleMap:f,decorator:m,editorKey:i,editorState:h,forceSelection:l,selection:k,block:o,direction:a?a:n.get(q),tree:h.getBlockTree(q)},s=c.get(o.getType())||c.get("unstyled");s=s.wrapper;p.push({block:b("React").createElement(b("DraftEditorBlockNode.react"),babelHelpers["extends"]({key:q},r)),wrapperTemplate:s,key:q,offsetKey:b("DraftOffsetKey").encode(q,0,0)});r=o.getNextSiblingKey();o=r?j.getBlockForKey(r):null}s=[];for(var q=0;q<p.length;){r=p[q];if(r.wrapperTemplate){c=[];do c.push(p[q].block),q++;while(q<p.length&&p[q].wrapperTemplate===r.wrapperTemplate);d=b("React").cloneElement(r.wrapperTemplate,{key:r.key+"-wrap","data-offset-key":r.offsetKey},c);s.push(d)}else s.push(r.block),q++}return b("React").createElement("div",{"data-contents":"true"},s)};return c}(b("React").Component);e.exports=a}),null);
__d("DraftEditorContents.react",["gkx","DraftEditorContentsExperimental.react","DraftEditorContents-core.react"],(function(a,b,c,d,e,f){"use strict";a=b("gkx")("676842");e.exports=a?b("DraftEditorContentsExperimental.react"):b("DraftEditorContents-core.react")}),null);
__d("ContentStateInlineStyle",["CharacterMetadata","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").Map;a={add:function(a,b,c){return h(a,b,c,!0)},remove:function(a,b,c){return h(a,b,c,!1)}};function h(a,c,d,e){__p&&__p();var f=a.getBlockMap(),h=c.getStartKey(),i=c.getStartOffset(),j=c.getEndKey(),k=c.getEndOffset(),l=f.skipUntil(function(a,b){return b===h}).takeUntil(function(a,b){return b===j}).concat(g([[j,f.get(j)]])).map(function(a,c){var f,g;h===j?(f=i,g=k):(f=c===h?i:0,g=c===j?k:a.getLength());c=a.getCharacterList();var l;while(f<g)l=c.get(f),c=c.set(f,e?b("CharacterMetadata").applyStyle(l,d):b("CharacterMetadata").removeStyle(l,d)),f++;return a.set("characterList",c)});return a.merge({blockMap:f.merge(l),selectionBefore:c,selectionAfter:c})}e.exports=a}),null);
__d("applyEntityToContentBlock",["CharacterMetadata"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){var f=a.getCharacterList();while(c<d)f=f.set(c,b("CharacterMetadata").applyEntity(f.get(c),e)),c++;return a.set("characterList",f)}e.exports=a}),null);
__d("applyEntityToContentState",["applyEntityToContentBlock","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){var e=a.getBlockMap(),f=c.getStartKey(),g=c.getStartOffset(),h=c.getEndKey(),i=c.getEndOffset(),j=e.skipUntil(function(a,b){return b===f}).takeUntil(function(a,b){return b===h}).toOrderedMap().merge(b("immutable").OrderedMap([[h,e.get(h)]])).map(function(a,c){var e=c===f?g:0;c=c===h?i:a.getLength();return b("applyEntityToContentBlock")(a,e,c,d)});return a.merge({blockMap:e.merge(j),selectionBefore:c,selectionAfter:c})}e.exports=a}),null);
__d("DraftEntitySegments",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getRemovalRange:function(a,b,c,d,e){__p&&__p();var f=c.split(" ");f=f.map(function(a,b){if(e==="forward"){if(b>0)return" "+a}else if(b<f.length-1)return a+" ";return a});var g=d,h,i=null,j=null;for(var k=0;k<f.length;k++){h=f[k];h=g+h.length;if(a<h&&g<b)i!==null?j=h:(i=g,j=h);else if(i!==null)break;g=h}h=d+c.length;k=i===d;g=j===h;(!k&&g||k&&!g)&&(e==="forward"?j!==h&&j++:i!==d&&i--);return{start:i,end:j}}};e.exports=a}),null);
__d("getRangesForDraftEntity",["invariant"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){var c=[];a.findEntityRanges(function(a){return a.getEntity()===b},function(a,b){c.push({start:a,end:b})});!c.length&&g(0,1817);return c}e.exports=a}),null);
__d("getCharacterRemovalRange",["invariant","DraftEntitySegments","getRangesForDraftEntity"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b,c,d,e){__p&&__p();var f=d.getStartOffset(),g=d.getEndOffset();f=b.getEntityAt(f);g=c.getEntityAt(g-1);if(!f&&!g)return d;d=d;if(f&&f===g)d=h(a,b,d,e,f,!0,!0);else if(f&&g){var i=h(a,b,d,e,f,!1,!0),j=h(a,c,d,e,g,!1,!1);d=d.merge({anchorOffset:i.getAnchorOffset(),focusOffset:j.getFocusOffset(),isBackward:!1})}else if(f){i=h(a,b,d,e,f,!1,!0);d=d.merge({anchorOffset:i.getStartOffset(),isBackward:!1})}else if(g){j=h(a,c,d,e,g,!1,!1);d=d.merge({focusOffset:j.getEndOffset(),isBackward:!1})}return d}function h(a,c,d,e,f,h,i){__p&&__p();var j=d.getStartOffset(),k=d.getEndOffset();a=a.__get(f);a=a.getMutability();var l=i?j:k;if(a==="MUTABLE")return d;f=b("getRangesForDraftEntity")(c,f).filter(function(a){return l<=a.end&&l>=a.start});f.length==1||g(0,5779);f=f[0];if(a==="IMMUTABLE")return d.merge({anchorOffset:f.start,focusOffset:f.end,isBackward:!1});h||(i?k=f.end:j=f.start);a=b("DraftEntitySegments").getRemovalRange(j,k,c.getText().slice(f.start,f.end),f.start,e);return d.merge({anchorOffset:a.start,focusOffset:a.end,isBackward:!1})}e.exports=a}),null);
__d("randomizeBlockMapKeys",["ContentBlockNode","generateRandomKey","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").OrderedMap,h=function(a){__p&&__p();var c={},d;return g(a.withMutations(function(a){__p&&__p();a.forEach(function(e,f){__p&&__p();var g=e.getKey();f=e.getNextSiblingKey();var h=e.getPrevSiblingKey(),i=e.getChildKeys(),j=e.getParentKey(),k=b("generateRandomKey")();c[g]=k;if(f){var l=a.get(f);l?a.setIn([f,"prevSibling"],k):a.setIn([g,"nextSibling"],null)}if(h){l=a.get(h);l?a.setIn([h,"nextSibling"],k):a.setIn([g,"prevSibling"],null)}if(j&&a.get(j)){f=a.get(j);l=f.getChildKeys();a.setIn([j,"children"],l.set(l.indexOf(e.getKey()),k))}else a.setIn([g,"parent"],null),d&&(a.setIn([d.getKey(),"nextSibling"],k),a.setIn([g,"prevSibling"],c[d.getKey()])),d=a.get(g);i.forEach(function(b){var c=a.get(b);c?a.setIn([b,"parent"],k):a.setIn([g,"children"],e.getChildKeys().filter(function(a){return a!==b}))})})}).toArray().map(function(a){return[c[a.getKey()],a.set("key",c[a.getKey()])]}))},i=function(a){return g(a.toArray().map(function(a){var c=b("generateRandomKey")();return[c,a.set("key",c)]}))};a=function(a){var c=a.first()instanceof b("ContentBlockNode");return!c?i(a):h(a)};e.exports=a}),null);
__d("removeEntitiesAtEdges",["invariant","CharacterMetadata","findRangesImmutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,b){var c=a.getBlockMap(),d=a.getEntityMap(),e={},f=b.getStartKey(),g=b.getStartOffset(),h=c.get(f);g=i(d,h,g);g!==h&&(e[f]=g);h=b.getEndKey();var j=b.getEndOffset(),k=c.get(h);f===h&&(k=g);f=i(d,k,j);f!==k&&(e[h]=f);return!Object.keys(e).length?a.set("selectionAfter",b):a.merge({blockMap:c.merge(e),selectionAfter:b})}function h(a,c,d){var e;b("findRangesImmutable")(a,function(a,b){return a.getEntity()===b.getEntity()},function(a){return a.getEntity()===c},function(a,b){a<=d&&b>=d&&(e={start:a,end:b})});typeof e==="object"||g(0,6015);return e}function i(a,c,d){__p&&__p();var e=c.getCharacterList(),f=d>0?e.get(d-1):void 0,g=d<e.count()?e.get(d):void 0;f=f?f.getEntity():void 0;g=g?g.getEntity():void 0;if(g&&g===f){f=a.__get(g);if(f.getMutability()!=="MUTABLE"){a=h(e,g,d);f=a.start;g=a.end;while(f<g)d=e.get(f),e=e.set(f,b("CharacterMetadata").applyEntity(d,null)),f++;return c.set("characterList",e)}}return c}e.exports=a}),null);
__d("getContentStateFragment",["randomizeBlockMapKeys","removeEntitiesAtEdges"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,c){__p&&__p();var d=c.getStartKey(),e=c.getStartOffset(),f=c.getEndKey(),g=c.getEndOffset();a=b("removeEntitiesAtEdges")(a,c);c=a.getBlockMap();a=c.keySeq();var h=a.indexOf(d);a=a.indexOf(f)+1;return b("randomizeBlockMapKeys")(c.slice(h,a).map(function(a,b){var c=a.getText(),h=a.getCharacterList();if(d===f)return a.merge({text:c.slice(e,g),characterList:h.slice(e,g)});if(b===d)return a.merge({text:c.slice(e),characterList:h.slice(e)});return b===f?a.merge({text:c.slice(0,g),characterList:h.slice(0,g)}):a}))};e.exports=a}),null);
__d("insertIntoList",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c){__p&&__p();if(c===a.count())b.forEach(function(b){a=a.push(b)});else if(c===0)b.reverse().forEach(function(b){a=a.unshift(b)});else{var d=a.slice(0,c);c=a.slice(c);a=d.concat(b,c).toList()}return a}e.exports=a}),null);
__d("insertFragmentIntoContentState",["invariant","BlockMapBuilder","ContentBlockNode","immutable","insertIntoList","randomizeBlockMapKeys"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List,i=function(a,c,d,e,f,g,h){h===void 0&&(h="REPLACE_WITH_NEW_DATA");var i=d.get(f),j=i.getText(),k=i.getCharacterList(),l=f,m=g+e.getText().length,n=null;switch(h){case"MERGE_OLD_DATA_TO_NEW_DATA":n=e.getData().merge(i.getData());break;case"REPLACE_WITH_NEW_DATA":n=e.getData();break}h=i.merge({text:j.slice(0,g)+e.getText()+j.slice(g),characterList:b("insertIntoList")(k,e.getCharacterList(),g),data:n});return a.merge({blockMap:d.set(f,h),selectionBefore:c,selectionAfter:c.merge({anchorKey:l,anchorOffset:m,focusKey:l,focusOffset:m,isBackward:!1})})},j=function(a,b,c){var d=a.getText(),e=a.getCharacterList();d=d.slice(0,b);e=e.slice(0,b);b=c.first();return a.merge({text:d+b.getText(),characterList:e.concat(b.getCharacterList()),type:d?a.getType():b.getType(),data:b.getData()})},k=function(a,b,c){var d=a.getText();a=a.getCharacterList();var e=d.length;d=d.slice(b,e);a=a.slice(b,e);b=c.last();return b.merge({text:b.getText()+d,characterList:b.getCharacterList().concat(a),data:b.getData()})},l=function(a,b){__p&&__p();var c=a.getKey();a=a;var d=[];b.get(c)&&d.push(c);while(a&&a.getNextSiblingKey()){c=a.getNextSiblingKey();if(!c)break;d.push(c);a=b.get(c)}return d},m=function(a,b,c,d){__p&&__p();return a.withMutations(function(b){__p&&__p();var e=c.getKey(),f=d.getKey(),g=c.getNextSiblingKey(),i=c.getParentKey(),j=l(d,a),k=j[j.length-1];b.get(f)?(b.setIn([e,"nextSibling"],f),b.setIn([f,"prevSibling"],e)):(b.setIn([e,"nextSibling"],d.getNextSiblingKey()),b.setIn([d.getNextSiblingKey(),"prevSibling"],e));b.setIn([k,"nextSibling"],g);g&&b.setIn([g,"prevSibling"],k);j.forEach(function(a){return b.setIn([a,"parent"],i)});if(i){f=a.get(i);g=f.getChildKeys();k=g.indexOf(e);f=k+1;e=g.toArray();e.splice.apply(e,[f,0].concat(j));b.setIn([i,"children"],h(e))}})},n=function(a,c,d,e,f,g){__p&&__p();var h=d.first()instanceof b("ContentBlockNode"),i=[],l=e.size,n=d.get(f),o=e.first(),p=e.last(),q=p.getLength();p=p.getKey();var r=h&&(!n.getChildKeys().isEmpty()||!o.getChildKeys().isEmpty());d.forEach(function(a,b){if(b!==f){i.push(a);return}r?i.push(a):i.push(j(a,g,e));e.slice(r?0:1,l-1).forEach(function(a){return i.push(a)});i.push(k(a,g,e))});var s=b("BlockMapBuilder").createFromArray(i);h&&(s=m(s,d,n,o));return a.merge({blockMap:s,selectionBefore:c,selectionAfter:c.merge({anchorKey:p,anchorOffset:q,focusKey:p,focusOffset:q,isBackward:!1})})};a=function(a,c,d,e){e===void 0&&(e="REPLACE_WITH_NEW_DATA");c.isCollapsed()||g(0,1903);var f=a.getBlockMap();d=b("randomizeBlockMapKeys")(d);var h=c.getStartKey(),j=c.getStartOffset(),k=f.get(h);k instanceof b("ContentBlockNode")&&(k.getChildKeys().isEmpty()||g(0,1904));return d.size===1?i(a,c,f,d.first(),h,j,e):n(a,c,f,d,h,j)};e.exports=a}),null);
__d("insertTextIntoContentState",["invariant","immutable","insertIntoList"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Repeat;function a(a,c,d,e){c.isCollapsed()||g(0,2659);var f=null;d!=null&&(f=d.length);if(f==null||f===0)return a;var i=a.getBlockMap(),j=c.getStartKey(),k=c.getStartOffset(),l=i.get(j),m=l.getText();d=l.merge({text:m.slice(0,k)+d+m.slice(k,l.getLength()),characterList:b("insertIntoList")(l.getCharacterList(),h(e,f).toList(),k)});m=k+f;return a.merge({blockMap:i.set(j,d),selectionAfter:c.merge({anchorOffset:m,focusOffset:m})})}e.exports=a}),null);
__d("modifyBlockForContentState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("immutable").Map;function a(a,b,c){var d=b.getStartKey(),e=b.getEndKey(),f=a.getBlockMap();c=f.toSeq().skipUntil(function(a,b){return b===d}).takeUntil(function(a,b){return b===e}).concat(g([[e,f.get(e)]])).map(c);return a.merge({blockMap:f.merge(c),selectionBefore:b,selectionAfter:b})}e.exports=a}),null);
__d("getNextDelimiterBlockKey",["ContentBlockNode"],(function(a,b,c,d,e,f){__p&&__p();a=function(a,c){__p&&__p();var d=a instanceof b("ContentBlockNode");if(!d)return null;d=a.getNextSiblingKey();if(d)return d;d=a.getParentKey();if(!d)return null;a=c.get(d);while(a&&!a.getNextSiblingKey()){d=a.getParentKey();a=d?c.get(d):null}return!a?null:a.getNextSiblingKey()};e.exports=a}),null);
__d("removeRangeFromContentState",["ContentBlockNode","getNextDelimiterBlockKey","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").List;var g=b("immutable").Map,h=function(a,b,c){if(!a)return;var d=b.get(a);if(!d)return;b.set(a,c(d))},i=function(a,b){__p&&__p();var c=[];if(!a)return c;a=b.get(a);while(a&&a.getParentKey()){var d=a.getParentKey();d&&c.push(d);a=d?b.get(d):null}return c},j=function(a,c){__p&&__p();var d=[];if(!a)return d;a=b("getNextDelimiterBlockKey")(a,c);while(a&&c.get(a)){var e=c.get(a);d.push(a);a=e.getParentKey()?b("getNextDelimiterBlockKey")(e,c):null}return d},k=function(a,b,c){if(!a)return null;a=c.get(a.getKey()).getNextSiblingKey();while(a&&!b.get(a))a=c.get(a).getNextSiblingKey()||null;return a},l=function(a,b,c){if(!a)return null;a=c.get(a.getKey()).getPrevSiblingKey();while(a&&!b.get(a))a=c.get(a).getPrevSiblingKey()||null;return a},m=function(a,b,c,d){__p&&__p();return a.withMutations(function(e){__p&&__p();h(b.getKey(),e,function(a){return a.merge({nextSibling:k(a,e,d),prevSibling:l(a,e,d)})});h(c.getKey(),e,function(a){return a.merge({nextSibling:k(a,e,d),prevSibling:l(a,e,d)})});i(b.getKey(),d).forEach(function(a){return h(a,e,function(a){return a.merge({children:a.getChildKeys().filter(function(a){return e.get(a)}),nextSibling:k(a,e,d),prevSibling:l(a,e,d)})})});h(b.getNextSiblingKey(),e,function(a){return a.merge({prevSibling:b.getPrevSiblingKey()})});h(b.getPrevSiblingKey(),e,function(a){return a.merge({nextSibling:k(a,e,d)})});h(c.getNextSiblingKey(),e,function(a){return a.merge({prevSibling:l(a,e,d)})});h(c.getPrevSiblingKey(),e,function(a){return a.merge({nextSibling:c.getNextSiblingKey()})});i(c.getKey(),d).forEach(function(a){h(a,e,function(a){return a.merge({children:a.getChildKeys().filter(function(a){return e.get(a)}),nextSibling:k(a,e,d),prevSibling:l(a,e,d)})})});j(c,d).forEach(function(a){return h(a,e,function(a){return a.merge({nextSibling:k(a,e,d),prevSibling:l(a,e,d)})})});if(a.get(b.getKey())==null&&a.get(c.getKey())!=null&&c.getParentKey()===b.getKey()&&c.getPrevSiblingKey()==null){var f=b.getPrevSiblingKey();h(c.getKey(),e,function(a){return a.merge({prevSibling:f})});h(f,e,function(a){return a.merge({nextSibling:c.getKey()})});var g=f?a.get(f):null,m=g?g.getParentKey():null;b.getChildKeys().forEach(function(a){h(a,e,function(a){return a.merge({parent:m})})});if(m!=null){var n=a.get(m);h(m,e,function(a){return a.merge({children:n.getChildKeys().concat(b.getChildKeys())})})}h(b.getChildKeys().find(function(b){b=a.get(b);return b.getNextSiblingKey()===null}),e,function(a){return a.merge({nextSibling:b.getNextSiblingKey()})})}})};a=function(a,c){__p&&__p();if(c.isCollapsed())return a;var d=a.getBlockMap(),e=c.getStartKey(),f=c.getStartOffset(),h=c.getEndKey(),j=c.getEndOffset(),k=d.get(e),l=d.get(h),o=k instanceof b("ContentBlockNode"),p=[];if(o){var q=l.getChildKeys(),r=i(h,d);l.getNextSiblingKey()&&(p=p.concat(r));q.isEmpty()||(p=p.concat(r.concat([h])));p=p.concat(i(b("getNextDelimiterBlockKey")(l,d),d))}k===l?q=n(k.getCharacterList(),f,j):q=k.getCharacterList().slice(0,f).concat(l.getCharacterList().slice(j));var s=k.merge({text:k.getText().slice(0,f)+l.getText().slice(j),characterList:q});r=o&&f===0&&j===0&&l.getParentKey()===e&&l.getPrevSiblingKey()==null;q=r?g([[e,null]]):d.toSeq().skipUntil(function(a,b){return b===e}).takeUntil(function(a,b){return b===h}).filter(function(a,b){return p.indexOf(b)===-1}).concat(g([[h,null]])).map(function(a,b){return b===e?s:null});j=d.merge(q).filter(function(a){return!!a});o&&k!==l&&(j=m(j,k,l,d));return a.merge({blockMap:j,selectionBefore:c,selectionAfter:c.merge({anchorKey:e,anchorOffset:f,focusKey:e,focusOffset:f,isBackward:!1})})};var n=function(a,b,c){__p&&__p();if(b===0)while(b<c)a=a.shift(),b++;else if(c===a.count())while(c>b)a=a.pop(),c--;else{b=a.slice(0,b);c=a.slice(c);a=b.concat(c).toList()}return a};e.exports=a}),null);
__d("splitBlockInContentState",["invariant","ContentBlockNode","generateRandomKey","immutable","modifyBlockForContentState"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List,i=b("immutable").Map,j=function(a,b,c){if(!a)return;var d=b.get(a);if(!d)return;b.set(a,c(d))},k=function(a,b,c){__p&&__p();return a.withMutations(function(a){__p&&__p();var d=b.getKey(),e=c.getKey();j(b.getParentKey(),a,function(a){var b=a.getChildKeys(),c=b.indexOf(d)+1;b=b.toArray();b.splice(c,0,e);return a.merge({children:h(b)})});j(b.getNextSiblingKey(),a,function(a){return a.merge({prevSibling:e})});j(d,a,function(a){return a.merge({nextSibling:e})});j(e,a,function(a){return a.merge({prevSibling:d})})})};a=function(a,c){__p&&__p();c.isCollapsed()||g(0,5004);var d=c.getAnchorKey(),e=a.getBlockMap(),f=e.get(d),h=f.getText();if(!h){var j=f.getType();if(j==="unordered-list-item"||j==="ordered-list-item")return b("modifyBlockForContentState")(a,c,function(a){return a.merge({type:"unstyled",depth:0})})}j=c.getAnchorOffset();var l=f.getCharacterList(),m=b("generateRandomKey")(),n=f instanceof b("ContentBlockNode"),o=f.merge({text:h.slice(0,j),characterList:l.slice(0,j)});h=o.merge({key:m,text:h.slice(j),characterList:l.slice(j),data:i()});l=e.toSeq().takeUntil(function(a){return a===f});j=e.toSeq().skipUntil(function(a){return a===f}).rest();e=l.concat([[d,o],[m,h]],j).toOrderedMap();n&&(f.getChildKeys().isEmpty()||g(0,5005),e=k(e,o,h));return a.merge({blockMap:e,selectionBefore:c,selectionAfter:c.merge({anchorKey:m,anchorOffset:0,focusKey:m,focusOffset:0,isBackward:!1})})};e.exports=a}),null);
__d("DraftModifier",["invariant","CharacterMetadata","ContentStateInlineStyle","applyEntityToContentState","getCharacterRemovalRange","getContentStateFragment","gkx","immutable","insertFragmentIntoContentState","insertTextIntoContentState","modifyBlockForContentState","removeEntitiesAtEdges","removeRangeFromContentState","splitBlockInContentState"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").OrderedSet,i={replaceText:function(a,c,d,e,f){a=b("removeEntitiesAtEdges")(a,c);a=b("removeRangeFromContentState")(a,c);c=b("CharacterMetadata").create({style:e||h(),entity:f||null});return b("insertTextIntoContentState")(a,a.getSelectionAfter(),d,c)},insertText:function(a,b,c,d,e){b.isCollapsed()||g(0,4661);return i.replaceText(a,b,c,d,e)},moveText:function(a,c,d){var e=b("getContentStateFragment")(a,c);a=i.removeRange(a,c,"backward");return i.replaceWithFragment(a,d,e)},replaceWithFragment:function(a,c,d,e){e===void 0&&(e="REPLACE_WITH_NEW_DATA");a=b("removeEntitiesAtEdges")(a,c);a=b("removeRangeFromContentState")(a,c);return b("insertFragmentIntoContentState")(a,a.getSelectionAfter(),d,e)},removeRange:function(a,c,d){__p&&__p();var e,f,g,h;c.getIsBackward()&&(c=c.merge({anchorKey:c.getFocusKey(),anchorOffset:c.getFocusOffset(),focusKey:c.getAnchorKey(),focusOffset:c.getAnchorOffset(),isBackward:!1}));e=c.getAnchorKey();f=c.getFocusKey();g=a.getBlockForKey(e);h=a.getBlockForKey(f);var i=c.getStartOffset(),j=c.getEndOffset();i=g.getEntityAt(i);j=h.getEntityAt(j-1);if(e===f&&(i&&i===j)){e=b("getCharacterRemovalRange")(a.getEntityMap(),g,h,c,d);return b("removeRangeFromContentState")(a,e)}f=c;b("gkx")("676849")&&(f=b("getCharacterRemovalRange")(a.getEntityMap(),g,h,c,d));i=b("removeEntitiesAtEdges")(a,f);return b("removeRangeFromContentState")(i,f)},splitBlock:function(a,c){a=b("removeEntitiesAtEdges")(a,c);a=b("removeRangeFromContentState")(a,c);return b("splitBlockInContentState")(a,a.getSelectionAfter())},applyInlineStyle:function(a,c,d){return b("ContentStateInlineStyle").add(a,c,d)},removeInlineStyle:function(a,c,d){return b("ContentStateInlineStyle").remove(a,c,d)},setBlockType:function(a,c,d){return b("modifyBlockForContentState")(a,c,function(a){return a.merge({type:d,depth:0})})},setBlockData:function(a,c,d){return b("modifyBlockForContentState")(a,c,function(a){return a.merge({data:d})})},mergeBlockData:function(a,c,d){return b("modifyBlockForContentState")(a,c,function(a){return a.merge({data:a.getData().merge(d)})})},applyEntity:function(a,c,d){a=b("removeEntitiesAtEdges")(a,c);return b("applyEntityToContentState")(a,c,d)}};e.exports=i}),null);
__d("replaceSelectionWithMention",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){e=e(c.getCurrentContent(),a);var g=e.getLastCreatedEntityKey();f=f?f(a):a.getTitle();a=b("DraftModifier").replaceText(e,d,f,c.getCurrentInlineStyle(),g);return b("EditorState").push(c,a,"insert-fragment")}e.exports=a}),null);
__d("DefaultDraftBlockRenderMap",["cx","React","immutable"],(function(a,b,c,d,e,f,g){"use strict";a=b("immutable").Map;c=b("React").createElement("ul",{className:"_1bv0"});d=b("React").createElement("ol",{className:"_1bv1"});f=b("React").createElement("pre",{className:"_1bv2"});g=a({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},"unordered-list-item":{element:"li",wrapper:c},"ordered-list-item":{element:"li",wrapper:d},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:f},unstyled:{element:"div",aliasedElements:["p"]}});e.exports=g}),null);
__d("DefaultDraftInlineStyle",[],(function(a,b,c,d,e,f){"use strict";e.exports={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}}}),null);
__d("getSelectionOffsetKeyForNode",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();if(a instanceof Element){var b=a.getAttribute("data-offset-key");if(b)return b;for(var b=0;b<a.childNodes.length;b++){var c=g(a.childNodes[b]);if(c)return c}}return null}e.exports=g}),null);
__d("findAncestorOffsetKey",["getSelectionOffsetKeyForNode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a=a;while(a&&a!==document.documentElement){var c=b("getSelectionOffsetKeyForNode")(a);if(c!=null)return c;a=a.parentNode}return null}e.exports=a}),null);
__d("DOMObserver",["invariant","UserAgent","findAncestorOffsetKey","immutable","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Map,i={subtree:!0,characterData:!0,childList:!0,characterDataOldValue:!1,attributes:!1},j=b("UserAgent").isBrowser("IE <= 11");a=function(){__p&&__p();function a(a){var b=this;this.container=a;this.mutations=h();window.MutationObserver&&!j?this.observer=new window.MutationObserver(function(a){return b.registerMutations(a)}):this.onCharData=function(a){a.target instanceof Node||g(0,16525),b.registerMutation({type:"characterData",target:a.target})}}var c=a.prototype;c.start=function(){this.observer?this.observer.observe(this.container,i):this.container.addEventListener("DOMCharacterDataModified",this.onCharData)};c.stopAndFlushMutations=function(){var a=this.observer;a?(this.registerMutations(a.takeRecords()),a.disconnect()):this.container.removeEventListener("DOMCharacterDataModified",this.onCharData);a=this.mutations;this.mutations=h();return a};c.registerMutations=function(a){for(var b=0;b<a.length;b++)this.registerMutation(a[b])};c.getMutationTextContent=function(a){var b=a.type,c=a.target;a=a.removedNodes;if(b==="characterData"){if(c.textContent!=="")return c.textContent}else if(b==="childList"&&(a&&a.length))return"";return null};c.registerMutation=function(a){var c=this.getMutationTextContent(a);if(c!=null){a=b("nullthrows")(b("findAncestorOffsetKey")(a.target));this.mutations=this.mutations.set(a,c)}};return a}();e.exports=a}),null);
__d("getContentEditableContainer",["invariant","ReactDOM"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=b("ReactDOM").findDOMNode(a.editorContainer);a||g(0,4998);a.firstChild instanceof HTMLElement||g(0,4999);return a.firstChild}e.exports=a}),null);
__d("getUpdatedSelectionState",["DraftOffsetKey","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f){__p&&__p();var g=b("nullthrows")(a.getSelection());c=b("DraftOffsetKey").decode(c);var h=c.blockKey;c=a.getBlockTree(h).getIn([c.decoratorKey,"leaves",c.leafKey]);e=b("DraftOffsetKey").decode(e);var i=e.blockKey;e=a.getBlockTree(i).getIn([e.decoratorKey,"leaves",e.leafKey]);var j=c.get("start"),k=e.get("start"),l=c?j+d:null,m=e?k+f:null,n=g.getAnchorKey()===h&&g.getAnchorOffset()===l&&g.getFocusKey()===i&&g.getFocusOffset()===m;if(n)return g;if(h===i){n=c.get("end");c=e.get("end");k===j&&c===n?e=f<d:e=k<j}else{c=a.getCurrentContent().getBlockMap().keySeq().skipUntil(function(a){return a===h||a===i}).first();e=c===i}return g.merge({anchorKey:h,anchorOffset:l,focusKey:i,focusOffset:m,isBackward:e})}e.exports=a}),null);
__d("getDraftEditorSelectionWithNodes",["invariant","findAncestorOffsetKey","getSelectionOffsetKeyForNode","getUpdatedSelectionState","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,c,d,e,f,g){var h=d.nodeType===Node.TEXT_NODE,i=f.nodeType===Node.TEXT_NODE;if(h&&i)return{selectionState:b("getUpdatedSelectionState")(a,b("nullthrows")(b("findAncestorOffsetKey")(d)),e,b("nullthrows")(b("findAncestorOffsetKey")(f)),g),needsRecovery:!1};var k=null,l=null,m=!0;h?(k={key:b("nullthrows")(b("findAncestorOffsetKey")(d)),offset:e},l=j(c,f,g)):i?(l={key:b("nullthrows")(b("findAncestorOffsetKey")(f)),offset:g},k=j(c,d,e)):(k=j(c,d,e),l=j(c,f,g),d===f&&e===g&&(m=!!d.firstChild&&d.firstChild.nodeName!=="BR"));return{selectionState:b("getUpdatedSelectionState")(a,k.key,k.offset,l.key,l.offset),needsRecovery:m}}function h(a){while(a.firstChild&&(a.firstChild instanceof Element&&a.firstChild.getAttribute("data-blocks")==="true"||b("getSelectionOffsetKeyForNode")(a.firstChild)))a=a.firstChild;return a}function i(a){while(a.lastChild&&(a.lastChild instanceof Element&&a.lastChild.getAttribute("data-blocks")==="true"||b("getSelectionOffsetKeyForNode")(a.lastChild)))a=a.lastChild;return a}function j(a,c,d){__p&&__p();c=c;var e=b("findAncestorOffsetKey")(c);e!=null||a&&(a===c||a.firstChild===c)||g(0,6007);a===c&&(c=c.firstChild,c instanceof Element&&c.getAttribute("data-contents")==="true"||g(0,6008),d>0&&(d=c.childNodes.length));if(d===0){if(e!=null)a=e;else{var f=h(c);a=b("nullthrows")(b("getSelectionOffsetKeyForNode")(f))}return{key:a,offset:0}}f=c.childNodes[d-1];a=null;if(!b("getSelectionOffsetKeyForNode")(f))a=b("nullthrows")(e),c=k(f);else{d=i(f);a=b("nullthrows")(b("getSelectionOffsetKeyForNode")(d));c=k(d)}return{key:a,offset:c}}function k(a){a=a.textContent;return a==="\n"?0:a.length}e.exports=a}),null);
__d("getDraftEditorSelection",["getDraftEditorSelectionWithNodes"],(function(a,b,c,d,e,f){"use strict";function c(c,d){var e=a.getSelection();return e.rangeCount===0?{selectionState:c.getSelection().set("hasFocus",!1),needsRecovery:!1}:b("getDraftEditorSelectionWithNodes")(c,d,e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}e.exports=c}),null);
__d("editOnSelect",["DraftJsDebugLogging","EditorState","getContentEditableContainer","getDraftEditorSelection"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();if(a._blockSelectEvents||a._latestEditorState!==a.props.editorState){if(a._blockSelectEvents){var c=a.props.editorState;c=c.getSelection();b("DraftJsDebugLogging").logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:new Error().stack}),selectionState:JSON.stringify(c.toJS())})}return}c=a.props.editorState;var d=b("getDraftEditorSelection")(c,b("getContentEditableContainer")(a)),e=d.selectionState;e!==c.getSelection()&&(d.needsRecovery?c=b("EditorState").forceSelection(c,e):c=b("EditorState").acceptSelection(c,e),a.update(c))}e.exports=a}),null);
__d("getEntityKeyForSelection",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){__p&&__p();var c;if(b.isCollapsed()){var d=b.getAnchorKey(),e=b.getAnchorOffset();if(e>0){c=a.getBlockForKey(d).getEntityAt(e-1);return c!==a.getBlockForKey(d).getEntityAt(e)?null:g(a.getEntityMap(),c)}return null}d=b.getStartKey();e=b.getStartOffset();b=a.getBlockForKey(d);c=e===b.getLength()?null:b.getEntityAt(e);return g(a.getEntityMap(),c)}function g(a,b){if(b){a=a.__get(b);return a.getMutability()==="MUTABLE"?b:null}return null}e.exports=a}),null);
__d("DraftEditorCompositionHandler",["DOMObserver","DraftModifier","DraftOffsetKey","EditorState","Keys","editOnSelect","getContentEditableContainer","getDraftEditorSelection","getEntityKeyForSelection","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=20,h=!1,i=!1,j=null;function k(a){j||(j=new(b("DOMObserver"))(b("getContentEditableContainer")(a)),j.start())}var l={onCompositionStart:function(a){i=!0,k(a)},onCompositionEnd:function(a){h=!1,i=!1,setTimeout(function(){h||l.resolveComposition(a)},g)},onSelect:b("editOnSelect"),onKeyDown:function(a,c){if(!i){l.resolveComposition(a);a._onKeyDown(c);return}(c.which===b("Keys").RIGHT||c.which===b("Keys").LEFT)&&c.preventDefault()},onKeyPress:function(a,c){c.which===b("Keys").RETURN&&c.preventDefault()},resolveComposition:function(a){__p&&__p();if(i)return;var c=b("nullthrows")(j).stopAndFlushMutations();j=null;h=!0;var d=b("EditorState").set(a._latestEditorState,{inCompositionMode:!1});a.exitCurrentMode();if(!c.size){a.update(d);return}var e=d.getCurrentContent();c.forEach(function(a,c){__p&&__p();c=b("DraftOffsetKey").decode(c);var f=c.blockKey,g=c.decoratorKey;c=c.leafKey;g=d.getBlockTree(f).getIn([g,"leaves",c]);c=g.start;g=g.end;g=d.getSelection().merge({anchorKey:f,focusKey:f,anchorOffset:c,focusOffset:g,isBackward:!1});var h=b("getEntityKeyForSelection")(e,g);f=e.getBlockForKey(f).getInlineStyleAt(c);e=b("DraftModifier").replaceText(e,g,a,f,h);d=b("EditorState").set(d,{currentContent:e})});c=b("getDraftEditorSelection")(d,b("getContentEditableContainer")(a));c=c.selectionState;a.restoreEditorDOM();c=b("EditorState").acceptSelection(d,c);a.update(b("EditorState").push(c,e,"insert-characters"))}};e.exports=l}),null);
__d("getTextContentFromFiles",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/\.textClipping$/,i={"text/plain":!0,"text/html":!0,"text/rtf":!0},j=5e3;function b(a,b){var c=0,d=[];a.forEach(function(e){k(e,function(e){c++,e&&d.push(e.slice(0,j)),c==a.length&&b(d.join("\r"))})})}function k(b,c){__p&&__p();if(!a.FileReader||b.type&&!(b.type in i)){c("");return}if(b.type===""){var d="";h.test(b.name)&&(d=b.name.replace(h,""));c(d);return}var e=new FileReader();e.onload=function(){var a=e.result;typeof a==="string"||g(0,1637);c(a)};e.onerror=function(){c("")};e.readAsText(b)}e.exports=b}),null);
__d("isEventHandled",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a==="handled"||a===!0}e.exports=a}),null);
__d("DraftEditorDragHandler",["DataTransfer","DraftModifier","EditorState","ReactDOM","findAncestorOffsetKey","getTextContentFromFiles","getUpdatedSelectionState","isEventHandled","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){__p&&__p();var d=null,e=null;if(typeof document.caretRangeFromPoint==="function"){var f=document.caretRangeFromPoint(a.x,a.y);d=f.startContainer;e=f.startOffset}else if(a.rangeParent)d=a.rangeParent,e=a.rangeOffset;else return null;d=b("nullthrows")(d);e=b("nullthrows")(e);f=b("nullthrows")(b("findAncestorOffsetKey")(d));return b("getUpdatedSelectionState")(c,f,e,f,e)}a={onDragEnd:function(a){a.exitCurrentMode(),h(a)},onDrop:function(a,c){__p&&__p();var d=new(b("DataTransfer"))(c.nativeEvent.dataTransfer),e=a._latestEditorState,f=g(c.nativeEvent,e);c.preventDefault();a._dragCount=0;a.exitCurrentMode();if(f==null)return;c=d.getFiles();if(c.length>0){if(a.props.handleDroppedFiles&&b("isEventHandled")(a.props.handleDroppedFiles(f,c)))return;b("getTextContentFromFiles")(c,function(b){b&&a.update(j(e,f,b))});return}c=a._internalDrag?"internal":"external";a.props.handleDrop&&b("isEventHandled")(a.props.handleDrop(f,d,c))||(a._internalDrag?a.update(i(e,f)):a.update(j(e,f,d.getText())));h(a)}};function h(a){a._internalDrag=!1;a=b("ReactDOM").findDOMNode(a);if(a){var c=new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!0});a.dispatchEvent(c)}}function i(a,c){c=b("DraftModifier").moveText(a.getCurrentContent(),a.getSelection(),c);return b("EditorState").push(a,c,"insert-fragment")}function j(a,c,d){c=b("DraftModifier").insertText(a.getCurrentContent(),c,d,a.getCurrentInlineStyle());return b("EditorState").push(a,c,"insert-fragment")}e.exports=a}),null);
__d("isSelectionAtLeafStart",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var b=a.getSelection(),c=b.getAnchorKey();a=a.getBlockTree(c);var d=b.getStartOffset();c=!1;a.some(function(a){__p&&__p();if(d===a.get("start")){c=!0;return!0}return d<a.get("end")?a.get("leaves").some(function(a){a=a.get("start");if(d===a){c=!0;return!0}return!1}):!1});return c}e.exports=a}),null);
__d("editOnBeforeInput",["DraftModifier","EditorState","UserAgent","getEntityKeyForSelection","isEventHandled","isSelectionAtLeafStart","nullthrows","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="'",h="/",i=b("UserAgent").isBrowser("Firefox");function j(a){return i&&(a==g||a==h)}function k(a,c,d,e,f){c=b("DraftModifier").replaceText(a.getCurrentContent(),a.getSelection(),c,d,e);return b("EditorState").push(a,c,"insert-characters",f)}function c(c,d){__p&&__p();c._pendingStateFromBeforeInput!==void 0&&(c.update(c._pendingStateFromBeforeInput),c._pendingStateFromBeforeInput=void 0);var e=c._latestEditorState,f=d.data;if(!f)return;if(c.props.handleBeforeInput&&b("isEventHandled")(c.props.handleBeforeInput(f,e,d.timeStamp))){d.preventDefault();return}var g=e.getSelection(),h=g.getStartOffset(),i=g.getAnchorKey();if(!g.isCollapsed()){d.preventDefault();c.update(k(e,f,e.getCurrentInlineStyle(),b("getEntityKeyForSelection")(e.getCurrentContent(),e.getSelection()),!0));return}g=k(e,f,e.getCurrentInlineStyle(),b("getEntityKeyForSelection")(e.getCurrentContent(),e.getSelection()),!1);var l=!1;l||(l=b("isSelectionAtLeafStart")(c._latestCommittedEditorState));if(!l){var m=a.getSelection();if(m.anchorNode&&m.anchorNode.nodeType===Node.TEXT_NODE){m=m.anchorNode.parentNode;l=m.nodeName==="SPAN"&&m.firstChild.nodeType===Node.TEXT_NODE&&m.firstChild.nodeValue.indexOf("\t")!==-1}}if(!l){m=e.getBlockTree(i);var n=g.getBlockTree(i);l=m.size!==n.size||m.zip(n).some(function(a){var b=a[0];a=a[1];var c=b.get("start");c=c+(c>=h?f.length:0);var d=b.get("end");d=d+(d>=h?f.length:0);return b.get("decoratorKey")!==a.get("decoratorKey")||b.get("leaves").size!==a.get("leaves").size||c!==a.get("start")||d!==a.get("end")})}l||(l=j(f));l||(l=b("nullthrows")(g.getDirectionMap()).get(i)!==b("nullthrows")(e.getDirectionMap()).get(i));if(l){d.preventDefault();g=b("EditorState").set(g,{forceSelection:!0});c.update(g);return}g=b("EditorState").set(g,{nativelyRenderedContent:g.getCurrentContent()});c._pendingStateFromBeforeInput=g;b("setImmediate")(function(){c._pendingStateFromBeforeInput!==void 0&&(c.update(c._pendingStateFromBeforeInput),c._pendingStateFromBeforeInput=void 0)})}e.exports=c}),null);
__d("editOnBlur",["EditorState","containsNode","getActiveElement"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function c(c,d){__p&&__p();if(b("getActiveElement")()===document.body){var e=a.getSelection(),f=c.editor;e.rangeCount===1&&b("containsNode")(f,e.anchorNode)&&b("containsNode")(f,e.focusNode)&&e.removeAllRanges()}f=c._latestEditorState;e=f.getSelection();if(!e.getHasFocus())return;e=e.set("hasFocus",!1);c.props.onBlur&&c.props.onBlur(d);c.update(b("EditorState").acceptSelection(f,e))}e.exports=c}),null);
__d("editOnCompositionStart",["EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a,c){a.setMode("composite"),a.update(b("EditorState").set(a._latestEditorState,{inCompositionMode:!0})),a._onCompositionStart(c)}e.exports=a}),null);
__d("getFragmentFromSelection",["getContentStateFragment"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getSelection();return c.isCollapsed()?null:b("getContentStateFragment")(a.getCurrentContent(),c)}e.exports=a}),null);
__d("editOnCopy",["getFragmentFromSelection"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=a._latestEditorState;d=d.getSelection();if(d.isCollapsed()){c.preventDefault();return}a.setClipboard(b("getFragmentFromSelection")(a._latestEditorState))}e.exports=a}),null);
__d("editOnCut",["DraftModifier","EditorState","Style","getFragmentFromSelection","getScrollPosition"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=a._latestEditorState,e=d.getSelection(),f=c.target,h;if(e.isCollapsed()){c.preventDefault();return}f instanceof Node&&(h=b("getScrollPosition")(b("Style").getScrollParent(f)));e=b("getFragmentFromSelection")(d);a.setClipboard(e);a.setMode("cut");setTimeout(function(){a.restoreEditorDOM(h),a.exitCurrentMode(),a.update(g(d))},0)}function g(a){var c=b("DraftModifier").removeRange(a.getCurrentContent(),a.getSelection(),"forward");return b("EditorState").push(a,c,"remove-range")}e.exports=a}),null);
__d("editOnDragOver",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){a.setMode("drag"),b.preventDefault()}e.exports=a}),null);
__d("editOnDragStart",[],(function(a,b,c,d,e,f){"use strict";function a(a){a._internalDrag=!0,a.setMode("drag")}e.exports=a}),null);
__d("editOnFocus",["EditorState","UserAgent"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=a._latestEditorState,e=d.getSelection();if(e.getHasFocus())return;e=e.set("hasFocus",!0);a.props.onFocus&&a.props.onFocus(c);b("UserAgent").isBrowser("Chrome < 60.0.3081.0")?a.update(b("EditorState").forceSelection(d,e)):a.update(b("EditorState").acceptSelection(d,e))}e.exports=a}),null);
__d("moveSelectionBackward",["warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=a.getSelection();b("warning")(d.isCollapsed(),"moveSelectionBackward should only be called with a collapsed SelectionState");a=a.getCurrentContent();var e=d.getStartKey(),f=d.getStartOffset(),g=e,h=0;if(c>f){var i=a.getKeyBefore(e);if(i==null)g=e;else{g=i;e=a.getBlockForKey(i);h=e.getText().length}}else h=f-c;return d.merge({focusKey:g,focusOffset:h,isBackward:!0})}e.exports=a}),null);
__d("removeTextWithStrategy",["DraftModifier","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("gkx")("676842");function a(a,c,d){__p&&__p();var e=a.getSelection(),f=a.getCurrentContent(),h=e,i=e.getAnchorKey(),j=e.getFocusKey(),k=f.getBlockForKey(i);if(g&&(d==="forward"&&i!==j))return f;if(e.isCollapsed()){if(d==="forward"){if(a.isSelectionAtEndOfContent())return f;if(g){j=e.getAnchorOffset()===f.getBlockForKey(i).getLength();if(j){i=f.getBlockForKey(k.nextSibling);if(!i||i.getLength()===0)return f}}}else if(a.isSelectionAtStartOfContent())return f;h=c(a);if(h===e)return f}return b("DraftModifier").removeRange(f,h,d)}e.exports=a}),null);
__d("keyCommandPlainBackspace",["EditorState","UnicodeUtils","moveSelectionBackward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("removeTextWithStrategy")(a,function(c){var a=c.getSelection(),d=c.getCurrentContent(),e=a.getAnchorKey();a=a.getAnchorOffset();d=d.getBlockForKey(e).getText()[a-1];return b("moveSelectionBackward")(c,d?b("UnicodeUtils").getUTF16Length(d,0):1)},"backward");if(c===a.getCurrentContent())return a;var d=a.getSelection();return b("EditorState").push(a,c.set("selectionBefore",d),d.isCollapsed()?"backspace-character":"remove-range")}e.exports=a}),null);
__d("editOnInput",["DraftModifier","DraftOffsetKey","EditorState","UserAgent","findAncestorOffsetKey","gkx","keyCommandPlainBackspace","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("UserAgent").isEngine("Gecko"),h="\n\n";function i(a,c){switch(a){case"deleteContentBackward":return b("keyCommandPlainBackspace")(c)}return c}function c(c,d){__p&&__p();c._pendingStateFromBeforeInput!==void 0&&(c.update(c._pendingStateFromBeforeInput),c._pendingStateFromBeforeInput=void 0);var e=a.getSelection(),f=e.anchorNode,j=e.isCollapsed,k=f.nodeType!==Node.TEXT_NODE,l=f.nodeType!==Node.TEXT_NODE&&f.nodeType!==Node.ELEMENT_NODE;if(b("gkx")("676847")){if(k)return}else if(l)return;if(f.nodeType===Node.TEXT_NODE&&(f.previousSibling!==null||f.nextSibling!==null)){k=f.parentNode;f.nodeValue=k.textContent;for(var l=k.firstChild;l!==null;l=l.nextSibling)l!==f&&k.removeChild(l)}l=f.textContent;k=c._latestEditorState;f=b("nullthrows")(b("findAncestorOffsetKey")(f));f=b("DraftOffsetKey").decode(f);var m=f.blockKey,n=f.decoratorKey;f=f.leafKey;n=k.getBlockTree(m).getIn([n,"leaves",f]);f=n.start;n=n.end;var o=k.getCurrentContent();m=o.getBlockForKey(m);var p=m.getText().slice(f,n);l.endsWith(h)&&(l=l.slice(0,-1));if(l===p){d=d.nativeEvent.inputType;if(d){d=i(d,k);if(d!==k){c.restoreEditorDOM();c.update(d);return}}return}d=k.getSelection();n=d.merge({anchorOffset:f,focusOffset:n,isBackward:!1});var q=m.getEntityAt(f);q=q&&o.getEntity(q);q=q&&q.getMutability();q=q==="MUTABLE";var r=q?"spellcheck-change":"apply-entity";n=b("DraftModifier").replaceText(o,n,l,m.getInlineStyleAt(f),q?m.getEntityAt(f):null);if(g)q=e.anchorOffset,m=e.focusOffset,e=f+Math.min(q,m),f=e+Math.abs(q-m),q=e,m=f;else{l=l.length-p.length;e=d.getStartOffset();f=d.getEndOffset();q=j?f+l:e;m=f+l}p=n.merge({selectionBefore:o.getSelectionAfter(),selectionAfter:d.merge({anchorOffset:q,focusOffset:m})});c.update(b("EditorState").push(k,p,r))}e.exports=c}),null);
__d("KeyBindingUtil",["UserAgent","isSoftNewlineEvent"],(function(a,b,c,d,e,f){"use strict";var g=b("UserAgent").isPlatform("Mac OS X"),h={isCtrlKeyCommand:function(a){return!!a.ctrlKey&&!a.altKey},isOptionKeyCommand:function(a){return g&&a.altKey},usesMacOSHeuristics:function(){return g},hasCommandModifier:function(a){return g?!!a.metaKey&&!a.altKey:h.isCtrlKeyCommand(a)},isSoftNewlineEvent:b("isSoftNewlineEvent")};e.exports=h}),null);
__d("SecondaryClipboard",["DraftModifier","EditorState","getContentStateFragment","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;a={cut:function(a){__p&&__p();var c=a.getCurrentContent(),d=a.getSelection(),e=null;if(d.isCollapsed()){var f=d.getAnchorKey(),h=c.getBlockForKey(f).getLength();if(h===d.getAnchorOffset()){f=c.getKeyAfter(f);if(f==null)return a;e=d.set("focusKey",f).set("focusOffset",0)}else e=d.set("focusOffset",h)}else e=d;e=b("nullthrows")(e);g=b("getContentStateFragment")(c,e);f=b("DraftModifier").removeRange(c,e,"forward");return f===c?a:b("EditorState").push(a,f,"remove-range")},paste:function(a){if(!g)return a;var c=b("DraftModifier").replaceWithFragment(a.getCurrentContent(),a.getSelection(),g);return b("EditorState").push(a,c,"insert-fragment")}};e.exports=a}),null);
__d("getRangeClientRects",["invariant","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("UserAgent").isBrowser("Chrome");function a(a){__p&&__p();var b=a.cloneRange(),c=[];for(var d=a.endContainer;d!=null;d=d.parentNode){var e=d===a.commonAncestorContainer;e?b.setStart(a.startContainer,a.startOffset):b.setStart(b.endContainer,0);var f=Array.from(b.getClientRects());c.push(f);if(e){c.reverse();return(f=[]).concat.apply(f,c)}b.setEndBefore(d)}g(0,578)}d=c?a:function(a){return Array.from(a.getClientRects())};e.exports=d}),null);
__d("expandRangeToStartOfLine",["invariant","UnicodeUtils","getRangeClientRects"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){__p&&__p();a=getComputedStyle(a);var b=document.createElement("div");b.style.fontFamily=a.fontFamily;b.style.fontSize=a.fontSize;b.style.fontStyle=a.fontStyle;b.style.fontWeight=a.fontWeight;b.style.lineHeight=a.lineHeight;b.style.position="absolute";b.textContent="M";a=document.body;a||g(0,5725);a.appendChild(b);var c=b.getBoundingClientRect();a.removeChild(b);return c.height}function i(a,b){__p&&__p();var c=Infinity,d=Infinity,e=-Infinity,f=-Infinity;for(var g=0;g<a.length;g++){var h=a[g];if(h.width===0||h.width===1)continue;c=Math.min(c,h.top);d=Math.min(d,h.bottom);e=Math.max(e,h.top);f=Math.max(f,h.bottom)}return e<=d&&e-c<b&&f-d<b}function j(a){switch(a.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return a.length;default:return a.childNodes.length}}function a(a){__p&&__p();a.collapsed||g(0,5726);a=a.cloneRange();var c=a.startContainer;c.nodeType!==1&&(c=c.parentNode);c=h(c);var d=a.endContainer,e=a.endOffset;a.setStart(a.startContainer,0);while(i(b("getRangeClientRects")(a),c)){d=a.startContainer;e=a.startOffset;d.parentNode||g(0,5727);a.setStartBefore(d);if(d.nodeType===1&&getComputedStyle(d).display!=="inline")break}var f=d,k=e-1;do{var l=f.nodeValue,m=k;for(;m>=0;m--){if(l!=null&&m>0&&b("UnicodeUtils").isSurrogatePair(l,m-1))continue;a.setStart(f,m);if(i(b("getRangeClientRects")(a),c))d=f,e=m;else break}if(m===-1||f.childNodes.length===0)break;f=f.childNodes[m];k=j(f)}while(!0);a.setStart(d,e);return a}e.exports=a}),null);
__d("keyCommandBackspaceToStartOfLine",["EditorState","expandRangeToStartOfLine","getDraftEditorSelectionWithNodes","moveSelectionBackward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function c(c){var d=b("removeTextWithStrategy")(c,function(c){var d=c.getSelection();if(d.isCollapsed()&&d.getAnchorOffset()===0)return b("moveSelectionBackward")(c,1);d=a.getSelection();d=d.getRangeAt(0);d=b("expandRangeToStartOfLine")(d);return b("getDraftEditorSelectionWithNodes")(c,null,d.endContainer,d.endOffset,d.startContainer,d.startOffset).selectionState},"backward");return d===c.getCurrentContent()?c:b("EditorState").push(c,d,"remove-range")}e.exports=c}),null);
__d("DraftRemovableWord",["TokenizeUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("TokenizeUtil").getPunctuation();c="['\u2018\u2019]";d="\\s|(?![_])"+a;f="^(?:"+d+")*(?:"+c+"|(?!"+d+").)*(?:(?!"+d+").)";var g=new RegExp(f);b="(?:(?!"+d+").)(?:"+c+"|(?!"+d+").)*(?:"+d+")*$";var h=new RegExp(b);function i(a,b){b=b?h.exec(a):g.exec(a);return b?b[0]:a}a={getBackward:function(a){return i(a,!0)},getForward:function(a){return i(a,!1)}};e.exports=a}),null);
__d("keyCommandBackspaceWord",["DraftRemovableWord","EditorState","moveSelectionBackward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=b("removeTextWithStrategy")(a,function(a){var c=a.getSelection(),d=c.getStartOffset();if(d===0)return b("moveSelectionBackward")(a,1);c=c.getStartKey();var e=a.getCurrentContent();e=e.getBlockForKey(c).getText().slice(0,d);c=b("DraftRemovableWord").getBackward(e);return b("moveSelectionBackward")(a,c.length||1)},"backward");return c===a.getCurrentContent()?a:b("EditorState").push(a,c,"remove-range")}e.exports=a}),null);
__d("moveSelectionForward",["warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){var d=a.getSelection();b("warning")(d.isCollapsed(),"moveSelectionForward should only be called with a collapsed SelectionState");var e=d.getStartKey(),f=d.getStartOffset();a=a.getCurrentContent();var g=e,h=a.getBlockForKey(e);c>h.getText().length-f?(g=a.getKeyAfter(e),h=0):h=f+c;return d.merge({focusKey:g,focusOffset:h})}e.exports=a}),null);
__d("keyCommandDeleteWord",["DraftRemovableWord","EditorState","moveSelectionForward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("removeTextWithStrategy")(a,function(a){var c=a.getSelection(),d=c.getStartOffset();c=c.getStartKey();var e=a.getCurrentContent();e=e.getBlockForKey(c).getText().slice(d);c=b("DraftRemovableWord").getForward(e);return b("moveSelectionForward")(a,c.length||1)},"forward");return c===a.getCurrentContent()?a:b("EditorState").push(a,c,"remove-range")}e.exports=a}),null);
__d("keyCommandInsertNewline",["DraftModifier","EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("DraftModifier").splitBlock(a.getCurrentContent(),a.getSelection());return b("EditorState").push(a,c,"split-block")}e.exports=a}),null);
__d("keyCommandMoveSelectionToEndOfBlock",["EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getSelection(),d=c.getEndKey(),e=a.getCurrentContent();e=e.getBlockForKey(d).getLength();return b("EditorState").set(a,{selection:c.merge({anchorKey:d,anchorOffset:e,focusKey:d,focusOffset:e,isBackward:!1}),forceSelection:!0})}e.exports=a}),null);
__d("keyCommandMoveSelectionToStartOfBlock",["EditorState"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.getSelection(),d=c.getStartKey();return b("EditorState").set(a,{selection:c.merge({anchorKey:d,anchorOffset:0,focusKey:d,focusOffset:0,isBackward:!1}),forceSelection:!0})}e.exports=a}),null);
__d("keyCommandPlainDelete",["EditorState","UnicodeUtils","moveSelectionForward","removeTextWithStrategy"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("removeTextWithStrategy")(a,function(c){var a=c.getSelection(),d=c.getCurrentContent(),e=a.getAnchorKey();a=a.getAnchorOffset();d=d.getBlockForKey(e).getText()[a];return b("moveSelectionForward")(c,d?b("UnicodeUtils").getUTF16Length(d,0):1)},"forward");if(c===a.getCurrentContent())return a;var d=a.getSelection();return b("EditorState").push(a,c.set("selectionBefore",d),d.isCollapsed()?"delete-character":"remove-range")}e.exports=a}),null);
__d("keyCommandTransposeCharacters",["DraftModifier","EditorState","getContentStateFragment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed())return a;var d=c.getAnchorOffset();if(d===0)return a;var e=c.getAnchorKey(),f=a.getCurrentContent();e=f.getBlockForKey(e);e=e.getLength();if(e<=1)return a;var g;d===e?(e=c.set("anchorOffset",d-1),g=c):(e=c.set("focusOffset",d+1),g=e.set("anchorOffset",d+1));c=b("getContentStateFragment")(f,e);d=b("DraftModifier").removeRange(f,e,"backward");f=d.getSelectionAfter();e=f.getAnchorOffset()-1;f=f.merge({anchorOffset:e,focusOffset:e});e=b("DraftModifier").replaceWithFragment(d,f,c);d=b("EditorState").push(a,e,"insert-fragment");return b("EditorState").acceptSelection(d,g)}e.exports=a}),null);
__d("keyCommandUndo",["EditorState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=b("EditorState").undo(c);if(c.getLastChangeType()==="spellcheck-change"){var f=e.getCurrentContent();d(b("EditorState").set(e,{nativelyRenderedContent:f}));return}a.preventDefault();if(!c.getNativelyRenderedContent()){d(e);return}d(b("EditorState").set(c,{nativelyRenderedContent:null}));setTimeout(function(){d(e)},0)}e.exports=a}),null);
__d("editOnKeyDown",["DraftModifier","EditorState","KeyBindingUtil","Keys","SecondaryClipboard","UserAgent","isEventHandled","keyCommandBackspaceToStartOfLine","keyCommandBackspaceWord","keyCommandDeleteWord","keyCommandInsertNewline","keyCommandMoveSelectionToEndOfBlock","keyCommandMoveSelectionToStartOfBlock","keyCommandPlainBackspace","keyCommandPlainDelete","keyCommandTransposeCharacters","keyCommandUndo"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("KeyBindingUtil").isOptionKeyCommand,h=b("UserAgent").isBrowser("Chrome");function i(a,c){__p&&__p();switch(a){case"redo":return b("EditorState").redo(c);case"delete":return b("keyCommandPlainDelete")(c);case"delete-word":return b("keyCommandDeleteWord")(c);case"backspace":return b("keyCommandPlainBackspace")(c);case"backspace-word":return b("keyCommandBackspaceWord")(c);case"backspace-to-start-of-line":return b("keyCommandBackspaceToStartOfLine")(c);case"split-block":return b("keyCommandInsertNewline")(c);case"transpose-characters":return b("keyCommandTransposeCharacters")(c);case"move-selection-to-start-of-block":return b("keyCommandMoveSelectionToStartOfBlock")(c);case"move-selection-to-end-of-block":return b("keyCommandMoveSelectionToEndOfBlock")(c);case"secondary-cut":return b("SecondaryClipboard").cut(c);case"secondary-paste":return b("SecondaryClipboard").paste(c);default:return c}}function a(a,c){__p&&__p();var d=c.which,e=a._latestEditorState;function f(b){b=a.props[b];if(b){b(c);return!0}else return!1}switch(d){case b("Keys").RETURN:c.preventDefault();if(a.props.handleReturn&&b("isEventHandled")(a.props.handleReturn(c,e)))return;break;case b("Keys").ESC:c.preventDefault();if(f("onEscape"))return;break;case b("Keys").TAB:if(f("onTab"))return;break;case b("Keys").UP:if(f("onUpArrow"))return;break;case b("Keys").RIGHT:if(f("onRightArrow"))return;break;case b("Keys").DOWN:if(f("onDownArrow"))return;break;case b("Keys").LEFT:if(f("onLeftArrow"))return;break;case b("Keys").SPACE:h&&g(c)&&c.preventDefault()}f=a.props.keyBindingFn(c);if(!f){if(d===b("Keys").SPACE&&h&&g(c)){d=b("DraftModifier").replaceText(e.getCurrentContent(),e.getSelection(),"\xa0");a.update(b("EditorState").push(e,d,"insert-characters"))}return}if(f==="undo"){b("keyCommandUndo")(c,e,a.update);return}c.preventDefault();if(a.props.handleKeyCommand&&b("isEventHandled")(a.props.handleKeyCommand(f,e,c.timeStamp)))return;d=i(f,e);d!==e&&a.update(d)}e.exports=a}),null);
__d("getSafeBodyFromHTML",["invariant","UserAgent"],(function(a,b,c,d,e,f,g){"use strict";var h=b("UserAgent").isBrowser("IE <= 9");function a(a){var b,c=null;!h&&document.implementation&&document.implementation.createHTMLDocument&&(b=document.implementation.createHTMLDocument("foo"),b.documentElement||g(0,1805),b.documentElement.innerHTML=a,c=b.getElementsByTagName("body")[0]);return c}e.exports=a}),null);
__d("convertFromHTMLToContentBlocks",["cx","CharacterMetadata","ContentBlock","ContentBlockNode","DefaultDraftBlockRenderMap","DraftEntity","URI","generateRandomKey","getSafeBodyFromHTML","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").List,i=b("immutable").Map,j=b("immutable").OrderedSet,k=b("gkx")("676842");a="&nbsp;";var l=" ",m=new RegExp("\r","g"),n=new RegExp("\n","g"),o=new RegExp("^\n","g"),p=new RegExp(a,"g"),q=new RegExp("&#13;?","g"),r=new RegExp("&#8203;?","g"),s=["bold","bolder","500","600","700","800","900"],t=["light","lighter","100","200","300","400"],u=["className","href","rel","target","title"],v=["alt","className","height","src","width"],w=(c={},c._3kq1=0,c._3kq2=1,c._3kq3=2,c._3kq4=3,c._3kq5=4,c),x=i({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE",mark:"HIGHLIGHT"}),y=function(a){var b={};a.mapKeys(function(a,c){var d=[c.element];c.aliasedElements!==void 0&&d.push.apply(d,c.aliasedElements);d.forEach(function(c){b[c]===void 0?b[c]=a:typeof b[c]==="string"?b[c]=[b[c],a]:b[c].push(a)})});return i(b)},z=function(a,b){b===void 0&&(b=0);Object.keys(w).some(function(c){a.classList.contains(c)&&(b=w[c])});return b},A=function(a){return!!(a instanceof HTMLAnchorElement&&a.href&&(a.protocol==="http:"||a.protocol==="https:"||a.protocol==="mailto:"))},B=function(a){return!!(a instanceof HTMLImageElement&&a.attributes.getNamedItem("src")&&a.attributes.getNamedItem("src").value)},C=function(a){var b=j();if(!(a instanceof HTMLElement))return b;a=a;var c=a.style.fontWeight,d=a.style.fontStyle,e=a.style.textDecoration;return b.withMutations(function(a){s.indexOf(c)>=0?a.add("BOLD"):t.indexOf(c)>=0&&a.remove("BOLD"),d==="italic"?a.add("ITALIC"):d==="normal"&&a.remove("ITALIC"),e==="underline"&&a.add("UNDERLINE"),e==="line-through"&&a.add("STRIKETHROUGH"),e==="none"&&(a.remove("UNDERLINE"),a.remove("STRIKETHROUGH"))})},D=function(a){return a==="ul"||a==="ol"},E=function(){__p&&__p();function a(a,c){this.characterList=h(),this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentStyle=j(),this.currentText="",this.wrapper=null,this.blockConfigs=[],this.contentBlocks=[],this.entityMap=b("DraftEntity"),this.clear(),this.blockTypeMap=a,this.disambiguate=c}var c=a.prototype;c.clear=function(){this.characterList=h(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentStyle=j(),this.currentText="",this.entityMap=b("DraftEntity"),this.wrapper=null,this.contentBlocks=[]};c.addDOMNode=function(a){var b;this.contentBlocks=[];this.currentDepth=0;(b=this.blockConfigs).push.apply(b,this.$1([a]));this.$2();this.currentText!==""&&this.blockConfigs.push(this.$3());return this};c.getContentBlocks=function(){this.contentBlocks.length===0&&(k?this.$4(this.blockConfigs):this.$5(this.blockConfigs));return{contentBlocks:this.contentBlocks,entityMap:this.entityMap}};c.addStyle=function(a){this.currentStyle=this.currentStyle.union(a)};c.removeStyle=function(a){this.currentStyle=this.currentStyle.subtract(a)};c.$3=function(a){a===void 0&&(a={});var c=a.key||b("generateRandomKey")();c=babelHelpers["extends"]({key:c,type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:this.currentDepth,parent:null,children:h(),prevSibling:null,nextSibling:null,childConfigs:[]},a);this.characterList=h();this.currentBlockType="unstyled";this.currentText="";return c};c.$1=function(a){__p&&__p();var c=[];for(var d=0;d<a.length;d++){var e=a[d],f=e.nodeName.toLowerCase();if(f==="body"||D(f)){this.$2();this.currentText!==""&&c.push(this.$3());var g=this.currentDepth,h=this.wrapper;D(f)&&(this.wrapper=f,D(h)&&this.currentDepth++);c.push.apply(c,this.$1(Array.from(e.childNodes)));this.currentDepth=g;this.wrapper=h;continue}g=this.blockTypeMap.get(f);if(g!==void 0){this.$2();this.currentText!==""&&c.push(this.$3());h=this.currentDepth;var i=this.wrapper;this.wrapper=f==="pre"?"pre":this.wrapper;typeof g!=="string"&&(g=this.disambiguate(f,this.wrapper)||g[0]||"unstyled");!k&&e instanceof HTMLElement&&(g==="unordered-list-item"||g==="ordered-list-item")&&(this.currentDepth=z(e,this.currentDepth));var l=b("generateRandomKey")(),m=this.$1(Array.from(e.childNodes));this.$2();c.push(this.$3({key:l,childConfigs:m,type:g}));this.currentDepth=h;this.wrapper=i;continue}if(f==="#text"){this.$6(e);continue}if(f==="br"){this.$7(e);continue}if(B(e)){this.$8(e);continue}if(A(e)){this.$9(e,c);continue}l=x.has(f)?j.of(x.get(f)):j();m=C(e);this.addStyle(l);this.addStyle(m);c.push.apply(c,this.$1(Array.from(e.childNodes)));this.removeStyle(m);this.removeStyle(l)}return c};c.$10=function(a){var c;this.currentText+=a;var d=b("CharacterMetadata").create({style:this.currentStyle,entity:this.currentEntity});this.characterList=(c=this.characterList).push.apply(c,Array(a.length).fill(d))};c.$2=function(){var a=this.currentText.length,b=a-this.currentText.trimLeft().length,c=this.currentText.trimRight().length,d=this.characterList.findEntry(function(a){return a.getEntity()!==null});b=d!==void 0?Math.min(b,d[0]):b;d=this.characterList.reverse().findEntry(function(a){return a.getEntity()!==null});c=d!==void 0?Math.max(c,a-d[0]):c;b>c?(this.currentText="",this.characterList=h()):(this.currentText=this.currentText.slice(b,c),this.characterList=this.characterList.slice(b,c))};c.$6=function(a){a=a.textContent;var b=a.trim();b===""&&this.wrapper!=="pre"&&(a=" ");this.wrapper!=="pre"&&(a=a.replace(o,""),a=a.replace(n,l));this.$10(a)};c.$7=function(a){if(!(a instanceof HTMLBRElement))return;this.$10("\n")};c.$8=function(a){if(!(a instanceof HTMLImageElement))return;var c=a,d={};v.forEach(function(a){var b=c.getAttribute(a);b&&(d[a]=b)});this.currentEntity=this.entityMap.__create("IMAGE","MUTABLE",d);b("gkx")("676848")?a.getAttribute("role")!=="presentation"&&this.$10("\ud83d\udcf7"):this.$10("\ud83d\udcf7");this.currentEntity=null};c.$9=function(a,c){__p&&__p();if(!(a instanceof HTMLAnchorElement))return;var d=a,e={};u.forEach(function(a){var b=d.getAttribute(a);b&&(e[a]=b)});e.url=new(b("URI"))(d.href).toString();this.currentEntity=this.entityMap.__create("LINK","MUTABLE",e||{});c.push.apply(c,this.$1(Array.from(a.childNodes)));this.currentEntity=null};c.$4=function(a,c){__p&&__p();c===void 0&&(c=null);var d=a.length-1;for(var e=0;e<=d;e++){var f=a[e];f.parent=c;f.prevSibling=e>0?a[e-1].key:null;f.nextSibling=e<d?a[e+1].key:null;f.children=h(f.childConfigs.map(function(a){return a.key}));this.contentBlocks.push(new(b("ContentBlockNode"))(babelHelpers["extends"]({},f)));this.$4(f.childConfigs,f.key)}};c.$11=function(a){var b=this;a=h(a).flatMap(function(a){return a.type!=="unstyled"||a.text!==""?[a]:b.$11(a.childConfigs)});return a};c.$5=function(a){var c=this;a=this.$11(a);a.forEach(function(a){var d=c.$12(a.childConfigs),e=d.text;d=d.characterList;c.contentBlocks.push(new(b("ContentBlock"))(babelHelpers["extends"]({},a,{text:a.text+e,characterList:a.characterList.concat(d)})))})};c.$12=function(a){__p&&__p();var b=a.length-1,c="",d=h();for(var e=0;e<=b;e++){var f=a[e];c+=f.text;d=d.concat(f.characterList);c!==""&&f.blockType!=="unstyled"&&(c+="\n",d=d.push(d.last()));f=this.$12(f.childConfigs);c+=f.text;d=d.concat(f.characterList)}return{text:c,characterList:d}};return a}();d=function(a,c,d){__p&&__p();c===void 0&&(c=b("getSafeBodyFromHTML"));d===void 0&&(d=b("DefaultDraftBlockRenderMap"));a=a.trim().replace(m,"").replace(p,l).replace(q,"").replace(r,"");c=c(a);if(!c)return null;a=y(d);d=function(a,b){return a==="li"?b==="ol"?"ordered-list-item":"unordered-list-item":null};return new E(a,d).addDOMNode(c).getContentBlocks()};e.exports=d}),null);
__d("DraftPasteProcessor",["ContentBlock","ContentBlockNode","convertFromHTMLToContentBlocks","generateRandomKey","getSafeBodyFromHTML","gkx","immutable","sanitizeDraftText"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").List,h=b("immutable").Repeat,i=b("gkx")("676842"),j=i?b("ContentBlockNode"):b("ContentBlock");a={processHTML:function(a,c){return b("convertFromHTMLToContentBlocks")(a,b("getSafeBodyFromHTML"),c)},processText:function(a,c,d){__p&&__p();return a.reduce(function(a,e,f){__p&&__p();e=b("sanitizeDraftText")(e);var k=b("generateRandomKey")();e={key:k,type:d,text:e,characterList:g(h(c,e.length))};if(i&&f!==0){f=f-1;f=a[f]=a[f].merge({nextSibling:k});e=babelHelpers["extends"]({},e,{prevSibling:f.getKey()})}a.push(new j(e));return a},[])}};e.exports=a}),null);
__d("adjustBlockDepthForContentState",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b,c,d){var e=b.getStartKey(),f=b.getEndKey(),g=a.getBlockMap(),h=g.toSeq().skipUntil(function(a,b){return b===e}).takeUntil(function(a,b){return b===f}).concat([[f,g.get(f)]]).map(function(a){var b=a.getDepth()+c;b=Math.max(0,Math.min(b,d));return a.set("depth",b)});g=g.merge(h);return a.merge({blockMap:g,selectionBefore:b,selectionAfter:b})}e.exports=a}),null);
__d("RichTextEditorUtil",["DraftModifier","EditorState","adjustBlockDepthForContentState","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={currentBlockContainsLink:function(a){var b=a.getSelection();a=a.getCurrentContent();var c=a.getEntityMap();return a.getBlockForKey(b.getAnchorKey()).getCharacterList().slice(b.getStartOffset(),b.getEndOffset()).some(function(a){a=a.getEntity();return!!a&&c.__get(a).getType()==="LINK"})},getCurrentBlockType:function(a){var b=a.getSelection();return a.getCurrentContent().getBlockForKey(b.getStartKey()).getType()},getDataObjectForLinkURL:function(a){return{url:a.toString()}},handleKeyCommand:function(a,b,c){switch(b){case"bold":return g.toggleInlineStyle(a,"BOLD");case"italic":return g.toggleInlineStyle(a,"ITALIC");case"underline":return g.toggleInlineStyle(a,"UNDERLINE");case"code":return g.toggleCode(a);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return g.onBackspace(a);case"delete":case"delete-word":case"delete-to-end-of-block":return g.onDelete(a);default:return null}},insertSoftNewline:function(a){var c=b("DraftModifier").insertText(a.getCurrentContent(),a.getSelection(),"\n",a.getCurrentInlineStyle(),null);a=b("EditorState").push(a,c,"insert-characters");return b("EditorState").forceSelection(a,c.getSelectionAfter())},onBackspace:function(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed()||c.getAnchorOffset()||c.getFocusOffset())return null;var d=a.getCurrentContent(),e=c.getStartKey();e=d.getBlockBefore(e);if(e&&e.getType()==="atomic"){e=d.getBlockMap()["delete"](e.getKey());e=d.merge({blockMap:e,selectionAfter:c});if(e!==d)return b("EditorState").push(a,e,"remove-range")}c=g.tryToRemoveBlockStyle(a);return c?b("EditorState").push(a,c,"change-block-type"):null},onDelete:function(a){__p&&__p();var c=a.getSelection();if(!c.isCollapsed())return null;var d=a.getCurrentContent(),e=c.getStartKey(),f=d.getBlockForKey(e);f=f.getLength();if(c.getStartOffset()<f)return null;f=d.getBlockAfter(e);if(!f||f.getType()!=="atomic")return null;e=c.merge({focusKey:f.getKey(),focusOffset:f.getLength()});c=b("DraftModifier").removeRange(d,e,"forward");return c!==d?b("EditorState").push(a,c,"remove-range"):null},onTab:function(a,c,d){__p&&__p();var e=c.getSelection(),f=e.getAnchorKey();if(f!==e.getFocusKey())return c;var g=c.getCurrentContent();f=g.getBlockForKey(f);var h=f.getType();if(h!=="unordered-list-item"&&h!=="ordered-list-item")return c;a.preventDefault();h=f.getDepth();if(!a.shiftKey&&h===d)return c;f=b("adjustBlockDepthForContentState")(g,e,a.shiftKey?-1:1,d);return b("EditorState").push(c,f,"adjust-depth")},toggleBlockType:function(a,c){__p&&__p();var d=a.getSelection(),e=d.getStartKey(),f=d.getEndKey(),g=a.getCurrentContent(),h=d;if(e!==f&&d.getEndOffset()===0){var i=b("nullthrows")(g.getBlockBefore(f));f=i.getKey();h=h.merge({anchorKey:e,anchorOffset:d.getStartOffset(),focusKey:f,focusOffset:i.getLength(),isBackward:!1})}d=g.getBlockMap().skipWhile(function(a,b){return b!==e}).reverse().skipWhile(function(a,b){return b!==f}).some(function(a){return a.getType()==="atomic"});if(d)return a;i=g.getBlockForKey(e).getType()===c?"unstyled":c;return b("EditorState").push(a,b("DraftModifier").setBlockType(g,h,i),"change-block-type")},toggleCode:function(a){var b=a.getSelection(),c=b.getAnchorKey(),d=b.getFocusKey();return b.isCollapsed()||c!==d?g.toggleBlockType(a,"code-block"):g.toggleInlineStyle(a,"CODE")},toggleInlineStyle:function(a,c){var d=a.getSelection(),e=a.getCurrentInlineStyle();if(d.isCollapsed())return b("EditorState").setInlineStyleOverride(a,e.has(c)?e.remove(c):e.add(c));var f=a.getCurrentContent();e.has(c)?e=b("DraftModifier").removeInlineStyle(f,d,c):e=b("DraftModifier").applyInlineStyle(f,d,c);return b("EditorState").push(a,e,"change-inline-style")},toggleLink:function(a,c,d){c=b("DraftModifier").applyEntity(a.getCurrentContent(),c,d);return b("EditorState").push(a,c,"apply-entity")},tryToRemoveBlockStyle:function(a){__p&&__p();var c=a.getSelection(),d=c.getAnchorOffset();if(c.isCollapsed()&&d===0){d=c.getAnchorKey();a=a.getCurrentContent();var e=a.getBlockForKey(d);e=e.getType();d=a.getBlockBefore(d);if(e==="code-block"&&d&&d.getType()==="code-block"&&d.getLength()!==0)return null;if(e!=="unstyled")return b("DraftModifier").setBlockType(a,c,"unstyled")}return null}};e.exports=g}),null);
__d("splitTextIntoTextBlocks",[],(function(a,b,c,d,e,f){"use strict";var g=/\r\n?|\n/g;function a(a){return a.split(g)}e.exports=a}),null);
__d("editOnPaste",["BlockMapBuilder","CharacterMetadata","DataTransfer","DraftModifier","DraftPasteProcessor","EditorState","RichTextEditorUtil","getEntityKeyForSelection","getTextContentFromFiles","isEventHandled","splitTextIntoTextBlocks"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){__p&&__p();c.preventDefault();c=new(b("DataTransfer"))(c.clipboardData);if(!c.isRichText()){var d=c.getFiles(),e=c.getText();if(d.length>0){if(a.props.handlePastedFiles&&b("isEventHandled")(a.props.handlePastedFiles(d)))return;b("getTextContentFromFiles")(d,function(d){__p&&__p();d=d||e;if(!d)return;var c=a._latestEditorState;d=b("splitTextIntoTextBlocks")(d);var f=b("CharacterMetadata").create({style:c.getCurrentInlineStyle(),entity:b("getEntityKeyForSelection")(c.getCurrentContent(),c.getSelection())}),g=b("RichTextEditorUtil").getCurrentBlockType(c);d=b("DraftPasteProcessor").processText(d,f,g);f=b("BlockMapBuilder").createFromArray(d);g=b("DraftModifier").replaceWithFragment(c.getCurrentContent(),c.getSelection(),f);a.update(b("EditorState").push(c,g,"insert-fragment"))});return}}d=[];var f=c.getText(),i=c.getHTML(),j=a._latestEditorState;if(a.props.handlePastedText&&b("isEventHandled")(a.props.handlePastedText(f,i,j)))return;f&&(d=b("splitTextIntoTextBlocks")(f));if(!a.props.stripPastedStyles){var k=a.getClipboard();if(c.isRichText()&&k){if(i.indexOf(a.getEditorKey())!==-1||d.length===1&&k.size===1&&k.first().getText()===f){a.update(g(a._latestEditorState,k));return}}else if(k&&c.types.includes("com.apple.webarchive")&&!c.types.includes("text/html")&&h(d,k)){a.update(g(a._latestEditorState,k));return}if(i){f=b("DraftPasteProcessor").processHTML(i,a.props.blockRenderMap);if(f){c=f.contentBlocks;k=f.entityMap;if(c){i=b("BlockMapBuilder").createFromArray(c);a.update(g(a._latestEditorState,i,k));return}}}a.setClipboard(null)}if(d.length){f=b("CharacterMetadata").create({style:j.getCurrentInlineStyle(),entity:b("getEntityKeyForSelection")(j.getCurrentContent(),j.getSelection())});c=b("RichTextEditorUtil").getCurrentBlockType(j);i=b("DraftPasteProcessor").processText(d,f,c);k=b("BlockMapBuilder").createFromArray(i);a.update(g(a._latestEditorState,k))}}function g(a,c,d){c=b("DraftModifier").replaceWithFragment(a.getCurrentContent(),a.getSelection(),c);return b("EditorState").push(a,c.set("entityMap",d),"insert-fragment")}function h(a,b){return a.length===b.size&&b.valueSeq().every(function(b,c){return b.getText()===a[c]})}e.exports=a}),null);
__d("DraftEditorEditHandler",["editOnBeforeInput","editOnBlur","editOnCompositionStart","editOnCopy","editOnCut","editOnDragOver","editOnDragStart","editOnFocus","editOnInput","editOnKeyDown","editOnPaste","editOnSelect"],(function(a,b,c,d,e,f){"use strict";a={onBeforeInput:b("editOnBeforeInput"),onBlur:b("editOnBlur"),onCompositionStart:b("editOnCompositionStart"),onCopy:b("editOnCopy"),onCut:b("editOnCut"),onDragOver:b("editOnDragOver"),onDragStart:b("editOnDragStart"),onFocus:b("editOnFocus"),onInput:b("editOnInput"),onKeyDown:b("editOnKeyDown"),onPaste:b("editOnPaste"),onSelect:b("editOnSelect")};e.exports=a}),null);
__d("DraftEditorPlaceholder.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return this.props.text!==a.text||this.props.editorState.getSelection().getHasFocus()!==a.editorState.getSelection().getHasFocus()};d.render=function(){var a=this.props.editorState.getSelection().getHasFocus();a="_1p1t"+(a?" _1p1u":"");var c={whiteSpace:"pre-wrap"};return b("React").createElement("div",{className:a},b("React").createElement("div",{className:"_1p1v",id:this.props.accessibilityID,style:c},this.props.text))};return c}(b("React").Component);e.exports=a}),null);
__d("getDefaultKeyBinding",["KeyBindingUtil","Keys","UserAgent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("UserAgent").isPlatform("Mac OS X"),h=g&&b("UserAgent").isBrowser("Firefox < 29"),i=b("KeyBindingUtil").hasCommandModifier,j=b("KeyBindingUtil").isCtrlKeyCommand;function k(a){return g&&a.altKey||j(a)}function l(a){return!i(a)?null:a.shiftKey?"redo":"undo"}function m(a){return!g&&a.shiftKey?null:k(a)?"delete-word":"delete"}function n(a){return i(a)&&g?"backspace-to-start-of-line":k(a)?"backspace-word":"backspace"}function a(a){__p&&__p();switch(a.keyCode){case 66:return i(a)?"bold":null;case 68:return j(a)?"delete":null;case 72:return j(a)?"backspace":null;case 73:return i(a)?"italic":null;case 74:return i(a)?"code":null;case 75:return g&&j(a)?"secondary-cut":null;case 77:return j(a)?"split-block":null;case 79:return j(a)?"split-block":null;case 84:return g&&j(a)?"transpose-characters":null;case 85:return i(a)?"underline":null;case 87:return g&&j(a)?"backspace-word":null;case 89:return j(a)?g?"secondary-paste":"redo":null;case 90:return l(a)||null;case b("Keys").RETURN:return"split-block";case b("Keys").DELETE:return m(a);case b("Keys").BACKSPACE:return n(a);case b("Keys").LEFT:return h&&i(a)?"move-selection-to-start-of-block":null;case b("Keys").RIGHT:return h&&i(a)?"move-selection-to-end-of-block":null;default:return null}}e.exports=a}),null);
__d("DraftEditor.react",["cx","invariant","DefaultDraftBlockRenderMap","DefaultDraftInlineStyle","DraftEditorCompositionHandler","DraftEditorContents.react","DraftEditorDragHandler","DraftEditorEditHandler","DraftEditorPlaceholder.react","DraftEffects","EditorState","React","ReactDOM","Scroll","Style","UserAgent","emptyFunction","generateRandomKey","getDefaultKeyBinding","getScrollPosition","gkx","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("UserAgent").isBrowser("IE"),j=!i,k={edit:b("DraftEditorEditHandler"),composite:b("DraftEditorCompositionHandler"),drag:b("DraftEditorDragHandler"),cut:null,render:null},l=!1,m=function(b){__p&&__p();babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.render=function(){return null};c.componentDidMount=function(){this._update()};c.componentDidUpdate=function(){this._update()};c._update=function(){var a=this.props.editor;a._latestEditorState=this.props.editorState;a._blockSelectEvents=!0};return a}(b("React").Component);a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.focus=function(a){__p&&__p();var c=d.props.editorState,e=c.getSelection().getHasFocus(),f=d.editor;if(!f)return;var g=b("Style").getScrollParent(f);a=a||b("getScrollPosition")(g);var i=a.x;a=a.y;f instanceof HTMLElement||h(0,2355);f.focus();g===window?window.scrollTo(i,a):b("Scroll").setTop(g,a);e||d.update(b("EditorState").forceSelection(c,c.getSelection()))};d.blur=function(){var a=d.editor;a instanceof HTMLElement||h(0,2355);a.blur()};d.setMode=function(a){var b=d.props,c=b.onPaste,e=b.onCut;b=b.onCopy;var f=babelHelpers["extends"]({},k.edit);c&&(f.onPaste=c);e&&(f.onCut=e);b&&(f.onCopy=b);c=babelHelpers["extends"]({},k,{edit:f});d._handler=c[a]};d.exitCurrentMode=function(){d.setMode("edit")};d.restoreEditorDOM=function(a){d.setState({contentsKey:d.state.contentsKey+1},function(){d.focus(a)})};d.setClipboard=function(a){d._clipboard=a};d.getClipboard=function(){return d._clipboard};d.update=function(a){d._latestEditorState=a,d.props.onChange(a)};d.onDragEnter=function(){d._dragCount++};d.onDragLeave=function(){d._dragCount--,d._dragCount===0&&d.exitCurrentMode()};d._blockSelectEvents=!1;d._clipboard=null;d._handler=null;d._dragCount=0;d._editorKey=c.editorKey||b("generateRandomKey")();d._placeholderAccessibilityID="placeholder-"+d._editorKey;d._latestEditorState=c.editorState;d._latestCommittedEditorState=c.editorState;d._onBeforeInput=d._buildHandler("onBeforeInput");d._onBlur=d._buildHandler("onBlur");d._onCharacterData=d._buildHandler("onCharacterData");d._onCompositionEnd=d._buildHandler("onCompositionEnd");d._onCompositionStart=d._buildHandler("onCompositionStart");d._onCopy=d._buildHandler("onCopy");d._onCut=d._buildHandler("onCut");d._onDragEnd=d._buildHandler("onDragEnd");d._onDragOver=d._buildHandler("onDragOver");d._onDragStart=d._buildHandler("onDragStart");d._onDrop=d._buildHandler("onDrop");d._onInput=d._buildHandler("onInput");d._onFocus=d._buildHandler("onFocus");d._onKeyDown=d._buildHandler("onKeyDown");d._onKeyPress=d._buildHandler("onKeyPress");d._onKeyUp=d._buildHandler("onKeyUp");d._onMouseDown=d._buildHandler("onMouseDown");d._onMouseUp=d._buildHandler("onMouseUp");d._onPaste=d._buildHandler("onPaste");d._onSelect=d._buildHandler("onSelect");d.getEditorKey=function(){return d._editorKey};d.state={contentsKey:0};return d}var d=c.prototype;d._buildHandler=function(a){var c=this,d=b("ReactDOM").unstable_flushControlled;return function(b){if(!c.props.readOnly){var e=c._handler&&c._handler[a];e&&(d?d(function(){return e(c,b)}):e(c,b))}}};d._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()};d._renderPlaceholder=function(){if(this._showPlaceholder()){var a={text:b("nullthrows")(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return b("React").createElement(b("DraftEditorPlaceholder.react"),a)}return null};d.render=function(){var a=this,c=this.props,d=c.blockRenderMap,e=c.blockRendererFn,f=c.blockStyleFn,g=c.customStyleFn,h=c.customStyleMap,i=c.editorState,k=c.readOnly,l=c.textAlignment;c=c.textDirectionality;l="_5rp7"+(l==="left"?" _5rp8":"")+(l==="right"?" _5rp9":"")+(l==="center"?" _5rpa":"");var n={outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},o=this.props.role||"textbox",p=o==="combobox"?!!this.props.ariaExpanded:null;d={blockRenderMap:d,blockRendererFn:e,blockStyleFn:f,customStyleMap:babelHelpers["extends"]({},b("DefaultDraftInlineStyle"),h),customStyleFn:g,editorKey:this._editorKey,editorState:i,key:"contents"+this.state.contentsKey,textDirectionality:c};return b("React").createElement("div",{className:l},this._renderPlaceholder(),b("React").createElement("div",{className:"_5rpb",ref:function(b){return a.editorContainer=b}},b("React").createElement("div",{"aria-activedescendant":k?null:this.props.ariaActiveDescendantID,"aria-autocomplete":k?null:this.props.ariaAutoComplete,"aria-controls":k?null:this.props.ariaControls,"aria-describedby":this.props.ariaDescribedBy||this._placeholderAccessibilityID,"aria-expanded":k?null:p,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,"aria-owns":k?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:(k?"":"notranslate")+" _5rpu",contentEditable:!k,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:function(b){return a.editor=b},role:k?null:o,spellCheck:j&&this.props.spellCheck,style:n,suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},b("React").createElement(m,{editor:this,editorState:i}),b("React").createElement(b("DraftEditorContents.react"),d))))};d.componentDidMount=function(){this._blockSelectEvents=!1,!l&&b("gkx")("676845")&&(l=!0,b("DraftEffects").initODS()),this.setMode("edit"),i&&document.execCommand("AutoUrlDetect",!1,!1)};d.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState};return c}(b("React").Component);a.defaultProps={blockRenderMap:b("DefaultDraftBlockRenderMap"),blockRendererFn:b("emptyFunction").thatReturnsNull,blockStyleFn:b("emptyFunction").thatReturns(""),keyBindingFn:b("getDefaultKeyBinding"),readOnly:!1,spellCheck:!1,stripPastedStyles:!1};e.exports=a}),null);
__d("FantailLogger",["FantailConfig"],(function(a,b,c,d,e,f){__p&&__p();var g=b("FantailConfig").FantailLogQueue;a={debug:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).debug.apply(c,[b].concat(e))},info:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).info.apply(c,[b].concat(e))},warn:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).warn.apply(c,[b].concat(e))},error:function(a,b){var c;for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];g&&(c=g.get(a)).error.apply(c,[b].concat(e))}};e.exports=a}),null);
__d("codedError",["fbt","invariant"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){h(0,2095)}a.withParams=function(a,b){h(0,2095)};a._=function(a,b,c,d){b=b(g);c=c(g,d);d=b+": "+c;d=new Error(d);Object.assign(d,{framesToPop:1,code:a,description:c,summary:b});return d};e.exports=a}),null);
__d("FRXEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AGORA_GROUPS:"agora_groups",AGORA_RECENT_NEWS:"agora_recent_news",BLOCK_BUTTON:"block_button",BLOCK_COMPOSER:"block_composer",CHEVRON_BUTTON:"chevron_button",CHEVRON_TAGS:"chevron_tags",CONTENT_OVERLAY:"content_overlay",COMMENT:"comment",DELETE_CONTENT_REPORT:"delete_content_report",DELETE_CONVERSATION_REPORT:"delete_conversation_report",DEVELOPER_FEEDBACK_BUTTON:"developer_feedback_button",EVENTS_REPORTING:"events_reporting",FEEDBACK_BUTTON:"feedback_button",FOX_CHEVRON_TAGS:"fox_chevron_tags",GEMSTONE_MEDIA:"gemstone_media",GEMSTONE_MESSAGING:"gemstone_messaging",GEMSTONE_PROFILE:"gemstone_profile",GROUPS_ADMIN_FEEDBACK:"groups_admin_feedback",GROUPS_DISCOVER:"groups_discover_page",GROUPS_DISCOVER_HIDE_BUTTON:"groups_discover_hide_button",GROUPS_JOIN_QUESTION:"groups_join_question",GROUPS_LEAVE:"groups_leave",GROUPS_LEAVE_BROWSE:"groups_leave_browse",GROUPS_LEAVE_SPECIAL:"groups_leave_special",GROUP_MALL_RELATED_GROUPS_CHAINING:"group_mall_related_groups_chaining",GROUP_MALL_RHC:"group_mall_rhc",GROUPS_POLL:"groups_poll",GROUPS_REPORT:"groups_report",GROUPS_REPORT_TO_ADMIN:"groups_report_to_admin",GROUPS_TAB_CHAT_ROW:"groups_tab_chat_row",GROUPS_TAB_DISCOVER_FIRST:"groups_tab_discover_first",HATE_CTA:"hate_cta",HIDE_AD_BUTTON:"hide_ad_button",MARK_AS_SOLD_BUTTON:"mark_as_sold_button",MOBILE_GYSJ:"mobile_gysj",NFX:"nfx",NOTIFICATIONS_JEWEL:"notifications_jewel",PAGE_UNFOLLOW:"page_unfollow",PAGE_UNFOLLOW_CHEVRON:"page_unfollow_chevron",PAGE_UNLIKE:"page_unlike",PAGE_VERIFICATION_BADGE:"page_verification_badge",PROACTIVE_WARNING_BANNER:"proactive_warning_banner",PROFILE_REPORT_BUTTON:"profile_report_button",RELATED_SEARCHES:"related_searches",REPORT_AD_BUTTON:"report_ad_button",REPORT_BUTTON:"report_button",REPORT_LONG_PRESS:"report_long_press",SCHOOL_COMMUNITY_TAGS:"school_community_tags",SEARCH_TYPEAHEAD:"search_typeahead",SNACKBAR:"snackbar",STRUCTURED_REPORT_BUTTON:"structured_report_button",THREADLIST_MENU_REPORT:"threadlist_menu_report",TOMBSTONE:"tombstone",X_OUT:"x_out",UNKNOWN:"unknown",UNOWNED_PAGE_ACTION_MENU_REPORT_PAGE:"unowned_page_action_menu_report_page",SUPPORT_HOME_HI_PRI:"support_home_hi_pri"})}),null);
__d("MessengerDiscoveryEntryPoint",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({BROWSER_PROFILE_ICON:"browser_profile_icon",FB_STORY:"fb_story",FB_STORY_VIEWER_SHEET_ROW:"fb_story:viewer_sheet_row",FB_STORY_VIEWER_SHEET_MENU:"fb_story:viewer_sheet_menu",FB_STORY_THREAD_VIEW_HEADER:"fb_story:thread_view_header",FB_STORY_THREAD_VIEW_FOOTER:"fb_story:thread_view_footer",FB_STORY_STORIES_PUSH_NOTIFICATION:"fb_story:stories_push_notification",FB_STORY_STORIES_JEWEL_NOTIFICATION:"fb_story:stories_jewel_notification",FB_STORY_STORIES_VIEWER_CONSUMER_REPLY:"fb_story:stories_viewer_consumer_reply",FB_STORY_STORIES_VIEWER_CONSUMER_ARTIFACT:"fb_story:stories_viewer_consumer_artifact",FB_STORY_STORIES_PAGE_STORY_CONVERSATIONS:"fb_story:stories_page_story_conversations",MESSAGING_INBOX_IN_BLUE:"messaging_inbox_in_blue",MESSAGING_INBOX_IN_BLUE_THREAD_LIST:"messaging_inbox_in_blue:thread_list",MESSAGING_INBOX_IN_BLUE_PEOPLE_PICKER:"messaging_inbox_in_blue:people_picker",ANONYMOUS_MESSAGING:"anonymous_messaging",FIRST_PARTY_BOT:"first_party_bot",FIRST_PARTY_BOT_RECRUITING_BOT:"first_party_bot:recruiting_bot",FIRST_PARTY_BOT_MESSENGER_BOT:"first_party_bot:messenger_bot",FIRST_PARTY_BOT_WORKPLACE_APP:"first_party_bot:workplace_app",FIRST_PARTY_BOT_REPORT_SPAM:"first_party_bot:report_spam",FIRST_PARTY_BOT_MOBILE_BUILDS_BOT:"first_party_bot:mobile_builds_bot",FIRST_PARTY_BOT_FB_TEST_PAGE:"first_party_bot:fb_test_page",FIRST_PARTY_BOT_CALENDAR_BOT:"first_party_bot:calendar_bot",FIRST_PARTY_BOT_ORDER_FOOD:"first_party_bot:order_food",FIRST_PARTY_BOT_BUSINESS_ASSISTANT:"first_party_bot:business_assistant",FIRST_PARTY_BOT_MOBILE_FINANCIAL_SERVICE:"first_party_bot:mobile_financial_service",FIRST_PARTY_BOT_FACEBOOK_BUSINESS:"first_party_bot:facebook_business",FIRST_PARTY_BOT_LEAD_GEN:"first_party_bot:lead_gen",FIRST_PARTY_BOT_MARKETPLACE:"first_party_bot:marketplace",FIRST_PARTY_BOT_INSTANT_EXPERIENCES:"first_party_bot:instant_experiences",FIRST_PARTY_BOT_PRODUCT_SUPPORT_TOOL:"first_party_bot:product_support_tool",FIRST_PARTY_BOT_CTA_ADS:"first_party_bot:cta_ads",FIRST_PARTY_BOT_FB_LOGIN_ALERTS:"first_party_bot:fb_login_alerts",FIRST_PARTY_BOT_M:"first_party_bot:m",FIRST_PARTY_BOT_TOGETHER:"first_party_bot:together",FIRST_PARTY_BOT_MPP_SUPPORT:"first_party_bot:mpp_support",MESSENGER_SEARCH:"messenger_search",MESSENGER_SEARCH_HOME:"messenger_search:home",MESSENGER_SEARCH_PEOPLE:"messenger_search:people",MESSENGER_SEARCH_GAMES:"messenger_search:games",MESSENGER_SEARCH_DISCOVER:"messenger_search:discover",MESSENGER_SEARCH_NULL_STATE:"messenger_search:null_state",MESSENGER_SEARCH_M3:"messenger_search:m3",MESSENGER_SEARCH_M4:"messenger_search:m4",FB_NOTIFICATIONS:"fb_notifications",BEGIN_SHARE_FLOW:"begin_share_flow",APP_INSIGHTS:"app_insights",BRANDED_CAMERA:"branded_camera",SAMPLE_BOTS:"sample_bots",PAGES_COMMS_AUTOMATED_RESPONSES:"pages_comms_automated_responses",PAGES_COMMS_AUTOMATED_RESPONSES_PREVIEW:"pages_comms_automated_responses:preview",PAGES_COMMS_AUTOMATED_RESPONSES_RECOMMENDATIONS:"pages_comms_automated_responses:recommendations",PAGES_COMMS_AUTOMATED_RESPONSES_JOB_APPLICATION:"pages_comms_automated_responses:job_application",PAGES_COMMS_AUTOMATED_RESPONSES_SMART_REPLY_LOCATION:"pages_comms_automated_responses:smart_reply_location",PAGES_COMMS_AUTOMATED_RESPONSES_SMART_REPLY_CONTACT:"pages_comms_automated_responses:smart_reply_contact",PAGES_COMMS_AUTOMATED_RESPONSES_SMART_REPLY_HOURS:"pages_comms_automated_responses:smart_reply_hours",PAGES_COMMS_AUTOMATED_RESPONSES_SMART_REPLY_POSITIVE_FEEDBACK:"pages_comms_automated_responses:smart_reply_positive_feedback",PAGES_COMMS_AUTOMATED_RESPONSES_SMART_REPLY_NEGATIVE_FEEDBACK:"pages_comms_automated_responses:smart_reply_negative_feedback",PAGES_COMMS_AUTOMATED_RESPONSES_INSTANT_REPLIES:"pages_comms_automated_responses:instant_replies",PAGES_COMMS_AUTOMATED_RESPONSES_AWAY_MESSAGE:"pages_comms_automated_responses:away_message",PAGES_COMMS_AUTOMATED_RESPONSES_APPOINTMENT_REMINDER:"pages_comms_automated_responses:appointment_reminder",PAGES_COMMS_AUTOMATED_RESPONSES_APPOINTMENT_FOLLOWUP:"pages_comms_automated_responses:appointment_followup",CUSTOMER_MATCHING:"customer_matching",CUSTOMER_MATCHING_PHONE_NUMBER:"customer_matching:phone_number",VERTICAL_SERVICES:"vertical_services",VERTICAL_SERVICES_GET_QUOTE:"vertical_services:get_quote",MESSENGER_RTC:"messenger_rtc",MESSENGER_RTC_PHOTO_CAPTURE:"messenger_rtc:photo_capture",MESSENGERDOTCOM:"messengerdotcom",MESSENGERDOTCOM_WEB_SEARCH:"messengerdotcom:web_search",MESSENGERDOTCOM_PAGES_PLUGIN:"messengerdotcom:pages_plugin",FB_PROFILE:"fb_profile",FB_PROFILE_MESSAGE_BUTTON:"fb_profile:message_button",DISCOVER_TAB:"discover_tab",DISCOVER_TAB_M4:"discover_tab:m4",DISCOVER_TAB_M3:"discover_tab:m3",BYMM_NULL_STATE:"bymm_null_state",FUNDRAISER_SUPPORT:"fundraiser_support",FUNDRAISER_SUPPORT_REACTIVE_MORE_MENU:"fundraiser_support:reactive_more_menu",FUNDRAISER_SUPPORT_REACTIVE_FAQ:"fundraiser_support:reactive_faq",FUNDRAISER_SUPPORT_PROACTIVE:"fundraiser_support:proactive",FUNDRAISER_SUPPORT_CHECKLIST:"fundraiser_support:checklist",FB_SEARCH:"fb_search",FB_SEARCH_CHAT_SIDEBAR_TYPEAHEAD:"fb_search:chat_sidebar_typeahead",FB_SEARCH_SEARCH_ENTITY_CARD:"fb_search:search_entity_card",FB_SEARCH_HIGH_CONFIDENCE_CARD:"fb_search:high_confidence_card",SPONSORED_MESSAGES_ADS:"sponsored_messages_ads",INSTANT_ARTICLE:"instant_article",INSTANT_ARTICLE_CTA:"instant_article:cta",INSTANT_ARTICLE_OVERFLOW_MENU:"instant_article:overflow_menu",INSTANT_ARTICLE_TOOLKIT_DISCUSS:"instant_article:toolkit_discuss",FB_FEED:"fb_feed",FB_FEED_PYMM_RHC:"fb_feed:pymm_rhc",FB_FEED_PAGE_HOVER_CARD:"fb_feed:page_hover_card",FB_FEED_ADMIN:"fb_feed:admin",FB_FEED_ORGANIC_POST:"fb_feed:organic_post",PAGES_MANAGER_APP:"pages_manager_app",PAGES_MANAGER_APP_NOTIFICATION_DIRECT_REPLY_TEXT:"pages_manager_app:notification_direct_reply_text",PAGES_MANAGER_APP_NOTIFICATION_DIRECT_REPLY_LIKE:"pages_manager_app:notification_direct_reply_like",PAGES_MANAGER_APP_CRM_SCHEDULED_MESSAGES:"pages_manager_app:crm_scheduled_messages",BUSINESS_ON_MESSENGER:"business_on_messenger",CLICK_TO_MESSENGER_AD:"click_to_messenger_ad",CLICK_TO_MESSENGER_AD_MESSENGER_DEEPLINK_ADS:"click_to_messenger_ad:messenger_deeplink_ads",CLICK_TO_MESSENGER_AD_ADS_WELCOME_ADMIN:"click_to_messenger_ad:ads_welcome_admin",CLICK_TO_MESSENGER_AD_USER_SENT:"click_to_messenger_ad:user_sent",CLICK_TO_MESSENGER_AD_PARTIAL_AUTOMATED:"click_to_messenger_ad:partial_automated",MDOTME:"mdotme",FB_OFFER:"fb_offer",FB_OFFER_OFFER_DETAILS_VIEW:"fb_offer:offer_details_view",ADMIN_MESSAGES:"admin_messages",BUSINESS_TAB_M4:"business_tab_m4",BUSINESS_TAB_M4_BUSINESS_INBOX:"business_tab_m4:business_inbox",BUSINESS_TAB_M4_RECOMMENDATION_CARD:"business_tab_m4:recommendation_card",BUSINESS_TAB_M4_RECOMMENDATION_DETAILS:"business_tab_m4:recommendation_details",FB_PAGE:"fb_page",FB_PAGE_ICEBREAKER_RHC:"fb_page:icebreaker_rhc",FB_PAGE_SEND_AND_POST_FROM_COMPOSER:"fb_page:send_and_post_from_composer",FB_PAGE_ADMIN_TEST_LINK:"fb_page:admin_test_link",FB_PAGE_SHOP_PDP:"fb_page:shop_pdp",FB_PAGE_FREQUENTLY_ASKED_QUESTION_CARD:"fb_page:frequently_asked_question_card",FB_PAGE_ABOUT_CARD_DETAIL_VIEW:"fb_page:about_card_detail_view",FB_PAGE_RESPONSIVENESS_CONTEXT_CARD:"fb_page:responsiveness_context_card",FB_PAGE_ABOUT_CARD:"fb_page:about_card",FB_PAGE_ABOUT_CARD_PQI_MESSAGE_UPSELL:"fb_page:about_card_pqi_message_upsell",FB_PAGE_PAGE_HEADER:"fb_page:page_header",FB_PAGE_PRIMARY_MESSAGE_BUTTON:"fb_page:primary_message_button",FB_PAGE_SECONDARY_MESSAGE_BUTTON:"fb_page:secondary_message_button",FB_PAGE_FB_PAGE_CTA_PAGES_ACTIONS_UNIT:"fb_page:fb_page_cta_pages_actions_unit",FB_PAGE_JEWEL_THREAD:"fb_page:jewel_thread",FB_PAGE_USER_MESSAGE_PROMPT:"fb_page:user_message_prompt",FB_PAGE_PAGES_INFO:"fb_page:pages_info",FB_PAGE_LOADED_FROM_DATA:"fb_page:loaded_from_data",FB_PAGE_CHAT_SIDEBAR_TYPEAHEAD:"fb_page:chat_sidebar_typeahead",FB_PAGE_DYNAMICHOVERCARD:"fb_page:dynamicHoverCard",FB_PAGE_ABOUT_ROW:"fb_page:about_row",FB_PAGE_PYMM_RHC:"fb_page:pymm_rhc",FB_PAGE_GROUPS_RHC:"fb_page:groups_rhc",FB_PAGE_CONTEXT_CARD:"fb_page:context_card",FB_PAGE_CONTEXTUAL_RECOMMENDATIONS:"fb_page:contextual_recommendations",FB_PAGE_SEARCHENTITYCARD:"fb_page:searchEntityCard",FB_PAGE_MESSAGE_RECEIVED:"fb_page:message_received",FB_PAGE_PAGE_HOVERCARD:"fb_page:page_hovercard",FB_PAGE_QUESTION_TRIGGERED_CONVO:"fb_page:question_triggered_convo",FB_PAGE_DEFAULT_NATIVE_TEMPLATES_CTA:"fb_page:default_native_templates_cta",FB_PAGE_LAUNCHPAD_MORE_DRAWER:"fb_page:launchpad_more_drawer",FB_PAGE_LAUNCHPAD_HEADER:"fb_page:launchpad_header",FB_PAGE_LAUNCHPAD_FOOTER:"fb_page:launchpad_footer",FB_PAGE_REPLY_TRIGGERED_CONVO:"fb_page:reply_triggered_convo",MESSENGER_BUSINESS_SOLUTIONS:"messenger_business_solutions",BROADCAST:"broadcast",CUSTOMER_CHAT_PLUGIN:"customer_chat_plugin",MIB_NOTIFICATION:"mib_notification",MIB_NOTIFICATION_DIRECT_PUSH_NOTIF:"mib_notification:direct_push_notif",MIB_NOTIFICATION_DIRECT_JEWEL_NOTIF:"mib_notification:direct_jewel_notif",MIB_NOTIFICATION_SUBSEQUENT_PUSH_NOTIF:"mib_notification:subsequent_push_notif",MIB_NOTIFICATION_SUBSEQUENT_JEWEL_NOTIF:"mib_notification:subsequent_jewel_notif",NULL_STATE_CTA:"null_state_cta",INSTANT_GAMES:"instant_games",INSTANT_GAMES_ADMIN_INTRO:"instant_games:admin_intro",PRIVATE_REPLY:"private_reply",PRIVATE_REPLY_ADMIN:"private_reply:admin",SEND_TO_MESSENGER_PLUGIN:"send_to_messenger_plugin",MEET_NEW_FRIENDS:"meet_new_friends",FB_GROUPS:"fb_groups",FB_GROUPS_PICKER_EXISTING_CHAT:"fb_groups:picker_existing_chat",FB_GROUPS_PICKER_JOIN_CHAT:"fb_groups:picker_join_chat",FB_GROUPS_PICKER_CREATE_CHAT:"fb_groups:picker_create_chat",FB_HEADER_DOCK:"fb_header_dock",FB_HEADER_DOCK_LOADED_FROM_BROWSER_COOKIE:"fb_header_dock:loaded_from_browser_cookie",FB_HEADER_DOCK_JEWEL_THREAD:"fb_header_dock:jewel_thread",FB_HEADER_DOCK_JEWEL_SEE_ALL_MESSAGES:"fb_header_dock:jewel_see_all_messages",PAGES_PLUGIN:"pages_plugin",PAGES_PLUGIN_MESSAGE_TAB:"pages_plugin:message_tab",FB_LOGIN_ALERTS:"fb_login_alerts",WORK_CHAT:"work_chat",WORK_CHAT_WORK_IDS:"work_chat:work_ids",WORK_CHAT_EMAIL:"work_chat:email",CHECKBOX_PLUGIN:"checkbox_plugin",DEPRECATED:"deprecated",DEPRECATED_BUSINESS_ON_MESSENGER:"deprecated:business_on_messenger",DEPRECATED_ADMIN_MESSAGES:"deprecated:admin_messages",DEPRECATED_PIXEL_EVENT:"deprecated:pixel_event",DEPRECATED_NULL_STATE_CTA:"deprecated:null_state_cta",DEPRECATED_SUBSCRIPTIONS:"deprecated:subscriptions",FB_JOB:"fb_job",FB_JOB_JOB_APPLICATION:"fb_job:job_application",MESSENGER_INBOX:"messenger_inbox",MESSENGER_INBOX_THREAD_LIST:"messenger_inbox:thread_list",MESSENGER_INBOX_IN_THREAD:"messenger_inbox:in_thread",MESSENGER_INBOX_NESTED_FOLDER:"messenger_inbox:nested_folder",M:"m",FB_EVENT:"fb_event",FB_EVENT_MESSAGE_HOST:"fb_event:message_host",UNKNOWN:"unknown",UNKNOWN_BNP_PSID:"unknown:bnp_psid",UNKNOWN_ORGANIC_POST:"unknown:organic_post",NEARBY_FRIENDS:"nearby_friends",NEARBY_FRIENDS_DASH_LIST:"nearby_friends:dash_list",NEARBY_FRIENDS_DASH_MAP:"nearby_friends:dash_map",NEARBY_FRIENDS_DASH_WAVE:"nearby_friends:dash_wave",NEARBY_FRIENDS_WAVE_INT:"nearby_friends:wave_int",NEARBY_FRIENDS_FEED:"nearby_friends:feed",IG_FEED:"ig_feed",IG_FEED_ORGANIC_POST:"ig_feed:organic_post",DYNAMIC_LOCAL_ADS:"dynamic_local_ads"})}),null);
__d("NFXActionConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({APP_SUPPORT_REDIRECT:"APP_SUPPORT_REDIRECT",BAN_USER:"BAN_USER",BLOCK_ACTOR:"BLOCK_ACTOR",BLOCK_ACTOR_WITHOUT_DELAY:"BLOCK_ACTOR_WITHOUT_DELAY",BLOCK_APP:"BLOCK_APP",BLOCK_MESSAGES:"BLOCK_MESSAGES",BLOCK_PAGE:"BLOCK_PAGE",CLOSE_OLD_PROFILE:"CLOSE_OLD_PROFILE",CONTACT_FORM:"CONTACT_FORM",CONTACT_APP_DEVELOPER:"CONTACT_APP_DEVELOPER",COMMENT_MODERATION:"COMMENT_MODERATION",OPEN_COMPOSER:"OPEN_COMPOSER",DELETE:"DELETE",DELETE_AND_BLOCK:"DELETE_AND_BLOCK",DIDNT_RECEIVE_GAME_ITEM:"DIDNT_RECEIVE_GAME_ITEM",EDIT:"EDIT",EDIT_SENSITIVE_CONTENT:"EDIT_SENSITIVE_CONTENT",EDIT_SENSITIVE_CONTENT_WWW:"EDIT_SENSITIVE_CONTENT_WWW",EXPLORE_SEE_LESS:"EXPLORE_SEE_LESS",FOX_UNFOLLOW:"FOX_UNFOLLOW",FRX_PROFILE_REPORT_CONFIRMATION:"FRX_PROFILE_REPORT_CONFIRMATION",HIGHLIGHTS_UNFOLLOW:"HIGHLIGHTS_UNFOLLOW",CHEVRON_FEEDBACK_ENTRYPOINT:"CHEVRON_FEEDBACK_ENTRYPOINT",SAVE:"SAVE",HACKED_NOTIFY:"HACKED_NOTIFY",HELP_CENTER:"HELP_CENTER",HIDE_ADVERTISER:"HIDE_ADVERTISER",HIDE_FROM_TIMELINE:"HIDE_FROM_TIMELINE",HIDE_AGGREGATION_FROM_TIMELINE:"HIDE_AGGREGATION_FROM_TIMELINE",HIDE_PHOTO_FROM_TIMELINE:"HIDE_PHOTO_FROM_TIMELINE",HIDE_RESEARCH_POLLS:"HIDE_RESEARCH_POLLS",HIDE_FEED_TOPIC:"HIDE_FEED_TOPIC",HIDE_FEED_RECOMMENDATIONS:"HIDE_FEED_RECOMMENDATIONS",IGNORE_EVENT_INVITES:"IGNORE_EVENT_INVITES",IGNORE_MESSAGES:"IGNORE_MESSAGES",LEAVE_GROUP:"LEAVE_GROUP",LIMIT_FRIENDING_PRIVACY:"LIMIT_FRIENDING_PRIVACY",MARK_MESSAGE_THREAD_AS_SPAM:"MARK_MESSAGE_THREAD_AS_SPAM",MARK_AS_FALSE_NEWS:"MARK_AS_FALSE_NEWS",MARK_AS_SCAM:"MARK_AS_SCAM",MARK_AS_SPAM:"MARK_AS_SPAM",MARK_AS_SENSITIVE_CONTENT:"MARK_AS_SENSITIVE_CONTENT",MESSAGE:"MESSAGE",MESSENGER_REDIRECT:"MESSENGER_REDIRECT",MESSENGER_BLOCK_ACTOR:"MESSENGER_BLOCK_ACTOR",MESSENGER_GIVE_FEEDBACK_OR_REPORT:"MESSENGER_GIVE_FEEDBACK_OR_REPORT",MESSENGER_IGNORE_CONVERSATION:"MESSENGER_IGNORE_CONVERSATION",MESSENGER_LEAVE_GROUP:"MESSENGER_LEAVE_GROUP",MESSENGER_MUTE_CONVERSATION:"MESSENGER_MUTE_CONVERSATION",MESSENGER_MUTE_CONVERSATION_WITH_OPTIONS:"MESSENGER_MUTE_CONVERSATION_WITH_OPTIONS",MESSENGER_MUTE_STORY:"MESSENGER_MUTE_STORY",MESSENGER_VIEW_COMMUNITY_STANDARDS:"MESSENGER_VIEW_COMMUNITY_STANDARDS",MESSENGER_REPORT_GROUP_MEMBER:"MESSENGER_REPORT_GROUP_MEMBER",MESSENGER_REPORT_GROUP_MEMBER_SCREEN:"MESSENGER_REPORT_GROUP_MEMBER_SCREEN",MESSENGER_REPORT_USER:"MESSENGER_REPORT_USER",MESSENGER_REPORT_USER_SCREEN:"MESSENGER_REPORT_USER_SCREEN",MESSENGER_REPORT_MESSAGES:"MESSENGER_REPORT_MESSAGES",MESSENGER_REPORT_STORY:"MESSENGER_REPORT_STORY",NFX_AFTER_CONFIRMATION:"NFX_AFTER_CONFIRMATION",IN_APP_PAYMENTS_SUPPORT:"IN_APP_PAYMENTS_SUPPORT",PHONE_FRIEND:"PHONE_FRIEND",RECOVER_PROFILE:"RECOVER_PROFILE",REDIRECT:"REDIRECT",REDIRECT_ADS_PREFERENCES:"REDIRECT_ADS_PREFERENCES",REDIRECT_OBA_UPSELL:"REDIRECT_OBA_UPSELL",REMOVE_ADS_INTEREST:"REMOVE_ADS_INTEREST",REMOVE_EVENT:"REMOVE_EVENT",REPORT_ALREADY_REPORTED_CONTENT:"REPORT_ALREADY_REPORTED_CONTENT",REPEAT_REPORTER_REPORT_CONFIRMATION:"REPEAT_REPORTER_REPORT_CONFIRMATION",REPORT_CONTENT:"REPORT_CONTENT",REPORT_CONTENT_AFTER_CONFIRMATION:"REPORT_CONTENT_AFTER_CONFIRMATION",REPORT_CONTENT_WITH_TYPEAHEAD:"REPORT_CONTENT_WITH_TYPEAHEAD",REPORT_WORK_CONTENT:"REPORT_WORK_CONTENT",REPORT_WORK_CONTENT_WITH_REASON:"REPORT_WORK_CONTENT_WITH_REASON",REPORT_CONTENT_EDUCATION:"REPORT_CONTENT_EDUCATION",REPORT_IP_VIOLATION:"REPORT_IP_VIOLATION",REPORT_DISPUTED_ADMINS:"REPORT_DISPUTED_ADMINS",MARKETPLACE_REPORT_IP_VIOLATION:"MARKETPLACE_REPORT_IP_VIOLATION",REPORT_IMAGE_PRIVACY_VIOLATION:"REPORT_IMAGE_PRIVACY_VIOLATION",REPORT_AD_IP_VIOLATION:"REPORT_AD_IP_VIOLATION",REPORT_AD_TO_GROUP_ADMIN:"REPORT_AD_TO_GROUP_ADMIN",REPORT_PROFILE_FRAME_IP_VIOLATION:"REPORT_PROFILE_FRAME_IP_VIOLATION",REPORT_STORY_CONTENT_IP_VIOLATION:"REPORT_STORY_CONTENT_IP_VIOLATION",REPORT_TO_GROUP_ADMIN:"REPORT_TO_GROUP_ADMIN",REPORT_WITH_VIDEO_EVIDENCE:"REPORT_WITH_VIDEO_EVIDENCE",RESOLVE_PROBLEM:"RESOLVE_PROBLEM",RESOLVE_ACTOR_PROBLEM:"RESOLVE_ACTOR_PROBLEM",RESOLVE_PROBLEM_REDIRECT:"RESOLVE_PROBLEM_REDIRECT",SPAM_CLEANUP_CHECKPOINT:"SPAM_CLEANUP_CHECKPOINT",GEO_SPECIFIC_HARASSMENT_HELPLINE:"GEO_SPECIFIC_HARASSMENT_HELPLINE",TOMBSTONE_SURVEY:"TOMBSTONE_SURVEY",TOMBSTONE_IN_CONTEXT:"TOMBSTONE_IN_CONTEXT",ENABLE_TIMELINE_REVIEW:"ENABLE_TIMELINE_REVIEW",UNFOLLOW_FRIEND_LIST:"UNFOLLOW_FRIEND_LIST",UNFRIEND:"UNFRIEND",UNLIKE:"UNLIKE",UNSUBSCRIBE:"UNSUBSCRIBE",UNSUBSCRIBE_PAGE:"UNSUBSCRIBE_PAGE",UNSUBSCRIBE_DIRECTED_TARGET:"UNSUBSCRIBE_DIRECTED_TARGET",UNSUBSCRIBE_OWNER:"UNSUBSCRIBE_OWNER",UNSUBSCRIBE_RESHARER:"UNSUBSCRIBE_RESHARER",UNSUBSCRIBE_ATTACHED_STORY_ACTOR:"UNSUBSCRIBE_ATTACHED_STORY_ACTOR",UNSUBSCRIBE_ATTACHED_STORY_DIRECTED_TARGET:"UNSUBSCRIBE_ATTACHED_STORY_DIRECTED_TARGET",UNSUBSCRIBE_FOLLOWED_SELLER_ON_MARKETPLACE:"UNSUBSCRIBE_FOLLOWED_SELLER_ON_MARKETPLACE",HIDE_APP:"HIDE_APP",SCAM_CONTACT_FORM:"SCAM_CONTACT_FORM",SHARE_PHOTO_AS_STORY:"SHARE_PHOTO_AS_STORY",SHOW_MESSAGE_PREFILLS:"SHOW_MESSAGE_PREFILLS",SNOOZE_ACTOR:"SNOOZE_ACTOR",SNOOZE_DIRECTED_TARGET:"SNOOZE_DIRECTED_TARGET",SNOOZE_OWNER:"SNOOZE_OWNER",SNOOZE_RESHARER:"SNOOZE_RESHARER",SNOOZE_ATTACHED_STORY_PRIMARY_ACTOR:"SNOOZE_ATTACHED_STORY_PRIMARY_ACTOR",SNOOZE_ATTACHED_STORY_DIRECTED_TARGET:"SNOOZE_ATTACHED_STORY_DIRECTED_TARGET",SNOOZE_DOMAIN:"SNOOZE_DOMAIN",SNOOZE_APP:"SNOOZE_APP",KEYWORD_SNOOZE_ENTRYPOINT:"KEYWORD_SNOOZE_ENTRYPOINT",REPORT_LIVING_ROOM:"REPORT_LIVING_ROOM",UNTAG:"UNTAG",UNTAG_SPONSOR_PAGE:"UNTAG_SPONSOR_PAGE",UNTAG_MEMORIALIZED_USER_FROM_THEIR_TIMELINE:"UNTAG_MEMORIALIZED_USER_FROM_THEIR_TIMELINE",HIDE:"HIDE",DONT_LIKE:"DONT_LIKE",HIDE_AD:"HIDE_AD",HIDE_AD_BREAKS:"HIDE_AD_BREAKS",HIDE_SHARED_AD_BREAK_HOST_VIDEO_STORY:"HIDE_SHARED_AD_BREAK_HOST_VIDEO_STORY",REPORT_AD:"REPORT_AD",PAGES_ACTIVE_ADS_REPORT_AD:"PAGES_ACTIVE_ADS_REPORT_AD",PAGES_ACTIVE_ADS_REPORT_ITEM:"PAGES_ACTIVE_ADS_REPORT_ITEM",POLITICAL_ARCHIVE_REPORT_AD:"POLITICAL_ARCHIVE_REPORT_AD",INTERN_SHOW_ADS_DEBUGGER_INFO:"INTERN_SHOW_ADS_DEBUGGER_INFO",TESTING:"TESTING",TESTING_LOGGING:"TESTING_LOGGING",TESTING_LOGGING_IDEMPOTENT:"TESTING_LOGGING_IDEMPOTENT",HIDE_VIDEO:"HIDE_VIDEO",HIDE_AD_WITH_AD_ALREADY_OWNED:"HIDE_AD_WITH_AD_ALREADY_OWNED",HIDE_AD_WITH_REMOVE_ITEM_FROM_AD:"HIDE_AD_WITH_REMOVE_ITEM_FROM_AD",HIDE_TOPIC_MISCLASSIFICATION:"HIDE_TOPIC_MISCLASSIFICATION",AD_ALREADY_OWNED:"AD_ALREADY_OWNED",REMOVE_ITEM_FROM_AD:"REMOVE_ITEM_FROM_AD",HEAD_PUBLISHER_APP_MENTIONS_BAN:"HEAD_PUBLISHER_APP_MENTIONS_BAN",HEAD_PUBLISHER_APP_MENTIONS_HIDE:"HEAD_PUBLISHER_APP_MENTIONS_HIDE",GOV_DIGEST_OPT_OUT:"GOV_DIGEST_OPT_OUT",VOTING_REMINDER_WRONG_LOCATION:"VOTING_REMINDER_WRONG_LOCATION",ELECTIONS_HIDE:"ELECTIONS_HIDE",LESS_FROM_ACTOR:"LESS_FROM_ACTOR",LESS_FROM_DIRECTED_TARGET:"LESS_FROM_DIRECTED_TARGET",LESS_FROM_ATTACHED_STORY_ACTOR:"LESS_FROM_ATTACHED_STORY_ACTOR",LESS_FROM_DOMAIN:"LESS_FROM_DOMAIN",LESS_FROM_APP:"LESS_FROM_APP",LESS_FROM_THROWBACK:"LESS_FROM_THROWBACK",THROWBACK_PREFERENCES:"THROWBACK_PREFERENCES",NEWSFEED_SETTINGS:"NEWSFEED_SETTINGS",BLOCK_SETTINGS:"BLOCK_SETTINGS",WRITE_IN:"WRITE_IN",DIRECT_SUPPORT:"DIRECT_SUPPORT",APP_INVITE_BLOCK_APP:"APP_INVITE_BLOCK_APP",APP_INVITE_BLOCK_USER:"APP_INVITE_BLOCK_USER",PAGES_LIKE_CHECKUP:"PAGES_LIKE_CHECKUP",COMPASSION_SUPPORT:"COMPASSION_SUPPORT",PYMA_XOUT:"PYMA_XOUT",PYMA_OPT_OUT:"PYMA_OPT_OUT",JOB_XOUT:"JOB_XOUT",JOB_UNIT_XOUT:"JOB_UNIT_XOUT",DELETE_FUNDRAISER:"DELETE_FUNDRAISER",HIDE_SHOW_PYMF:"HIDE_SHOW_PYMF",HIDE_PYMK:"HIDE_PYMK",SELF_HARM_HELP_CENTER:"SELF_HARM_HELP_CENTER",MEMORIALIZATION_HELP_CENTER:"MEMORIALIZATION_HELP_CENTER",UNDERAGE_HELP_CENTER:"UNDERAGE_HELP_CENTER",HACKED_HELP_CENTER:"HACKED_HELP_CENTER",BULLYING_HELP_CENTER:"BULLYING_HELP_CENTER",STOLEN_GOODS_HELP_CENTER:"STOLEN_GOODS_HELP_CENTER",PRE_REPORT_CAPTCHA_SCREEN_REDIRECT:"PRE_REPORT_CAPTCHA_SCREEN_REDIRECT",PRE_REPORT_CONFIRMATION_SCREEN_REDIRECT:"PRE_REPORT_CONFIRMATION_SCREEN_REDIRECT",REPORT_ACTION_REQUIRING_EVIDENCE:"REPORT_ACTION_REQUIRING_EVIDENCE",SUPPORT_PLATFORM_REDIRECT_MESSAGE_AUTHOR:"SUPPORT_PLATFORM_REDIRECT_MESSAGE_AUTHOR",SUPPORT_PLATFORM_REDIRECT_MESSAGE_FRIEND:"SUPPORT_PLATFORM_REDIRECT_MESSAGE_FRIEND",SUPPORT_PLATFORM_REDIRECT_SEND_CARD:"SUPPORT_PLATFORM_REDIRECT_SEND_CARD",SUPPORT_PLATFORM_REDIRECT_LEARN:"SUPPORT_PLATFORM_REDIRECT_LEARN",WAIST_REDIRECT:"WAIST_REDIRECT",VIEW_ADS_REDIRECT:"VIEW_ADS_REDIRECT",AD_ARCHIVE_REDIRECT:"AD_ARCHIVE_REDIRECT",FRX_PROFILE_REPORT_CONFIRMATION_REDIRECT:"FRX_PROFILE_REPORT_CONFIRMATION_REDIRECT",FRX_REPORT_CONFIRMATION_SCREEN:"FRX_REPORT_CONFIRMATION_SCREEN",FRX_POLICY_CHECKLIST_REDIRECT:"FRX_POLICY_CHECKLIST_REDIRECT",FRX_NT_POLICY_CHECKLIST:"FRX_NT_POLICY_CHECKLIST",FRX_TEXT_HIGHLIGHTER_REDIRECT:"FRX_TEXT_HIGHLIGHTER_REDIRECT",DISABLE_IG_UNCONNECTED_STORIES:"DISABLE_IG_UNCONNECTED_STORIES",FRX_NT_REPORT_GROUP_CHAT_MEMBER_REDIRECT:"FRX_NT_REPORT_GROUP_CHAT_MEMBER_REDIRECT",FRX_NT_REPORT_GROUP_CHAT_MEMBER:"FRX_NT_REPORT_GROUP_CHAT_MEMBER",SIMPLE_ACTION_WHICH_REDIRECTS:"SIMPLE_ACTION_WHICH_REDIRECTS",MARKETPLACE_MESSENGER_REPORT_CONVERSATION:"MARKETPLACE_MESSENGER_REPORT_CONVERSATION",MARKETPLACE_SUPPORT_CALL:"MARKETPLACE_SUPPORT_CALL",MARKETPLACE_SUPPORT_CHAT:"MARKETPLACE_SUPPORT_CHAT",MARKETPLACE_SUPPORT_SMS:"MARKETPLACE_SUPPORT_SMS",CREATE_STRUCTURED_REPORT:"CREATE_STRUCTURED_REPORT",OPEN_SUPPORT_INBOX_FOR_STRUCTURED_REPORT:"OPEN_SUPPORT_INBOX_FOR_STRUCTURED_REPORT",FRX_POLICY_EDUCATION_REDIRECT:"FRX_POLICY_EDUCATION_REDIRECT",FRX_NT_POLICY_EDUCATION:"FRX_NT_POLICY_EDUCATION",FRX_NT_PAGE_REPORTING_POLICY_EDUCATION:"FRX_NT_PAGE_REPORTING_POLICY_EDUCATION",FRX_PROCESS_EDUCATION_REDIRECT:"FRX_PROCESS_EDUCATION_REDIRECT",FRX_NT_PROCESS_EDUCATION:"FRX_NT_PROCESS_EDUCATION",FRX_PROCESS_EDUCATION_SCREEN:"FRX_PROCESS_EDUCATION_SCREEN",MONETIZATION_CONTENT_GUIDELINES_HELP_CENTER_REDIRECT:"MONETIZATION_CONTENT_GUIDELINES_HELP_CENTER_REDIRECT",NCII_HELP_CENTER_REDIRECT:"NCII_HELP_CENTER_REDIRECT",PRIVACY_SHORTCUTS_REDIRECT:"PRIVACY_SHORTCUTS_REDIRECT",NEWS_FEED_PREFERENCES:"NEWS_FEED_PREFERENCES",BLACKLIST_CONTENT_REDIRECT:"BLACKLIST_CONTENT_REDIRECT",CLEAR_HISTORY_HELP_CENTER_REDIRECT:"CLEAR_HISTORY_HELP_CENTER_REDIRECT"})}),null);
__d("NFXContextType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ENT_MESSAGE_THREAD:1,ENT_REPORTABLE:2,ENT_SERP:3,ENT_STORY:4,PAGE_ACTIVE_ADS:5,POLITICAL_ARCHIVE_ADS:6,SUPPORT_INBOX:7,TESTING:8,REPORTABLE_AD:9,TOP_LEVEL:10})}),null);
__d("NFXStoryLocation",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({REJECT_FRIEND_REQUEST:"reject_friend_request",FEED:"feed",HOVERCARD:"hovercard",VIDEO_LIST_CHANNEL:"video_list_channel",VIDEO_PLAYLIST_CHANNEL:"video_playlist_channel",WATCHED_VIDEOS_CHANNEL:"watched_videos_channel",EXPLORE_FEED:"explore_feed",PROFILE_SELF:"profile_self",PROFILE_SOMEONE_ELSE:"profile_someone_else",FNRP_AUTOMATED_SCRIPT:"fnrp_automated_script",PAGE:"page",PAGE_INBOX:"page_inbox",PAGE_BLUE_VERIFICATION_BADGE:"page_blue_verification_badge",PAGE_GRAY_VERIFICATION_BADGE:"page_gray_verification_badge",PAGE_SHOP:"page_shop",LIKED_PAGES:"liked_pages",PERMALINK:"permalink",PHOTO_VIEWER:"photo_viewer",PHOTO_ALBUM:"photo_album",PAGE_REVIEW:"page_review",POPULAR_AT:"popular_at",GROUP:"group",SUGGESTED_GROUP:"suggested_group",EVENT:"event",SEARCH:"search",SERP:"serp",UNKNOWN:"unknown",PROFILE_REPORTING_FLOW:"profile_reporting_flow",HEAD_PUBLISHER_APP_MENTIONS_FEED:"head_publisher_app_mentions_feed",MESSENGER:"messenger",MESSENGER_MONTAGE_VIEWER:"messenger_montage_viewer",MESSENGER_THREAD:"messenger_thread",FUNDRAISER_PAGE_FEED:"fundraiser_page_feed",FUNDRAISER_PERSON_TO_CHARITY:"fundraiser_person_to_charity",FUNDRAISER_PERSON_FOR_PERSON:"fundraiser_person_for_person",CRISIS_FEED:"crisis_feed",CIVIC_PROPOSAL:"civic_proposal",SETTINGS:"settings",LIVE_MAP:"live_map",LIVING_ROOM:"living_room",JOB_APPLICATION:"job_application",JOB_BROWSER:"job_browser",JOB_DETAIL_VIEW:"job_detail_view",JOBS_NEAR_YOU:"jobs_near_you",JOB_RECOMMENDATION_UNIT:"job_recommendation_unit",CONTENT_OVERLAY:"content_overlay",CHEVRON:"chevron",CHEVRON_GLYPH:"glyph",VIDEO_INLINE_PIVOT:"video_inline_pivot",OBJECTIONABLE_CONTENT_FILTER:"objectionable_content_filter",VIEW_PAGE_ADS:"view_page_ads",POLITICAL_ARCHIVE_ADS:"political_archive_ads",AD_LIBRARY_V2_POLITICAL_ADS:"ad_library_v2_political_ads",AD_LIBRARY_V2_POLITICAL_ADS_REGULATOR:"ad_library_v2_political_ads_regulator",FEEDBACK_COMMENT:"feedback_comment",FRIEND_LIST:"friend_list",NOTIFICATION:"notification",VOYAGER:"voyager",ENTITY_CARDS:"entity_cards",IG_FEED:"ig_feed",IG_DISCOVER:"ig_discover",IG_POST:"ig_post",IG_PROFILE:"ig_profile",IG_STORY:"ig_story",IG_COMMENTS:"ig_comments",IG_DIRECT_MESSAGES:"ig_direct_messages",IG_LIVE:"ig_live",IG_PRODUCT:"ig_product",IG_IN_APP_BROWSER:"ig_in_app_browser",MESSENGER_THREAD_ACTION_PANEL:"messenger_thread_action_panel",MESSENGER_CONTACT_DETAILS:"messenger_contact_details",MESSENGER_DIRECT_THREAD_DETAILS:"messenger_direct_thread_details",MESSENGER_GROUP_THREAD_DETAILS:"messenger_group_thread_details",MESSENGER_DIRECT_THREAD_MESSAGE_REQUEST:"messenger_direct_thread_message_request",MESSENGER_GROUP_THREAD_MESSAGE_REQUEST:"messenger_group_thread_message_request",MESSENGER_DIRECT_THREAD_FILTERED_REQUEST:"messenger_direct_thread_filtered_request",MESSENGER_GROUP_THREAD_FILTERED_REQUEST:"messenger_group_thread_filtered_request",MESSENGER_EMPTY_DIRECT_THREAD:"messenger_empty_direct_thread",MESSENGER_GROUP_THREAD_MEMBERS_LIST:"messenger_group_thread_members_list",MESSENGER_P2B_DIRECT_THREAD_DETAILS:"messenger_p2b_direct_thread_details",TICKER:"ticker",FULLSCREEN_VIDEO_PLAYER:"fullscreen_video_player",ACTIVITY_LOG_FACE_ALERTS:"face_alerts",HELP_COMMUNITY:"help_community",SUPPORT_INBOX:"support_inbox",APP_INVITES_FEED:"app_invites_feed",CHAINING_FEED:"chaining_feed",SOCIAL_REPORTING_REDIRECT:"social_reporting_redirect",WWW_CHAT_HEAD:"www_chat_head",THROWBACK:"throwback",POST_TO_PAGE:"post_to_page",ACTIVITY_LOG:"activity_log",VIDEO_CHANNEL:"video_channel",VIDEO_CHANNELS:"video_channels",VIDEO_HOME:"video_home",REVIEWS_FEED:"reviews_feed",BACKSTAGE:"backstage",MESSENGER_ENCRYPTED_THREAD:"messenger_encrypted_thread",LOCAL_NEWS:"local_news",PLANNED_VIEWING_CURATED:"planned_viewing_curated",UI_EXPLORER_EXAMPLE:"ui_explorer_example",SERP_CONSOLE:"serp_console",LOL_FEED:"lol_feed",MARKETPLACE_ADS:"marketplace_ads",MARKETPLACE_BSG_PROFILE:"marketplace_bsg_profile",MARKETPLACE_BUY_SELL_GROUP_HOME:"marketplace_buy_sell_group_home",MARKETPLACE_PDP:"marketplace_pdp",MARKETPLACE_PDP_SELLER:"marketplace_pdp_seller",MARKETPLACE_PDP_QUESTION_AND_ANSWER:"marketplace_pdp_question_and_answer",MARKETPLACE_PROFILE:"marketplace_profile",MARKETPLACE_PROFILE_BUYER:"marketplace_profile_buyer",MARKETPLACE_PROFILE_SELLER:"marketplace_profile_seller",MARKETPLACE_RATING_CONFIRMATION:"marketplace_rating_confirmation",MARKETPLACE_RATING_CONFIRMATION_BUYER:"marketplace_rating_confirmation_buyer",MARKETPLACE_RATING_CONFIRMATION_SELLER:"marketplace_rating_confirmation_seller",MARKETPLACE_RATING_FLOW:"marketplace_rating_flow",MARKETPLACE_RATING_FLOW_BUYER:"marketplace_rating_flow_buyer",MARKETPLACE_RATING_FLOW_SELLER:"marketplace_rating_flow_seller",MARKETPLACE_RATE_BUYER:"marketplace_rate_buyer",MARKETPLACE_RATE_SELLER:"marketplace_rate_seller",MARKETPLACE_SCALED_RATE_BUYER:"marketplace_scaled_rate_buyer",MARKETPLACE_SCALED_RATE_SELLER:"marketplace_scaled_rate_seller",MARKETPLACE_B2C_REVIEW:"marketplace_b2c_review",MARKETPLACE_THREAD:"marketplace_thread",MARKETPLACE_THREAD_BUYER:"marketplace_thread_buyer",MARKETPLACE_THREAD_SELLER:"marketplace_thread_seller",MARKETPLACE_MESSENGER_REPORT_BUYER:"marketplace_messenger_report_buyer",MARKETPLACE_MESSENGER_REPORT_SELLER:"marketplace_messenger_report_seller",CANONICAL_MESSENGER_REPORT_BUYER:"canonical_messenger_report_buyer",CANONICAL_MESSENGER_REPORT_SELLER:"canonical_messenger_report_seller",MARKETPLACE_SHOP_PDP:"marketplace_shop_pdp",MARKETPLACE_SHOP_PDP_SELLER:"marketplace_shop_pdp_seller",MARKETPLACE_C2C_TRANSACTION_SURVEY:"marketplace_c2c_transaction_survey",NON_INTERACTIVE_ITEM_PDP:"non_interactive_item_pdp",MENTORSHIP_APPLICATION_TAB:"mentorship_application_tab",MENTORSHIP_ADMIN_ASSISTED_GALLERY:"mentorship_admin_assisted_gallery",MENTORSHIP_PEER_TO_PEER_GALLERY:"mentorship_peer_to_peer_gallery",POLITICAL_ISSUE_MODULE:"political_issue_module",ELECTION_HUB:"election_hub",DIRECT_MESSAGING:"direct_messaging",CAMERA_MEDIA_EFFECT:"camera_media_effect",PROFILE_DEPRECATED:"profile",TIMELINE_DEPRECATED:"timeline",TIMELINE_REVIEW:"timeline_review",BREAKUP_FLOW:"breakup_flow",ASYNC_TASK_DO_NOT_USE:"async",INSTANT_ARTICLES:"instant_articles",INSTANT_ARTICLE_WEBVIEW_AD:"instant_article_webview_ad",INSTANT_ARTICLE_NATIVE_AD:"instant_article_native_ad",IN_APP_BROWSER:"in_app_browser",INSTREAM_VIDEO:"instream_video",TOPIC_PAGE:"topic_page",GAMES_FEED:"games_feed",TAG_QUARANTINE:"tag_qurantine",STONEHENGE_CONSUMPTION:"stonehenge_consumption",ARTICLE_CONTEXT:"article_context",INTEGRITY_CONTEXT:"integrity_context",PROFILE_FRAME_DISCOVERY:"profile_frame_discovery",QUICK_PROMOTION:"quick_promotion",WOODHENGE_EXCLUSIVE_FEED:"woodhenge_exclusive_feed",AUDIENCE_INSIGHTS:"audience_insights",PROJECT_NEO:"project_neo",COMPASSION_RESOURCES:"compassion_resources",FOX_FEED:"fox_feed",FOX_CHEVRON:"fox_chevron",HIGHLIGHTS_UNIT:"highlights_unit",PAGE_SURFACE_RECOMMENDATIONS:"page_surface_recommendations",SOCIAL_LEARNING_GROUP_UNITS_LIST:"social_learning_group_units_list",PREVIEW_DIALOG:"preview_dialog",STORY:"story",CREATOR_APP_INSPIRATION_FEED:"creator_app_inspiration_feed",SCHOOL_COMMUNITY:"school_community",AGORA:"agora",AGORA_EVENTS:"agora_events",COMPASS:"compass",PINNED_CONVERSATION:"pinned_conversation",GEMSTONE_PROFILE:"gemstone_profile",VR_PERSONA_PROFILE:"vr_persona_profile",VR_SAFE_MODE:"vr_safe_mode",KOTOTORO_FEED:"kototoro_feed",KOTOTORO_COMMENT:"kototoro_comment",BALLOT:"ballot",CANDIDATE_VIDEOS:"candidate_videos",INSTANT_GAMES:"instant_games",INSTANT_GAMES_SPOTLIGHT:"instant_games_spotlight",INSTANT_GAMES_HUB:"instant_games_hub",INSTANT_GAMES_MESSENGER:"instant_games_messenger",APP_CENTER:"app_center",APP_PERMISSIONS_DIALOG:"app_permissions_dialog",CLEAR_HISTORY:"clear_history",GAME_DETAIL:"game_detail",GAME_PAGE:"game_page",GAMES_REQUESTS:"games_requests",GROUP_INSTALLED_APPS:"group_installed_apps",IN_GAME:"in_game",MOBILE_APP_PERMISSIONS:"mobile_app_permissions",MOBILE_REMOVED_APPS:"mobile_removed_apps",PAGE_LOGS:"page_logs",PERMISSIONS_LEGALESE:"permissions_legalese",REMOVED_APP_DIALOG:"removed_app_dialog",DEVELOPER_COMMUNITY_POST:"developer_community_post",PYML:"pyml",PORTAL_VIDEO:"portal_video",SAVE_COLLECTION_VIEW:"save_collection_view",SAVE_ITEM_VIEW:"save_item_view",APP_BOOKMARKS:"app_bookmarks",BSG_FOR_SALE_LIVE_VIDEO_BROADCAST_IN_PROGRESS:"bsg_for_sale_live_video_broadcast_in_progress",BSG_FOR_SALE_LIVE_VIDEO_BROADCAST_COMPLETE:"bsg_for_sale_live_video_broadcast_complete",BSG_FOR_SALE_LIVE_VIDEO_BROADCAST_IN_PROGRESS_FROM_POST:"bsg_for_sale_live_video_broadcast_in_progress_from_post",BSG_FOR_SALE_LIVE_VIDEO_BROADCAST_COMPLETE_FROM_POST:"bsg_for_sale_live_video_broadcast_complete_from_post"})}),null);
__d("StickerInterfaces",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSAGES:"messages",NEO:"neo",COMMENTS:"comments",STICKERED:"stickered",COMPOSER:"composer",POSTS:"posts",FRAMES:"frames",SMS:"sms",MONTAGE:"montage"})}),null);
__d("NFXContextFactory",["FBLogger","FRXEntryPoint","NFXActionConst","NFXContextType","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){var c=function(a,b){if(b!==null)return b};return JSON.stringify({reportable_ent_token:a.reportable_ent_token,story_location:a.story_location,entry_point:a.entry_point,type:a.type,session_id:b("uuid")(),initial_action_name:a.initial_action_name,reportable_id:a.reportable_id,page_id:a.page_id,responsible_id:a.responsible_id},c)}function a(a){var c=a.reportable_ent_token,d=a.story_location,e=a.entry_point;e=e===void 0?b("FRXEntryPoint").UNKNOWN:e;a=a.responsible_id;return g({type:b("NFXContextType").ENT_MESSAGE_THREAD,story_location:d,entry_point:e,reportable_ent_token:c,responsible_id:a})}function c(a){var c=a.reportable_id,d=a.page_id;a=a.storyLocation;return g({type:b("NFXContextType").POLITICAL_ARCHIVE_ADS,story_location:a,entry_point:b("FRXEntryPoint").UNKNOWN,initial_action_name:b("NFXActionConst").POLITICAL_ARCHIVE_REPORT_AD,reportable_id:c,page_id:d})}function d(a){var c=a.reportable_ent_token,d=a.story_location,e=a.entry_point;e=e===void 0?b("FRXEntryPoint").UNKNOWN:e;a=a.initial_action_name;c===null&&b("FBLogger")("frx").warn("null or undefined reportable_ent_token in forEntReportable, location=%s entry_point=%s",d,e);return g({type:b("NFXContextType").ENT_REPORTABLE,story_location:d,entry_point:e,reportable_ent_token:c,initial_action_name:a})}e.exports={withEntReportable:d,withEntMessageThread:a,withPoliticalArchiveAds:c}}),null);
__d("XRapidReportingDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/rapid_report/",{context:{type:"String",required:!0},preselectedtagid:{type:"Enum",enumType:1},diglossiasetting:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("FRXURI",["ActorURI","FRXEntryPoint","NFXContextFactory","XRapidReportingDialogController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=a.reportable_ent_token,d=a.story_location,e=a.entry_point;e=e===void 0?b("FRXEntryPoint").UNKNOWN:e;var f=a.responsible_id;a=a.actor_id;c=b("NFXContextFactory").withEntMessageThread({reportable_ent_token:c,story_location:d,entry_point:e,responsible_id:f});d=b("XRapidReportingDialogController").getURIBuilder().setString("context",c).getURI();a!=null&&(d=b("ActorURI").create(d,a));return d}function c(a){var c=a.reportable_ent_token,d=a.story_location,e=a.entry_point;e=e===void 0?b("FRXEntryPoint").UNKNOWN:e;var f=a.initial_action_name;a=a.actor_id;c=b("NFXContextFactory").withEntReportable({reportable_ent_token:c,story_location:d,entry_point:e,initial_action_name:f});d=b("XRapidReportingDialogController").getURIBuilder().setString("context",c).getURI();a!=null&&(d=b("ActorURI").create(d,a));return d}e.exports={withEntMessageThread:a,withEntReportable:c}}),null);
__d("MqttWsClientTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:MqttWsClientLoggerConfig")}),null);
__d("renderSubtreeIntoContainer_DO_NOT_USE",["ReactDOM-fb"],(function(a,b,c,d,e,f){"use strict";e.exports=b("ReactDOM-fb").unstable_renderSubtreeIntoContainer}),null);
__d("isEventSupported",["fbjs/lib/ExecutionEnvironment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("fbjs/lib/ExecutionEnvironment").canUseDOM&&(g=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function a(a,c){__p&&__p();if(!b("fbjs/lib/ExecutionEnvironment").canUseDOM||c&&!("addEventListener"in document))return!1;c="on"+a;var d=c in document;if(!d){var e=document.createElement("div");e.setAttribute(c,"return;");d=typeof e[c]==="function"}!d&&g&&a==="wheel"&&(d=document.implementation.hasFeature("Events.wheel","3.0"));return d}e.exports=a}),null);
__d("MqttEnv",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=Object.freeze({mqtt_ep_with_sid:0,mqtt_waterfall_log_client_sampling:1,messenger_uses_mqtt_rollout:2,mqtt_ws_polling_enabled:3,mqtt_ws_forced_polling_only:4,mqtt_ws_comet_client:5,mqtt_send_unload_event:6,mqtt_ws_reconnect_reset:7,mqtt_lp_use_fetch:9,mqtt_ws_comet_client_rollout:10});b=function(){__p&&__p();var a=b.prototype;a.random=function(){return this.$1!=null?this.$1():Math.random()};a.isUserLoggedInNow=function(){return this.$2!=null?this.$2():!0};a.clearTimeout=function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){if(this.$3!=null){this.$3(a);return}clearTimeout(a)});a.setTimeout=function(a){function b(b,c){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return this.$4!=null?this.$4.apply(null,arguments):setTimeout.apply(null,arguments)});a.getLoggerInstance=function(){return this.$5!=null?this.$5():g.getInstance()};a.genGk=function(a){return this.$6!=null?this.$6(a):!1};a.createSocket=function(a,b){return this.$7!=null?this.$7(a,b):new WebSocket(a)};a.scheduleCallback=function(a){return this.$8!=null?this.$8(a):a()};a.scheduleLoggingCallback=function(a){return this.$9!=null?this.$9(a):a()};function b(){this.$1=null,this.$2=null,this.$3=null,this.$4=null,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=null}a.initialize=function(a,b,c,d,e,f,g,h,i){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=g,this.$8=h,this.$9=i};return b}();var g=function(){__p&&__p();function a(){}a.getInstance=function(){return new a()};var b=a.prototype;b.setAppId=function(a){};b.eventLogConnect=function(a){a.sessionID,a.connectionStatus,a.duration,a.hostname,a.attemptNumber,a.failTotal,a.successTotal,a.subscribedTopics,a.publishes,a.errorCode,a.errorMessage};b.eventLogPull=function(a){a.pullEventName,a.sessionID,a.status,a.duration,a.hostname,a.errorMessage};b.eventLogDisconnect=function(a){a.sessionID,a.errorCode,a.errorMessage,a.duration};b.eventLogPublish=function(a){a.sessionID,a.topic,a.connectionStatus,a.publishStatus};b.eventLogMiscellaneousError=function(a){a.errorMessage};b.logError=function(a,b){};b.logErrorWarn=function(a,b){};b.logWarn=function(a,b){};b.debugTrace=function(a,b){};b.bumpCounter=function(a){};return a}();e.exports={Env:new b(),MqttGkNames:a}}),null);
__d("IrisSubscribeChecker",["MqttEnv"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames;a=function(){__p&&__p();function a(a){__p&&__p();this.$1=g.getLoggerInstance();this.$2=null;this.$3=!1;this.$4=!1;this.$5=!1;this.$6=!0;this.$7=0;this.$8=a;if(typeof window!=="undefined"){a=window.location.hostname;(a==="m.facebook.com"||a==="mobile.facebook.com"||a==="mtouch.facebook.com")&&(this.$6=!1)}g.genGk(h.messenger_uses_mqtt_rollout)||(this.$6=!1)}var b=a.prototype;b.start=function(){this.$6=!0};b.stop=function(){this.$6=!1,this.$9()};b.onConnectAttempt=function(){};b.onConnectFailure=function(){this.$9()};b.onConnected=function(){var a=this;this.$7++;this.$9();this.$3=!1;this.$4=!1;this.$5=!1;this.$6&&(this.$2=g.setTimeout(function(){a.$10()},8e3))};b.onConnectSuccess=function(){};b.onConnectionLost=function(){this.$9()};b.onSubscribe=function(a){a==="/t_ms"&&(this.$3=!0)};b.onUnsubscribe=function(a){};b.onPublish=function(a){(a==="/messenger_sync_get_diffs"||a==="/messenger_sync_create_queue")&&(this.$4=!0,this.$3&&(this.$5=!0,this.$9()))};b.onMessage=function(a){};b.onWSFatal=function(){};b.$9=function(){this.$2&&(g.clearTimeout(this.$2),this.$2=null)};b.$10=function(){if(this.$4===!1){var a=this.$7==1?"no_iris_session_initialConnect":"no_iris_session";this.$1.bumpCounter(a);this.$1.eventLogMiscellaneousError({errorMessage:a});this.$8()?this.$1.bumpCounter(a+".withProvider"):this.$1.bumpCounter(a+".withoutProvider");this.$3===!0?this.$1.bumpCounter(a+".withTopicSubscribe"):this.$1.bumpCounter(a+".withoutTopicSubscribe")}this.$3===!1&&this.$1.bumpCounter("no_iris_topic_subscribe");this.$3===!0&&this.$4===!0&&this.$5===!1&&this.$1.bumpCounter("session_before_topic_subscribe")};return a}();e.exports=a}),null);
__d("MqttConnectionHookCollection",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=new Set()}var b=a.prototype;b.addHook=function(a){this.$1.add(a)};b.removeHook=function(a){this.$1["delete"](a)};b.onConnectAttempt=function(){this.$1.forEach(function(a){a.onConnectAttempt()})};b.onConnectFailure=function(){this.$1.forEach(function(a){a.onConnectFailure()})};b.onConnected=function(){this.$1.forEach(function(a){a.onConnected()})};b.onConnectSuccess=function(){this.$1.forEach(function(a){a.onConnectSuccess()})};b.onConnectionLost=function(){this.$1.forEach(function(a){a.onConnectionLost()})};b.onSubscribe=function(a){this.$1.forEach(function(b){b.onSubscribe(a)})};b.onUnsubscribe=function(a){this.$1.forEach(function(b){b.onUnsubscribe(a)})};b.onPublish=function(a){this.$1.forEach(function(b){b.onPublish(a)})};b.onMessage=function(a){this.$1.forEach(function(b){b.onMessage(a)})};b.onWSFatal=function(){this.$1.forEach(function(a){a.onWSFatal()})};return a}();e.exports=a}),null);
__d("MqttAnalyticsHook",["MqttEnv"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttEnv").Env;a=function(){__p&&__p();function a(){this.$1=g.getLoggerInstance(),this.$2=0,this.$3=0,this.$4=0,this.$5=0,this.$1.bumpCounter("session_start"),g.isUserLoggedInNow()||this.$1.bumpCounter("session_start.logout")}var b=a.prototype;b.onConnectAttempt=function(){this.$1.bumpCounter("ws_connect_attempt")};b.onConnectFailure=function(){this.$3++,this.$1.bumpCounter("ws_connect_failure")};b.onConnected=function(){this.$1.bumpCounter("ws_connect_connected")};b.onConnectSuccess=function(){this.$2===0&&this.$1.bumpCounter("ws_connect_first_success"),this.$2++,this.$1.bumpCounter("ws_connect_success")};b.onConnectionLost=function(){this.$1.bumpCounter("ws_disconnect")};b.onSubscribe=function(a){};b.onUnsubscribe=function(a){};b.onPublish=function(a){this.$1.bumpCounter("ws_publish."+a)};b.onMessage=function(a){this.$1.bumpCounter("message_arrived."+a)};b.onWSFatal=function(){this.$1.bumpCounter("ws_fatal")};b.onPollRequestSent=function(){this.$1.bumpCounter("polling_request_send")};b.onPollRequestSuccess=function(){this.$1.bumpCounter("polling_request_succeed"),this.$4===0&&this.$1.bumpCounter("polling_first_success"),this.$4++};b.onPollResponse=function(a){this.$1.bumpCounter("lp.message_arrived."+a)};b.onPollFinish=function(){};b.onPollRequestFailed=function(a){this.$1.bumpCounter("polling_request_failed"),this.$1.bumpCounter("polling_request_failed_"+a),this.$5++};return a}();e.exports=a}),null);
__d("MqttUtils",["MqttEnv"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames;c={endpointWithSessionId:function(a,b){return!g.genGk(h.mqtt_ep_with_sid)?a:this.endpointWithExtraParameter(a,"sid",b.toString())},endpointWithExtraParameters:function(a,b){var c=this,d=a;b.forEach(function(a,b,e){d=c.endpointWithExtraParameter(d,b,a)});return d},endpointWithExtraParameter:function(a,b,c){if(a.indexOf("?")>0)return a+"&"+b+"="+c;else return a+"?"+b+"="+c},generateSessionId:function(){return Math.floor(g.random()*Number.MAX_SAFE_INTEGER)},promiseDone:function(a,b,c){var d=arguments.length>1?a.then(b,c):a;d.then(null,function(a){g.setTimeout(function(){if(a instanceof Error)throw a;else throw new Error("promiseDone")},0)})},sprintf:function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=0;return a.replace(/%s/g,function(){return String(c[e++])})},hasWSSupport:function(){return"WebSocket"in a&&a.WebSocket!==null}};e.exports=c}),null);
__d("MqttProtocolUtils",["MqttEnv","MqttUtils"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MqttEnv").Env,h=b("MqttUtils").sprintf;function a(a,b){if(a==null)return b;var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c}function c(a){a=a;var b=new Array(1),c=0;do{var d=a%128;a>>=7;a>0&&(d|=128);b[c++]=d}while(a>0&&c<4);return b}function i(a,b,c){c=c;b[c++]=a>>8;b[c++]=a%256;return c}function d(a,b){return 256*a[b]+a[b+1]}function f(a,b,c,d){d=d;d=i(b,c,d);k(a,c,d);return d+b}function j(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d>2047?(55296<=d&&d<=56319&&(c++,b++),b+=3):d>127?b+=2:b++}return b}function k(a,b,c){__p&&__p();c=c;var d;for(d=0;d<a.length;d++){var e=a.charCodeAt(d);if(55296<=e&&e<=56319){var f=a.charCodeAt(++d);if(isNaN(f))throw new Error(h("Malformed Unicode string:%s %s.",e,f));e=(e-55296<<10)+(f-56320)+65536}e<=127?b[c++]=e:e<=2047?(b[c++]=e>>6&31|192,b[c++]=e&63|128):e<=65535?(b[c++]=e>>12&15|224,b[c++]=e>>6&63|128,b[c++]=e&63|128):(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128,b[c++]=e>>6&63|128,b[c++]=e&63|128)}return b}function l(a,b,c){__p&&__p();var d="",e,f=b;while(f<b+c){var g=a[f++];if(g<128)e=g;else{var i=a[f++]-128;if(i<0)throw new Error(h("Malformed UTF data:%s %s.",g.toString(16),i.toString(16)));if(g<224)e=64*(g-192)+i;else{var j=a[f++]-128;if(j<0)throw new Error(h("Malformed UTF data:%s %s %s",g.toString(16),i.toString(16),j.toString(16)));if(g<240)e=4096*(g-224)+64*i+j;else{var k=a[f++]-128;if(k<0)throw new Error(h("Malformed UTF data:%s %s %s %s",g.toString(16),i.toString(16),j.toString(16),k.toString(16)));if(g<248)e=262144*(g-240)+4096*i+64*j+k;else throw new Error(h("Malformed UTF data:%s %s %s %s",g.toString(16),i.toString(16),j.toString(16),k.toString(16)))}}}e>65535&&(e-=65536,d+=String.fromCharCode(55296+(e>>10)),e=56320+(e&1023));d+=String.fromCharCode(e)}return d}b=function(){"use strict";__p&&__p();function a(a,b,c){this.$1=a*1e3,this.$4=b,this.$5=c,this.$3=!1}var b=a.prototype;b.$6=function(){var a=this;this.$3?(this.$3=!1,this.$4(),this.$2=g.setTimeout(function(){a.$6()},this.$1)):this.$5()};b.reset=function(){var a=this;this.$3=!0;this.$2&&(g.clearTimeout(this.$2),this.$2=null);this.$1>0&&(this.$2=g.setTimeout(function(){a.$6()},this.$1))};b.cancel=function(){this.$2&&(g.clearTimeout(this.$2),this.$2=null)};return a}();e.exports={UTF8Length:j,stringToUTF8:k,concatBuffers:a,parseUTF8:l,encodeMBI:c,writeUint16:i,readUint16:d,writeString:f,Pinger:b}}),null);
__d("MqttProtocolCodec",["MqttProtocolUtils","MqttUtils"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MqttProtocolUtils").UTF8Length,h=b("MqttProtocolUtils").encodeMBI,i=b("MqttProtocolUtils").parseUTF8,j=b("MqttProtocolUtils").readUint16,k=b("MqttProtocolUtils").stringToUTF8,l=b("MqttProtocolUtils").writeString,m=b("MqttProtocolUtils").writeUint16,n=b("MqttUtils").sprintf,o=Object.freeze({CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14}),p=[0,6,77,81,73,115,100,112,3];function q(a,b){__p&&__p();b=b;var c=b,d=a[b],e=d>>4;b+=1;var f,g=0,h=1;do{if(b==a.length)return{wireMessage:null,position:c};f=a[b++];g+=(f&127)*h;h*=128}while((f&128)!==0);f=b+g;if(f>a.length)return{wireMessage:null,position:c};var k;switch(e){case o.CONNACK:h=a[b++];g=!!(h&1);c=a[b++];k=new t(g,c);break;case o.PUBLISH:h=d&15;g=h>>1&3;c=j(a,b);b+=2;d=i(a,b,c);b+=c;c=null;g===1&&(c=j(a,b),b+=2);var l=v.createWithBytes(a.subarray(b,f)),m=(h&1)===1;h=(h&8)===8;k=new w(d,l,g,c,m,h);break;case o.PINGREQ:k=new r("PINGREQ");break;case o.PINGRESP:k=new r("PINGRESP");break;case o.PUBACK:case o.UNSUBACK:d=j(a,b);k=new u(e===o.PUBACK?"PUBACK":"UNSUBACK",d);break;case o.SUBACK:l=j(a,b);b+=2;g=a.subarray(b,f);k=new s(l,g);break;default:throw new Error(n("AMQJS0016E Invalid MQTT message type %s.",e))}return{wireMessage:k,position:f}}function a(a){__p&&__p();var b=[],c=0;while(c<a.length){var d=q(a,c),e=d.wireMessage;c=d.position;if(e)b.push(e);else break}d=null;c<a.length&&(d=a.subarray(c));return{messages:b,remaining:d}}c=function(){"use strict";function a(a){this.messageType=o[a]}var b=a.prototype;b.encode=function(){throw new TypeError("Cannot abstract class WireMessage")};return a}();var r=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,a)||this}var c=a.prototype;c.encode=function(){var a=new ArrayBuffer(2),b=new Uint8Array(a);b[0]=(this.messageType&15)<<4;return a};return a}(c);d=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,"DISCONNECT")||this}var c=b.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=new ArrayBuffer(2),c=new Uint8Array(b);c[0]=a;c.set(h(0),1);return b};return b}(c);var s=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"SUBACK")||this;d.messageIdentifier=a;d.returnCode=c;return d}return a}(c),t=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"CONNACK")||this;d.sessionPresent=a;d.returnCode=c;return d}return a}(c),u=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.messageIdentifier=c;return a}var c=a.prototype;c.encode=function(){var a=(this.messageType&15)<<4,b=2,c=h(b),d=c.length+1;b=new ArrayBuffer(b+d);var e=new Uint8Array(b);e[0]=a;e.set(c,1);d=m(this.messageIdentifier,e,d);return b};return a}(c);f=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,"CONNECT")||this;d.clientId=b;d.connectOptions=c;return d}var c=b.prototype;c.encode=function(){__p&&__p();var a=(this.messageType&15)<<4,b=p.length+3;b+=g(this.clientId)+2;b+=g(this.connectOptions.userName)+2;var c=h(b);b=new ArrayBuffer(1+c.length+b);var d=new Uint8Array(b);d[0]=a;a=1;d.set(c,1);a+=c.length;d.set(p,a);a+=p.length;c=2|128;d[a++]=c;a=m(this.connectOptions.keepAliveInterval,d,a);a=l(this.clientId,g(this.clientId),d,a);a=l(this.connectOptions.userName,g(this.connectOptions.userName),d,a);return b};return b}(c);b=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d,e){var f;f=a.call(this,b)||this;f.topic=c;if(d<0&&d>1||d===1&&e==null)throw new TypeError(n("Invalid argument %s for %s.","qos: "+d,"messageType: "+b));f.qos=d;f.messageIdentifier=e;return f}var c=b.prototype;c.encode=function(){__p&&__p();var a=(this.messageType&15)<<4;a|=2;var b=g(this.topic),c=2+b+2;this.messageType===o.SUBSCRIBE&&(c+=1);var d=h(c);c=new ArrayBuffer(1+d.length+c);var e=new Uint8Array(c);e[0]=a;a=1;e.set(d,1);a+=d.length;this.messageIdentifier!=null&&(a=m(this.messageIdentifier,e,a));a=l(this.topic,b,e,a);this.messageType===o.SUBSCRIBE&&this.qos!=null&&(e[a++]=this.qos);return c};return b}(c);var v=function(){"use strict";__p&&__p();function a(a,b){this.payloadString=a,this.payloadBytes=b}a.createWithString=function(b){var c=new ArrayBuffer(g(b));c=new Uint8Array(c);c=k(b,c,0);return new a(b,c)};a.createWithBytes=function(b){var c=i(b,0,b.length);return new a(c,b)};var b=a.prototype;b.string=function(){return this.payloadString};b.bytes=function(){return this.payloadBytes};return a}(),w=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(a,c,d,e,f,g){__p&&__p();var h;h=b.call(this,"PUBLISH")||this;h.topic=a;h.payloadMessage=c;h.qos=d;h.messageIdentifier=e;h.retained=f!=null?f:!1;h.duplicate=g!=null?g:!1;if(h.qos===1&&h.messageIdentifier==null)throw new TypeError(n("AMQJS0013E Invalid argument %s for %s.","qos: 1","messageIdentifier: null | Publish"));return h}var c=a.prototype;c.encode=function(){__p&&__p();var a=(this.messageType&15)<<4;this.duplicate&&(a|=8);a=a|=this.qos<<1;this.retained&&a!=1;var b=g(this.topic),c=b+2;c+=this.messageIdentifier==null?0:2;var d=this.payloadMessage.bytes();c+=d.byteLength;var e=h(c);c=new ArrayBuffer(1+e.length+c);var f=new Uint8Array(c);f[0]=a;f.set(e,1);a=1+e.length;a=l(this.topic,b,f,a);this.messageIdentifier!=null&&(a=m(this.messageIdentifier,f,a));f.set(d,a);return c};return a}(c);e.exports={MESSAGE_TYPE:o,WireMessage:{Base:c,PubAckUnsubAck:u,Ping:r,ConnAck:t,Connect:f,Disconnect:d,Subscription:b,Publish:w},createMessageWithString:v.createWithString,decodeMessage:q,decodeByteMessages:a}}),null);
__d("MqttTypes",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,b){this.errorCode=a,this.errorMessage=b};b=function(a,b){this.mqttError=a,this.connAck=b};c=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d===void 0&&(d=null);c=a.call(this,c)||this;c.isRecoverable=b;c.originalError=d;return c}return b}(babelHelpers.wrapNativeSuper(Error));e.exports={MqttError:a,MqttChannelError:c,ConnectFailure:b}}),null);
__d("MqttProtocolClient",["MqttEnv","MqttProtocolCodec","MqttTypes","MqttProtocolUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=30,h=6e4,i=b("MqttEnv").Env,j=b("MqttProtocolCodec").MESSAGE_TYPE,k=b("MqttProtocolCodec").WireMessage,l=b("MqttProtocolCodec").createMessageWithString,m=b("MqttProtocolCodec").decodeByteMessages;a=b("MqttTypes").MqttError;var n=b("MqttTypes").ConnectFailure,o=b("MqttProtocolUtils").concatBuffers,p=b("MqttProtocolUtils").Pinger,q={SOCKET_ERROR:new a(1,"Socket error"),SOCKET_MESSAGE:new a(2,"Unable to parse invalid socket message"),INVALID_DATA_TYPE:new a(3,"Received non-arraybuffer from socket."),CONNECT_TIMEOUT:new a(4,"Connect timed out"),CONNACK_FAILURE:new a(5,"Connection failure due to connack"),PING_TIMEOUT:new a(6,"Ping timeout"),APP_DISCONNECT:new a(7,"Disconnect initiated by app"),SERVER_DISCONNECT:new a(8,"Disconnect message sent my server"),SOCKET_CLOSE:new a(9,"Socket connection closed")};c=function(){__p&&__p();function a(a){this.$3=a,this.$2={userName:"",mqttVersion:3,keepAliveInterval:10,ignoreSubProtocol:!1,onConnectSuccess:function(){},onConnectFailure:function(a){},onConnection:function(){},onConnectionError:function(a){},onConnectionLost:function(a){},onMessageArrived:function(a,b){},onMessageDelivered:function(a,b){}},this.$1="mqttwsclient",this.$4=0,this.$5=!1,this.$9=i.getLoggerInstance()}var b=a.prototype;b.connect=function(a){__p&&__p();var b=this;if(this.$5)throw new Error("Invalid state: connect - already connected");this.$2=a;this.setConnected(!1);this.$7!=null&&(i.clearTimeout(this.$7),this.$7=null);this.$7=i.setTimeout(function(){b.$9.bumpCounter("protocol.error.connect.timeout"),b.$11(q.CONNECT_TIMEOUT)},g*1e3);this.$6=i.createSocket(this.$3);this.$6.binaryType="arraybuffer";this.$6.onopen=function(){b.setConnected(!0),b.$12(new k.Connect(b.$1,a)),a.onConnection()};this.$6.onmessage=function(a){__p&&__p();a=a.data;if(!(a instanceof ArrayBuffer)){b.$9.bumpCounter("protocol.error.onmessage.type");b.$11(q.INVALID_DATA_TYPE);return}try{a=new Uint8Array(a);b.$10!=null&&(a=o(b.$10,a),b.$9.bumpCounter("protocol.debug.usingMessagesBuffer"),delete b.$10,b.$10=null);a=m(a);var c=a.messages;b.$10=a.remaining;for(var a=0;a<c.length;a++)b.handleMessage(c[a])}catch(a){b.$10=null,b.$9.logError(a,q.SOCKET_MESSAGE.errorMessage),b.$9.bumpCounter("protocol.error.onmessage.parse"),b.$11(q.SOCKET_MESSAGE)}};this.$6.onerror=function(a){b.$9.bumpCounter("protocol.error.socket"),b.$11(q.SOCKET_ERROR)};this.$6.onclose=function(a){b.$9.bumpCounter("protocol.socket.close"),b.$11(q.SOCKET_CLOSE)};this.$8!=null&&this.$8.cancel();this.$8=new p(a.keepAliveInterval,this.$12.bind(this,new k.Ping("PINGREQ")),this.$11.bind(this,q.PING_TIMEOUT))};b.disconnect=function(){if(this.$6==null||this.$6.readyState!==this.$6.OPEN||!this.$5)return;this.$12(new k.Disconnect());this.$11(q.APP_DISCONNECT)};b.isConnected=function(){return this.$5};b.setConnected=function(a){this.$5=a};b.subscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.subscribe.notconnected");throw new Error("Invalid state: subscribe - not connected")}this.$9.bumpCounter("protocol.subscribe."+a);a=new k.Subscription("SUBSCRIBE",a,0,this.$13());this.$12(a)};b.unsubscribe=function(a){if(!this.$5){this.$9.bumpCounter("protocol.error.unsubscribe.notconnected");throw new Error("Invalid state: unsubscribe - not connected")}this.$9.bumpCounter("protocol.unsubscribe."+a);a=new k.Subscription("UNSUBSCRIBE",a,0,this.$13());this.$12(a)};b.publish=function(a,b,c){this.$5||this.$9.bumpCounter("protocol.error.publish.notconnected");this.$9.bumpCounter("protocol.publish."+a);var d=this.$13();a=new k.Publish(a,l(b),c,d);this.$12(a);return d};b.$13=function(){++this.$4===h&&(this.$4=1);return this.$4};b.$11=function(a,b){var c=this,d=this.$5;this.setConnected(!1);this.$8!=null&&this.$8.cancel();this.$7!=null&&(i.clearTimeout(this.$7),this.$7=null);this.$6!=null&&(this.$6.onopen=function(a){},this.$6.onmessage=function(a){},this.$6.onerror=function(a){},this.$6.onclose=function(a){},this.$6.readyState===this.$6.OPEN&&this.$6.close(),delete this.$6,this.$6=null);d?i.scheduleCallback(function(){c.$2.onConnectionLost(a)}):i.scheduleCallback(function(){c.$2.onConnectFailure(new n(a,b!=null?b:-1))})};b.$12=function(a){var b=this.$6;if(b==null)return;if(b.readyState!=b.OPEN)return;b.send(a.encode())};b.handleMessage=function(a){__p&&__p();var b=this;switch(a.messageType){case j.CONNACK:this.$7!=null&&(i.clearTimeout(this.$7),this.$7=null);if(a instanceof k.ConnAck){var c=a;if(c.returnCode!==0){this.$9.bumpCounter("protocol.error.connack.invalidreturncode");this.setConnected(!1);this.$11(q.CONNACK_FAILURE,c.returnCode);return}i.scheduleCallback(function(){b.$2.onConnectSuccess()});this.$8!=null&&this.$8.reset()}break;case j.PUBLISH:if(a instanceof k.Publish){var d=a;i.scheduleCallback(function(){b.$2.onMessageArrived(d.topic,d.payloadMessage.payloadString)});c=d.messageIdentifier;this.$9.bumpCounter("protocol.publish.received");if(d.qos===1&&c!=null){c=new k.PubAckUnsubAck("PUBACK",c);this.$12(c)}}break;case j.PUBACK:if(a instanceof k.PubAckUnsubAck){c=a;var e=c.messageIdentifier;this.$9.bumpCounter("protocol.puback.received");i.scheduleCallback(function(){b.$2.onMessageDelivered("",e)})}break;case j.PINGRESP:this.$8!=null&&this.$8.reset();break;case j.DISCONNECT:this.$11(q.SERVER_DISCONNECT);break;case j.SUBACK:this.$9.bumpCounter("protocol.suback.received");break;case j.UNSUBACK:this.$9.bumpCounter("protocol.unsuback.received");break;default:this.$9.logError(new Error("MqttProtocolClient: Received unhandled message type: "+a.messageType),"Received unhandled message type");this.$9.bumpCounter("protocol.error.handlemessage.unsupportedtype");break}};return a}();e.exports=c}),null);
__d("MqttUserName",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c,d,e,f){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e,this.$6=f,this.$7=typeof document==="object"&&document&&document.hasFocus()}var b=a.prototype;b.gen=function(a,b,c){a={u:this.$1,s:a,cp:this.$3,ecp:this.$2,chat_on:this.$6,fg:this.$7,d:this.$4,ct:"websocket",mqtt_sid:"",aid:this.$5,st:b,pm:c,dc:"",no_auto_fg:!0};return JSON.stringify(a)};b.setForegroundState=function(a){this.$7=a};b.setChatVisibility=function(a){this.$6=a};return a}();e.exports=a}),null);
__d("MqttLogger",["BanzaiODS","ChannelClientID","FantailLogger","FBLogger","Log","LogHistory","MqttEnv","MqttWsClientTypedLoggerLite","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttEnv").Env,h=b("MqttWsClientTypedLoggerLite").log,i="mqtt_client",j="MqttJsClient",k=null,l={CONNECT:"mqtt_client_connect",DISCONNECT:"mqtt_client_disconnect",PUBLISH:"mqtt_client_publish",CLIENT_ERROR:"mqtt_client_error"};a=function(){__p&&__p();a.getInstance=function(){k||(k=new a());return k};function a(){this.$1=b("LogHistory").getInstance(i),this.$2=0,this.$3=b("gkx")("778292"),this.$4=Date.now(),this.$5=b("ChannelClientID").getID()}var c=a.prototype;c.setAppId=function(a){this.$2===0&&(this.$2=a)};c.eventLogConnect=function(a){var b=a.sessionID,c=a.connectionStatus,d=a.duration,e=a.hostname,f=a.attemptNumber;a.failTotal;a.successTotal;var h=a.subscribedTopics,i=a.publishes,j=a.errorCode;a=a.errorMessage;var k=c?"success":"failed";this.bumpCounter(l.CONNECT+"."+k);k={device_id:this.$5,session_id:b,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,connection_status:c,duration:d,hostname:e,attempt_number:f,subscribed_topics:h,publishes:i,error_code:j,error_message:a};this.$6(l.CONNECT,k)};c.eventLogPull=function(a){var b=a.pullEventName,c=a.sessionID,d=a.status,e=a.duration,f=a.hostname;a=a.errorMessage;c={device_id:this.$5,session_id:c,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,connection_status:d,duration:e,hostname:f,error_message:a};this.$6(b,c)};c.eventLogDisconnect=function(a){var b=a.sessionID,c=a.errorCode,d=a.errorMessage;a=a.duration;this.bumpCounter(l.DISCONNECT);b={device_id:this.$5,session_id:b,href:window.location.hostname,duration:a,error_code:c,error_message:d};this.$6(l.DISCONNECT,b)};c.eventLogPublish=function(a){var b=a.sessionID,c=a.topic,d=a.connectionStatus;a=a.publishStatus;this.bumpCounter(l.PUBLISH+"."+c);b={device_id:this.$5,href:window.location.hostname,session_id:b,topic:c,connection_status:d,publish_status:a};this.$6(l.PUBLISH,b)};c.logError=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{b("FBLogger")(i).catching(a).mustfix(c),d.$7(b("FantailLogger").error,c)}catch(a){}})};c.eventLogMiscellaneousError=function(a){a=a.errorMessage;a={device_id:this.$5,logged_in:g.isUserLoggedInNow(),href:window.location.hostname,error_message:a,time_passed:Date.now()-this.$4};this.$6(l.CLIENT_ERROR,a)};c.logErrorWarn=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{b("FBLogger")(i).catching(a).warn(c),d.$7(b("FantailLogger").warn,c)}catch(a){}})};c.logWarn=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{d.$1.warn(a,c),d.$7(b("FantailLogger").warn,c)}catch(a){}})};c.debugTrace=function(a,c){var d=this;g.scheduleLoggingCallback(function(){try{d.$1.debug(a,c),d.$7(b("FantailLogger").debug,c)}catch(a){}})};c.bumpCounter=function(a){var c=this;g.scheduleLoggingCallback(function(){c.$2!==0&&b("BanzaiODS").bumpEntityKey(2966,"mqtt_ws_client",c.$2+"."+a),b("BanzaiODS").bumpEntityKey(2966,"mqtt_ws_client",a)})};c.$6=function(a,c){var d=this;g.scheduleLoggingCallback(function(){c.event_type=a;c.app_id=d.$2;c.online=d.$8();var e=JSON.stringify(c);d.$1.log(a,e);a!==l.PUBLISH&&a!==l.DISCONNECT&&h(c);d.$7(b("FantailLogger").info,e)})};c.$7=function(a,c){g.scheduleLoggingCallback(function(){b("gkx")("676936")&&a(j,c)})};c.$8=function(){return window.navigator&&window.navigator.onLine!==void 0?window.navigator.onLine:!1};return a}();e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/Irg6QaR_7LF/
 */
__d("paho-mqtt",["setTimeoutAcrossTransitions","MqttLogger"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MqttLogger").getInstance();(function(a,b){typeof f==="object"&&typeof e==="object"?e.exports=b():typeof define==="function"&&define.amd?define(b):typeof f==="object"?f=b():(typeof a.Paho==="undefined"&&(a.Paho={}),a.Paho.MQTT=b())})(this,function(){__p&&__p();var c=function(c){__p&&__p();var d="@VERSION@",e={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},f=function(a,b){__p&&__p();for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(Object.prototype.hasOwnProperty.call(b,c)){if(typeof a[c]!==b[c])throw new Error(k(i.INVALID_TYPE,[typeof a[c],c]))}else{var d="Unknown property, "+c+". Valid properties are:";for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d=d+" "+e);throw new Error(d)}},h=function(a,b){return function(){return a.apply(b,arguments)}},i={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out. SocketState: {0}, HasSocketError: {1}."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out. HasSocketError: {0}."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed: code {0} reason {1} wasClean {2}."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},j={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},k=function(a,b){__p&&__p();a=a.text;if(b){var c,d;for(var e=0;e<b.length;e++){c="{"+e+"}";d=a.indexOf(c);if(d>0){var f=a.substring(0,d);d=a.substring(d+c.length);a=f+b[e]+d}}}return a},l=[0,6,77,81,73,115,100,112,3],m=[0,4,77,81,84,84,4],n=function(a,b){this.type=a;for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(this[c]=b[c])};n.prototype.encode=function(){__p&&__p();var a=(this.type&15)<<4,b=0,c=[],d=0,f;this.messageIdentifier!==void 0&&(b+=2);switch(this.type){case e.CONNECT:switch(this.mqttVersion){case 3:b+=l.length+3;break;case 4:b+=m.length+3;break}b+=t(this.clientId)+2;this.willMessage!==void 0&&(b+=t(this.willMessage.destinationName)+2,f=this.willMessage.payloadBytes,f instanceof Uint8Array||(f=new Uint8Array(h)),b+=f.byteLength+2);this.userName!==void 0&&(b+=t(this.userName)+2);this.password!==void 0&&(b+=t(this.password)+2);break;case e.SUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=t(this.topics[g]),b+=c[g]+2;b+=this.requestedQos.length;break;case e.UNSUBSCRIBE:a|=2;for(var g=0;g<this.topics.length;g++)c[g]=t(this.topics[g]),b+=c[g]+2;break;case e.PUBREL:a|=2;break;case e.PUBLISH:this.payloadMessage.duplicate&&(a|=8);a=a|=this.payloadMessage.qos<<1;this.payloadMessage.retained&&(a|=1);d=t(this.payloadMessage.destinationName);b+=d+2;var h=this.payloadMessage.payloadBytes;b+=h.byteLength;h instanceof ArrayBuffer?h=new Uint8Array(h):h instanceof Uint8Array||(h=new Uint8Array(h.buffer));break;case e.DISCONNECT:break;default:break}var i=s(b),j=i.length+1;b=new ArrayBuffer(b+j);var k=new Uint8Array(b);k[0]=a;k.set(i,1);if(this.type==e.PUBLISH)j=q(this.payloadMessage.destinationName,d,k,j);else if(this.type==e.CONNECT){switch(this.mqttVersion){case 3:k.set(l,j);j+=l.length;break;case 4:k.set(m,j);j+=m.length;break}a=0;this.cleanSession&&(a=2);this.willMessage!==void 0&&(a|=4,a|=this.willMessage.qos<<3,this.willMessage.retained&&(a|=32));this.userName!==void 0&&(a|=128);this.password!==void 0&&(a|=64);k[j++]=a;j=p(this.keepAliveInterval,k,j)}this.messageIdentifier!==void 0&&(j=p(this.messageIdentifier,k,j));switch(this.type){case e.CONNECT:j=q(this.clientId,t(this.clientId),k,j);this.willMessage!==void 0&&(j=q(this.willMessage.destinationName,t(this.willMessage.destinationName),k,j),j=p(f.byteLength,k,j),k.set(f,j),j+=f.byteLength);this.userName!==void 0&&(j=q(this.userName,t(this.userName),k,j));this.password!==void 0&&(j=q(this.password,t(this.password),k,j));break;case e.PUBLISH:k.set(h,j);break;case e.SUBSCRIBE:for(var g=0;g<this.topics.length;g++)j=q(this.topics[g],c[g],k,j),k[j++]=this.requestedQos[g];break;case e.UNSUBSCRIBE:for(var g=0;g<this.topics.length;g++)j=q(this.topics[g],c[g],k,j);break;default:}return b};function o(a,b){__p&&__p();var c=b,d=a[b],f=d>>4;d=d&=15;b+=1;var g,h=0,i=1;do{if(b==a.length)return[null,c];g=a[b++];h+=(g&127)*i;i*=128}while((g&128)!==0);g=b+h;if(g>a.length)return[null,c];i=new n(f);switch(f){case e.CONNACK:h=a[b++];h&1&&(i.sessionPresent=!0);i.returnCode=a[b++];break;case e.PUBLISH:c=d>>1&3;f=r(a,b);b+=2;h=v(a,b,f);b+=f;c>0&&(i.messageIdentifier=r(a,b),b+=2);f=new A(a.subarray(b,g));(d&1)==1&&(f.retained=!0);(d&8)==8&&(f.duplicate=!0);f.qos=c;f.destinationName=h;i.payloadMessage=f;break;case e.PUBACK:case e.PUBREC:case e.PUBREL:case e.PUBCOMP:case e.UNSUBACK:i.messageIdentifier=r(a,b);break;case e.SUBACK:i.messageIdentifier=r(a,b);b+=2;i.returnCode=a.subarray(b,g);break;default:break}return[i,g]}function p(a,b,c){b[c++]=a>>8;b[c++]=a%256;return c}function q(a,b,c,d){d=p(b,c,d);u(a,c,d);return d+b}function r(a,b){return 256*a[b]+a[b+1]}function s(a){var b=new Array(1),c=0;do{var d=a%128;a=a>>7;a>0&&(d|=128);b[c++]=d}while(a>0&&c<4);return b}function t(a){var b=0;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);d>2047?(55296<=d&&d<=56319&&(c++,b++),b+=3):d>127?b+=2:b++}return b}function u(a,b,c){__p&&__p();c=c;for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);if(55296<=e&&e<=56319){var f=a.charCodeAt(++d);if(isNaN(f))throw new Error(k(i.MALFORMED_UNICODE,[e,f]));e=(e-55296<<10)+(f-56320)+65536}e<=127?b[c++]=e:e<=2047?(b[c++]=e>>6&31|192,b[c++]=e&63|128):e<=65535?(b[c++]=e>>12&15|224,b[c++]=e>>6&63|128,b[c++]=e&63|128):(b[c++]=e>>18&7|240,b[c++]=e>>12&63|128,b[c++]=e>>6&63|128,b[c++]=e&63|128)}return b}function v(a,b,c){__p&&__p();var d="",e,f=b;while(f<b+c){var g=a[f++];if(g<128)e=g;else{var h=a[f++]-128;if(h<0)throw new Error(k(i.MALFORMED_UTF,[g.toString(16),h.toString(16),""]));if(g<224)e=64*(g-192)+h;else{var j=a[f++]-128;if(j<0)throw new Error(k(i.MALFORMED_UTF,[g.toString(16),h.toString(16),j.toString(16)]));if(g<240)e=4096*(g-224)+64*h+j;else{var l=a[f++]-128;if(l<0)throw new Error(k(i.MALFORMED_UTF,[g.toString(16),h.toString(16),j.toString(16),l.toString(16)]));if(g<248)e=262144*(g-240)+4096*h+64*j+l;else throw new Error(k(i.MALFORMED_UTF,[g.toString(16),h.toString(16),j.toString(16),l.toString(16)]))}}}e>65535&&(e-=65536,d+=String.fromCharCode(55296+(e>>10)),e=56320+(e&1023));d+=String.fromCharCode(e)}return d}var w=function(a,c,d){__p&&__p();this._client=a;this._window=c;this._keepAliveInterval=d*1e3;this.isReset=!1;var f=new n(e.PINGREQ).encode(),g=function(a){return function(){return h.apply(a)}},h=function(){!this.isReset?(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(i.PING_TIMEOUT.code,k(i.PING_TIMEOUT,[this._client._hasSocketError]))):(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(f),this.timeout=b("setTimeoutAcrossTransitions")(g(this),this._keepAliveInterval))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=b("setTimeoutAcrossTransitions")(g(this),this._keepAliveInterval))};this.cancel=function(){this._window.clearTimeout(this.timeout)}},x=function(a,c,d,e,f){this._window=c;d||(d=30);c=function(b,a,c){return function(){return b.apply(a,c)}};this.timeout=b("setTimeoutAcrossTransitions")(c(e,a,f),d*1e3);this.cancel=function(){this._window.clearTimeout(this.timeout)}},y=function(a,b,d,e,f){__p&&__p();if(!("WebSocket"in c&&c.WebSocket!==null))throw new Error(k(i.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in c&&c.ArrayBuffer!==null))throw new Error(k(i.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.MQTT.Client",a,b,d,e,f);this.host=b;this.port=d;this.path=e;this.uri=a;this.clientId=f;this._wsuri=null;this._localKey=b+":"+d+(e!="/mqtt"?":"+e:"")+":"+f+":";this._msg_queue=[];this._buffered_msg_queue=[];this._sentMessages={};this._receivedMessages={};this._notify_msg_sent={};this._message_identifier=1;this._sequence=0};y.prototype.host=null;y.prototype.port=null;y.prototype.path=null;y.prototype.uri=null;y.prototype.clientId=null;y.prototype.socket=null;y.prototype.connected=!1;y.prototype.maxMessageIdentifier=6e4;y.prototype.connectOptions=null;y.prototype.hostIndex=null;y.prototype.onConnected=null;y.prototype.onConnectionLost=null;y.prototype.onMessageDelivered=null;y.prototype.onMessageArrived=null;y.prototype.traceFunction=null;y.prototype._msg_queue=null;y.prototype._buffered_msg_queue=null;y.prototype._connectTimeout=null;y.prototype.sendPinger=null;y.prototype.receivePinger=null;y.prototype._reconnectInterval=1;y.prototype._reconnecting=!1;y.prototype._hasSocketError=!1;y.prototype._reconnectTimeout=null;y.prototype.disconnectedPublishing=!1;y.prototype.disconnectedBufferSize=5e3;y.prototype.receiveBuffer=null;y.prototype._traceBuffer=null;y.prototype._MAX_TRACE_ENTRIES=100;y.prototype.connect=function(a){__p&&__p();var b=this._traceMask(a,"password");this._trace("Client.connect",b,this.socket,this.connected);if(this.connected)throw new Error(k(i.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(k(i.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);this.connectOptions=a;this._reconnectInterval=1;this._reconnecting=!1;a.uris?(this.hostIndex=0,this._doConnect(a.uris[0])):this._doConnect(this.uri)};y.prototype.subscribe=function(a,b){__p&&__p();this._trace("Client.subscribe",a,b);if(!this.connected)throw new Error(k(i.INVALID_STATE,["not connected"]));var c=new n(e.SUBSCRIBE);c.topics=[a];b.qos!==void 0?c.requestedQos=[b.qos]:c.requestedQos=[0];b.onSuccess&&(c.onSuccess=function(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=function(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:k(a)})});b.timeout&&(c.timeOut=new x(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:i.SUBSCRIBE_TIMEOUT.code,errorMessage:k(i.SUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};y.prototype.unsubscribe=function(a,b){__p&&__p();this._trace("Client.unsubscribe",a,b);if(!this.connected)throw new Error(k(i.INVALID_STATE,["not connected"]));var c=new n(e.UNSUBSCRIBE);c.topics=[a];b.onSuccess&&(c.callback=function(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=new x(this,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:i.UNSUBSCRIBE_TIMEOUT.code,errorMessage:k(i.UNSUBSCRIBE_TIMEOUT)}]));this._requires_ack(c);this._schedule_message(c)};y.prototype.send=function(a){this._trace("Client.send",a);wireMessage=new n(e.PUBLISH);wireMessage.payloadMessage=a;a.qos>0?this._requires_ack(wireMessage):this.onMessageDelivered&&(this._notify_msg_sent[wireMessage]=this.onMessageDelivered(wireMessage.payloadMessage,null));this._schedule_message(wireMessage);return wireMessage.messageIdentifier};y.prototype.disconnect=function(){this._trace("Client.disconnect");this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1);if(!this.socket)throw new Error(k(i.INVALID_STATE,["not connecting or connected"]));wireMessage=new n(e.DISCONNECT);this._notify_msg_sent[wireMessage]=h(this._disconnected,this);this._schedule_message(wireMessage)};y.prototype.getTraceLog=function(){if(this._traceBuffer!==null){this._trace("Client.getTraceLog",new Date());this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var a in this._sentMessages)this._trace("_sentMessages ",a,this._sentMessages[a]);for(var a in this._receivedMessages)this._trace("_receivedMessages ",a,this._receivedMessages[a]);return this._traceBuffer}};y.prototype.startTrace=function(){this._traceBuffer===null&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date(),d)};y.prototype.stopTrace=function(){delete this._traceBuffer};y.prototype._doConnect=function(a){__p&&__p();if(this.connectOptions.useSSL){var b=a.split(":");b[0]="wss";a=b.join(":")}this._wsuri=a;this.connected=!1;this.connectOptions.ignoreSubProtocol?this.socket=new WebSocket(a):this.connectOptions.mqttVersion<4?this.socket=new WebSocket(a,["mqttv3.1"]):this.socket=new WebSocket(a,["mqtt"]);this.socket.binaryType="arraybuffer";this.socket.onopen=h(this._on_socket_open,this);this.socket.onmessage=h(this._on_socket_message,this);this.socket.onerror=h(this._on_socket_error,this);this.socket.onclose=h(this._on_socket_close,this);this.sendPinger=new w(this,window,this.connectOptions.keepAliveInterval);this.receivePinger=new w(this,window,this.connectOptions.keepAliveInterval);this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._connectTimeout=new x(this,window,this.connectOptions.timeout,this._onConnectTimeout,[])};y.prototype._schedule_message=function(a){this._msg_queue.push(a),this.connected&&this._process_queue()};y.prototype.store=function(a,b){};y.prototype.restore=function(a){};y.prototype._process_queue=function(){var a=null,b=this._msg_queue.reverse();while(a=b.pop())this._socket_send(a),this._notify_msg_sent[a]&&(this._notify_msg_sent[a](),delete this._notify_msg_sent[a])};y.prototype._requires_ack=function(a){var b=Object.keys(this._sentMessages).length;if(b>this.maxMessageIdentifier)throw Error("Too many messages:"+b);while(this._sentMessages[this._message_identifier]!==void 0)this._message_identifier++;a.messageIdentifier=this._message_identifier;this._sentMessages[a.messageIdentifier]=a;a.type===e.PUBLISH&&this.store("Sent:",a);this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)};y.prototype._on_socket_open=function(){var a=new n(e.CONNECT,this.connectOptions);a.clientId=this.clientId;this._socket_send(a);this.connected=!0;this.connectOptions.onSocketOpen&&this.connectOptions.onSocketOpen()};y.prototype._on_socket_message=function(a){this._trace("Client._on_socket_message",a.data);a=this._deframeMessages(a.data);for(var b=0;b<a.length;b+=1)this._handleMessage(a[b])};y.prototype._deframeMessages=function(a){__p&&__p();a=new Uint8Array(a);var b=[];if(this.receiveBuffer){var c=new Uint8Array(this.receiveBuffer.length+a.length);c.set(this.receiveBuffer);c.set(a,this.receiveBuffer.length);a=c;delete this.receiveBuffer}try{c=0;while(c<a.length){var d=o(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}c<a.length&&(this.receiveBuffer=a.subarray(c))}catch(a){d=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(i.INTERNAL_ERROR.code,k(i.INTERNAL_ERROR,[a.message,d]));return}return b};y.prototype._handleMessage=function(a){__p&&__p();this._trace("Client._handleMessage",a);try{switch(a.type){case e.CONNACK:this._connectTimeout.cancel();this._reconnectTimeout&&this._reconnectTimeout.cancel();this.connectOptions.cleanSession&&(this._sentMessages={},this._receivedMessages={});if(a.returnCode===0)this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);else{g.bumpCounter("paho_mqtt.error.connack.invalidreturncode");this.connected=!1;this._disconnected(i.CONNACK_RETURNCODE.code,k(i.CONNACK_RETURNCODE,[a.returnCode,j[a.returnCode]]),a.returnCode);break}var b=[];for(var c in this._sentMessages)Object.prototype.hasOwnProperty.call(this._sentMessages,c)&&b.push(this._sentMessages[c]);if(this._buffered_msg_queue.length>0){var d=null,f=this._buffered_msg_queue.reverse();while(d=f.pop())b.push(d),this.onMessageDelivered&&(this._notify_msg_sent[d]=this.onMessageDelivered(d.payloadMessage,null))}var b=b.sort(function(a,b){return a.sequence-b.sequence});for(var f=0,d=b.length;f<d;f++){var h=b[f];if(h.type==e.PUBLISH&&h.pubRecReceived){var l=new n(e.PUBREL,{messageIdentifier:h.messageIdentifier});this._schedule_message(l)}else this._schedule_message(h)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});f=!1;this._reconnecting&&(f=!0,this._reconnectInterval=1,this._reconnecting=!1);this._connected(f,this._wsuri);this._process_queue();break;case e.PUBLISH:this._receivePublish(a);break;case e.PUBACK:d=a.messageIdentifier;var h=this._sentMessages[d];h&&(delete this._sentMessages[d],this.onMessageDelivered&&this.onMessageDelivered(h.payloadMessage,d));break;case e.PUBREC:var h=this._sentMessages[a.messageIdentifier];if(h){h.pubRecReceived=!0;var l=new n(e.PUBREL,{messageIdentifier:a.messageIdentifier});this.store("Sent:",h);this._schedule_message(l)}break;case e.PUBREL:b=this._receivedMessages[a.messageIdentifier];b&&(this._receiveMessage(b),delete this._receivedMessages[a.messageIdentifier]);f=new n(e.PUBCOMP,{messageIdentifier:a.messageIdentifier});this._schedule_message(f);break;case e.PUBCOMP:d=a.messageIdentifier;var h=this._sentMessages[d];delete this._sentMessages[d];this.onMessageDelivered&&this.onMessageDelivered(h.payloadMessage,d);break;case e.SUBACK:var h=this._sentMessages[a.messageIdentifier];h&&(h.timeOut&&h.timeOut.cancel(),a.returnCode[0]===128?h.onFailure&&h.onFailure(a.returnCode):h.onSuccess&&h.onSuccess(a.returnCode),delete this._sentMessages[a.messageIdentifier]);break;case e.UNSUBACK:var h=this._sentMessages[a.messageIdentifier];h&&(h.timeOut&&h.timeOut.cancel(),h.callback&&h.callback(),delete this._sentMessages[a.messageIdentifier]);break;case e.PINGRESP:this.sendPinger.reset();break;case e.DISCONNECT:this._disconnected(i.INVALID_MQTT_MESSAGE_TYPE.code,k(i.INVALID_MQTT_MESSAGE_TYPE,[a.type]));break;default:this._disconnected(i.INVALID_MQTT_MESSAGE_TYPE.code,k(i.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}catch(a){l=Object.prototype.hasOwnProperty.call(a,"stack")=="undefined"?a.stack.toString():"No Error Stack Available";this._disconnected(i.INTERNAL_ERROR.code,k(i.INTERNAL_ERROR,[a.message,l]));return}};y.prototype._on_socket_error=function(a){g.bumpCounter("paho_mqtt.error.socket"),this.connectOptions.ignoreSocketError||(this._reconnecting||this._disconnected(i.SOCKET_ERROR.code,k(i.SOCKET_ERROR,[a.data])),this.connectOptions.onSocketError&&this.connectOptions.onSocketError(a)),this._hasSocketError=!0};y.prototype._on_socket_close=function(a){g.bumpCounter("paho_mqtt.socket.close"),this._reconnecting||this._disconnected(i.SOCKET_CLOSE.code,k(i.SOCKET_CLOSE,a!=null?[a.code,a.reason,a.wasClean]:[]))};y.prototype._socket_send=function(a){if(a.type==1){var b=this._traceMask(a,"password");this._trace("Client._socket_send",b)}else this._trace("Client._socket_send",a);this.socket.send(a.encode());this.sendPinger.reset()};y.prototype._receivePublish=function(a){__p&&__p();switch(a.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(a);break;case 1:var b=new n(e.PUBACK,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);this._receiveMessage(a);break;case 2:this._receivedMessages[a.messageIdentifier]=a;this.store("Received:",a);b=new n(e.PUBREC,{messageIdentifier:a.messageIdentifier});this._schedule_message(b);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}};y.prototype._receiveMessage=function(a){this.onMessageArrived&&this.onMessageArrived(a.payloadMessage)};y.prototype._connected=function(a,b){this.onConnected&&this.onConnected(a,b)};y.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=this._reconnectInterval*2),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))};y.prototype._onConnectTimeout=function(){g.bumpCounter("paho_mqtt.error.connect.timeout"),this._disconnected(i.CONNECT_TIMEOUT.code,k(i.CONNECT_TIMEOUT,[this.socket.readyState,this._hasSocketError]))};y.prototype._disconnected=function(a,b,c){__p&&__p();this._trace("Client._disconnected",a,b);if(a!==void 0&&this._reconnecting){this._reconnectTimeout=new x(this,window,this._reconnectInterval,this._reconnect);return}this.sendPinger.cancel();this.receivePinger.cancel();this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null);this._msg_queue=[];this._buffered_msg_queue=[];this._notify_msg_sent={};this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.readyState===1&&this.socket.close(),delete this.socket);if(this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else{a===void 0&&(a=i.OK.code,b=k(i.OK));if(this.connected){this.connected=!1;this.onConnectionLost&&this.onConnectionLost({errorCode:a,errorMessage:b,reconnect:this.connectOptions.reconnect,uri:this._wsuri});if(a!==i.OK.code&&this.connectOptions.reconnect){this._reconnectInterval=1;this._reconnect();return}}else this.connectOptions.mqttVersion===4&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:a,errorMessage:b,connack:c})}};y.prototype._trace=function(){if(this.traceFunction){for(var a in arguments)typeof arguments[a]!=="undefined"&&arguments.splice(a,1,JSON.stringify(arguments[a]));var b=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:b})}if(this._traceBuffer!==null)for(var a=0,c=arguments.length;a<c;a++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),a===0?this._traceBuffer.push(arguments[a]):typeof arguments[a]==="undefined"?this._traceBuffer.push(arguments[a]):this._traceBuffer.push("  "+JSON.stringify(arguments[a]))};y.prototype._traceMask=function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(d==b?c[d]="******":c[d]=a[d]);return c};var z=function(a,b,c,d){__p&&__p();var e;if(typeof a!=="string")throw new Error(k(i.INVALID_TYPE,[typeof a,"host"]));if(arguments.length==2){d=b;e=a;var g=e.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(g)a=g[4]||g[2],b=parseInt(g[7]),c=g[8];else throw new Error(k(i.INVALID_ARGUMENT,[a,"host"]))}else{arguments.length==3&&(d=c,c="/mqtt");if(typeof b!=="number"||b<0)throw new Error(k(i.INVALID_TYPE,[typeof b,"port"]));if(typeof c!=="string")throw new Error(k(i.INVALID_TYPE,[typeof c,"path"]));var h=a.indexOf(":")!==-1&&a.slice(0,1)!=="["&&a.slice(-1)!=="]";e="ws://"+(h?"["+a+"]":a)+":"+b+c}var j=0;for(var l=0;l<d.length;l++){var m=d.charCodeAt(l);55296<=m&&m<=56319&&l++;j++}if(typeof d!=="string"||j>65535)throw new Error(k(i.INVALID_ARGUMENT,[d,"clientId"]));var n=new y(e,a,b,c,d);this._getHost=function(){return a};this._setHost=function(){throw new Error(k(i.UNSUPPORTED_OPERATION))};this._getPort=function(){return b};this._setPort=function(){throw new Error(k(i.UNSUPPORTED_OPERATION))};this._getPath=function(){return c};this._setPath=function(){throw new Error(k(i.UNSUPPORTED_OPERATION))};this._getURI=function(){return e};this._setURI=function(){throw new Error(k(i.UNSUPPORTED_OPERATION))};this._getClientId=function(){return n.clientId};this._setClientId=function(){throw new Error(k(i.UNSUPPORTED_OPERATION))};this._getOnConnected=function(){return n.onConnected};this._setOnConnected=function(a){if(typeof a==="function")n.onConnected=a;else throw new Error(k(i.INVALID_TYPE,[typeof a,"onConnected"]))};this._getDisconnectedPublishing=function(){return n.disconnectedPublishing};this._setDisconnectedPublishing=function(a){n.disconnectedPublishing=a};this._getDisconnectedBufferSize=function(){return n.disconnectedBufferSize};this._setDisconnectedBufferSize=function(a){n.disconnectedBufferSize=a};this._getConnectOptions=function(){return n.connectOptions};this._getOnConnectionLost=function(){return n.onConnectionLost};this._setOnConnectionLost=function(a){if(typeof a==="function")n.onConnectionLost=a;else throw new Error(k(i.INVALID_TYPE,[typeof a,"onConnectionLost"]))};this._getOnMessageDelivered=function(){return n.onMessageDelivered};this._setOnMessageDelivered=function(a){if(typeof a==="function")n.onMessageDelivered=a;else throw new Error(k(i.INVALID_TYPE,[typeof a,"onMessageDelivered"]))};this._getOnMessageArrived=function(){return n.onMessageArrived};this._setOnMessageArrived=function(a){if(typeof a==="function")n.onMessageArrived=a;else throw new Error(k(i.INVALID_TYPE,[typeof a,"onMessageArrived"]))};this._getTrace=function(){return n.traceFunction};this._setTrace=function(a){if(typeof a==="function")n.traceFunction=a;else throw new Error(k(i.INVALID_TYPE,[typeof a,"onTrace"]))};this.connect=function(d){__p&&__p();d=d||{};f(d,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",ignoreSocketError:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",onSocketOpen:"function",onSocketError:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",ignoreSubProtocol:"boolean",uris:"object"});d.keepAliveInterval===void 0&&(d.keepAliveInterval=60);if(d.mqttVersion>4||d.mqttVersion<3)throw new Error(k(i.INVALID_ARGUMENT,[d.mqttVersion,"connectOptions.mqttVersion"]));d.mqttVersion===void 0?(d.mqttVersionExplicit=!1,d.mqttVersion=4):d.mqttVersionExplicit=!0;if(d.password!==void 0&&d.userName===void 0)throw new Error(k(i.INVALID_ARGUMENT,[d.password,"connectOptions.password"]));if(d.willMessage){if(!(d.willMessage instanceof A))throw new Error(k(i.INVALID_TYPE,[d.willMessage,"connectOptions.willMessage"]));d.willMessage.stringPayload=null;if(typeof d.willMessage.destinationName==="undefined")throw new Error(k(i.INVALID_TYPE,[typeof d.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}typeof d.cleanSession==="undefined"&&(d.cleanSession=!0);if(d.hosts){if(!(d.hosts instanceof Array))throw new Error(k(i.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));if(d.hosts.length<1)throw new Error(k(i.INVALID_ARGUMENT,[d.hosts,"connectOptions.hosts"]));var g=!1;for(var b=0;b<d.hosts.length;b++){if(typeof d.hosts[b]!=="string")throw new Error(k(i.INVALID_TYPE,[typeof d.hosts[b],"connectOptions.hosts["+b+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(d.hosts[b])){if(b===0)g=!0;else if(!g)throw new Error(k(i.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}else if(g)throw new Error(k(i.INVALID_ARGUMENT,[d.hosts[b],"connectOptions.hosts["+b+"]"]))}if(!g){if(!d.ports)throw new Error(k(i.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(!(d.ports instanceof Array))throw new Error(k(i.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));if(d.hosts.length!==d.ports.length)throw new Error(k(i.INVALID_ARGUMENT,[d.ports,"connectOptions.ports"]));d.uris=[];for(var b=0;b<d.hosts.length;b++){if(typeof d.ports[b]!=="number"||d.ports[b]<0)throw new Error(k(i.INVALID_TYPE,[typeof d.ports[b],"connectOptions.ports["+b+"]"]));g=d.hosts[b];var a=d.ports[b],h=g.indexOf(":")!==-1;e="ws://"+(h?"["+g+"]":g)+":"+a+c;d.uris.push(e)}}else d.uris=d.hosts}n.connect(d)};this.subscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};f(b,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(typeof b.qos!=="undefined"&&!(b.qos===0||b.qos===1||b.qos===2))throw new Error(k(i.INVALID_ARGUMENT,[b.qos,"subscribeOptions.qos"]));n.subscribe(a,b)};this.unsubscribe=function(a,b){if(typeof a!=="string")throw new Error("Invalid argument:"+a);b=b||{};f(b,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"});if(b.timeout&&!b.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");n.unsubscribe(a,b)};this.send=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof A)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(k(i.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));n.send(e)}else e=new A(b),e.destinationName=a,arguments.length>=3&&(e.qos=c),arguments.length>=4&&(e.retained=d),n.send(e)};this.publish=function(a,b,c,d){__p&&__p();var e;if(arguments.length===0)throw new Error("Invalid argument.length");else if(arguments.length==1){if(!(a instanceof A)&&typeof a!=="string")throw new Error("Invalid argument:"+typeof a);e=a;if(typeof e.destinationName==="undefined")throw new Error(k(i.INVALID_ARGUMENT,[e.destinationName,"Message.destinationName"]));return n.send(e)}else{e=new A(b);e.destinationName=a;arguments.length>=3&&(e.qos=c);arguments.length>=4&&(e.retained=d);return n.send(e)}};this.disconnect=function(){n.disconnect()};this.getTraceLog=function(){return n.getTraceLog()};this.startTrace=function(){n.startTrace()};this.stopTrace=function(){n.stopTrace()};this.isConnected=function(){return n.connected}};Object.defineProperties(z.prototype,{host:{get:function(){return this._getHost()},set:function(a){this._setHost(a)}},port:{get:function(){return this._getPort()},set:function(a){this._setPort(a)}},path:{get:function(){return this._getPath()},set:function(a){this._setPath(a)}},clientId:{get:function(){return this._getClientId()},set:function(a){this._setClientId(a)}},onConnected:{get:function(){return this._getOnConnected()},set:function(a){this._setOnConnected(a)}},disconnectedPublishing:{get:function(){return this._getDisconnectedPublishing()},set:function(a){this._setDisconnectedPublishing(a)}},disconnectedBufferSize:{get:function(){return this._getDisconnectedBufferSize()},set:function(a){this._setDisconnectedBufferSize(a)}},onConnectionLost:{get:function(){return this._getOnConnectionLost()},set:function(a){this._setOnConnectionLost(a)}},connectOptions:{get:function(){return this._getConnectOptions()}},onMessageDelivered:{get:function(){return this._getOnMessageDelivered()},set:function(a){this._setOnMessageDelivered(a)}},onMessageArrived:{get:function(){return this._getOnMessageArrived()},set:function(a){this._setOnMessageArrived(a)}},trace:{get:function(){return this._getTrace()},set:function(a){this._setTrace(a)}}});var A=function(a){__p&&__p();var b;if(typeof a==="string"||a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)b=a;else throw k(i.INVALID_ARGUMENT,[a,"newPayload"]);this._getPayloadString=function(){if(typeof b==="string")return b;else return v(b,0,b.length)};this._getPayloadBytes=function(){if(typeof b==="string"){var a=new ArrayBuffer(t(b));a=new Uint8Array(a);u(b,a,0);return a}else return b};var c;this._getDestinationName=function(){return c};this._setDestinationName=function(a){if(typeof a==="string")c=a;else throw new Error(k(i.INVALID_ARGUMENT,[a,"newDestinationName"]))};var d=0;this._getQos=function(){return d};this._setQos=function(a){if(a===0||a===1||a===2)d=a;else throw new Error("Invalid argument:"+a)};var e=!1;this._getRetained=function(){return e};this._setRetained=function(a){if(typeof a==="boolean")e=a;else throw new Error(k(i.INVALID_ARGUMENT,[a,"newRetained"]))};var f=!1;this._getDuplicate=function(){return f};this._setDuplicate=function(a){f=a}};Object.defineProperties(A.prototype,{payloadString:{get:function(){return this._getPayloadString()}},payloadBytes:{get:function(){return this._getPayloadBytes()}},destinationName:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},topic:{get:function(){return this._getDestinationName()},set:function(a){this._setDestinationName(a)}},qos:{get:function(){return this._getQos()},set:function(a){this._setQos(a)}},retained:{get:function(){return this._getRetained()},set:function(a){this._setRetained(a)}},duplicate:{get:function(){return this._getDuplicate()},set:function(a){this._setDuplicate(a)}}});var B=function(a,b){a=new n(e.CONNECT,a);a.clientId=b;return a},C=function(a,b){b=new n(b);b.topics=[a];b.requestedQos=[1];b.messageIdentifier=this.messageSequenceId++;return b},D=function(a){return C(a,e.SUBSCRIBE)},E=function(a){return C(a,e.UNSUBSCRIBE)},F=function(a,b,c){var d;d=new A(b);d.destinationName=a;arguments.length>=3&&(d.qos=c);var f;f=new n(e.PUBLISH);f.payloadMessage=d;f.messageIdentifier=this.messageSequenceId++;return f},G=function(a){__p&&__p();a=new Uint8Array(a);var b=[],c=0;while(c<a.length){var d=o(a,c),e=d[0];c=d[1];if(e!==null)b.push(e);else break}return b};return{TESTING_CLIENT_IMPL:y,Client:z,Message:A,Encoder:{encodeConnect:B,encodePublish:F,encodeSubscribe:D,encodeUnsubscribe:E,messageSequenceId:1},Decoder:{decode:G}}}(window);return c})}),null);
__d("MqttWsClient",["MqttEnv","MqttTypes","paho-mqtt"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttEnv").Env,h=b("MqttTypes").ConnectFailure,i=b("MqttTypes").MqttError,j=function(a){};a=function(){__p&&__p();function a(a){this.$2=a,this.$3=g.getLoggerInstance(),this.$1=new(b("paho-mqtt").Client)(this.$2,"mqttwsclient"),this.$4={}}var c=a.prototype;c.connect=function(a){__p&&__p();var b=this;this.$4=a;this.$1.onConnectionLost=function(b){a.onConnectionLost(new i(b.errorCode,b.errorMessage))};this.$1.onMessageArrived=function(c){try{var d=c.destinationName;b.$3.bumpCounter("message_arrived.ws."+d);a.onMessageArrived(d,c.payloadString)}catch(a){b.$3.logError(a,"Unable to parse message"),b.$3.bumpCounter("error_processing_message."+c.destinationName!=null?c.destinationName:"null")}};this.$1.onMessageDelivered=function(b,c){return a.onMessageDelivered(b,c)};this.$1.connect({userName:a.userName,mqttVersion:a.mqttVersion,keepAliveInterval:a.keepAliveInterval,onFailure:function(b){if(b!=null){var c=new i(b.errorCode,b.errorMessage);c=new h(c,b.connack)}else c=new h(new i(1,"No ResponseObject"),-1);a.onConnectFailure(c)},onSuccess:function(){return a.onConnectSuccess()},ignoreSubProtocol:a.ignoreSubProtocol,onSocketOpen:function(){return a.onConnection()},onSocketError:function(b){return a.onConnectionError(b)},ignoreSocketError:!1})};c.unsubscribe=function(a){this.$1.unsubscribe(a)};c.subscribe=function(a){this.$1.subscribe(a,{})};c.publish=function(a,b,c){return this.$1.publish(a,b,c,!1)};c.isConnected=function(){return this.$1.isConnected()};c.disconnect=function(){this.$4!=null&&(this.$4.onConnectSuccess=j,this.$4.onConnectFailure=j,this.$4.onConnection=j,this.$4.onConnectionError=j,this.$4.onMessageArrived=j,this.$4.onMessageDelivered=j),this.$1.connectOptions!=null&&(this.$1.connectOptions.onConnectSuccess=j,this.$1.connectOptions.onConnectFailure=j,this.$1.connectOptions.onConnection=j,this.$1.connectOptions.onConnectionError=j,this.$1.connectOptions.onMessageArrived=j,this.$1.connectOptions.onMessageDelivered=j),this.isConnected()&&this.$1.disconnect()};return a}();e.exports=a}),null);
__d("MqttConnection",["Promise","MqttConnectionHookCollection","MqttEnv","MqttProtocolClient","MqttTypes","MqttUserName","MqttUtils","MqttWsClient"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames;b("MqttTypes").ConnectFailure;var i=b("MqttTypes").MqttChannelError;b("MqttTypes").MqttError;var j=10,k="publish",l="subscribe",m="unsubscribe",n=function(a){},o=18e4,p=5*1e3,q=15,r=21,s=g.genGk(h.mqtt_ws_comet_client)?"protocol":"paho";a=function(){__p&&__p();function a(){__p&&__p();this.$9=!1;this.$11=g.getLoggerInstance();this.$12="Disconnected";this.$15=new Set();this.$16=new Map();this.$17=0;this.$18=0;this.$13=0;this.$14=0;this.$9=!1;this.$6="";this.$7=new(b("MqttUserName"))("",0,1,"",0,!0);this.$10=0;this.$8=null;var a=function(){};this.$1=a;this.$2=a;this.$3=a;this.$19=new(b("MqttConnectionHookCollection"))();this.$4=function(){return[]}}var c=a.prototype;c.run=function(a){__p&&__p();var b=this,c=a.onStateChange,d=a.onJSError,e=a.onMessageReceived,f=a.endpoint,g=a.mqttUserName,h=a.subscribedTopics;a=a.extraConnectMessageProvider;if(this.$9){this.$11.debugTrace("run","Run called while in running state.");return}this.$1=c;this.$3=e;this.$6=f;this.$7=g;this.$9=!0;this.$13=0;this.$2=d||n;h&&h.forEach(function(a){return b.$15.add(a)});this.$4=a;this.$20();this.$21()};c.shutdown=function(){this.$22(),this.$23("shutdown"),this.$9=!1,this.$11.debugTrace("shutdown","Shutdown")};c.subscribe=function(a){this.$15.add(a);this.ensureConnected(l)&&this.$24(a);return!0};c.publish=function(a,c,d){var e={resolve:function(){},reject:function(a){}},f=new(b("Promise"))(function(a,b){e.resolve=a,e.reject=b}),g=this.ensureConnected(k),h="connection_unknown";if(!g)h="connection_not_connected",e.reject(new Error("Client disconnected"));else{c=this.$25(a,c,d,e);h=c===!0?"connection_published":"connection_failed"}this.$11.eventLogPublish({sessionID:this.$10,topic:a,connectionStatus:g,publishStatus:h});return f};c.unsubscribe=function(a){this.$15["delete"](a);this.ensureConnected(m)&&this.$26(a);return!0};c.addHook=function(a){this.$19.addHook(a)};c.removeHook=function(a){this.$19.removeHook(a)};c.isRunning=function(){return this.$9};c.getSessionId=function(){return this.$10};c.ensureConnected=function(a){__p&&__p();if(!this.$9){this.$11.debugTrace("ensureConnected","Mqtt connection: "+a+" called when not running");return!1}if(this.$8==null){this.$11.debugTrace("ensureConnected","Mqtt connection: "+a+" called when not connected, ignored");return!1}var b=this.$8.isConnected();if(!b){this.$11.debugTrace("ensureConnected","Mqtt connection: "+a+" called with client not connected");return!1}return!0};c.connectionState=function(){return this.$12};c.testOnlyGetSubscribedTopics=function(){return this.$15};c.$20=function(){var a=this;g.genGk(h.mqtt_send_unload_event)&&typeof window!=="undefined"&&window.addEventListener("unload",function(b){return a.$27(b)})};c.$27=function(a){this.publish("/browser_close","{}",0)};c.$22=function(){this.$9&&this.$8!=null&&(this.$28("Disconnected"),this.$8!=null&&this.$8.disconnect(),this.$8=null)};c.$28=function(a){a!==this.$12&&(this.$12=a,this.$1(a))};c.$21=function(){__p&&__p();var a=this;if(!this.$9)return;this.$28("Connecting");var c=Date.now();this.$10=b("MqttUtils").generateSessionId();var d=Array.from(this.$15),e=b("MqttUtils").endpointWithSessionId(this.$6,this.$10);try{this.$8=g.genGk(h.mqtt_ws_comet_client_rollout)?new(b("MqttProtocolClient"))(e):new(b("MqttWsClient"))(e);var f=this.$29(),k=f.map(function(a){return a.topic});e=this.$7.gen(this.$10,d,f);this.$8!=null&&(this.$8.connect({userName:e,mqttVersion:3,keepAliveInterval:j,ignoreSubProtocol:!0,onConnectFailure:function(b){return a.$30(b,c,d,k)},onConnectSuccess:function(){return a.$31(c,d,k)},onConnection:function(){return a.$32(f,d)},onConnectionError:function(b){return a.$33(b)},onConnectionLost:function(b){return a.$34(b)},onMessageArrived:function(b,c){return a.$35(b,c)},onMessageDelivered:function(b,c){return a.$36(b,c)}}),this.$11.bumpCounter(s+".connectattempt"),this.$19.onConnectAttempt())}catch(a){this.$11.bumpCounter("js_error_in_init_exception"),this.$28("Disconnected"),this.$37(!1,c,d,[],14,a.message),a&&this.$11.logErrorWarn(a,"ws_js_error"),this.$19.onWSFatal(),this.$38(new i(!1,"ws_js_error",a),"client_init")}};c.$29=function(){var a=this.$4(),b=65536;a=a.map(function(a){a.messageId=b--;return a});return a};c.$24=function(a){__p&&__p();try{if(this.$8!=null){this.$8.subscribe(a);this.$11.debugTrace("_doSubscribe","Subscribing to "+a);this.$19.onSubscribe(a);this.$11.bumpCounter(s+".subscribe");return!0}}catch(b){this.$11.logError(b,"Exception subscribing"),this.$11.bumpCounter("subscribe_exception."+a),this.$11.bumpCounter(s+".subscribe.error")}return!1};c.$26=function(a){__p&&__p();try{if(this.$8!=null){this.$8.unsubscribe(a);this.$11.debugTrace("_doUnsubscribe","Unsubscribing to "+a);this.$19.onUnsubscribe(a);this.$11.bumpCounter(s+".unsubscribe");return!0}}catch(b){this.$11.logError(b,"Exception unsubscribing"),this.$11.bumpCounter("unsubscribe_exception."+a),this.$11.bumpCounter(s+".unsubscribe.error")}return!1};c.$25=function(a,b,c,d){__p&&__p();if(this.$8!=null)try{b=this.$8.publish(a,b,c);this.$11.bumpCounter(s+".publish");var e=b!=null?b:"null";this.$11.debugTrace("_doPublish","publish "+a+" with messageId:"+e+" qos:"+c);this.$19.onPublish(a);b!=null?this.$16.set(b,d):d.resolve();return!0}catch(b){this.$11.logError(b,"Exception publishing");this.$11.bumpCounter("publish_exception."+a);d.reject(b);this.$11.bumpCounter(s+".publish.error");return!1}else return!1};c.$39=function(a){__p&&__p();var b=this;a===void 0&&(a=null);if(!this.$9)return;this.$22();this.$23("reconnect");this.$40();this.$10=-1;this.$14=0;a=a!=null?a:Math.pow(2,Math.min(this.$13,6))*(1e3+g.random()*200);this.$11.debugTrace("_scheduleReconnect","Reconnect in "+a+" ms");g.setTimeout(function(){b.$21()},a);this.$13+=1};c.$40=function(){if(!g.genGk(h.mqtt_ws_reconnect_reset))return;var a=Date.now()-this.$14,b=this.$14!==0&&a>p,c=this.$13>q;(b||c)&&(this.$13=0);this.$14!==0&&a<=p&&this.$11.bumpCounter("short_lived_session");c&&this.$11.bumpCounter("connection_attempt_limit")};c.$37=function(a,b,c,d,e,f){a===!0?this.$18++:this.$17++,this.$11.eventLogConnect({sessionID:this.$10,connectionStatus:a,duration:Date.now()-b,hostname:this.$6,attemptNumber:this.$13,failTotal:this.$17,successTotal:this.$18,subscribedTopics:c,publishes:d,errorCode:e,errorMessage:f})};c.$30=function(a,b,c,d){__p&&__p();var e=a.mqttError,f=e.errorMessage;this.$11.debugTrace("connect","Connect failed "+f);this.$11.bumpCounter(s+".onconnectfailure");this.$19.onConnectFailure();this.$37(!1,b,c,d,e.errorCode,f);if(a.connAck!=null){this.$11.bumpCounter(s+".connect_failure."+a.connAck);if(a.connAck===r){this.$39(o);return}}this.$39()};c.$32=function(a,b){var c=this;this.$11.bumpCounter(s+".onconnection");this.$11.debugTrace("Connect","Socket established");this.$19.onConnected();b.forEach(function(a){c.$19.onSubscribe(a)});a.forEach(function(a){c.$19.onPublish(a.topic)});this.$28("TransportConnected")};c.$31=function(a,b,c){this.$11.bumpCounter(s+".onconnectsuccess"),this.$11.debugTrace("connect","Connect success"),this.$19.onConnectSuccess(),this.$37(!0,a,b,c),this.$28("Connected"),this.$41(b),g.genGk(h.mqtt_ws_reconnect_reset)||(this.$13=0),this.$14=Date.now()};c.$34=function(a){this.$11.bumpCounter(s+".onconnectionlost"),a.errorCode&&this.$11.eventLogDisconnect({sessionID:this.$10,errorCode:a.errorCode,errorMessage:a.errorMessage,duration:Date.now()-this.$14}),this.$11.debugTrace("connect","connection lost"),this.$19.onConnectionLost(),this.$39()};c.$33=function(a){};c.$35=function(a,b){this.$11.bumpCounter(s+".onmessagearrived");this.$11.debugTrace("onMessageArrived","Message received on "+a);this.$19.onMessage(a);try{this.$3(a,b)}catch(b){this.$11.logError(b,"Listener threw error"),this.$11.bumpCounter("listener_error."+a)}};c.$36=function(a,b){__p&&__p();this.$11.bumpCounter(s+".onmessagedelivered");a=b!=null?b:"null";this.$11.debugTrace("onMessageDelivered","Delivered Message {ID: "+a+"}");if(b==null)return;a=this.$16.get(b);if(a==null)return;this.$16["delete"](b);a.resolve()};c.$23=function(a){this.$16.forEach(function(b,c,d){b.reject(new Error(a))}),this.$16.clear()};c.$41=function(a){var b=this,c=new Set(a);c.forEach(function(a){b.$15.has(a)||b.unsubscribe(a)});a=new Set(this.$15);a.forEach(function(a){c.has(a)||b.subscribe(a)})};c.$38=function(a,b){try{this.$11.bumpCounter("js_error_in_init");this.$11.bumpCounter(b+".error");var c=a?a.message:"error";this.$11.debugTrace("onError",b+": "+c);this.$2(a)}catch(a){this.$11.bumpCounter("js_error_in_error_logging"),this.$11.logError(a,"JS error while trying to log previous error")}};return a}();e.exports=a}),null);
__d("MqttChannel",["Promise","requireDeferred","ChannelClientID","IrisSubscribeChecker","MqttAnalyticsHook","MqttConnection","MqttEnv","MqttPublishTimeoutConfig","MqttUserName","MqttUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttEnv").Env,h=b("MqttEnv").MqttGkNames,i=b("MqttPublishTimeoutConfig").mqttPublishTimeoutMs||60*1e3;a=function(){__p&&__p();function a(a){__p&&__p();var c=this,d=a.endpoint,e=a.pollingEndpoint,f=a.userFbid,h=a.appId,i=a.initialSubscribedTopics,j=a.capabilities,k=a.clientCapabilities;a=a.chatVisibility;a=a===void 0?!0:a;this.$9=g.getLoggerInstance();this.$9.setAppId(h);this.$10=new(b("MqttUserName"))(f,j,k,b("ChannelClientID").getID(),h,a);this.$1=d;this.$2=e;this.$5="Disconnected";this.$6="LPInactive";this.$3=[];this.$4=new Set();this.$7=new Map();this.$8=new(b("MqttConnection"))();this.$15=new(b("MqttAnalyticsHook"))();this.$8.addHook(this.$15);this.$8.addHook(new(b("IrisSubscribeChecker"))(function(){return c.$4.size>0}));this.$11=!1;this.$14=new Map();this.$13=[];this.$16(i);this.$17()}var c=a.prototype;c.$16=function(a){__p&&__p();var c=this;if(this.$8.isRunning()){this.$18("run","Connection started calling run again");return}if(g.genGk(h.mqtt_ws_polling_enabled))if(g.genGk(h.mqtt_ws_forced_polling_only)){this.$18("MqttChannel","Websocket disabled, will do long polling only");return}else if(!b("MqttUtils").hasWSSupport()){this.$18("MqttChannel","Websocket Unavailable, will do long polling only");this.$9.bumpCounter("ws_unavailable_polling");return}this.$8.run({onStateChange:function(a){c.$19(a)},onJSError:function(a){c.$20(a)},onMessageReceived:function(a,b){c.$21(a,b)},endpoint:this.$1,mqttUserName:this.$10,subscribedTopics:a,extraConnectMessageProvider:function(){return c.$22()}})};c.shutdown=function(){this.$8&&this.$8.shutdown()};c.publish=function(a,b,c){c===void 0&&(c={qos:1,skipBuffer:!1});if(c.qos===0)return this.$23(a,b);else return this.$24(a,b,c)};c.$23=function(a,b){return this.$8.publish(a,b,0)};c.$24=function(a,c,d){var e={resolve:function(){},reject:function(a){}},f=new(b("Promise"))(function(a,b){e.resolve=a,e.reject=b}),h=g.random();a={topic:a,payload:c,options:d,ack:e,publishToken:h,timeoutId:null};d.skipBuffer?this.$8.connectionState()==="Connecting"?this.$13.push(a):this.$25(a):(a.timeoutId=this.$26(h),this.$14.set(h,a),this.$27(a));return f};c.$25=function(a){b("MqttUtils").promiseDone(this.$8.publish(a.topic,a.payload,a.options.qos),function(){a.ack.resolve()},function(b){a.ack.reject(b)})};c.$27=function(a){var c=this;b("MqttUtils").promiseDone(this.$8.publish(a.topic,a.payload,a.options.qos),function(){return c.$28(a)},function(a){})};c.subscribe=function(a,b){this.$8.subscribe(a);var c=this.$7.get(a);!c?(c=[b],this.$7.set(a,c)):c.push(b)};c.subscribeChannelEvents=function(a){this.$3.push(a)};c.registerExtraConnectPayloadProvider=function(a){var b=this;this.$4.add(a);if(this.$8.isRunning()){a=a.getPublishMessages();a.forEach(function(a){b.publish(a.topic,a.payload,{qos:a.qos,skipBuffer:!0})})}};c.unregisterExtraConnectPayloadProvider=function(a){this.$4["delete"](a)};c.unsubscribe=function(a){this.$8.unsubscribe(a),this.$7["delete"](a)};c.getConnectionState=function(){return this.$5};c.getLongPollingStatus=function(){return this.$6};c.getEndpoint=function(){return this.$1};c.addHook=function(a){this.$8.addHook(a)};c.removeHook=function(a){this.$8.removeHook(a)};c.testOnlyMessageReceived=function(a,b){this.$21(a,b)};c.$29=function(a){var b=this.$14.get(a);b!=null&&b.timeoutId!=null&&g.clearTimeout(b.timeoutId);this.$14["delete"](a)};c.$26=function(a){__p&&__p();var b=this;a=g.setTimeout(function(a){var c=b.$14.get(a);if(!c)return;var d=c.topic;b.$9.bumpCounter("publish_timeout."+d);b.$9.debugTrace("publish_timeout","Timeout publishing topic: "+d+" publishToken: "+a);b.$29(a);c.ack.reject(new Error("Publish Timed Out"))},i,a);return a};c.$28=function(a){var b=a.publishToken,c=this.$14.get(b);if(!c)return;this.$29(b);a.ack.resolve();this.$9.debugTrace("publish_success","Topic: "+a.topic+" publishToken: "+a.publishToken);this.$9.bumpCounter("publish_success."+a.topic)};c.$21=function(a,b){__p&&__p();var c=this.$7.get(a);if(!c)this.$9.debugTrace("_onMessageReceived",a+" being dropped, no listeners");else for(var a=c,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;try{e(b)}catch(a){this.$9.logError(a,"Listener exception"),this.$9.bumpCounter("listener_error")}}};c.$20=function(a){if(g.genGk(h.mqtt_ws_polling_enabled)){a.isRecoverable?this.$9.bumpCounter("recoverable_error_skipped"):this.$9.bumpCounter("unrecoverable_error_skipped");return}a.isRecoverable?this.$9.bumpCounter("recoverable_error_not_skipped"):this.$9.bumpCounter("unrecoverable_error_not_skipped");a.isRecoverable||(this.$11=!0);this.$30(a)};c.$31=function(a){this.$30(a)};c.$30=function(a){__p&&__p();for(var b=this.$3,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.onJSError&&e.onJSError(a)}};c.$19=function(a){var b=this;a==="Connecting"?(this.$13.forEach(function(a){a.ack.reject(new Error("Client Reconnecting"))}),this.$13=[]):a==="TransportConnected"&&(this.$13.forEach(function(a){b.$25(a)}),this.$13=[],this.$14.forEach(function(a,c,d){b.$27(a)}));this.$5=this.$32(a);this.$18("_changeState","Connection state = "+a);this.$33()};c.$32=function(a){switch(a){case"Connecting":case"TransportConnected":return"Connecting";case"Connected":return"Connected";case"Disconnected":return"Disconnected"}throw new Error("Unknown state "+a)};c.$34=function(a){this.$6=a,this.$18("_changeLPStatus","LP status = "+a),this.$33()};c.$33=function(){__p&&__p();for(var a=this.$3,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.onMQTTStateChanged(this.$5)}};c.$22=function(){var a=this,b=[];this.$4.forEach(function(c){try{c=c.getPublishMessages();Array.prototype.push.apply(b,c)}catch(b){a.$9.logError(b,"ConnectPayload provider exception"),a.$9.bumpCounter("connectPayloadProvider_error")}});return b};c.$17=function(){__p&&__p();var a=this;g.genGk(h.mqtt_ws_polling_enabled)&&this.$2&&this.$2!=""&&b("requireDeferred")("MqttLongPollingRunner").onReady(function(b){__p&&__p();b=new b(a.$2,a.$10,a.$11,function(b,c){return a.$21(b,c)},function(){return Array.from(a.$7.keys())},function(){return a.$22()},function(b){a.$31(b)},function(b){a.$34(b)});b.start();a.$8.addHook(b);b.addHook(a.$15);a.$12=b;a.$9.debugTrace("MqttChannel","longPollingRunner loaded")})};c.$18=function(a,b){this.$9.debugTrace(a,"Mqtt channel: "+b)};c.setForegroundState=function(a){this.$10&&this.$10.setForegroundState(a)};c.setChatVisibility=function(a){this.$10&&this.$10.setChatVisibility(a)};return a}();e.exports=a}),null);
__d("MqttEnvInitializer",["CurrentUser","JSScheduler","MqttEnv","MqttLogger","Random","clearTimeout","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MqttEnv").MqttGkNames,h=b("MqttEnv").Env,i={genGk:function(a){__p&&__p();switch(a){case g.mqtt_ep_with_sid:return b("gkx")("919652");case g.mqtt_waterfall_log_client_sampling:return b("gkx")("832242");case g.messenger_uses_mqtt_rollout:return b("gkx")("678651");case g.mqtt_ws_polling_enabled:return b("gkx")("865725");case g.mqtt_ws_forced_polling_only:return b("gkx")("865724");case g.mqtt_ws_comet_client:return b("gkx")("919316");case g.mqtt_send_unload_event:return b("gkx")("901339");case g.mqtt_ws_reconnect_reset:return b("gkx")("807517");case g.mqtt_lp_use_fetch:return b("gkx")("945829");case g.mqtt_ws_comet_client_rollout:return b("gkx")("1003190");default:b("MqttLogger").getInstance().logError(new Error("unknown gk"),"Unknown GK value "+a);return!1}},useJSScheduler:function(a){return b("gkx")("987139")?a:null},initialize:function(){h.initialize(b("Random").random,b("CurrentUser").isLoggedInNow,b("clearTimeout"),b("setTimeoutAcrossTransitions"),function(){return b("MqttLogger").getInstance()},i.genGk,null,i.useJSScheduler(b("JSScheduler").scheduleNormalPriCallback),i.useJSScheduler(b("JSScheduler").scheduleLoggingPriCallback))}};e.exports=i}),null);
__d("FBMqttChannel",["MqttChannel","MqttEnvInitializer","MqttWebConfig"],(function(a,b,c,d,e,f){"use strict";b("MqttEnvInitializer").initialize(),e.exports=new(b("MqttChannel"))({endpoint:b("MqttWebConfig").endpoint,pollingEndpoint:b("MqttWebConfig").pollingEndpoint,userFbid:b("MqttWebConfig").fbid,appId:b("MqttWebConfig").appID,initialSubscribedTopics:b("MqttWebConfig").subscribedTopics,capabilities:b("MqttWebConfig").capabilities,clientCapabilities:b("MqttWebConfig").clientCapabilities,chatVisibility:b("MqttWebConfig").chatVisibility})}),null);