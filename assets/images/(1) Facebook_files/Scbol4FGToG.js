if (self.CavalryLogger) { CavalryLogger.start_js(["+CcND"]); }

__d("CallbackManagerController",["ErrorUtils"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=[],this.$2=[void 0],this.$3=a}var c=a.prototype;c.executeOrEnqueue=function(a,b,c){c=c||{};var d=this.$4(b,a,c);if(d)return 0;this.$2.push({fn:b,request:a,options:c});d=this.$2.length-1;this.$1.push(d);return d};c.unsubscribe=function(a){delete this.$2[a]};c.reset=function(){this.$2=[]};c.getRequest=function(a){return this.$2[a]};c.runPossibleCallbacks=function(a){__p&&__p();var b=this,c=this.$1;this.$1=[];var d=[];c.forEach(function(c){var e=b.$2[c];if(!e)return;e=b.$3(e.request,babelHelpers["extends"]({},e.options,a));e?d.push({args:e,id:c}):b.$1.push(c)});d.forEach(function(a){var c=a.args;a=a.id;var d=b.$2[a];if(!d)return;delete b.$2[a];b.$5(d.fn,c,d.request)})};c.$4=function(a,b,c){c=this.$3(b,c);c&&this.$5(a,c,b);return!!c};c.$5=function(a,c,d){d={ids:d};b("ErrorUtils").applyWithGuard(a,d,c)};return a}();e.exports=a}),null);
__d("KeyedCallbackManager",["CallbackManagerController","ErrorUtils"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1={},this.$2=new(b("CallbackManagerController"))(this.$3.bind(this))}var c=a.prototype;c.executeOrEnqueue=function(a,c){__p&&__p();if(!(a instanceof Array)){var d=a,e=c;a=[a];c=function(a){e(a[d])}}a=a.filter(function(a){var c=a!==null&&a!==void 0;c||b("ErrorUtils").applyWithGuard(function(){throw new Error("KeyedCallbackManager.executeOrEnqueue: key "+JSON.stringify(a)+" is invalid")});return c});return this.$2.executeOrEnqueue(a,c)};c.unsubscribe=function(a){this.$2.unsubscribe(a)};c.reset=function(){this.$2.reset(),this.$1={}};c.getUnavailableResources=function(a){var b=this;a=this.$2.getRequest(a);var c=[];a&&(c=a.request.filter(function(a){return!b.$1[a]}));return c};c.getUnavailableResourcesFromRequest=function(a){a=Array.isArray(a)?a:[a];return a.filter(function(a){if(a!==null&&a!==void 0)return!this.$1[a]},this)};c.addResourcesAndExecute=function(a){Object.assign(this.$1,a),this.$2.runPossibleCallbacks()};c.setResource=function(a,b){this.$1[a]=b,this.$2.runPossibleCallbacks()};c.getResource=function(a){return this.$1[a]};c.getAllResources=function(){return this.$1};c.dumpResources=function(){var a={};for(var b in this.$1){var c=this.$1[b];typeof c==="object"&&(c=babelHelpers["extends"]({},c));a[b]=c}return a};c.$3=function(a){var b={};for(var c=0;c<a.length;c++){var d=a[c],e=this.$1[d];if(typeof e==="undefined")return!1;b[d]=e}return[b]};return a}();e.exports=a}),null);
__d("BaseAsyncLoader",["KeyedCallbackManager","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g={};function h(a,c,d){__p&&__p();var e=new(b("KeyedCallbackManager"))(),f=!1,g=[];function h(){if(!g.length||f)return;f=!0;b("setTimeoutAcrossTransitions")(j,0)}function i(a){f=!1,a.forEach(e.unsubscribe.bind(e)),h()}function j(){__p&&__p();var b={},c=[];g=g.filter(function(a){var d=e.getUnavailableResources(a);if(d.length){d.forEach(function(a){b[a]=!0});c.push(a);return!0}return!1});var h=Object.keys(b);h.length?d(a,h,c,k.bind(null,c),l.bind(null,c)):f=!1}function k(a,b){b=b.payload[c]||b.payload;e.addResourcesAndExecute(b);i(a)}function l(a){i(a)}return{get:function(a,b){a=e.executeOrEnqueue(a,b);b=e.getUnavailableResources(a);b.length&&(g.push(a),h())},getCachedKeys:function(){return Object.keys(e.getAllResources())},getNow:function(a){return e.getResource(a)||null},set:function(a){e.addResourcesAndExecute(a)}}}function a(a,b){throw new Error("BaseAsyncLoader can't be instantiated")}Object.assign(a.prototype,{_getLoader:function(){g[this._endpoint]||(g[this._endpoint]=h(this._endpoint,this._type,this.send));return g[this._endpoint]},get:function(a,b){return this._getLoader().get(a,b)},getCachedKeys:function(){return this._getLoader().getCachedKeys()},getNow:function(a){return this._getLoader().getNow(a)},reset:function(){g[this._endpoint]=null},set:function(a){this._getLoader().set(a)}});e.exports=a}),null);
__d("AjaxLoader",["AsyncRequest","BaseAsyncLoader","LogHistory"],(function(a,b,c,d,e,f){__p&&__p();var g=b("LogHistory").getInstance("ajax_loader");function a(a,b){this._endpoint=a,this._type=b}Object.assign(a.prototype,b("BaseAsyncLoader").prototype);a.prototype.send=function(a,c,d,e,f){new(b("AsyncRequest"))().setURI(a).setData({ids:c}).setMethod("POST").setReadOnly(!0).setAllowCrossPageTransition(!0).setHandler(function(a){e(a)}).setTimeoutHandler(10*1e3,function(a){f(),g.error("fetch_timeout","{}")}).setErrorHandler(function(a){f(),g.error("fetch_error",JSON.stringify({error_type:a.errorSummary,error_text:a.errorDescription}))}).send()};e.exports=a}),null);
__d("PresenceStatusActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({AVAILABILITY_CHANGED:null})}),null);
__d("JSLogger",["lowerFacebookDomain"],(function(a,b,c,d,e,f){__p&&__p();var g={MAX_HISTORY:500,counts:{},categories:{},seq:0,pageId:(Math.random()*2147483648|0).toString(36),forwarding:!1};function h(a){if(a=="/"||a.indexOf("/",1)<0)return!1;var b=/^\/(v\d+\.\d\d?|head)\//.test(a);return b?/^\/(dialog|plugins)\//.test(a.substring(a.indexOf("/",1))):/^\/(dialog|plugins)\//.test(a)}function i(b){b instanceof Error&&a.ErrorUtils&&(b=a.ErrorUtils.normalizeError(b));try{return JSON.stringify(b)}catch(a){return"{}"}}function j(a,b,c){g.counts[a]||(g.counts[a]={}),g.counts[a][b]||(g.counts[a][b]=0),c=c==null?1:Number(c),g.counts[a][b]+=isFinite(c)?c:0}g.logAction=function(a,b,c){__p&&__p();if(this.type=="bump")j(this.cat,a,b);else if(this.type=="rate")b&&j(this.cat,a+"_n",c),j(this.cat,a+"_d",c);else{c={cat:this.cat,type:this.type,event:a,data:b!=null?i(b):null,date:Date.now(),seq:g.seq++};g.head=g.head?g.head.next=c:g.tail=c;while(g.head.seq-g.tail.seq>g.MAX_HISTORY)g.tail=g.tail.next;return c}};function c(c){__p&&__p();if(!g.categories[c]){g.categories[c]={};var d=function(d){__p&&__p();var e={cat:c,type:d};g.categories[c][d]=function(){__p&&__p();g.forwarding=!1;var c=null;if(b("lowerFacebookDomain").isValidDocumentDomain())return;c=g.logAction;if(h(location.pathname))g.forwarding=!1;else try{c=a.top.require("JSLogger")._.logAction,g.forwarding=c!==g.logAction}catch(a){}c&&c.apply(e,arguments)}};d("debug");d("log");d("warn");d("error");d("bump");d("rate")}return g.categories[c]}function d(a,b){var c=[];for(var b=b||g.tail;b;b=b.next)if(!a||a(b)){var d={type:b.type,cat:b.cat,date:b.date,event:b.event,seq:b.seq};b.data&&(d.data=JSON.parse(b.data));c.push(d)}return c}e.exports={_:g,DUMP_EVENT:"jslogger/dump",create:c,getEntries:d}}),null);
__d("MercuryParticipantTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({USER:"user",THREAD:"thread",EVENT:"event",PAGE:"page",FRIEND:"friend",FB4C:"fb4c",NON_FRIEND:"non_friend",SERVICE:"service",GUEST:"guest",PARENT_APPROVED_USER:"parent_approved_user",MESSAGE:"message",ASSISTANT_TYPEAHEAD:"assistant_typeahead"})}),null);
__d("XChatUserInfoAllAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/user_info_all/",{viewer:{type:"Int",required:!0}})}),null);
__d("ShortProfilesBootstrapper",["Promise","AsyncRequest","BanzaiODS","CurrentUser","JSLogger","XChatUserInfoAllAsyncController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=5,h=1e4,i=b("XChatUserInfoAllAsyncController").getURIBuilder().setInt("viewer",b("CurrentUser").getID()).getURI(),j=b("JSLogger").create("short_profiles");a=function(){__p&&__p();function a(a){__p&&__p();var c=this;this.$1=a;this.$2=new(b("Promise"))(function(a,b){c.$3=a,c.$4=b});this.$5=!1;this.$6=null;this.$7=0;this.$8=0;this.$9=0;this.$10=!1;this.$11=!1}var c=a.prototype;c.fetchAll=function(){__p&&__p();var a=this;this.$12();if(this.$5||this.$6)return this.$2;if(this.$7>=g){this.$13();return this.$2}this.$7++;this.$14();this.$6=new(b("AsyncRequest"))(i).setHandler(function(b){a.$6=null,a.$5=!0,a.$15(),a.$1(b.payload),a.$3()}).setErrorHandler(function(){a.$6=null,a.$8++,a.$16()}).setTimeoutHandler(h,function(){a.$6=null,a.$9++,a.$17(),a.fetchAll()}).setAllowCrossPageTransition(!0);this.$6.send();return this.$2};c.isBootstrapped=function(){return this.$5};c.isBootstrapping=function(){return!!this.$6};c.getAttemptCount=function(){return this.$7};c.getErrorCount=function(){return this.$8};c.getTimeoutCount=function(){return this.$9};c.$12=function(){this.$10||(j.log("bootstrap_start"),b("BanzaiODS").bumpEntityKey(2966,"chat.web","typeahead.bootstrap.starts"),this.$10=!0)};c.$14=function(){j.log("bootstrap_attempt"),b("BanzaiODS").bumpEntityKey(2966,"chat.web","typeahead.bootstrap.attempts")};c.$15=function(){j.log("bootstrap_success"),b("BanzaiODS").bumpEntityKey(2966,"chat.web","typeahead.bootstrap.successes"),this.$7>1&&b("BanzaiODS").bumpEntityKey(2966,"chat.web","typeahead.bootstrap.successes_after_retries")};c.$16=function(){j.log("bootstrap_error"),b("BanzaiODS").bumpEntityKey(2966,"chat.web","typeahead.bootstrap.errors")};c.$17=function(){j.log("bootstrap_timeout"),b("BanzaiODS").bumpEntityKey(2966,"chat.web","typeahead.bootstrap.timeouts")};c.$13=function(){this.$11||(j.log("bootstrap_giveup"),b("BanzaiODS").bumpEntityKey(2966,"chat.web","typeahead.bootstrap.giveups"),this.$11=!0,this.$4())};return a}();e.exports=a}),null);
__d("XChatUserInfoAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/chat/user_info/",{ids:{type:"IntVector",defaultValue:[]}})}),null);
__d("ShortProfiles",["AjaxLoader","Arbiter","CurrentUser","JSLogger","MercuryParticipantTypes","ShortProfilesBootstrapper","URI","XChatUserInfoAsyncController","emptyFunction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=new(b("AjaxLoader"))(b("XChatUserInfoAsyncController").getURIBuilder().getURI().toString(),"profiles"),i={get:function(a,b){this.getMulti([a],function(c){return b(c[a],a)})},getMulti:function(a,c){h.get(a,c||b("emptyFunction"))},getNow:function(a){return h.getNow(a)||null},getMultiNow:function(a){var b={};a.forEach(function(a){return b[a]=i.getNow(a)});return b},getCachedProfileIDs:function(){return h.getCachedKeys()},hasAll:function(){return!!g&&g.isBootstrapped()},fetchAll:function(){g||(g=new(b("ShortProfilesBootstrapper"))(function(a){h.set(a)}));return g.fetchAll()},set:function(a,b){var c={};c[a]=b;this.setMulti(c)},setMulti:function(a){__p&&__p();if(b("CurrentUser").isWorkUser()){var c={};Object.keys(a).forEach(function(d){var e=a[d];(e.type!==b("MercuryParticipantTypes").FB4C||!e.uri)&&(c[d]=e);var f=new(b("URI"))(e.uri).setDomain("").setProtocol("").toString();c[d]=babelHelpers["extends"]({},e,{uri:f})});a=c}h.set(a)}};b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,c){a=i.getCachedProfileIDs();var d=b("JSLogger").getEntries(function(a){return a.cat=="short_profiles"||a.cat=="chat_typeahead"});c.chat_typeahead={bootstrapped:g&&g.isBootstrapped(),bootstrapping:g&&g.isBootstrapping(),bootstrap_attempts:g&&g.getAttemptCount(),bootstrap_errors:g&&g.getErrorCount(),bootstrap_timeouts:g&&g.getTimeoutCount(),entries:a,entry_count:a.length,history:d}});e.exports=i}),null);
__d("ChatDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!1})}),null);
__d("ChatPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:ChatPerfLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:ChatPerfLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ChatPerfLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setDuration=function(a){this.$1.duration=a;return this};c.setEndpoint=function(a){this.$1.endpoint=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setTabsOpen=function(a){this.$1.tabs_open=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={duration:!0,endpoint:!0,event:!0,tabs_open:!0,time:!0,weight:!0};e.exports=a}),null);
__d("DeviceBasedLoginWWWQP",["CSS","Event","tidyEvent"],(function(a,b,c,d,e,f){"use strict";a={swapWithShadowMessageOnClick:function(a,c,d){b("tidyEvent")(b("Event").listen(a,"click",function(a){b("CSS").hide(c),b("CSS").show(d)}))}};e.exports=a}),null);
__d("ChatPerfEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ASYNC_REQUEST:"async_request",SIDEBAR_FROM_CLIENT_TTI:"sidebar_from_client_tti",SIDEBAR_FROM_SERVER_TTI:"sidebar_from_server_tti",SIDEBAR_DISPLAY_DONE:"sidebar_display_done",TTI:"tti",CHAT_CONVERSATION_TTI:"chat_conversation_tti",CHAT_INIT_STORES:"chat_init_stores",CHAT_INIT_DATA:"chat_init_data",CHAT_INIT_UI:"chat_init_ui",CHAT_INIT_SOUND:"chat_init_sound",CHAT_DISPLAY_DONE:"chat_display_done"})}),null);
__d("FantaConst",[],(function(a,b,c,d,e,f){"use strict";var g={DEFAULT_ALLOWED_RAISED_TABS:2,DEFAULT_MESSAGE_COUNT:10,cookieIDs:{PERSONAL_COOKIE_ID:"t3",PERSONAL_FOCUS_COOKIE_ID:"lm3",PERSONAL_TIME_COOKIE_ID:"utc3",WORK_COOKIE_ID:"t3w",WORK_FOCUS_COOKIE_ID:"lm3w",WORK_TIME_COOKIE_ID:"utc3w"},getCookieIDs:function(){return[g.cookieIDs.PERSONAL_COOKIE_ID,g.cookieIDs.PERSONAL_FOCUS_COOKIE_ID,g.cookieIDs.PERSONAL_TIME_COOKIE_ID,g.cookieIDs.WORK_COOKIE_ID,g.cookieIDs.WORK_FOCUS_COOKIE_ID,g.cookieIDs.WORK_TIME_COOKIE_ID]}};e.exports=g}),null);
__d("Dcode",[],(function(a,b,c,d,e,f){__p&&__p();var g,h={},i={_:"%",A:"%2",B:"000",C:"%7d",D:"%7b%22",E:"%2c%22",F:"%22%3a",G:"%2c%22ut%22%3a1",H:"%2c%22bls%22%3a",I:"%2c%22n%22%3a%22%",J:"%22%3a%7b%22i%22%3a0%7d",K:"%2c%22pt%22%3a0%2c%22vis%22%3a",L:"%2c%22ch%22%3a%7b%22h%22%3a%22",M:"%7b%22v%22%3a2%2c%22time%22%3a1",N:".channel%22%2c%22sub%22%3a%5b",O:"%2c%22sb%22%3a1%2c%22t%22%3a%5b",P:"%2c%22ud%22%3a100%2c%22lc%22%3a0",Q:"%5d%2c%22f%22%3anull%2c%22uct%22%3a",R:".channel%22%2c%22sub%22%3a%5b1%5d",S:"%22%2c%22m%22%3a0%7d%2c%7b%22i%22%3a",T:"%2c%22blc%22%3a1%2c%22snd%22%3a1%2c%22ct%22%3a",U:"%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a",V:"%2c%22blc%22%3a0%2c%22snd%22%3a0%2c%22ct%22%3a",W:"%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a",X:"%2c%22ri%22%3a0%7d%2c%22state%22%3a%7b%22p%22%3a0%2c%22ut%22%3a1",Y:"%2c%22pt%22%3a0%2c%22vis%22%3a1%2c%22bls%22%3a0%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a",Z:"%2c%22sb%22%3a1%2c%22t%22%3a%5b%5d%2c%22f%22%3anull%2c%22uct%22%3a0%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a"};(function(){var a=[];for(var b in i)h[i[b]]=b,a.push(i[b]);a.reverse();g=new RegExp(a.join("|"),"g")})();a={encode:function(a){return encodeURIComponent(a).replace(/([_A-Z])|%../g,function(a,b){return b?"%"+b.charCodeAt(0).toString(16):a}).toLowerCase().replace(g,function(a){return h[a]})},decode:function(a){return decodeURIComponent(a.replace(/[_A-Z]/g,function(a){return i[a]}))}};e.exports=a}),null);
__d("PresenceCookieManager",["Cookie","CurrentUser","Dcode","ErrorUtils","JSLogger","PresenceInitialData","PresenceUtil","WebStorage"],(function(a,b,c,d,e,f){__p&&__p();var g=b("PresenceInitialData").cookieVersion,h="presence",i={},j=null,k=null,l=b("JSLogger").create("presence_cookie");function m(a){var c=b("Cookie").get(h)||"";if(c.length===0)return null;return c[0]!==a?null:c.substring(1)}function n(a,c){b("Cookie").set(h,a+c)}function o(){return!(b("PresenceInitialData").useWebStorage||!1)?null:b("WebStorage").getSessionStorage()}function p(){var a=o();a=a!=null?a.getItem(h):null;return a!=null?a.substring(1):null}function q(a){var b=o();if(b==null)return!1;b.setItem(h,"E"+a);return!0}function r(){var a=p();return a!=null?a:m("E")}function s(a){__p&&__p();a=a.state;if(a==null)return"";var c=m("S")||"",d=b("CurrentUser").isWorkUser()?"w":"f";a=b("CurrentUser").isWorkUser()?a.t3w:a.t3;a=a!=null?a.length>0:!1;var e=c.indexOf(d)!==-1;e&&!a&&(c=c.replace(d,""));!e&&a&&(c+=d);return c}function t(a,b){var c=q(a);c?n("S",b):(a.length>1024&&l.warn("big_cookie",a.length),n("E",a))}function u(){__p&&__p();try{var a=r();j!==a&&(j=a,k=null,a&&(a=b("Dcode").decode(a),k=JSON.parse(a)));if(k){if(k.user&&k.user!==b("CurrentUser").getID())return null;return k.v!==g?null:k}}catch(a){l.warn("getcookie_error",a)}return null}function v(){return{v:g,time:w(),user:b("CurrentUser").getID()}}function w(){return parseInt(Date.now()/1e3,10)}function x(a){var c=b("Dcode").encode(JSON.stringify(a));b("PresenceUtil").hasUserCookie()&&t(c,s(a))}var y={register:function(a,b){i[a]=b},store:function(){__p&&__p();var a=u();if(a&&a.v&&g<a.v){l.debug("stale_cookie",g);return}var c=v();for(var d in i)c[d]=b("ErrorUtils").applyWithGuard(i[d],i,[a&&a[d]],function(a){a.presence_subcookie=d});x(c)},clear:function(){var a=y.getSubCookie("state");b("Cookie").clear(h);var c=b("WebStorage").getSessionStorage();c!=null&&c.removeItem(h);if(a){c=v();c.state=a;x(c)}},getSubCookie:function(a){var b=u();return!b?null:b[a]}};e.exports=y}),null);
__d("PresenceState",["Arbiter","ErrorUtils","FantaConst","JSLogger","PresenceCookieManager","PresenceInitialData","debounceAcrossTransitions","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PresenceInitialData").cookiePollInterval||2e3,h=b("PresenceInitialData").shouldSuppress||!1,i=[],j=[],k=null,l=null,m=0,n=null,o=0,p=["sb2","tr","tw","at","wml"].concat(b("FantaConst").getCookieIDs()),q=b("JSLogger").create("presence_state");function r(){return b("PresenceCookieManager").getSubCookie("state")}function s(){m=Date.now(),b("PresenceCookieManager").store(),w(l)}var t=b("debounceAcrossTransitions")(s,0);function u(a){(a==void 0||isNaN(a)||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)&&(a=0);return a}function v(a){var c={};a&&(p.forEach(function(b){a&&a[b]&&(c[b]=a[b])}),m<a.ut&&q.error("new_cookie",{cookie_time:a.ut,local_time:m}));c.ut=m;for(var d=0,e=i.length;d<e;d++)b("ErrorUtils").applyWithGuard(i[d],null,[c]);l=c;return l}function w(a){o++;m=u(a&&a.ut);k||(k=b("setIntervalAcrossTransitions")(z,g));l=a;n===null&&(n=a);for(var c=0,d=j.length;c<d;c++)b("ErrorUtils").applyWithGuard(j[c],null,[a]);o--}function x(a){if(a&&a.ut)if(m<a.ut)return!0;else a.ut<m&&q.error("old_cookie",{cookie_time:a.ut,local_time:m});return!1}function y(){var a=r();x(a)&&(l=a);return l}function z(){var a=r();x(a)&&w(a)}b("PresenceCookieManager").register("state",v);b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.presence_state={initial:babelHelpers["extends"]({},n),state:babelHelpers["extends"]({},l),update_time:m,sync_paused:o,poll_time:g}});(function(){var a=y();if(a)w(a);else{q.debug("no_cookie_initial");w(v());return}})();a={doSync:function(a){if(o)return;a?s():t()},registerStateStorer:function(a){i.push(a)},registerStateLoader:function(a){j.push(a)},get:function(){return y()},getInitial:function(){return n},shouldSuppress:function(){return h},verifyNumber:u};e.exports=a}),null);
__d("ChatPerfInstrumentation",["Promise","BaseEventEmitter","ChatPerfEvent","ChatPerfTypedLogger","CurrentUser","FantaConst","PresenceState","emptyFunction","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("CurrentUser").isWorkUser();c=a?b("FantaConst").cookieIDs.WORK_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_COOKIE_ID;d=b("PresenceState").getInitial();var g=d&&d[c]?d[c].length:0,h;f={_startTime:Number,_sidebarStartTime:Number,init:function(){this._startTime=b("performanceAbsoluteNow")();return new(b("Promise"))(function(a){return a()})},initDivebar:function(){this._sidebarStartTime=b("performanceAbsoluteNow")()},_log:function(a,c){c=b("performanceAbsoluteNow")()-(c||this._startTime);h&&h.emit(a,c);var d=new(b("ChatPerfTypedLogger"))();d.setEvent(a).setDuration(c);d.setTabsOpen(g);d.log()},addPerfTimingsListener:function(a,c){h||(h=new(b("BaseEventEmitter"))());return h.once(a,c)},logInitStores:function(){this.logInitStores=b("emptyFunction"),this._log(b("ChatPerfEvent").CHAT_INIT_STORES)},logInitData:function(){this.logInitData=b("emptyFunction"),this._log(b("ChatPerfEvent").CHAT_INIT_DATA)},logInitUI:function(){this.logInitUI=b("emptyFunction"),this._log(b("ChatPerfEvent").CHAT_INIT_UI)},logInitSound:function(){this.logInitSound=b("emptyFunction"),this._log(b("ChatPerfEvent").CHAT_INIT_SOUND)},logDisplayDone:function(){this.logDisplayDone=b("emptyFunction"),this._log(b("ChatPerfEvent").CHAT_DISPLAY_DONE)},logTTI:function(){this.logTTI=b("emptyFunction"),this._log(b("ChatPerfEvent").TTI)},logCHAT_CONVERSATION_TTI:function(){this.logCHAT_CONVERSATION_TTI=b("emptyFunction"),this._log(b("ChatPerfEvent").CHAT_CONVERSATION_TTI)},logSIDEBAR_FROM_CLIENT_TTI:function(){this.logSIDEBAR_FROM_CLIENT_TTI=b("emptyFunction"),this._log(b("ChatPerfEvent").SIDEBAR_FROM_CLIENT_TTI,this._sidebarStartTime)},logSIDEBAR_DISPLAY_DONE:function(){this.logSIDEBAR_DISPLAY_DONE=b("emptyFunction"),this._log(b("ChatPerfEvent").SIDEBAR_DISPLAY_DONE,this._sidebarStartTime)}};e.exports=f}),null);
__d("WorkForeignEntityInfo.bs",["CurrentUser","WorkForeignEntityType"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a==null)return!0;else return a.type===b("WorkForeignEntityType").NOT_FOREIGN}function h(a){if(b("CurrentUser").isWorkUser())return g(a.work_foreign_entity_info);else return!1}function a(a){if(b("CurrentUser").isWorkUser())return g(a.workForeignEntityInfo);else return!1}function c(a){if(b("CurrentUser").isWorkUser())return a.every(function(a,b,c){if(a==null)return!0;else return h(a)});else return!1}f.isNotForeign=g;f.isCoworker=h;f.isContactCoworker=a;f.areAllCoworkers=c}),null);
__d("onAfterLoadSafe",["Run","TimeSlice","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";a=function(a){return b("TimeSlice").guard(function(){return b("Run").onAfterLoad(function(){b("requestIdleCallback")(a)})},"delayed after load",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};e.exports=a}),null);
__d("WebMessengerThreadPermalinks",["MercuryIDs","MessagingTag","MessengerURIConstants","URI","WWWBase","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={getThreadURI:function(a,c,d){var e="";b("MercuryIDs").isCanonical(a)?e=b("MercuryIDs").tokenize(a).value:b("requireWeak")("MercuryThreadIDMap",function(b){e=b.get().getServerIDFromClientIDNow(a)});d=g.getThreadURIFromServerID(e||"",d);c&&c(d)},getThreadURIFromServerID:function(a,c){__p&&__p();var d=new(b("URI"))(b("WWWBase").uri),e=b("MessengerURIConstants").FACEBOOK_PREFIX;if(c)switch(c){case b("MessagingTag").OTHER:e+="/filtered";break;case b("MessagingTag").PENDING:e+="/requests";break;case b("MessagingTag").INBOX:break;default:e+="/"+c;break}d.setPath(e+b("MessengerURIConstants").THREAD_PREFIX+a);return d.toString()},getThreadURIFromUserID:function(a,c){var d=new(b("URI"))(b("WWWBase").uri),e=b("MessengerURIConstants").FACEBOOK_PREFIX;d.setPath(h(e,c)+"/t/"+a);return d.toString()}};function h(a,c){c&&c!=b("MessagingTag").INBOX&&(a+="/"+c);return a}e.exports=g}),null);
__d("TypingStates",[],(function(a,b,c,d,e,f){a=Object.freeze({INACTIVE:0,TYPING:1,QUITTING:2});e.exports=a}),null);
__d("onAfterDisplay",["NavigationMetrics","TimeSlice","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";var g=[],h=!1;function a(a){a=b("TimeSlice").guard(a,"onAfterDisplay invocation",{propagationType:b("TimeSlice").PropagationType.ORPHAN});h?b("requestIdleCallback")(a):g.push(a)}b("NavigationMetrics").addRetroactiveListener(b("NavigationMetrics").Events.EVENT_OCCURRED,function(a,c){["all_pagelets_displayed","e2e"].indexOf(c.event)>-1&&!h&&(h=!0,g.forEach(function(a){b("requestIdleCallback")(a)}))});e.exports=a}),null);